<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Bithash | Institutional Mining Dashboard</title>
    <meta name="description" content="Bithash enterprise-grade dashboard for institutional Bitcoin mining with real-time monitoring, compliance tools, and daily payouts.">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rowdies:wght@300;400;700&family=Inter:wght@300;400;500;600;700&family=Manrope:wght@500;600;700&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" href="https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1" type="image/png">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- AOS Animation -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    
    <!-- Google Identity Services -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --primary-light: #93c5fd;
            --secondary: #10b981;
            --secondary-dark: #059669;
            --dark: #1e293b;
            --darker: #0f172a;
            --light: #f8fafc;
            --lighter: #ffffff;
            --gray: #64748b;
            --gray-light: #e2e8f0;
            --gray-lighter: #f1f5f9;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --gold: #D4AF37;
            --gold-light: #FFD700;
            --gold-dark: #996515;
            --border-radius: 8px;
            --border-radius-lg: 12px;
            --box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.02);
            --box-shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.08), 0 4px 6px -2px rgba(0, 0, 0, 0.03);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html {
            scroll-behavior: smooth;
            overflow-x: hidden;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            color: var(--dark);
            background-color: var(--light);
            line-height: 1.6;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            position: relative;
        }
        
        /* Loading animation */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--light);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }
        
        .loading-overlay.hidden {
            opacity: 0;
            visibility: hidden;
        }
        
        .loading-logo {
            width: 80px;
            height: 80px;
            animation: pulse 1.5s infinite ease-in-out;
        }
        
        .loading-text {
            margin-top: 20px;
            font-weight: 500;
            color: var(--gray);
            font-size: 1rem;
        }
        
        @keyframes pulse {
            0% { transform: scale(0.95); opacity: 0.8; }
            50% { transform: scale(1.05); opacity: 1; }
            100% { transform: scale(0.95); opacity: 0.8; }
        }
        
        .container {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            position: relative;
        }
        
        /* Typography */
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Manrope', sans-serif;
            font-weight: 700;
            line-height: 1.2;
            color: var(--darker);
        }
        
        p {
            margin-bottom: 1rem;
            color: var(--gray);
        }
        
        a {
            color: var(--primary);
            text-decoration: none;
            transition: var(--transition);
        }
        
        a:hover {
            color: var(--primary-dark);
        }
        
        /* Header Styles */
        header {
            background-color: var(--lighter);
            box-shadow: var(--box-shadow);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            padding: 15px 0;
            transition: var(--transition-slow);
            border-bottom: 1px solid rgba(212, 175, 55, 0.2);
        }
        
        header.scrolled {
            padding: 10px 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }
        
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo img {
            height: 40px;
            width: auto;
            transition: var(--transition);
        }
        
        .logo-text {
            font-family: 'Rowdies', sans-serif;
            font-weight: 700;
            font-size: 1.5rem;
            color: var(--gold);
            transition: var(--transition);
        }
        
        /* Mobile Menu Toggle */
        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            color: var(--dark);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 5px;
            z-index: 1001;
        }
        
        nav {
            transition: var(--transition-slow);
        }
        
        nav ul {
            display: flex;
            list-style: none;
            gap: 25px;
        }
        
        nav a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            transition: var(--transition);
            position: relative;
            font-size: 0.95rem;
            padding: 5px 0;
        }
        
        nav a:hover {
            color: var(--gold);
        }
        
        nav a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background-color: var(--gold);
            transition: var(--transition);
        }
        
        nav a:hover::after {
            width: 100%;
        }
        
        .btn {
            padding: 10px 20px;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            font-size: 0.9rem;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            white-space: nowrap;
        }
        
        .btn-primary {
            background-color: var(--gold);
            color: var(--darker);
        }
        
        .btn-primary:hover {
            background-color: var(--gold-dark);
            transform: translateY(-2px);
            box-shadow: var(--box-shadow-lg);
            color: white;
        }
        
        .btn-outline {
            background-color: transparent;
            color: var(--gold);
            border: 1px solid var(--gold);
        }
        
        .btn-outline:hover {
            background-color: var(--gold);
            color: var(--darker);
            transform: translateY(-2px);
            box-shadow: var(--box-shadow-lg);
        }
        
        /* Dashboard Layout */
        .dashboard-container {
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: 30px;
            padding: 120px 0 40px;
            min-height: 100vh;
        }
        
        /* Sidebar */
        .dashboard-sidebar {
            background-color: white;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--box-shadow);
            padding: 30px 20px;
            height: calc(100vh - 160px);
            position: sticky;
            top: 120px;
            overflow-y: auto;
        }
        
        .user-profile {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--gray-light);
        }
        
        .user-avatar {
            position: relative;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            overflow: hidden;
            margin-bottom: 15px;
            border: 3px solid var(--gold);
        }
        
        .user-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .avatar-upload {
            position: absolute;
            bottom: 0;
            right: 0;
            background-color: var(--gold);
            color: var(--darker);
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        .avatar-upload input {
            display: none;
        }
        
        .user-name {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 5px;
            text-align: center;
        }
        
        .user-email {
            font-size: 0.85rem;
            color: var(--gray);
            text-align: center;
            margin-bottom: 15px;
        }
        
        .verification-badge {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            background-color: var(--success);
            color: white;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        .verification-badge.unverified {
            background-color: var(--warning);
        }
        
        .sidebar-menu {
            list-style: none;
        }
        
        .sidebar-menu li {
            margin-bottom: 5px;
        }
        
        .sidebar-menu a {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 15px;
            border-radius: var(--border-radius);
            color: var(--dark);
            font-weight: 500;
            transition: var(--transition);
        }
        
        .sidebar-menu a:hover, .sidebar-menu a.active {
            background-color: var(--gold);
            color: var(--darker);
        }
        
        .sidebar-menu a i {
            width: 20px;
            text-align: center;
        }
        
        /* Main Content */
        .dashboard-content {
            background-color: white;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--box-shadow);
            padding: 30px;
        }
        
        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--gray-light);
        }
        
        .dashboard-title {
            font-size: 1.8rem;
            color: var(--darker);
        }
        
        .dashboard-actions {
            display: flex;
            gap: 15px;
        }
        
        /* Balance Cards */
        .balance-cards {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .balance-card {
            background: linear-gradient(135deg, #f9fafb 0%, #f0f4f8 100%);
            border-radius: var(--border-radius-lg);
            padding: 25px;
            box-shadow: var(--box-shadow);
            border-left: 4px solid var(--gold);
        }
        
        .balance-card h3 {
            font-size: 1rem;
            color: var(--gray);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .balance-amount {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--darker);
            margin-bottom: 5px;
        }
        
        .balance-amount span {
            font-size: 1.2rem;
        }
        
        .balance-equivalent {
            font-size: 0.9rem;
            color: var(--gray);
        }
        
        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--box-shadow);
            border-top: 3px solid var(--gold);
        }
        
        .stat-card h4 {
            font-size: 0.9rem;
            color: var(--gray);
            margin-bottom: 10px;
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--darker);
            margin-bottom: 5px;
        }
        
        .stat-change {
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .stat-change.positive {
            color: var(--success);
        }
        
        .stat-change.negative {
            color: var(--error);
        }
        
        /* Charts Section */
        .charts-section {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .chart-container {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--box-shadow);
        }
        
        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .chart-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--darker);
        }
        
        .chart-actions {
            display: flex;
            gap: 10px;
        }
        
        .chart-period-selector {
            display: flex;
            gap: 5px;
            background-color: var(--gray-lighter);
            border-radius: var(--border-radius);
            padding: 5px;
        }
        
        .chart-period {
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.8rem;
            cursor: pointer;
        }
        
        .chart-period.active {
            background-color: var(--gold);
            color: var(--darker);
        }
        
        .chart-wrapper {
            position: relative;
            height: 300px;
        }
        
        /* Mining Status */
        .mining-status {
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        
        .mining-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .mining-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--darker);
        }
        
        .mining-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .mining-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: var(--success);
            animation: pulse 1.5s infinite;
        }
        
        .mining-text {
            font-size: 0.9rem;
            color: var(--gray);
        }
        
        .mining-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .mining-stat {
            background-color: var(--gray-lighter);
            border-radius: var(--border-radius);
            padding: 15px;
        }
        
        .mining-stat-label {
            font-size: 0.8rem;
            color: var(--gray);
            margin-bottom: 5px;
        }
        
        .mining-stat-value {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--darker);
        }
        
        .mining-progress {
            margin-top: auto;
        }
        
        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        
        .progress-label span {
            font-size: 0.85rem;
            color: var(--gray);
        }
        
        .progress-bar {
            height: 8px;
            background-color: var(--gray-lighter);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--gold), var(--gold-light));
            border-radius: 4px;
            width: 0;
            transition: width 1s ease;
        }
        
        /* Investment Plans */
        .plans-section {
            margin-bottom: 30px;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .section-title {
            font-size: 1.3rem;
            color: var(--darker);
        }
        
        .plans-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }
        
        .plan-card {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 25px;
            border-top: 4px solid var(--gold);
            transition: var(--transition);
        }
        
        .plan-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--box-shadow-lg);
        }
        
        .plan-name {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--darker);
            margin-bottom: 10px;
        }
        
        .plan-return {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--gold);
            margin-bottom: 15px;
        }
        
        .plan-duration {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--gray);
            font-size: 0.9rem;
            margin-bottom: 15px;
        }
        
        .plan-features {
            margin-bottom: 20px;
        }
        
        .plan-feature {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
            font-size: 0.9rem;
            color: var(--gray);
        }
        
        .plan-feature i {
            color: var(--gold);
        }
        
        .plan-min-max {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            font-size: 0.9rem;
        }
        
        .plan-min, .plan-max {
            display: flex;
            flex-direction: column;
        }
        
        .plan-min span:first-child, .plan-max span:first-child {
            color: var(--gray);
            font-size: 0.8rem;
        }
        
        .plan-action {
            width: 100%;
        }
        
        /* Transactions Table */
        .transactions-section {
            margin-bottom: 30px;
        }
        
        .transactions-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .transactions-table thead th {
            text-align: left;
            padding: 12px 15px;
            background-color: var(--gray-lighter);
            color: var(--gray);
            font-size: 0.85rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .transactions-table tbody tr {
            border-bottom: 1px solid var(--gray-light);
        }
        
        .transactions-table tbody tr:last-child {
            border-bottom: none;
        }
        
        .transactions-table td {
            padding: 15px;
            font-size: 0.9rem;
        }
        
        .transaction-type {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .transaction-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: var(--gray-lighter);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--gold);
        }
        
        .transaction-amount {
            font-weight: 600;
            color: var(--darker);
        }
        
        .transaction-btc {
            font-size: 0.8rem;
            color: var(--gray);
        }
        
        .transaction-status {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        .status-completed {
            background-color: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }
        
        .status-pending {
            background-color: rgba(245, 158, 11, 0.1);
            color: var(--warning);
        }
        
        .status-failed {
            background-color: rgba(239, 68, 68, 0.1);
            color: var(--error);
        }
        
        .table-actions {
            display: flex;
            justify-content: flex-end;
            margin-top: 20px;
        }
        
        /* Savings & Loans */
        .savings-loans-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .savings-card, .loans-card {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 25px;
        }
        
        .savings-header, .loans-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .savings-title, .loans-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--darker);
        }
        
        .savings-amount, .loan-limit {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--darker);
            margin-bottom: 10px;
        }
        
        .savings-equivalent, .loan-equivalent {
            font-size: 0.9rem;
            color: var(--gray);
            margin-bottom: 20px;
        }
        
        .savings-form, .loan-form {
            display: grid;
            gap: 15px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
        }
        
        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--gray-light);
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: var(--transition);
            background-color: var(--gray-lighter);
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--gold);
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.2);
            background-color: white;
        }
        
        /* Modals */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1002;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }
        
        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal {
            background-color: white;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--box-shadow-lg);
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            transform: translateY(20px);
            transition: var(--transition);
        }
        
        .modal-overlay.active .modal {
            transform: translateY(0);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid var(--gray-light);
        }
        
        .modal-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--darker);
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--gray);
            cursor: pointer;
            padding: 5px;
        }
        
        .modal-body {
            padding: 20px;
        }
        
        .modal-footer {
            padding: 20px;
            border-top: 1px solid var(--gray-light);
            display: flex;
            justify-content: flex-end;
            gap: 15px;
        }
        
        .payment-methods {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .payment-method {
            border: 1px solid var(--gray-light);
            border-radius: var(--border-radius);
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .payment-method:hover {
            border-color: var(--gold);
        }
        
        .payment-method.active {
            border-color: var(--gold);
            background-color: rgba(212, 175, 55, 0.05);
        }
        
        .payment-method i {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--gold);
        }
        
        .payment-method span {
            display: block;
            font-weight: 500;
        }
        
        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 350px;
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow-lg);
            padding: 20px;
            display: flex;
            gap: 15px;
            z-index: 1001;
            opacity: 0;
            transform: translateY(-20px);
            transition: var(--transition);
            border-left: 4px solid var(--error);
        }
        
        .notification.success {
            border-left-color: var(--success);
        }
        
        .notification.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .notification-icon {
            width: 40px;
            height: 40px;
            background-color: var(--error);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            flex-shrink: 0;
            font-size: 1.2rem;
        }
        
        .notification.success .notification-icon {
            background-color: var(--success);
        }
        
        .notification-content h4 {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--darker);
        }
        
        .notification-content p {
            font-size: 0.9rem;
            color: var(--gray);
            margin-bottom: 0;
        }
        
        .notification-close {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            color: var(--gray);
            cursor: pointer;
            font-size: 1rem;
        }
        
        /* Footer */
        footer {
            background-color: var(--darker);
            color: white;
            padding: 40px 0 20px;
        }
        
        .footer-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .footer-logo {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .footer-logo img {
            height: 30px;
            width: auto;
        }
        
        .footer-logo-text {
            font-family: 'Rowdies', sans-serif;
            font-weight: 700;
            font-size: 1.2rem;
            color: white;
        }
        
        .footer-about p {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
            margin-bottom: 20px;
        }
        
        .footer-social {
            display: flex;
            gap: 12px;
        }
        
        .social-icon {
            width: 38px;
            height: 38px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            color: white;
        }
        
        .social-icon.twitter { background-color: #1DA1F2; }
        .social-icon.linkedin { background-color: #0077B5; }
        .social-icon.facebook { background-color: #4267B2; }
        .social-icon.instagram { 
            background: linear-gradient(45deg, #405DE6, #5851DB, #833AB4, #C13584, #E1306C, #FD1D1D);
        }
        
        .social-icon:hover {
            transform: translateY(-3px);
            box-shadow: var(--box-shadow);
        }
        
        .footer-title {
            font-weight: 700;
            margin-bottom: 20px;
            font-size: 1.1rem;
        }
        
        .footer-links ul {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 10px;
        }
        
        .footer-links a {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            transition: var(--transition);
            font-size: 0.9rem;
        }
        
        .footer-links a:hover {
            color: var(--gold);
            padding-left: 5px;
        }
        
        .footer-contact p {
            display: flex;
            align-items: center;
            gap: 10px;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 15px;
            font-size: 0.9rem;
        }
        
        .footer-contact i {
            color: var(--gold);
            width: 20px;
            text-align: center;
        }
        
        .footer-bottom {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-top: 20px;
            text-align: center;
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.8rem;
        }
        
        /* Responsive Styles */
        @media (max-width: 1200px) {
            .dashboard-container {
                grid-template-columns: 240px 1fr;
            }
            
            .balance-cards {
                grid-template-columns: 1fr 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .charts-section {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 992px) {
            .savings-loans-section {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .mobile-menu-toggle {
                display: block;
            }
            
            nav {
                position: fixed;
                top: 80px;
                left: 0;
                width: 100%;
                background-color: var(--lighter);
                box-shadow: var(--box-shadow);
                padding: 20px;
                transform: translateY(-150%);
                opacity: 0;
            }
            
            nav.active {
                transform: translateY(0);
                opacity: 1;
            }
            
            nav ul {
                flex-direction: column;
                gap: 15px;
            }
            
            .header-container {
                flex-wrap: wrap;
            }
            
            .dashboard-container {
                grid-template-columns: 1fr;
                padding: 100px 0 40px;
            }
            
            .dashboard-sidebar {
                position: static;
                height: auto;
                margin-bottom: 20px;
            }
            
            .balance-cards {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .plans-grid {
                grid-template-columns: 1fr;
            }
            
            .payment-methods {
                grid-template-columns: 1fr;
            }
            
            .footer-container {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 576px) {
            .dashboard-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .dashboard-actions {
                width: 100%;
                flex-direction: column;
            }
            
            .modal {
                width: calc(100% - 40px);
            }
            
            .footer-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <img src="https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1" alt="Bithash Logo" class="loading-logo">
        <div class="loading-text">Loading Secure Dashboard...</div>
    </div>

    <!-- Header -->
    <header id="main-header">
        <div class="container header-container">
            <div class="logo">
                <a href="index.html">
                    <img src="https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1" alt="Bithash Logo">
                    <span class="logo-text">Bithash</span>
                </a>
            </div>
            
            <button class="mobile-menu-toggle" id="mobile-menu-toggle">
                <i class="fas fa-bars"></i>
            </button>
            
            <nav id="main-nav">
                <ul>
                    <li><a href="index.html#home">Home</a></li>
                    <li><a href="index.html#about">About</a></li>
                    <li><a href="index.html#plans">Plans</a></li>
                    <li><a href="index.html#how-it-works">How It Works</a></li>
                    <li><a href="index.html#testimonials">Testimonials</a></li>
                    <li><a href="index.html#contact">Contact</a></li>
                    <li><a href="#" class="btn btn-outline" id="logout-btn">Logout</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Dashboard Main Content -->
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="dashboard-sidebar">
            <div class="user-profile">
                <div class="user-avatar">
                    <img src="https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mp&f=y" alt="User Avatar" id="user-avatar-img">
                    <label class="avatar-upload">
                        <input type="file" id="avatar-upload-input" accept="image/*">
                        <i class="fas fa-camera"></i>
                    </label>
                </div>
                <h3 class="user-name" id="user-name">Loading...</h3>
                <p class="user-email" id="user-email">user@example.com</p>
                <span class="verification-badge" id="verification-badge">
                    <i class="fas fa-check-circle"></i> Verified
                </span>
            </div>
            
            <ul class="sidebar-menu">
                <li><a href="#" class="active" id="dashboard-link"><i class="fas fa-chart-pie"></i> Dashboard</a></li>
                <li><a href="#" id="investments-link"><i class="fas fa-coins"></i> Investments</a></li>
                <li><a href="#" id="transactions-link"><i class="fas fa-exchange-alt"></i> Transactions</a></li>
                <li><a href="#" id="savings-link"><i class="fas fa-piggy-bank"></i> Savings & Loans</a></li>
                <li><a href="#" id="referrals-link"><i class="fas fa-users"></i> Referrals</a></li>
                <li><a href="#" id="security-link"><i class="fas fa-shield-alt"></i> Security</a></li>
                <li><a href="#" id="settings-link"><i class="fas fa-cog"></i> Settings</a></li>
                <li><a href="#" id="support-link"><i class="fas fa-headset"></i> Support</a></li>
            </ul>
        </aside>
        
        <!-- Main Content -->
        <main class="dashboard-content">
            <div class="dashboard-header">
                <h1 class="dashboard-title">Institutional Dashboard</h1>
                <div class="dashboard-actions">
                    <button class="btn btn-primary" id="deposit-btn">
                        <i class="fas fa-plus-circle"></i> Deposit
                    </button>
                    <button class="btn btn-outline" id="withdraw-btn">
                        <i class="fas fa-wallet"></i> Withdraw
                    </button>
                </div>
            </div>
            
            <!-- Balance Cards -->
            <div class="balance-cards">
                <div class="balance-card">
                    <h3><i class="fas fa-wallet"></i> Main Balance</h3>
                    <div class="balance-amount" id="main-balance">$0.00 <span>USD</span></div>
                    <div class="balance-equivalent" id="main-balance-btc">≈ 0.000000 BTC</div>
                </div>
                
                <div class="balance-card">
                    <h3><i class="fas fa-chart-line"></i> Active Investments</h3>
                    <div class="balance-amount" id="active-investments">$0.00 <span>USD</span></div>
                    <div class="balance-equivalent" id="active-investments-btc">≈ 0.000000 BTC</div>
                </div>
                
                <div class="balance-card">
                    <h3><i class="fas fa-check-circle"></i> Matured Amount</h3>
                    <div class="balance-amount" id="matured-amount">$0.00 <span>USD</span></div>
                    <div class="balance-equivalent" id="matured-amount-btc">≈ 0.000000 BTC</div>
                </div>
            </div>
            
            <!-- Stats Grid -->
            <div class="stats-grid">
                <div class="stat-card">
                    <h4>Today's Earnings</h4>
                    <div class="stat-value" id="todays-earnings">$0.00</div>
                    <div class="stat-change positive">
                        <i class="fas fa-arrow-up"></i> <span id="earnings-change">0%</span> from yesterday
                    </div>
                </div>
                
                <div class="stat-card">
                    <h4>Total Earnings</h4>
                    <div class="stat-value" id="total-earnings">$0.00</div>
                    <div class="stat-change positive">
                        <i class="fas fa-arrow-up"></i> <span id="total-earnings-change">0%</span> all time
                    </div>
                </div>
                
                <div class="stat-card">
                    <h4>Referral Earnings</h4>
                    <div class="stat-value" id="referral-earnings">$0.00</div>
                    <div class="stat-change positive">
                        <i class="fas fa-arrow-up"></i> <span id="referral-earnings-change">0%</span> from last month
                    </div>
                </div>
                
                <div class="stat-card">
                    <h4>Mining Power</h4>
                    <div class="stat-value" id="mining-power">0 TH/s</div>
                    <div class="stat-change positive">
                        <i class="fas fa-arrow-up"></i> <span id="mining-power-change">0%</span> active
                    </div>
                </div>
            </div>
            
            <!-- Charts Section -->
            <div class="charts-section">
                <div class="chart-container">
                    <div class="chart-header">
                        <h3 class="chart-title">Earnings Overview</h3>
                        <div class="chart-period-selector">
                            <span class="chart-period active" data-period="7d">7D</span>
                            <span class="chart-period" data-period="30d">30D</span>
                            <span class="chart-period" data-period="90d">90D</span>
                            <span class="chart-period" data-period="1y">1Y</span>
                        </div>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="earnings-chart"></canvas>
                    </div>
                </div>
                
                <div class="chart-container mining-status">
                    <div class="mining-header">
                        <h3 class="mining-title">Mining Status</h3>
                        <div class="mining-indicator">
                            <span class="mining-dot"></span>
                            <span class="mining-text">Active</span>
                        </div>
                    </div>
                    
                    <div class="mining-stats">
                        <div class="mining-stat">
                            <div class="mining-stat-label">Hash Rate</div>
                            <div class="mining-stat-value" id="hash-rate">0 TH/s</div>
                        </div>
                        
                        <div class="mining-stat">
                            <div class="mining-stat-label">Mining Uptime</div>
                            <div class="mining-stat-value" id="mining-uptime">0%</div>
                        </div>
                        
                        <div class="mining-stat">
                            <div class="mining-stat-label">BTC Mined</div>
                            <div class="mining-stat-value" id="btc-mined">0.000000</div>
                        </div>
                        
                        <div class="mining-stat">
                            <div class="mining-stat-label">Next Payout</div>
                            <div class="mining-stat-value" id="next-payout">00:00:00</div>
                        </div>
                    </div>
                    
                    <div class="mining-progress">
                        <div class="progress-label">
                            <span>Current Mining Cycle</span>
                            <span id="mining-cycle-progress-text">0%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="mining-cycle-progress"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Investment Plans -->
            <div class="plans-section">
                <div class="section-header">
                    <h2 class="section-title">Investment Plans</h2>
                    <a href="#" class="btn btn-outline">View All Plans</a>
                </div>
                
                <div class="plans-grid" id="plans-grid">
                    <!-- Plans will be loaded dynamically from backend -->
                </div>
            </div>
            
            <!-- Recent Transactions -->
            <div class="transactions-section">
                <div class="section-header">
                    <h2 class="section-title">Recent Transactions</h2>
                    <a href="#" class="btn btn-outline">View All</a>
                </div>
                
                <div class="table-responsive">
                    <table class="transactions-table">
                        <thead>
                            <tr>
                                <th>Type</th>
                                <th>Amount</th>
                                <th>Date</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="transactions-body">
                            <!-- Transactions will be loaded dynamically from backend -->
                        </tbody>
                    </table>
                </div>
                
                <div class="table-actions">
                    <button class="btn btn-outline">Export CSV</button>
                </div>
            </div>
            
            <!-- Savings & Loans -->
            <div class="savings-loans-section">
                <div class="savings-card">
                    <div class="savings-header">
                        <h2 class="savings-title">BTC Savings</h2>
                        <i class="fas fa-piggy-bank" style="color: var(--gold); font-size: 1.5rem;"></i>
                    </div>
                    
                    <div class="savings-amount" id="savings-amount">$0.00</div>
                    <div class="savings-equivalent" id="savings-equivalent">≈ 0.000000 BTC</div>
                    
                    <div class="savings-form">
                        <div class="form-group">
                            <label for="savings-amount-input" class="form-label">Amount to Save (USD)</label>
                            <input type="number" id="savings-amount-input" class="form-control" placeholder="Enter amount">
                        </div>
                        
                        <button class="btn btn-primary" id="save-btn">Save BTC</button>
                    </div>
                </div>
                
                <div class="loans-card">
                    <div class="loans-header">
                        <h2 class="loans-title">BTC-Backed Loans</h2>
                        <i class="fas fa-hand-holding-usd" style="color: var(--gold); font-size: 1.5rem;"></i>
                    </div>
                    
                    <div class="loan-limit" id="loan-limit">$0.00</div>
                    <div class="loan-equivalent" id="loan-equivalent">Loan limit based on your savings</div>
                    
                    <div class="loan-form">
                        <div class="form-group">
                            <label for="loan-amount-input" class="form-label">Loan Amount (USD)</label>
                            <input type="number" id="loan-amount-input" class="form-control" placeholder="Enter amount">
                        </div>
                        
                        <button class="btn btn-outline" id="request-loan-btn">Request Loan</button>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- Deposit Modal -->
    <div class="modal-overlay" id="deposit-modal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Deposit Funds</h3>
                <button class="modal-close" id="deposit-modal-close">&times;</button>
            </div>
            
            <div class="modal-body">
                <div class="form-group">
                    <label for="deposit-amount" class="form-label">Amount (USD)</label>
                    <input type="number" id="deposit-amount" class="form-control" placeholder="Enter amount to deposit">
                </div>
                
                <h4 style="margin: 20px 0 15px;">Payment Method</h4>
                
                <div class="payment-methods">
                    <div class="payment-method active" data-method="btc">
                        <i class="fab fa-bitcoin"></i>
                        <span>Bitcoin (BTC)</span>
                    </div>
                    
                    <div class="payment-method" data-method="card">
                        <i class="far fa-credit-card"></i>
                        <span>Credit/Debit Card</span>
                    </div>
                </div>
                
                <div id="btc-deposit-details" style="margin-top: 20px;">
                    <div class="form-group">
                        <label class="form-label">Send BTC to this address:</label>
                        <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                            <input type="text" id="btc-deposit-address" class="form-control" value="3FZbgi29cpjq2GjdwV8eyHuJJnkLtktZc5" readonly>
                            <button class="btn btn-outline" id="copy-btc-address">
                                <i class="far fa-copy"></i> Copy
                            </button>
                        </div>
                        <p style="font-size: 0.8rem; color: var(--gray);">
                            Send only BTC to this address. Sending other assets may result in permanent loss.
                        </p>
                    </div>
                    
                    <div style="text-align: center; margin: 20px 0;">
                        <div id="btc-qr-code" style="width: 180px; height: 180px; margin: 0 auto; background-color: #f5f5f5; display: flex; align-items: center; justify-content: center;">
                            <i class="fas fa-qrcode" style="font-size: 2rem; color: #ccc;"></i>
                        </div>
                    </div>
                </div>
                
                <div id="card-deposit-details" style="margin-top: 20px; display: none;">
                    <div class="form-group">
                        <label for="card-number" class="form-label">Card Number</label>
                        <input type="text" id="card-number" class="form-control" placeholder="1234 5678 9012 3456">
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div class="form-group">
                            <label for="card-expiry" class="form-label">Expiry Date</label>
                            <input type="text" id="card-expiry" class="form-control" placeholder="MM/YY">
                        </div>
                        
                        <div class="form-group">
                            <label for="card-cvv" class="form-label">CVV</label>
                            <input type="text" id="card-cvv" class="form-control" placeholder="123">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="card-name" class="form-label">Name on Card</label>
                        <input type="text" id="card-name" class="form-control" placeholder="John Doe">
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancel-deposit-btn">Cancel</button>
                <button class="btn btn-primary" id="confirm-deposit-btn">Confirm Deposit</button>
            </div>
        </div>
    </div>
    
    <!-- Withdrawal Modal -->
    <div class="modal-overlay" id="withdraw-modal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Withdraw Funds</h3>
                <button class="modal-close" id="withdraw-modal-close">&times;</button>
            </div>
            
            <div class="modal-body">
                <div class="form-group">
                    <label for="withdraw-amount" class="form-label">Amount (USD)</label>
                    <input type="number" id="withdraw-amount" class="form-control" placeholder="Enter amount to withdraw">
                    <p style="font-size: 0.8rem; color: var(--gray); margin-top: 5px;">
                        Available: <span id="available-withdraw">$0.00</span>
                    </p>
                </div>
                
                <div class="form-group">
                    <label for="withdraw-method" class="form-label">Withdrawal Method</label>
                    <select id="withdraw-method" class="form-control">
                        <option value="">Select withdrawal method</option>
                        <option value="btc">Bitcoin (BTC)</option>
                        <option value="bank">Bank Transfer</option>
                    </select>
                </div>
                
                <div id="btc-withdraw-details" style="margin-top: 20px; display: none;">
                    <div class="form-group">
                        <label for="btc-withdraw-address" class="form-label">BTC Wallet Address</label>
                        <input type="text" id="btc-withdraw-address" class="form-control" placeholder="Enter your BTC wallet address">
                    </div>
                </div>
                
                <div id="bank-withdraw-details" style="margin-top: 20px; display: none;">
                    <div class="form-group">
                        <label for="bank-name" class="form-label">Bank Name</label>
                        <input type="text" id="bank-name" class="form-control" placeholder="Enter bank name">
                    </div>
                    
                    <div class="form-group">
                        <label for="account-number" class="form-label">Account Number</label>
                        <input type="text" id="account-number" class="form-control" placeholder="Enter account number">
                    </div>
                    
                    <div class="form-group">
                        <label for="routing-number" class="form-label">Routing Number</label>
                        <input type="text" id="routing-number" class="form-control" placeholder="Enter routing number">
                    </div>
                </div>
                
                <div class="form-group" style="margin-top: 20px;">
                    <label for="withdraw-note" class="form-label">Note (Optional)</label>
                    <textarea id="withdraw-note" class="form-control" rows="3" placeholder="Add any notes about this withdrawal"></textarea>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancel-withdraw-btn">Cancel</button>
                <button class="btn btn-primary" id="confirm-withdraw-btn">Request Withdrawal</button>
            </div>
        </div>
    </div>
    
    <!-- Invest Modal -->
    <div class="modal-overlay" id="invest-modal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Invest in Plan</h3>
                <button class="modal-close" id="invest-modal-close">&times;</button>
            </div>
            
            <div class="modal-body">
                <div class="form-group">
                    <label for="invest-plan-name" class="form-label">Plan</label>
                    <input type="text" id="invest-plan-name" class="form-control" readonly>
                </div>
                
                <div class="form-group">
                    <label for="invest-amount" class="form-label">Amount (USD)</label>
                    <input type="number" id="invest-amount" class="form-control" placeholder="Enter investment amount">
                    <p style="font-size: 0.8rem; color: var(--gray); margin-top: 5px;">
                        Min: <span id="invest-min-amount">$0</span> | Max: <span id="invest-max-amount">$0</span>
                    </p>
                </div>
                
                <div class="form-group">
                    <label for="invest-source" class="form-label">Funding Source</label>
                    <select id="invest-source" class="form-control">
                        <option value="balance">Main Balance</option>
                        <option value="btc">BTC Wallet</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <div class="form-check-group">
                        <input type="checkbox" id="invest-terms" class="form-check-input">
                        <label for="invest-terms" class="form-check-label">
                            I agree to the <a href="terms.html" target="_blank">Terms of Service</a> and <a href="risk.html" target="_blank">Risk Disclosure</a>
                        </label>
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancel-invest-btn">Cancel</button>
                <button class="btn btn-primary" id="confirm-invest-btn">Confirm Investment</button>
            </div>
        </div>
    </div>
    
    <!-- Notification -->
    <div class="notification" id="notification">
        <button class="notification-close" id="notification-close">&times;</button>
        <div class="notification-icon">
            <i class="fas fa-exclamation"></i>
        </div>
        <div class="notification-content">
            <h4 id="notification-title">Error</h4>
            <p id="notification-message">An error occurred while processing your request.</p>
        </div>
    </div>
    
    <!-- Footer -->
    <footer id="contact">
        <div class="container">
            <div class="footer-container">
                <div class="footer-about">
                    <div class="footer-logo">
                        <img src="https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1" alt="Bithash Logo">
                        <span class="footer-logo-text">Bithash</span>
                    </div>
                    <p>Enterprise-grade Bitcoin mining platform serving institutional investors worldwide with transparent, secure operations and daily payouts.</p>
                    <div class="footer-social">
                        <a href="#" class="social-icon twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="social-icon linkedin"><i class="fab fa-linkedin"></i></a>
                        <a href="#" class="social-icon facebook"><i class="fab fa-facebook"></i></a>
                        <a href="#" class="social-icon instagram"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
                
                <div class="footer-links">
                    <h3 class="footer-title">Quick Links</h3>
                    <ul>
                        <li><a href="index.html#home">Home</a></li>
                        <li><a href="index.html#about">About Us</a></li>
                        <li><a href="index.html#plans">Investment Plans</a></li>
                        <li><a href="index.html#how-it-works">How It Works</a></li>
                        <li><a href="faq.html">FAQ</a></li>
                    </ul>
                </div>
                
                <div class="footer-links">
                    <h3 class="footer-title">Legal</h3>
                    <ul>
                        <li><a href="terms.html">Terms of Service</a></li>
                        <li><a href="privacy.html">Privacy Policy</a></li>
                        <li><a href="aml.html">AML Policy</a></li>
                        <li><a href="risk.html">Risk Disclosure</a></li>
                    </ul>
                </div>
                
                <div class="footer-contact">
                    <h3 class="footer-title">Contact Us</h3>
                    <p><i class="fas fa-envelope"></i> support@bithash.com</p>
                    <p><i class="fas fa-phone"></i> +1 (555) 123-4567</p>
                    <p><i class="fas fa-map-marker-alt"></i> 123 Blockchain Ave, Crypto City, CC 10001</p>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; <span id="current-year"></span> Bithash. All Rights Reserved. Bithash LLC is registered in Delaware, USA.</p>
            </div>
        </div>
    </footer>

    <!-- AOS Animation -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
    <!-- QR Code Generator -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>
    
    <script>
        // API Base URL
        const API_BASE_URL = 'https://website-backendd-1.onrender.com';
        const JWT_SECRET = '17581758Na.%';
        const JWT_EXPIRES_IN = '30d';
        
        // Initialize AOS animation
        AOS.init({
            duration: 800,
            once: true,
            easing: 'ease-in-out'
        });
        
        // Current user data
        let currentUser = null;
        let userBalances = {};
        let investmentPlans = [];
        let transactions = [];
        let btcPrice = 0;
        
        // DOM Elements
        const elements = {
            loadingOverlay: document.getElementById('loading-overlay'),
            mainHeader: document.getElementById('main-header'),
            mobileMenuToggle: document.getElementById('mobile-menu-toggle'),
            mainNav: document.getElementById('main-nav'),
            logoutBtn: document.getElementById('logout-btn'),
            userAvatarImg: document.getElementById('user-avatar-img'),
            userName: document.getElementById('user-name'),
            userEmail: document.getElementById('user-email'),
            verificationBadge: document.getElementById('verification-badge'),
            mainBalance: document.getElementById('main-balance'),
            mainBalanceBtc: document.getElementById('main-balance-btc'),
            activeInvestments: document.getElementById('active-investments'),
            activeInvestmentsBtc: document.getElementById('active-investments-btc'),
            maturedAmount: document.getElementById('matured-amount'),
            maturedAmountBtc: document.getElementById('matured-amount-btc'),
            todaysEarnings: document.getElementById('todays-earnings'),
            earningsChange: document.getElementById('earnings-change'),
            totalEarnings: document.getElementById('total-earnings'),
            totalEarningsChange: document.getElementById('total-earnings-change'),
            referralEarnings: document.getElementById('referral-earnings'),
            referralEarningsChange: document.getElementById('referral-earnings-change'),
            miningPower: document.getElementById('mining-power'),
            miningPowerChange: document.getElementById('mining-power-change'),
            hashRate: document.getElementById('hash-rate'),
            miningUptime: document.getElementById('mining-uptime'),
            btcMined: document.getElementById('btc-mined'),
            nextPayout: document.getElementById('next-payout'),
            miningCycleProgress: document.getElementById('mining-cycle-progress'),
            miningCycleProgressText: document.getElementById('mining-cycle-progress-text'),
            savingsAmount: document.getElementById('savings-amount'),
            savingsEquivalent: document.getElementById('savings-equivalent'),
            loanLimit: document.getElementById('loan-limit'),
            loanEquivalent: document.getElementById('loan-equivalent'),
            plansGrid: document.getElementById('plans-grid'),
            transactionsBody: document.getElementById('transactions-body'),
            depositBtn: document.getElementById('deposit-btn'),
            withdrawBtn: document.getElementById('withdraw-btn'),
            saveBtn: document.getElementById('save-btn'),
            requestLoanBtn: document.getElementById('request-loan-btn'),
            depositModal: document.getElementById('deposit-modal'),
            depositModalClose: document.getElementById('deposit-modal-close'),
            depositAmount: document.getElementById('deposit-amount'),
            btcDepositAddress: document.getElementById('btc-deposit-address'),
            copyBtcAddress: document.getElementById('copy-btc-address'),
            btcDepositDetails: document.getElementById('btc-deposit-details'),
            cardDepositDetails: document.getElementById('card-deposit-details'),
            cancelDepositBtn: document.getElementById('cancel-deposit-btn'),
            confirmDepositBtn: document.getElementById('confirm-deposit-btn'),
            withdrawModal: document.getElementById('withdraw-modal'),
            withdrawModalClose: document.getElementById('withdraw-modal-close'),
            withdrawAmount: document.getElementById('withdraw-amount'),
            availableWithdraw: document.getElementById('available-withdraw'),
            withdrawMethod: document.getElementById('withdraw-method'),
            btcWithdrawDetails: document.getElementById('btc-withdraw-details'),
            bankWithdrawDetails: document.getElementById('bank-withdraw-details'),
            btcWithdrawAddress: document.getElementById('btc-withdraw-address'),
            bankName: document.getElementById('bank-name'),
            accountNumber: document.getElementById('account-number'),
            routingNumber: document.getElementById('routing-number'),
            withdrawNote: document.getElementById('withdraw-note'),
            cancelWithdrawBtn: document.getElementById('cancel-withdraw-btn'),
            confirmWithdrawBtn: document.getElementById('confirm-withdraw-btn'),
            investModal: document.getElementById('invest-modal'),
            investModalClose: document.getElementById('invest-modal-close'),
            investPlanName: document.getElementById('invest-plan-name'),
            investAmount: document.getElementById('invest-amount'),
            investMinAmount: document.getElementById('invest-min-amount'),
            investMaxAmount: document.getElementById('invest-max-amount'),
            investSource: document.getElementById('invest-source'),
            investTerms: document.getElementById('invest-terms'),
            cancelInvestBtn: document.getElementById('cancel-invest-btn'),
            confirmInvestBtn: document.getElementById('confirm-invest-btn'),
            notification: document.getElementById('notification'),
            notificationClose: document.getElementById('notification-close'),
            notificationTitle: document.getElementById('notification-title'),
            notificationMessage: document.getElementById('notification-message'),
            avatarUploadInput: document.getElementById('avatar-upload-input'),
            currentYear: document.getElementById('current-year')
        };
        
        // Hide loading overlay when page is loaded
        window.addEventListener('load', function() {
            setTimeout(function() {
                elements.loadingOverlay.classList.add('hidden');
            }, 1000);
        });
        
        // Current year in footer
        elements.currentYear.textContent = new Date().getFullYear();
        
        // Header scroll effect
        window.addEventListener('scroll', function() {
            if (window.scrollY > 50) {
                elements.mainHeader.classList.add('scrolled');
            } else {
                elements.mainHeader.classList.remove('scrolled');
            }
        });
        
        // Mobile menu toggle
        elements.mobileMenuToggle.addEventListener('click', function() {
            elements.mainNav.classList.toggle('active');
            this.innerHTML = elements.mainNav.classList.contains('active') ? 
                '<i class="fas fa-times"></i>' : '<i class="fas fa-bars"></i>';
        });
        
        // Close mobile menu when clicking a link
        document.querySelectorAll('#main-nav a').forEach(link => {
            link.addEventListener('click', () => {
                if (window.innerWidth <= 768) {
                    elements.mainNav.classList.remove('active');
                    elements.mobileMenuToggle.innerHTML = '<i class="fas fa-bars"></i>';
                }
            });
        });
        
        // Check authentication and load user data
        async function checkAuthAndLoadData() {
            const token = localStorage.getItem('jwtToken');
            
            if (!token) {
                window.location.href = 'login.html';
                return;
            }
            
            try {
                // Load user data
                const userResponse = await fetch(`${API_BASE_URL}/api/users/me`, {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });
                
                if (!userResponse.ok) {
                    localStorage.removeItem('jwtToken');
                    window.location.href = 'login.html';
                    return;
                }
                
                currentUser = await userResponse.json();
                updateUserProfile(currentUser);
                
                // Load balances
                await loadBalances();
                
                // Load investment plans
                await loadInvestmentPlans();
                
                // Load transactions
                await loadTransactions();
                
                // Get current BTC price
                await getBtcPrice();
                
                // Initialize charts
                initCharts();
                
                // Start real-time updates
                startRealTimeUpdates();
                
            } catch (error) {
                console.error('Failed to load user data:', error);
                showNotification('Error', 'Failed to load dashboard data. Please try again.');
            }
        }
        
        // Update user profile section
        function updateUserProfile(user) {
            elements.userName.textContent = `${user.firstName} ${user.lastName}`;
            elements.userEmail.textContent = user.email;
            
            if (user.avatar) {
                elements.userAvatarImg.src = user.avatar;
            }
            
            if (user.isVerified) {
                elements.verificationBadge.innerHTML = '<i class="fas fa-check-circle"></i> Verified';
                elements.verificationBadge.classList.remove('unverified');
            } else {
                elements.verificationBadge.innerHTML = '<i class="fas fa-exclamation-circle"></i> Unverified';
                elements.verificationBadge.classList.add('unverified');
            }
        }
        
        // Load user balances
        async function loadBalances() {
            try {
                const response = await fetch(`${API_BASE_URL}/api/users/balances`, {
                    headers: {
                        'Authorization': `Bearer ${localStorage.getItem('jwtToken')}`
                    }
                });
                
                if (!response.ok) {
                    throw new Error('Failed to load balances');
                }
                
                userBalances = await response.json();
                updateBalanceDisplays();
                
            } catch (error) {
                console.error('Failed to load balances:', error);
                showNotification('Error', 'Failed to load balance information.');
            }
        }
        
        // Update balance displays
        function updateBalanceDisplays() {
            // Main balance
            elements.mainBalance.textContent = `$${formatCurrency(userBalances.mainBalance)} <span>USD</span>`;
            elements.mainBalanceBtc.textContent = `≈ ${formatBtc(userBalances.mainBalance / btcPrice)} BTC`;
            
            // Active investments
            elements.activeInvestments.textContent = `$${formatCurrency(userBalances.activeInvestments)} <span>USD</span>`;
            elements.activeInvestmentsBtc.textContent = `≈ ${formatBtc(userBalances.activeInvestments / btcPrice)} BTC`;
            
            // Matured amount
            elements.maturedAmount.textContent = `$${formatCurrency(userBalances.maturedAmount)} <span>USD</span>`;
            elements.maturedAmountBtc.textContent = `≈ ${formatBtc(userBalances.maturedAmount / btcPrice)} BTC`;
            
            // Today's earnings
            elements.todaysEarnings.textContent = `$${formatCurrency(userBalances.todaysEarnings)}`;
            elements.earningsChange.textContent = `${userBalances.earningsChange > 0 ? '+' : ''}${userBalances.earningsChange.toFixed(2)}%`;
            
            // Total earnings
            elements.totalEarnings.textContent = `$${formatCurrency(userBalances.totalEarnings)}`;
            elements.totalEarningsChange.textContent = `${userBalances.totalEarningsChange > 0 ? '+' : ''}${userBalances.totalEarningsChange.toFixed(2)}%`;
            
            // Referral earnings
            elements.referralEarnings.textContent = `$${formatCurrency(userBalances.referralEarnings)}`;
            elements.referralEarningsChange.textContent = `${userBalances.referralEarningsChange > 0 ? '+' : ''}${userBalances.referralEarningsChange.toFixed(2)}%`;
            
            // Mining power
            elements.miningPower.textContent = `${formatHashRate(userBalances.miningPower)}`;
            elements.miningPowerChange.textContent = `${userBalances.miningPowerChange > 0 ? '+' : ''}${userBalances.miningPowerChange.toFixed(2)}%`;
            
            // Mining stats
            elements.hashRate.textContent = `${formatHashRate(userBalances.hashRate)}`;
            elements.miningUptime.textContent = `${userBalances.miningUptime.toFixed(2)}%`;
            elements.btcMined.textContent = `${formatBtc(userBalances.btcMined)}`;
            
            // Next payout timer
            updateNextPayoutTimer();
            
            // Mining cycle progress
            const progressPercentage = (userBalances.miningCycleProgress * 100).toFixed(2);
            elements.miningCycleProgress.style.width = `${progressPercentage}%`;
            elements.miningCycleProgressText.textContent = `${progressPercentage}%`;
            
            // Savings and loans
            elements.savingsAmount.textContent = `$${formatCurrency(userBalances.savingsAmount)}`;
            elements.savingsEquivalent.textContent = `≈ ${formatBtc(userBalances.savingsAmount / btcPrice)} BTC`;
            
            elements.loanLimit.textContent = `$${formatCurrency(userBalances.loanLimit)}`;
            elements.loanEquivalent.textContent = `Loan limit based on your savings (${Math.min(100, Math.floor(userBalances.savingsAmount / 50))}%)`;
            
            // Available for withdrawal
            elements.availableWithdraw.textContent = `$${formatCurrency(userBalances.mainBalance)}`;
        }
        
        // Update next payout timer
        function updateNextPayoutTimer() {
            if (!userBalances.nextPayout) return;
            
            const now = new Date();
            const payoutTime = new Date(userBalances.nextPayout);
            const diff = payoutTime - now;
            
            if (diff <= 0) {
                elements.nextPayout.textContent = 'Processing...';
                return;
            }
            
            const hours = Math.floor(diff / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);
            
            elements.nextPayout.textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        
        // Load investment plans
        async function loadInvestmentPlans() {
            try {
                const response = await fetch(`${API_BASE_URL}/api/investment/plans`, {
                    headers: {
                        'Authorization': `Bearer ${localStorage.getItem('jwtToken')}`
                    }
                });
                
                if (!response.ok) {
                    throw new Error('Failed to load investment plans');
                }
                
                investmentPlans = await response.json();
                renderInvestmentPlans();
                
            } catch (error) {
                console.error('Failed to load investment plans:', error);
                showNotification('Error', 'Failed to load investment plans.');
            }
        }
        
        // Render investment plans
        function renderInvestmentPlans() {
            elements.plansGrid.innerHTML = '';
            
            investmentPlans.forEach(plan => {
                const planCard = document.createElement('div');
                planCard.className = 'plan-card';
                planCard.innerHTML = `
                    <h3 class="plan-name">${plan.name}</h3>
                    <div class="plan-return">${plan.returnPercentage}% Return</div>
                    <div class="plan-duration">
                        <i class="far fa-clock"></i> After ${plan.durationHours} hours
                    </div>
                    <div class="plan-features">
                        <div class="plan-feature">
                            <i class="fas fa-check"></i> Daily compounding
                        </div>
                        <div class="plan-feature">
                            <i class="fas fa-check"></i> ${plan.referralBonus}% referral bonus
                        </div>
                        <div class="plan-feature">
                            <i class="fas fa-check"></i> 24/7 mining
                        </div>
                    </div>
                    <div class="plan-min-max">
                        <div class="plan-min">
                            <span>Min Deposit</span>
                            <span>$${formatCurrency(plan.minDeposit)}</span>
                        </div>
                        <div class="plan-max">
                            <span>Max Deposit</span>
                            <span>$${formatCurrency(plan.maxDeposit)}</span>
                        </div>
                    </div>
                    <button class="btn btn-primary plan-action" data-plan-id="${plan._id}">
                        Invest Now
                    </button>
                `;
                
                elements.plansGrid.appendChild(planCard);
            });
            
            // Add event listeners to invest buttons
            document.querySelectorAll('.plan-action').forEach(button => {
                button.addEventListener('click', function() {
                    const planId = this.getAttribute('data-plan-id');
                    const plan = investmentPlans.find(p => p._id === planId);
                    openInvestModal(plan);
                });
            });
        }
        
        // Load transactions
        async function loadTransactions() {
            try {
                const response = await fetch(`${API_BASE_URL}/api/transactions`, {
                    headers: {
                        'Authorization': `Bearer ${localStorage.getItem('jwtToken')}`
                    }
                });
                
                if (!response.ok) {
                    throw new Error('Failed to load transactions');
                }
                
                transactions = await response.json();
                renderTransactions();
                
            } catch (error) {
                console.error('Failed to load transactions:', error);
                showNotification('Error', 'Failed to load transaction history.');
            }
        }
        
        // Render transactions
        function renderTransactions() {
            elements.transactionsBody.innerHTML = '';
            
            // Show only the last 5 transactions
            const recentTransactions = transactions.slice(0, 5);
            
            recentTransactions.forEach(transaction => {
                const row = document.createElement('tr');
                
                // Determine icon and color based on type
                let icon = '';
                let typeClass = '';
                
                switch(transaction.type) {
                    case 'deposit':
                        icon = 'fa-arrow-down';
                        typeClass = 'text-success';
                        break;
                    case 'withdrawal':
                        icon = 'fa-arrow-up';
                        typeClass = 'text-error';
                        break;
                    case 'investment':
                        icon = 'fa-coins';
                        typeClass = 'text-gold';
                        break;
                    case 'earning':
                        icon = 'fa-hand-holding-usd';
                        typeClass = 'text-success';
                        break;
                    case 'referral':
                        icon = 'fa-user-plus';
                        typeClass = 'text-primary';
                        break;
                    default:
                        icon = 'fa-exchange-alt';
                }
                
                // Determine status badge
                let statusBadge = '';
                switch(transaction.status) {
                    case 'completed':
                        statusBadge = 'status-completed';
                        break;
                    case 'pending':
                        statusBadge = 'status-pending';
                        break;
                    case 'failed':
                        statusBadge = 'status-failed';
                        break;
                }
                
                row.innerHTML = `
                    <td>
                        <div class="transaction-type">
                            <div class="transaction-icon">
                                <i class="fas ${icon}"></i>
                            </div>
                            <span class="${typeClass}">${formatTransactionType(transaction.type)}</span>
                        </div>
                    </td>
                    <td>
                        <div class="transaction-amount">$${formatCurrency(transaction.amount)}</div>
                        <div class="transaction-btc">≈ ${formatBtc(transaction.amount / btcPrice)} BTC</div>
                    </td>
                    <td>${formatDate(transaction.date)}</td>
                    <td><span class="transaction-status ${statusBadge}">${transaction.status.charAt(0).toUpperCase() + transaction.status.slice(1)}</span></td>
                `;
                
                elements.transactionsBody.appendChild(row);
            });
        }
        
        // Get current BTC price
        async function getBtcPrice() {
            try {
                // First try CoinGecko
                const response = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd');
                
                if (response.ok) {
                    const data = await response.json();
                    btcPrice = data.bitcoin.usd;
                } else {
                    // Fallback to our backend
                    const backupResponse = await fetch(`${API_BASE_URL}/api/btc-price`);
                    if (backupResponse.ok) {
                        const backupData = await backupResponse.json();
                        btcPrice = backupData.price;
                    } else {
                        // Final fallback
                        btcPrice = 50000;
                    }
                }
                
                // Update all BTC equivalent displays
                updateBalanceDisplays();
                
            } catch (error) {
                console.error('Failed to fetch BTC price:', error);
                btcPrice = 50000; // Default value if API fails
            }
        }
        
        // Initialize charts
        function initCharts() {
            // Earnings chart
            const earningsCtx = document.getElementById('earnings-chart').getContext('2d');
            const earningsChart = new Chart(earningsCtx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul'],
                    datasets: [{
                        label: 'Daily Earnings (USD)',
                        data: [120, 190, 170, 220, 250, 280, 310],
                        borderColor: 'rgba(212, 175, 55, 1)',
                        backgroundColor: 'rgba(212, 175, 55, 0.1)',
                        borderWidth: 2,
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
            
            // Period selector
            document.querySelectorAll('.chart-period').forEach(period => {
                period.addEventListener('click', function() {
                    document.querySelectorAll('.chart-period').forEach(p => p.classList.remove('active'));
                    this.classList.add('active');
                    
                    // In a real app, we would fetch new data for the selected period
                    // For now, we'll just simulate it with random data
                    const days = parseInt(this.getAttribute('data-period'));
                    const newData = Array.from({length: 7}, () => Math.floor(Math.random() * 300) + 100);
                    
                    earningsChart.data.datasets[0].data = newData;
                    earningsChart.update();
                });
            });
        }
        
        // Start real-time updates
        function startRealTimeUpdates() {
            // Update next payout timer every second
            setInterval(updateNextPayoutTimer, 1000);
            
            // Refresh data every 30 seconds
            setInterval(async () => {
                await loadBalances();
                await loadTransactions();
                await getBtcPrice();
            }, 30000);
            
            // Simulate mining progress updates
            setInterval(() => {
                if (userBalances.miningCycleProgress < 1) {
                    userBalances.miningCycleProgress += 0.01;
                    const progressPercentage = (userBalances.miningCycleProgress * 100).toFixed(2);
                    elements.miningCycleProgress.style.width = `${progressPercentage}%`;
                    elements.miningCycleProgressText.textContent = `${progressPercentage}%`;
                    
                    // Simulate BTC mined increase
                    if (userBalances.activeInvestments > 0) {
                        userBalances.btcMined += (0.000001 * Math.random());
                        elements.btcMined.textContent = formatBtc(userBalances.btcMined);
                    }
                } else {
                    // Cycle completed, reset progress
                    userBalances.miningCycleProgress = 0;
                }
            }, 5000);
        }
        
        // Open invest modal
        function openInvestModal(plan) {
            elements.investPlanName.value = plan.name;
            elements.investMinAmount.textContent = `$${formatCurrency(plan.minDeposit)}`;
            elements.investMaxAmount.textContent = `$${formatCurrency(plan.maxDeposit)}`;
            elements.investAmount.value = plan.minDeposit;
            elements.investAmount.min = plan.minDeposit;
            elements.investAmount.max = plan.maxDeposit;
            elements.investModal.dataset.planId = plan._id;
            
            elements.investModal.classList.add('active');
        }
        
        // Open deposit modal
        function openDepositModal() {
            // Generate a new BTC deposit address for the user
            elements.btcDepositAddress.value = generateBtcAddress();
            
            // Generate QR code
            QRCode.toCanvas(document.getElementById('btc-qr-code'), elements.btcDepositAddress.value, {
                width: 180,
                margin: 0
            }, function(error) {
                if (error) console.error('QR code generation error:', error);
            });
            
            elements.depositModal.classList.add('active');
        }
        
        // Open withdraw modal
        function openWithdrawModal() {
            elements.withdrawAmount.value = '';
            elements.withdrawAmount.max = userBalances.mainBalance;
            elements.withdrawMethod.value = '';
            elements.btcWithdrawDetails.style.display = 'none';
            elements.bankWithdrawDetails.style.display = 'none';
            elements.withdrawNote.value = '';
            
            elements.withdrawModal.classList.add('active');
        }
        
        // Generate a random BTC address (simulated)
        function generateBtcAddress() {
            const chars = '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz';
            let result = '3';
            
            for (let i = 0; i < 33; i++) {
                result += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            
            return result;
        }
        
        // Format currency
        function formatCurrency(amount) {
            return parseFloat(amount).toLocaleString('en-US', {
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            });
        }
        
        // Format BTC amount
        function formatBtc(amount) {
            return parseFloat(amount).toLocaleString('en-US', {
                minimumFractionDigits: 6,
                maximumFractionDigits: 6
            });
        }
        
        // Format hash rate
        function formatHashRate(rate) {
            if (rate >= 1000000) {
                return `${(rate / 1000000).toFixed(2)} PH/s`;
            } else if (rate >= 1000) {
                return `${(rate / 1000).toFixed(2)} TH/s`;
            } else {
                return `${rate.toFixed(2)} GH/s`;
            }
        }
        
        // Format transaction type
        function formatTransactionType(type) {
            const types = {
                'deposit': 'Deposit',
                'withdrawal': 'Withdrawal',
                'investment': 'Investment',
                'earning': 'Mining Earnings',
                'referral': 'Referral Bonus'
            };
            
            return types[type] || type.charAt(0).toUpperCase() + type.slice(1);
        }
        
        // Format date
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', {
                month: 'short',
                day: 'numeric',
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }
        
        // Show notification
        function showNotification(title, message, isSuccess = false) {
            elements.notificationTitle.textContent = title;
            elements.notificationMessage.textContent = message;
            
            if (isSuccess) {
                elements.notification.classList.add('success');
                elements.notification.querySelector('.notification-icon i').className = 'fas fa-check';
            } else {
                elements.notification.classList.remove('success');
                elements.notification.querySelector('.notification-icon i').className = 'fas fa-exclamation';
            }
            
            elements.notification.classList.add('show');
            
            // Auto-hide after 5 seconds
            setTimeout(() => {
                elements.notification.classList.remove('show');
            }, 5000);
        }
        
        // Event Listeners
        elements.logoutBtn.addEventListener('click', function(e) {
            e.preventDefault();
            localStorage.removeItem('jwtToken');
            window.location.href = 'login.html';
        });
        
        elements.depositBtn.addEventListener('click', openDepositModal);
        elements.withdrawBtn.addEventListener('click', openWithdrawModal);
        
        elements.depositModalClose.addEventListener('click', function() {
            elements.depositModal.classList.remove('active');
        });
        
        elements.withdrawModalClose.addEventListener('click', function() {
            elements.withdrawModal.classList.remove('active');
        });
        
        elements.investModalClose.addEventListener('click', function() {
            elements.investModal.classList.remove('active');
        });
        
        elements.cancelDepositBtn.addEventListener('click', function() {
            elements.depositModal.classList.remove('active');
        });
        
        elements.cancelWithdrawBtn.addEventListener('click', function() {
            elements.withdrawModal.classList.remove('active');
        });
        
        elements.cancelInvestBtn.addEventListener('click', function() {
            elements.investModal.classList.remove('active');
        });
        
        elements.notificationClose.addEventListener('click', function() {
            elements.notification.classList.remove('show');
        });
        
        // Payment method selection
        document.querySelectorAll('.payment-method').forEach(method => {
            method.addEventListener('click', function() {
                document.querySelectorAll('.payment-method').forEach(m => m.classList.remove('active'));
                this.classList.add('active');
                
                if (this.dataset.method === 'btc') {
                    elements.btcDepositDetails.style.display = 'block';
                    elements.cardDepositDetails.style.display = 'none';
                } else {
                    elements.btcDepositDetails.style.display = 'none';
                    elements.cardDepositDetails.style.display = 'block';
                }
            });
        });
        
        // Copy BTC address
        elements.copyBtcAddress.addEventListener('click', function() {
            elements.btcDepositAddress.select();
            document.execCommand('copy');
            showNotification('Copied', 'BTC address copied to clipboard', true);
        });
        
        // Withdraw method selection
        elements.withdrawMethod.addEventListener('change', function() {
            if (this.value === 'btc') {
                elements.btcWithdrawDetails.style.display = 'block';
                elements.bankWithdrawDetails.style.display = 'none';
            } else if (this.value === 'bank') {
                elements.btcWithdrawDetails.style.display = 'none';
                elements.bankWithdrawDetails.style.display = 'block';
            } else {
                elements.btcWithdrawDetails.style.display = 'none';
                elements.bankWithdrawDetails.style.display = 'none';
            }
        });
        
        // Confirm deposit
        elements.confirmDepositBtn.addEventListener('click', async function() {
            const amount = parseFloat(elements.depositAmount.value);
            const method = document.querySelector('.payment-method.active').dataset.method;
            
            if (!amount || amount <= 0) {
                showNotification('Error', 'Please enter a valid deposit amount');
                return;
            }
            
            if (method === 'card') {
                // Validate card details
                const cardNumber = elements.cardNumber.value.replace(/\s+/g, '');
                const cardExpiry = elements.cardExpiry.value;
                const cardCvv = elements.cardCvv.value;
                const cardName = elements.cardName.value;
                
                if (!cardNumber || !cardExpiry || !cardCvv || !cardName) {
                    showNotification('Error', 'Please fill in all card details');
                    return;
                }
                
                if (!/^\d{16}$/.test(cardNumber)) {
                    showNotification('Error', 'Please enter a valid 16-digit card number');
                    return;
                }
                
                if (!/^\d{3,4}$/.test(cardCvv)) {
                    showNotification('Error', 'Please enter a valid CVV (3 or 4 digits)');
                    return;
                }
            }
            
            try {
                // Show loading state
                this.disabled = true;
                this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
                
                // Simulate API call
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                if (method === 'btc') {
                    showNotification('Deposit Initiated', `Please send BTC to the provided address. Once confirmed, $${formatCurrency(amount)} will be added to your account.`, true);
                } else {
                    showNotification('Deposit Successful', `$${formatCurrency(amount)} has been added to your account.`, true);
                    
                    // Update balances
                    userBalances.mainBalance += amount;
                    updateBalanceDisplays();
                    
                    // Add to transactions
                    transactions.unshift({
                        type: 'deposit',
                        amount: amount,
                        date: new Date().toISOString(),
                        status: 'completed'
                    });
                    
                    renderTransactions();
                }
                
                elements.depositModal.classList.remove('active');
                
            } catch (error) {
                console.error('Deposit error:', error);
                showNotification('Error', 'Failed to process deposit. Please try again.');
            } finally {
                this.disabled = false;
                this.textContent = 'Confirm Deposit';
            }
        });
        
        // Confirm withdrawal
        elements.confirmWithdrawBtn.addEventListener('click', async function() {
            const amount = parseFloat(elements.withdrawAmount.value);
            const method = elements.withdrawMethod.value;
            const note = elements.withdrawNote.value;
            
            if (!amount || amount <= 0) {
                showNotification('Error', 'Please enter a valid withdrawal amount');
                return;
            }
            
            if (amount > userBalances.mainBalance) {
                showNotification('Error', 'Insufficient balance for this withdrawal');
                return;
            }
            
            if (!method) {
                showNotification('Error', 'Please select a withdrawal method');
                return;
            }
            
            if (method === 'btc' && !elements.btcWithdrawAddress.value) {
                showNotification('Error', 'Please enter a valid BTC wallet address');
                return;
            }
            
            if (method === 'bank' && (!elements.bankName.value || !elements.accountNumber.value || !elements.routingNumber.value)) {
                showNotification('Error', 'Please fill in all bank details');
                return;
            }
            
            try {
                // Show loading state
                this.disabled = true;
                this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
                
                // Simulate API call
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                showNotification('Withdrawal Requested', `Your withdrawal request for $${formatCurrency(amount)} has been submitted. Processing may take 1-3 business days.`, true);
                
                // Update balances
                userBalances.mainBalance -= amount;
                updateBalanceDisplays();
                
                // Add to transactions
                transactions.unshift({
                    type: 'withdrawal',
                    amount: amount,
                    date: new Date().toISOString(),
                    status: 'pending'
                });
                
                renderTransactions();
                
                elements.withdrawModal.classList.remove('active');
                
            } catch (error) {
                console.error('Withdrawal error:', error);
                showNotification('Error', 'Failed to process withdrawal. Please try again.');
            } finally {
                this.disabled = false;
                this.textContent = 'Request Withdrawal';
            }
        });
        
        // Confirm investment
        elements.confirmInvestBtn.addEventListener('click', async function() {
            const planId = elements.investModal.dataset.planId;
            const amount = parseFloat(elements.investAmount.value);
            const source = elements.investSource.value;
            const termsAccepted = elements.investTerms.checked;
            
            if (!planId) {
                showNotification('Error', 'No investment plan selected');
                return;
            }
            
            if (!amount || amount <= 0) {
                showNotification('Error', 'Please enter a valid investment amount');
                return;
            }
            
            const plan = investmentPlans.find(p => p._id === planId);
            
            if (amount < plan.minDeposit) {
                showNotification('Error', `Minimum investment for this plan is $${formatCurrency(plan.minDeposit)}`);
                return;
            }
            
            if (amount > plan.maxDeposit) {
                showNotification('Error', `Maximum investment for this plan is $${formatCurrency(plan.maxDeposit)}`);
                return;
            }
            
            if (source === 'balance' && amount > userBalances.mainBalance) {
                showNotification('Error', 'Insufficient balance for this investment');
                return;
            }
            
            if (!termsAccepted) {
                showNotification('Error', 'You must agree to the Terms of Service and Risk Disclosure');
                return;
            }
            
            try {
                // Show loading state
                this.disabled = true;
                this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
                
                // Simulate API call
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                showNotification('Investment Successful', `You have successfully invested $${formatCurrency(amount)} in the ${plan.name} plan.`, true);
                
                // Update balances
                if (source === 'balance') {
                    userBalances.mainBalance -= amount;
                }
                
                userBalances.activeInvestments += amount;
                updateBalanceDisplays();
                
                // Add to transactions
                transactions.unshift({
                    type: 'investment',
                    amount: amount,
                    date: new Date().toISOString(),
                    status: 'completed'
                });
                
                renderTransactions();
                
                elements.investModal.classList.remove('active');
                
            } catch (error) {
                console.error('Investment error:', error);
                showNotification('Error', 'Failed to process investment. Please try again.');
            } finally {
                this.disabled = false;
                this.textContent = 'Confirm Investment';
            }
        });
        
        // Save BTC
        elements.saveBtn.addEventListener('click', async function() {
            const amount = parseFloat(elements.savingsAmountInput.value);
            
            if (!amount || amount <= 0) {
                showNotification('Error', 'Please enter a valid savings amount');
                return;
            }
            
            if (amount > userBalances.mainBalance) {
                showNotification('Error', 'Insufficient balance for this savings amount');
                return;
            }
            
            try {
                // Show loading state
                this.disabled = true;
                this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
                
                // Simulate API call
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                showNotification('Savings Updated', `$${formatCurrency(amount)} has been added to your BTC savings.`, true);
                
                // Update balances
                userBalances.mainBalance -= amount;
                userBalances.savingsAmount += amount;
                userBalances.loanLimit = userBalances.savingsAmount * 2; // Loan limit is 2x savings
                updateBalanceDisplays();
                
                // Add to transactions
                transactions.unshift({
                    type: 'savings',
                    amount: amount,
                    date: new Date().toISOString(),
                    status: 'completed'
                });
                
                renderTransactions();
                
                // Clear input
                elements.savingsAmountInput.value = '';
                
            } catch (error) {
                console.error('Savings error:', error);
                showNotification('Error', 'Failed to process savings. Please try again.');
            } finally {
                this.disabled = false;
                this.textContent = 'Save BTC';
            }
        });
        
        // Request loan
        elements.requestLoanBtn.addEventListener('click', async function() {
            const amount = parseFloat(elements.loanAmountInput.value);
            
            if (!amount || amount <= 0) {
                showNotification('Error', 'Please enter a valid loan amount');
                return;
            }
            
            if (amount > userBalances.loanLimit) {
                showNotification('Error', 'Loan amount exceeds your available limit');
                return;
            }
            
            if (userBalances.savingsAmount < 5000) {
                showNotification('Error', 'Minimum savings of $5,000 required for loans');
                return;
            }
            
            try {
                // Show loading state
                this.disabled = true;
                this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
                
                // Simulate API call
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                showNotification('Loan Requested', `Your loan request for $${formatCurrency(amount)} has been submitted for review.`, true);
                
                // Add to transactions
                transactions.unshift({
                    type: 'loan',
                    amount: amount,
                    date: new Date().toISOString(),
                    status: 'pending'
                });
                
                renderTransactions();
                
                // Clear input
                elements.loanAmountInput.value = '';
                
            } catch (error) {
                console.error('Loan error:', error);
                showNotification('Error', 'Failed to request loan. Please try again.');
            } finally {
                this.disabled = false;
                this.textContent = 'Request Loan';
            }
        });
        
        // Avatar upload
        elements.avatarUploadInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            if (!file.type.match('image.*')) {
                showNotification('Error', 'Please select an image file');
                return;
            }
            
            if (file.size > 2 * 1024 * 1024) {
                showNotification('Error', 'Image size must be less than 2MB');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(event) {
                elements.userAvatarImg.src = event.target.result;
                
                // In a real app, we would upload the image to the server
                showNotification('Success', 'Profile picture updated', true);
            };
            reader.readAsDataURL(file);
        });
        
        // Initialize the dashboard
        checkAuthAndLoadData();
    </script>
</body>
</html>
