<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Admin Dashboard | BitHash LLC - Institutional Bitcoin Mining</title>
    <meta name="description" content="BitHash LLC Admin Dashboard for managing institutional-grade Bitcoin mining operations">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rowdies:wght@300;400;700&family=Inter:wght@300;400;500;600;700&family=Manrope:wght@500;600;700&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" href="https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1" type="image/png">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- DataTables -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.4.1/css/buttons.bootstrap5.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.5.0/css/responsive.bootstrap5.min.css">
    
    <!-- Select2 -->
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    
    <!-- AOS Animation -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    
    <!-- Toastr -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    
    <style>
        :root {
            --primary: #00D395;
            --primary-dark: #00B783;
            --primary-light: #00E5A1;
            --secondary: #1E1E1E;
            --secondary-dark: #121212;
            --dark: #E5E5E5;
            --darker: #0A0A0A;
            --light: #121212;
            --lighter: #1E1E1E;
            --gray: #8E8E8E;
            --gray-light: #2E2E2E;
            --gray-lighter: #252525;
            --success: #00D395;
            --warning: #FFB800;
            --error: #FF3D57;
            --gold: #D4AF37;
            --gold-light: #FFD700;
            --gold-dark: #996515;
            --blue: #003366;
            --blue-dark: #002244;
            --blue-light: #004488;
            --purple: #784FED;
            --pink: #EC4899;
            --gradient: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            --gold-gradient: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 100%);
            --blue-gradient: linear-gradient(135deg, var(--blue) 0%, var(--blue-dark) 100%);
            --border-radius: 8px;
            --border-radius-lg: 12px;
            --box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --box-shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.2), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            --security-blue: #1A73E8;
            --security-green: #34A853;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--secondary-dark);
            color: var(--dark);
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        .admin-container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar Styles */
        .sidebar {
            width: 280px;
            background-color: var(--secondary);
            color: var(--dark);
            transition: var(--transition);
            position: fixed;
            height: 100vh;
            z-index: 1000;
            box-shadow: var(--box-shadow-lg);
        }

        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid var(--gray-lighter);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .sidebar-logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .sidebar-logo img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
        }

        .sidebar-logo h3 {
            margin: 0;
            font-weight: 700;
            font-family: 'Rowdies', sans-serif;
            color: var(--primary);
        }

        .sidebar-menu {
            padding: 20px 0;
        }

        .menu-title {
            padding: 0 20px 10px;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--gray);
            font-weight: 600;
        }

        .menu-item {
            padding: 12px 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: var(--transition);
            border-left: 3px solid transparent;
        }

        .menu-item:hover {
            background-color: var(--gray-lighter);
        }

        .menu-item.active {
            background-color: var(--gray-lighter);
            border-left: 3px solid var(--primary);
        }

        .menu-item i {
            width: 20px;
            text-align: center;
            font-size: 16px;
        }

        .menu-item span {
            font-weight: 500;
        }

        .menu-item .badge {
            margin-left: auto;
            background-color: var(--primary);
            color: var(--secondary-dark);
            font-size: 10px;
            padding: 3px 6px;
            border-radius: 10px;
            font-weight: 700;
        }

        .submenu {
            display: none;
            padding-left: 20px;
            background-color: var(--gray-lighter);
        }

        .submenu-item {
            padding: 10px 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: var(--transition);
        }

        .submenu-item:hover {
            background-color: rgba(0, 0, 0, 0.1);
        }

        .submenu-item i {
            font-size: 12px;
        }

        .submenu-item.active {
            color: var(--primary);
        }

        /* Main Content Styles */
        .main-content {
            flex: 1;
            margin-left: 280px;
            transition: var(--transition);
        }

        /* Top Navigation */
        .top-nav {
            padding: 15px 25px;
            background-color: var(--secondary);
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid var(--gray-lighter);
            position: sticky;
            top: 0;
            z-index: 999;
        }

        .nav-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .nav-toggle {
            cursor: pointer;
            font-size: 20px;
            color: var(--dark);
            display: none;
        }

        .search-bar {
            position: relative;
            width: 300px;
        }

        .search-bar input {
            width: 100%;
            padding: 10px 15px 10px 40px;
            border-radius: var(--border-radius);
            border: none;
            background-color: var(--gray-lighter);
            color: var(--dark);
            font-size: 14px;
        }

        .search-bar i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
        }

        .nav-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .nav-icon {
            position: relative;
            cursor: pointer;
            color: var(--dark);
            font-size: 18px;
        }

        .nav-icon .badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: var(--error);
            color: white;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            object-fit: cover;
        }

        .user-name {
            font-weight: 500;
            font-size: 14px;
        }

        .user-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background-color: var(--secondary);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow-lg);
            width: 200px;
            padding: 10px 0;
            display: none;
            z-index: 1000;
        }

        .user-profile:hover .user-dropdown {
            display: block;
        }

        .dropdown-item {
            padding: 10px 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: var(--transition);
        }

        .dropdown-item:hover {
            background-color: var(--gray-lighter);
        }

        .dropdown-item i {
            width: 20px;
            text-align: center;
        }

        /* Content Area */
        .content-wrapper {
            padding: 25px;
        }

        .page-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 25px;
        }

        .page-title h2 {
            margin: 0;
            font-weight: 700;
            font-size: 24px;
        }

        .page-title p {
            margin: 5px 0 0;
            color: var(--gray);
            font-size: 14px;
        }

        .page-actions .btn {
            margin-left: 10px;
        }

        /* Cards */
        .card {
            background-color: var(--secondary);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--box-shadow);
            margin-bottom: 25px;
            border: none;
        }

        .card-header {
            padding: 15px 20px;
            border-bottom: 1px solid var(--gray-lighter);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .card-header h3 {
            margin: 0;
            font-weight: 600;
            font-size: 16px;
        }

        .card-header .actions {
            display: flex;
            gap: 10px;
        }

        .card-body {
            padding: 20px;
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .stat-card {
            background-color: var(--secondary);
            border-radius: var(--border-radius-lg);
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: var(--transition);
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--box-shadow-lg);
        }

        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .stat-icon.users {
            background-color: rgba(0, 211, 149, 0.1);
            color: var(--primary);
        }

        .stat-icon.deposits {
            background-color: rgba(212, 175, 55, 0.1);
            color: var(--gold);
        }

        .stat-icon.withdrawals {
            background-color: rgba(120, 79, 237, 0.1);
            color: var(--purple);
        }

        .stat-icon.profit {
            background-color: rgba(236, 72, 153, 0.1);
            color: var(--pink);
        }

        .stat-info h3 {
            margin: 0;
            font-size: 24px;
            font-weight: 700;
        }

        .stat-info p {
            margin: 5px 0 0;
            color: var(--gray);
            font-size: 14px;
        }

        /* Tables */
        .table-responsive {
            overflow-x: auto;
        }

        .table {
            width: 100%;
            color: var(--dark);
            border-collapse: collapse;
        }

        .table th {
            background-color: var(--gray-lighter);
            padding: 12px 15px;
            text-align: left;
            font-weight: 600;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .table td {
            padding: 12px 15px;
            border-bottom: 1px solid var(--gray-lighter);
            font-size: 14px;
        }

        .table tr:last-child td {
            border-bottom: none;
        }

        .table tr:hover td {
            background-color: var(--gray-lighter);
        }

        .status-badge {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            display: inline-block;
        }

        .status-badge.pending {
            background-color: rgba(255, 184, 0, 0.1);
            color: var(--warning);
        }

        .status-badge.completed {
            background-color: rgba(0, 211, 149, 0.1);
            color: var(--success);
        }

        .status-badge.failed {
            background-color: rgba(255, 61, 87, 0.1);
            color: var(--error);
        }

        .status-badge.processing {
            background-color: rgba(26, 115, 232, 0.1);
            color: var(--security-blue);
        }

        /* Buttons */
        .btn {
            padding: 10px 20px;
            border-radius: var(--border-radius);
            border: none;
            font-weight: 500;
            font-size: 14px;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn i {
            font-size: 14px;
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 13px;
        }

        .btn-primary {
            background-color: var(--primary);
            color: var(--secondary-dark);
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
        }

        .btn-outline-primary {
            background-color: transparent;
            border: 1px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline-primary:hover {
            background-color: var(--primary);
            color: var(--secondary-dark);
        }

        .btn-danger {
            background-color: var(--error);
            color: white;
        }

        .btn-danger:hover {
            background-color: #e02d46;
        }

        .btn-outline-danger {
            background-color: transparent;
            border: 1px solid var(--error);
            color: var(--error);
        }

        .btn-outline-danger:hover {
            background-color: var(--error);
            color: white;
        }

        .btn-warning {
            background-color: var(--warning);
            color: var(--secondary-dark);
        }

        .btn-warning:hover {
            background-color: #e6a500;
        }

        .btn-success {
            background-color: var(--success);
            color: var(--secondary-dark);
        }

        .btn-success:hover {
            background-color: #00b783;
        }

        /* Forms */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 14px;
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border-radius: var(--border-radius);
            border: 1px solid var(--gray-lighter);
            background-color: var(--secondary);
            color: var(--dark);
            font-size: 14px;
            transition: var(--transition);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(0, 211, 149, 0.2);
        }

        .form-select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%238E8E8E' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 16px 12px;
        }

        /* Modals */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1100;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition-slow);
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-dialog {
            width: 100%;
            max-width: 600px;
            background-color: var(--secondary);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--box-shadow-lg);
            transform: translateY(-50px);
            transition: var(--transition-slow);
        }

        .modal.active .modal-dialog {
            transform: translateY(0);
        }

        .modal-header {
            padding: 20px;
            border-bottom: 1px solid var(--gray-lighter);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .modal-header h3 {
            margin: 0;
            font-weight: 600;
        }

        .modal-header .close {
            background: none;
            border: none;
            font-size: 24px;
            color: var(--gray);
            cursor: pointer;
            padding: 0;
        }

        .modal-body {
            padding: 20px;
            max-height: 70vh;
            overflow-y: auto;
        }

        .modal-footer {
            padding: 20px;
            border-top: 1px solid var(--gray-lighter);
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        /* Tabs */
        .nav-tabs {
            display: flex;
            border-bottom: 1px solid var(--gray-lighter);
            margin-bottom: 20px;
        }

        .nav-tab {
            padding: 10px 20px;
            cursor: pointer;
            font-weight: 500;
            color: var(--gray);
            border-bottom: 2px solid transparent;
            transition: var(--transition);
        }

        .nav-tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Charts */
        .chart-container {
            position: relative;
            height: 350px;
            width: 100%;
        }

        /* Login Page */
        .login-container {
            display: flex;
            min-height: 100vh;
            background-color: var(--secondary-dark);
        }

        .login-left {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 50px;
            background: linear-gradient(135deg, rgba(0, 211, 149, 0.1) 0%, rgba(0, 0, 0, 0.8) 100%), url('https://images.unsplash.com/photo-1639762681057-408e52192e55?q=80&w=2232&auto=format&fit=crop') no-repeat center center;
            background-size: cover;
            color: white;
        }

        .login-left-content {
            max-width: 500px;
        }

        .login-left h1 {
            font-size: 42px;
            font-weight: 700;
            margin-bottom: 20px;
            font-family: 'Rowdies', sans-serif;
        }

        .login-left p {
            font-size: 16px;
            line-height: 1.6;
            margin-bottom: 30px;
        }

        .login-features {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .login-feature {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .login-feature i {
            font-size: 24px;
            color: var(--primary);
        }

        .login-feature h4 {
            margin: 0 0 5px;
            font-size: 18px;
        }

        .login-feature p {
            margin: 0;
            font-size: 14px;
            color: var(--gray);
        }

        .login-right {
            width: 500px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 50px;
            background-color: var(--secondary);
        }

        .login-form {
            width: 100%;
            max-width: 400px;
        }

        .login-logo {
            text-align: center;
            margin-bottom: 40px;
        }

        .login-logo img {
            height: 60px;
            margin-bottom: 15px;
        }

        .login-logo h2 {
            margin: 0;
            font-weight: 700;
            font-family: 'Rowdies', sans-serif;
            color: var(--primary);
        }

        .login-logo p {
            margin: 10px 0 0;
            color: var(--gray);
            font-size: 14px;
        }

        .form-title {
            margin-bottom: 30px;
            text-align: center;
        }

        .form-title h3 {
            margin: 0 0 10px;
            font-size: 24px;
            font-weight: 700;
        }

        .form-title p {
            margin: 0;
            color: var(--gray);
            font-size: 14px;
        }

        .input-group {
            position: relative;
            margin-bottom: 20px;
        }

        .input-group i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
        }

        .input-group input {
            padding-left: 45px;
        }

        .form-options {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .form-check {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .form-check input {
            width: 16px;
            height: 16px;
            accent-color: var(--primary);
        }

        .form-check label {
            font-size: 14px;
            color: var(--gray);
            cursor: pointer;
        }

        .forgot-password {
            font-size: 14px;
            color: var(--primary);
            text-decoration: none;
            transition: var(--transition);
        }

        .forgot-password:hover {
            text-decoration: underline;
        }

        .login-btn {
            width: 100%;
            padding: 14px;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .divider {
            display: flex;
            align-items: center;
            margin: 20px 0;
            color: var(--gray);
            font-size: 14px;
        }

        .divider::before, .divider::after {
            content: "";
            flex: 1;
            height: 1px;
            background-color: var(--gray-lighter);
            margin: 0 10px;
        }

        .social-login {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
        }

        .social-btn {
            flex: 1;
            padding: 12px;
            border-radius: var(--border-radius);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-weight: 500;
            font-size: 14px;
            transition: var(--transition);
        }

        .social-btn.google {
            background-color: #4285F4;
            color: white;
        }

        .social-btn.google:hover {
            background-color: #3367d6;
        }

        .social-btn.apple {
            background-color: var(--secondary-dark);
            color: white;
            border: 1px solid var(--gray-lighter);
        }

        .social-btn.apple:hover {
            background-color: var(--gray-lighter);
        }

        .register-link {
            text-align: center;
            font-size: 14px;
            color: var(--gray);
        }

        .register-link a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
        }

        .register-link a:hover {
            text-decoration: underline;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .sidebar {
                width: 250px;
            }
            .main-content {
                margin-left: 250px;
            }
        }

        @media (max-width: 992px) {
            .sidebar {
                transform: translateX(-100%);
                position: fixed;
                z-index: 1100;
            }
            .sidebar.active {
                transform: translateX(0);
            }
            .main-content {
                margin-left: 0;
            }
            .nav-toggle {
                display: block;
            }
            .search-bar {
                width: auto;
                flex: 1;
            }
            .login-container {
                flex-direction: column;
            }
            .login-left, .login-right {
                width: 100%;
                padding: 40px 20px;
            }
            .login-left {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            .page-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            .page-actions {
                width: 100%;
                display: flex;
                flex-wrap: wrap;
                gap: 10px;
            }
            .page-actions .btn {
                margin-left: 0;
                flex: 1;
                min-width: 120px;
            }
        }

        @media (max-width: 576px) {
            .content-wrapper {
                padding: 15px;
            }
            .card-body {
                padding: 15px;
            }
            .modal-dialog {
                max-width: 95%;
                margin: 10px;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--secondary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--gray);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--gray-light);
        }

        /* Loading Spinner */
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Notification Badge */
        .notification-badge {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--primary);
            color: var(--secondary-dark);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            cursor: pointer;
            box-shadow: var(--box-shadow-lg);
            z-index: 999;
        }

        .notification-panel {
            position: fixed;
            bottom: 80px;
            right: 20px;
            width: 350px;
            max-height: 500px;
            background-color: var(--secondary);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--box-shadow-lg);
            padding: 15px;
            overflow-y: auto;
            display: none;
            z-index: 1000;
        }

        .notification-panel.active {
            display: block;
        }

        .notification-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--gray-lighter);
        }

        .notification-header h4 {
            margin: 0;
            font-size: 16px;
        }

        .notification-header .badge {
            background-color: var(--error);
            color: white;
            border-radius: 10px;
            padding: 3px 8px;
            font-size: 12px;
        }

        .notification-item {
            padding: 10px;
            border-radius: var(--border-radius);
            margin-bottom: 10px;
            background-color: var(--gray-lighter);
            display: flex;
            gap: 10px;
        }

        .notification-item.unread {
            background-color: rgba(0, 211, 149, 0.1);
            border-left: 3px solid var(--primary);
        }

        .notification-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary);
            color: var(--secondary-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            flex-shrink: 0;
        }

        .notification-content {
            flex: 1;
        }

        .notification-title {
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 5px;
        }

        .notification-message {
            font-size: 13px;
            color: var(--gray);
            margin-bottom: 5px;
        }

        .notification-time {
            font-size: 12px;
            color: var(--gray);
        }

        /* Chat Widget */
        .chat-widget {
            position: fixed;
            bottom: 20px;
            right: 90px;
            width: 350px;
            background-color: var(--secondary);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--box-shadow-lg);
            overflow: hidden;
            display: none;
            z-index: 1000;
        }

        .chat-widget.active {
            display: block;
        }

        .chat-header {
            padding: 15px;
            background-color: var(--primary);
            color: var(--secondary-dark);
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
        }

        .chat-header h4 {
            margin: 0;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .chat-header .badge {
            background-color: var(--secondary-dark);
            color: var(--primary);
            border-radius: 10px;
            padding: 3px 8px;
            font-size: 12px;
        }

        .chat-body {
            height: 300px;
            overflow-y: auto;
            padding: 15px;
            background-color: var(--gray-lighter);
        }

        .chat-message {
            margin-bottom: 15px;
            display: flex;
            gap: 10px;
        }

        .chat-message.user {
            justify-content: flex-end;
        }

        .chat-message.admin {
            justify-content: flex-start;
        }

        .chat-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            object-fit: cover;
            flex-shrink: 0;
        }

        .chat-content {
            max-width: 70%;
        }

        .chat-bubble {
            padding: 10px 15px;
            border-radius: var(--border-radius);
            font-size: 14px;
            line-height: 1.5;
        }

        .chat-message.user .chat-bubble {
            background-color: var(--primary);
            color: var(--secondary-dark);
            border-top-right-radius: 0;
        }

        .chat-message.admin .chat-bubble {
            background-color: var(--gray);
            color: var(--dark);
            border-top-left-radius: 0;
        }

        .chat-time {
            font-size: 11px;
            color: var(--gray);
            margin-top: 5px;
            text-align: right;
        }

        .chat-footer {
            padding: 15px;
            background-color: var(--secondary);
            border-top: 1px solid var(--gray-lighter);
        }

        .chat-input {
            display: flex;
            gap: 10px;
        }

        .chat-input input {
            flex: 1;
            padding: 10px 15px;
            border-radius: var(--border-radius);
            border: 1px solid var(--gray-lighter);
            background-color: var(--gray-lighter);
            color: var(--dark);
            font-size: 14px;
        }

        .chat-input button {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary);
            color: var(--secondary-dark);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Dark Mode Toggle */
        .dark-mode-toggle {
            position: relative;
            width: 50px;
            height: 24px;
        }

        .dark-mode-toggle input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .dark-mode-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--gray-lighter);
            transition: var(--transition);
            border-radius: 34px;
        }

        .dark-mode-slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: var(--transition);
            border-radius: 50%;
        }

        .dark-mode-toggle input:checked + .dark-mode-slider {
            background-color: var(--primary);
        }

        .dark-mode-toggle input:checked + .dark-mode-slider:before {
            transform: translateX(26px);
        }

        /* 2FA Modal */
        .two-factor-auth {
            text-align: center;
        }

        .two-factor-auth img {
            width: 200px;
            height: 200px;
            margin: 20px auto;
            display: block;
        }

        .two-factor-code {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }

        .two-factor-code input {
            width: 40px;
            height: 50px;
            text-align: center;
            font-size: 20px;
            border-radius: var(--border-radius);
            border: 1px solid var(--gray-lighter);
            background-color: var(--secondary);
            color: var(--dark);
        }

        /* Custom Select */
        .select2-container--default .select2-selection--single {
            background-color: var(--secondary);
            border: 1px solid var(--gray-lighter);
            border-radius: var(--border-radius);
            height: 44px;
        }

        .select2-container--default .select2-selection--single .select2-selection__rendered {
            color: var(--dark);
            line-height: 44px;
            padding-left: 15px;
        }

        .select2-container--default .select2-selection--single .select2-selection__arrow {
            height: 42px;
            right: 10px;
        }

        .select2-container--default .select2-results__option--selected {
            background-color: var(--gray-lighter);
            color: var(--dark);
        }

        .select2-container--default .select2-results__option--highlighted.select2-results__option--selectable {
            background-color: var(--primary);
            color: var(--secondary-dark);
        }

        .select2-dropdown {
            background-color: var(--secondary);
            border: 1px solid var(--gray-lighter);
        }

        /* Datepicker */
        .datepicker {
            background-color: var(--secondary);
            border: 1px solid var(--gray-lighter);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow-lg);
        }

        .datepicker table tr td.day:hover {
            background-color: var(--gray-lighter);
        }

        .datepicker table tr td.active, .datepicker table tr td.active:hover {
            background-color: var(--primary);
            color: var(--secondary-dark);
        }

        /* Tooltip */
        .tooltip {
            font-family: 'Inter', sans-serif;
        }

        .tooltip-inner {
            background-color: var(--secondary);
            color: var(--dark);
            border: 1px solid var(--gray-lighter);
            padding: 8px 12px;
            font-size: 13px;
        }

        .bs-tooltip-auto[data-popper-placement^=top] .tooltip-arrow::before, 
        .bs-tooltip-top .tooltip-arrow::before {
            border-top-color: var(--gray-lighter);
        }

        .bs-tooltip-auto[data-popper-placement^=bottom] .tooltip-arrow::before, 
        .bs-tooltip-bottom .tooltip-arrow::before {
            border-bottom-color: var(--gray-lighter);
        }

        .bs-tooltip-auto[data-popper-placement^=left] .tooltip-arrow::before, 
        .bs-tooltip-left .tooltip-arrow::before {
            border-left-color: var(--gray-lighter);
        }

        .bs-tooltip-auto[data-popper-placement^=right] .tooltip-arrow::before, 
        .bs-tooltip-right .tooltip-arrow::before {
            border-right-color: var(--gray-lighter);
        }

        /* Custom Checkbox */
        .custom-checkbox {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }

        .custom-checkbox input {
            width: 16px;
            height: 16px;
            appearance: none;
            border: 1px solid var(--gray);
            border-radius: 3px;
            position: relative;
            transition: var(--transition);
        }

        .custom-checkbox input:checked {
            background-color: var(--primary);
            border-color: var(--primary);
        }

        .custom-checkbox input:checked::after {
            content: "\f00c";
            font-family: "Font Awesome 6 Free";
            font-weight: 900;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: var(--secondary-dark);
            font-size: 10px;
        }

        .custom-checkbox label {
            font-size: 14px;
            color: var(--dark);
            user-select: none;
        }

        /* Custom Radio */
        .custom-radio {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }

        .custom-radio input {
            width: 16px;
            height: 16px;
            appearance: none;
            border: 1px solid var(--gray);
            border-radius: 50%;
            position: relative;
            transition: var(--transition);
        }

        .custom-radio input:checked {
            border-color: var(--primary);
        }

        .custom-radio input:checked::after {
            content: "";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 8px;
            height: 8px;
            background-color: var(--primary);
            border-radius: 50%;
        }

        .custom-radio label {
            font-size: 14px;
            color: var(--dark);
            user-select: none;
        }

        /* File Input */
        .file-input {
            position: relative;
            overflow: hidden;
            display: inline-block;
        }

        .file-input input[type="file"] {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        .file-input-label {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 15px;
            background-color: var(--gray-lighter);
            border-radius: var(--border-radius);
            font-size: 14px;
            cursor: pointer;
        }

        .file-input-label i {
            font-size: 18px;
        }

        /* Switch */
        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--gray-lighter);
            transition: var(--transition);
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: var(--transition);
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: var(--primary);
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        /* Badges */
        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge-primary {
            background-color: var(--primary);
            color: var(--secondary-dark);
        }

        .badge-secondary {
            background-color: var(--gray-lighter);
            color: var(--dark);
        }

        .badge-success {
            background-color: var(--success);
            color: var(--secondary-dark);
        }

        .badge-warning {
            background-color: var(--warning);
            color: var(--secondary-dark);
        }

        .badge-danger {
            background-color: var(--error);
            color: white;
        }

        .badge-info {
            background-color: var(--security-blue);
            color: white;
        }

        /* Progress Bars */
        .progress {
            height: 8px;
            background-color: var(--gray-lighter);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background-color: var(--primary);
            border-radius: 4px;
            transition: width 0.6s ease;
        }

        /* Pagination */
        .pagination {
            display: flex;
            gap: 5px;
            margin-top: 20px;
        }

        .page-item {
            list-style: none;
        }

        .page-link {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            border-radius: var(--border-radius);
            background-color: var(--gray-lighter);
            color: var(--dark);
            font-size: 14px;
            font-weight: 500;
            text-decoration: none;
            transition: var(--transition);
        }

        .page-link:hover {
            background-color: var(--gray);
            color: var(--dark);
        }

        .page-item.active .page-link {
            background-color: var(--primary);
            color: var(--secondary-dark);
        }

        .page-item.disabled .page-link {
            background-color: var(--gray-lighter);
            color: var(--gray);
            cursor: not-allowed;
        }

        /* Alert */
        .alert {
            padding: 15px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .alert i {
            font-size: 20px;
        }

        .alert-primary {
            background-color: rgba(0, 211, 149, 0.1);
            color: var(--primary);
            border-left: 3px solid var(--primary);
        }

        .alert-success {
            background-color: rgba(52, 168, 83, 0.1);
            color: var(--security-green);
            border-left: 3px solid var(--security-green);
        }

        .alert-warning {
            background-color: rgba(255, 184, 0, 0.1);
            color: var(--warning);
            border-left: 3px solid var(--warning);
        }

        .alert-danger {
            background-color: rgba(255, 61, 87, 0.1);
            color: var(--error);
            border-left: 3px solid var(--error);
        }

        /* Accordion */
        .accordion-item {
            margin-bottom: 10px;
            border-radius: var(--border-radius);
            overflow: hidden;
            background-color: var(--secondary);
            border: 1px solid var(--gray-lighter);
        }

        .accordion-header {
            padding: 15px 20px;
            background-color: var(--gray-lighter);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .accordion-header h4 {
            margin: 0;
            font-size: 16px;
            font-weight: 600;
        }

        .accordion-header i {
            transition: var(--transition);
        }

        .accordion-header.collapsed i {
            transform: rotate(180deg);
        }

        .accordion-body {
            padding: 0;
            max-height: 0;
            overflow: hidden;
            transition: var(--transition-slow);
        }

        .accordion-body.active {
            padding: 20px;
            max-height: 1000px;
        }

        /* Toggle Password */
        .password-toggle {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            color: var(--gray);
        }

        /* Verification Badge */
        .verified-badge {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            background-color: rgba(52, 168, 83, 0.1);
            color: var(--security-green);
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 12px;
            font-weight: 600;
        }

        /* KYC Status */
        .kyc-status {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 12px;
            font-weight: 600;
        }

        .kyc-status.pending {
            background-color: rgba(255, 184, 0, 0.1);
            color: var(--warning);
        }

        .kyc-status.verified {
            background-color: rgba(52, 168, 83, 0.1);
            color: var(--security-green);
        }

        .kyc-status.rejected {
            background-color: rgba(255, 61, 87, 0.1);
            color: var(--error);
        }

        /* Investment Plan Card */
        .plan-card {
            background-color: var(--secondary);
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            transition: var(--transition);
            border: 1px solid var(--gray-lighter);
        }

        .plan-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--box-shadow-lg);
        }

        .plan-header {
            padding: 20px;
            text-align: center;
            background-color: var(--gray-lighter);
        }

        .plan-name {
            margin: 0;
            font-size: 18px;
            font-weight: 700;
            color: var(--primary);
        }

        .plan-price {
            margin: 10px 0 0;
            font-size: 32px;
            font-weight: 700;
        }

        .plan-period {
            font-size: 14px;
            color: var(--gray);
        }

        .plan-body {
            padding: 20px;
        }

        .plan-features {
            list-style: none;
            padding: 0;
            margin: 0 0 20px;
        }

        .plan-feature {
            padding: 8px 0;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 1px solid var(--gray-lighter);
        }

        .plan-feature i {
            color: var(--primary);
        }

        .plan-feature:last-child {
            border-bottom: none;
        }

        .plan-footer {
            padding: 0 20px 20px;
            text-align: center;
        }

        /* User Profile */
        .profile-card {
            background-color: var(--secondary);
            border-radius: var(--border-radius-lg);
            padding: 20px;
            text-align: center;
        }

        .profile-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            margin: 0 auto 15px;
            border: 5px solid var(--gray-lighter);
        }

        .profile-name {
            margin: 0 0 5px;
            font-size: 20px;
            font-weight: 700;
        }

        .profile-email {
            margin: 0 0 15px;
            color: var(--gray);
            font-size: 14px;
        }

        .profile-status {
            display: inline-block;
            margin-bottom: 20px;
        }

        .profile-details {
            text-align: left;
            margin-bottom: 20px;
        }

        .profile-detail {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid var(--gray-lighter);
        }

        .profile-detail:last-child {
            border-bottom: none;
        }

        .detail-label {
            color: var(--gray);
            font-size: 14px;
        }

        .detail-value {
            font-weight: 500;
            font-size: 14px;
        }

        /* Timeline */
        .timeline {
            position: relative;
            padding-left: 30px;
            list-style: none;
        }

        .timeline::before {
            content: "";
            position: absolute;
            top: 0;
            bottom: 0;
            left: 10px;
            width: 2px;
            background-color: var(--gray-lighter);
        }

        .timeline-item {
            position: relative;
            margin-bottom: 20px;
        }

        .timeline-item::before {
            content: "";
            position: absolute;
            left: -30px;
            top: 5px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: var(--primary);
            border: 2px solid var(--secondary);
        }

        .timeline-date {
            font-size: 12px;
            color: var(--gray);
            margin-bottom: 5px;
        }

        .timeline-content {
            background-color: var(--gray-lighter);
            padding: 15px;
            border-radius: var(--border-radius);
        }

        .timeline-title {
            margin: 0 0 5px;
            font-size: 14px;
            font-weight: 600;
        }

        .timeline-description {
            margin: 0;
            font-size: 13px;
            color: var(--gray);
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
        }

        .empty-state i {
            font-size: 50px;
            color: var(--gray);
            margin-bottom: 20px;
        }

        .empty-state h4 {
            margin: 0 0 10px;
            font-size: 18px;
            font-weight: 600;
        }

        .empty-state p {
            margin: 0 0 20px;
            color: var(--gray);
            font-size: 14px;
        }

        /* Loading Overlay */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition-slow);
        }

        .loading-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .loading-content {
            background-color: var(--secondary);
            padding: 30px;
            border-radius: var(--border-radius-lg);
            text-align: center;
            max-width: 400px;
            width: 90%;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        .loading-text {
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 0;
        }

        /* Print Styles */
        @media print {
            body * {
                visibility: hidden;
            }
            .print-area, .print-area * {
                visibility: visible;
            }
            .print-area {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
            }
            .no-print {
                display: none !important;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <p class="loading-text">Loading Admin Dashboard...</p>
        </div>
    </div>

    <!-- Login Container (Initially Visible) -->
    <div class="login-container" id="loginContainer">
        <div class="login-left">
            <div class="login-left-content">
                <h1>BitHash LLC Admin Portal</h1>
                <p>Manage millions of users, monitor investments, process withdrawals, and provide support through our comprehensive institutional-grade admin dashboard.</p>
                
                <div class="login-features">
                    <div class="login-feature">
                        <i class="fas fa-users"></i>
                        <div>
                            <h4>User Management</h4>
                            <p>Full control over user accounts, balances, and activities</p>
                        </div>
                    </div>
                    <div class="login-feature">
                        <i class="fas fa-chart-line"></i>
                        <div>
                            <h4>Real-time Analytics</h4>
                            <p>Monitor platform performance with live statistics</p>
                        </div>
                    </div>
                    <div class="login-feature">
                        <i class="fas fa-shield-alt"></i>
                        <div>
                            <h4>Enterprise Security</h4>
                            <p>Bank-grade security with 2FA and activity monitoring</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="login-right">
            <div class="login-form">
                <div class="login-logo">
                    <img src="https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1" alt="BitHash LLC">
                    <h2>BitHash LLC</h2>
                    <p>Institutional Bitcoin Mining</p>
                </div>

                <div class="form-title">
                    <h3>Admin Login</h3>
                    <p>Enter your credentials to access the dashboard</p>
                </div>

                <form id="loginForm">
                    <div class="form-group">
                        <div class="input-group">
                            <i class="fas fa-envelope"></i>
                            <input type="email" class="form-control" id="loginEmail" placeholder="Email Address" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="input-group">
                            <i class="fas fa-lock"></i>
                            <input type="password" class="form-control" id="loginPassword" placeholder="Password" required>
                            <span class="password-toggle" onclick="togglePassword('loginPassword')">
                                <i class="fas fa-eye"></i>
                            </span>
                        </div>
                    </div>

                    <div class="form-options">
                        <div class="form-check">
                            <input type="checkbox" id="rememberMe">
                            <label for="rememberMe">Remember me</label>
                        </div>
                        <a href="#" class="forgot-password" id="forgotPassword">Forgot password?</a>
                    </div>

                    <button type="submit" class="btn btn-primary login-btn">
                        <i class="fas fa-sign-in-alt"></i> Login
                    </button>
                </form>

                <div class="alert alert-danger" id="loginError" style="display: none;">
                    <i class="fas fa-exclamation-circle"></i>
                    <div id="loginErrorText"></div>
                </div>

                <div class="divider">or</div>

                <div class="social-login">
                    <button type="button" class="social-btn google" id="googleLogin">
                        <i class="fab fa-google"></i> Google
                    </button>
                    <button type="button" class="social-btn apple">
                        <i class="fab fa-apple"></i> Apple
                    </button>
                </div>

                <div class="register-link">
                    Having trouble? <a href="#" id="contactSupport">Contact support</a>
                </div>
            </div>
        </div>
    </div>

    <!-- 2FA Modal -->
    <div class="modal" id="twoFactorModal">
        <div class="modal-dialog">
            <div class="modal-header">
                <h3>Two-Factor Authentication</h3>
                <button class="close" id="closeTwoFactorModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="two-factor-auth">
                    <p>Enter the 6-digit code from your authenticator app</p>
                    <div class="two-factor-code">
                        <input type="text" maxlength="1" class="form-control" autofocus>
                        <input type="text" maxlength="1" class="form-control">
                        <input type="text" maxlength="1" class="form-control">
                        <input type="text" maxlength="1" class="form-control">
                        <input type="text" maxlength="1" class="form-control">
                        <input type="text" maxlength="1" class="form-control">
                    </div>
                    <button class="btn btn-primary" id="verifyTwoFactor">Verify</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Forgot Password Modal -->
    <div class="modal" id="forgotPasswordModal">
        <div class="modal-dialog">
            <div class="modal-header">
                <h3>Reset Password</h3>
                <button class="close" id="closeForgotPasswordModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="forgotPasswordForm">
                    <div class="form-group">
                        <label class="form-label">Email Address</label>
                        <input type="email" class="form-control" id="resetEmail" placeholder="Enter your email" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Send Reset Link</button>
                </form>
                <div class="alert alert-danger mt-3" id="forgotPasswordError" style="display: none;">
                    <i class="fas fa-exclamation-circle"></i>
                    <div id="forgotPasswordErrorText"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Dashboard Container (Initially Hidden) -->
    <div class="admin-container" id="adminContainer" style="display: none;">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">
                    <img src="https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1" alt="BitHash LLC">
                    <h3>BitHash</h3>
                </div>
                <i class="fas fa-times" id="closeSidebar"></i>
            </div>

            <div class="sidebar-menu">
                <div class="menu-title">Main</div>
                <div class="menu-item active" data-section="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </div>

                <div class="menu-title">Management</div>
                <div class="menu-item" data-section="users">
                    <i class="fas fa-users"></i>
                    <span>Users</span>
                    <span class="badge" id="newUsersBadge">0</span>
                </div>
                <div class="menu-item" data-section="investments">
                    <i class="fas fa-chart-line"></i>
                    <span>Investments</span>
                </div>
                <div class="menu-item" data-section="transactions">
                    <i class="fas fa-exchange-alt"></i>
                    <span>Transactions</span>
                </div>
                <div class="menu-item" data-section="withdrawals">
                    <i class="fas fa-money-bill-wave"></i>
                    <span>Withdrawals</span>
                    <span class="badge" id="pendingWithdrawalsBadge">0</span>
                </div>
                <div class="menu-item" data-section="deposits">
                    <i class="fas fa-wallet"></i>
                    <span>Deposits</span>
                </div>

                <div class="menu-title">Support</div>
                <div class="menu-item" data-section="tickets">
                    <i class="fas fa-ticket-alt"></i>
                    <span>Support Tickets</span>
                    <span class="badge" id="openTicketsBadge">0</span>
                </div>
                <div class="menu-item" data-section="live-chat">
                    <i class="fas fa-comments"></i>
                    <span>Live Chat</span>
                    <span class="badge" id="unreadChatsBadge">0</span>
                </div>

                <div class="menu-title">Content</div>
                <div class="menu-item" data-section="notifications">
                    <i class="fas fa-bell"></i>
                    <span>Notifications</span>
                </div>
                <div class="menu-item" data-section="promotions">
                    <i class="fas fa-bullhorn"></i>
                    <span>Promotions</span>
                </div>

                <div class="menu-title">Settings</div>
                <div class="menu-item" data-section="settings">
                    <i class="fas fa-cog"></i>
                    <span>Platform Settings</span>
                </div>
                <div class="menu-item" data-section="security">
                    <i class="fas fa-shield-alt"></i>
                    <span>Security</span>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Top Navigation -->
            <div class="top-nav">
                <div class="nav-left">
                    <i class="fas fa-bars nav-toggle" id="toggleSidebar"></i>
                    <div class="search-bar">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="Search...">
                    </div>
                </div>
                <div class="nav-right">
                    <div class="nav-icon" id="notificationsIcon">
                        <i class="fas fa-bell"></i>
                        <span class="badge">3</span>
                    </div>
                    <div class="nav-icon" id="messagesIcon">
                        <i class="fas fa-envelope"></i>
                        <span class="badge">5</span>
                    </div>
                    <div class="user-profile">
                        <img src="https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1" alt="Admin" class="user-avatar" id="adminAvatar">
                        <span class="user-name" id="adminName">Admin</span>
                        <div class="user-dropdown">
                            <div class="dropdown-item" id="profileLink">
                                <i class="fas fa-user"></i>
                                <span>Profile</span>
                            </div>
                            <div class="dropdown-item" id="settingsLink">
                                <i class="fas fa-cog"></i>
                                <span>Settings</span>
                            </div>
                            <div class="dropdown-item" id="logoutLink">
                                <i class="fas fa-sign-out-alt"></i>
                                <span>Logout</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Content Wrapper -->
            <div class="content-wrapper">
                <!-- Dashboard Section -->
                <div class="content-section active" id="dashboardSection">
                    <div class="page-header">
                        <div class="page-title">
                            <h2>Dashboard</h2>
                            <p>Welcome back, <span id="adminGreetingName">Admin</span>. Here's what's happening with your platform today.</p>
                        </div>
                        <div class="page-actions">
                            <button class="btn btn-outline-primary">
                                <i class="fas fa-download"></i> Export Report
                            </button>
                            <button class="btn btn-primary" id="refreshDashboard">
                                <i class="fas fa-sync-alt"></i> Refresh
                            </button>
                        </div>
                    </div>

                    <!-- Stats Cards -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon users">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="totalUsers">0</h3>
                                <p>Total Users</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon deposits">
                                <i class="fas fa-wallet"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="totalDeposits">$0</h3>
                                <p>Total Deposits</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon withdrawals">
                                <i class="fas fa-money-bill-wave"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="totalWithdrawals">$0</h3>
                                <p>Total Withdrawals</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon profit">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="totalProfit">$0</h3>
                                <p>Total Profit</p>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-8">
                            <!-- Recent Activity -->
                            <div class="card">
                                <div class="card-header">
                                    <h3>Recent Activity</h3>
                                    <div class="actions">
                                        <button class="btn btn-sm btn-outline-primary">View All</button>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table" id="recentActivityTable">
                                            <thead>
                                                <tr>
                                                    <th>User</th>
                                                    <th>Activity</th>
                                                    <th>Time</th>
                                                    <th>Status</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <!-- Data will be loaded via JavaScript -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <!-- System Status -->
                            <div class="card">
                                <div class="card-header">
                                    <h3>System Status</h3>
                                </div>
                                <div class="card-body">
                                    <div class="system-status-item">
                                        <div class="d-flex justify-content-between mb-2">
                                            <span>Server Load</span>
                                            <span id="serverLoad">0%</span>
                                        </div>
                                        <div class="progress">
                                            <div class="progress-bar" id="serverLoadBar" style="width: 0%"></div>
                                        </div>
                                    </div>
                                    <div class="system-status-item mt-4">
                                        <div class="d-flex justify-content-between mb-2">
                                            <span>Database</span>
                                            <span id="databaseStatus">Offline</span>
                                        </div>
                                        <div class="progress">
                                            <div class="progress-bar" id="databaseStatusBar" style="width: 0%"></div>
                                        </div>
                                    </div>
                                    <div class="system-status-item mt-4">
                                        <div class="d-flex justify-content-between mb-2">
                                            <span>API Response</span>
                                            <span id="apiResponse">0ms</span>
                                        </div>
                                        <div class="progress">
                                            <div class="progress-bar" id="apiResponseBar" style="width: 0%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Transactions -->
                    <div class="card">
                        <div class="card-header">
                            <h3>Recent Transactions</h3>
                            <div class="actions">
                                <button class="btn btn-sm btn-outline-primary">View All</button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table" id="recentTransactionsTable">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>User</th>
                                            <th>Amount</th>
                                            <th>Type</th>
                                            <th>Date</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Data will be loaded via JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Users Section -->
                <div class="content-section" id="usersSection">
                    <div class="page-header">
                        <div class="page-title">
                            <h2>User Management</h2>
                            <p>Manage all user accounts, balances, and activities</p>
                        </div>
                        <div class="page-actions">
                            <button class="btn btn-outline-primary" id="exportUsers">
                                <i class="fas fa-download"></i> Export
                            </button>
                            <button class="btn btn-primary" id="addUserBtn">
                                <i class="fas fa-plus"></i> Add User
                            </button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>All Users</h3>
                            <div class="actions">
                                <div class="search-bar">
                                    <i class="fas fa-search"></i>
                                    <input type="text" id="userSearch" placeholder="Search users...">
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table" id="usersTable">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Name</th>
                                            <th>Email</th>
                                            <th>Balance</th>
                                            <th>Status</th>
                                            <th>Joined</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Data will be loaded via JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Investments Section -->
                <div class="content-section" id="investmentsSection">
                    <div class="page-header">
                        <div class="page-title">
                            <h2>Investments</h2>
                            <p>View and manage all user investment activities</p>
                        </div>
                        <div class="page-actions">
                            <button class="btn btn-outline-primary">
                                <i class="fas fa-download"></i> Export
                            </button>
                            <button class="btn btn-primary" id="addInvestmentBtn">
                                <i class="fas fa-plus"></i> Add Investment
                            </button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>Active Investments</h3>
                            <div class="actions">
                                <div class="search-bar">
                                    <i class="fas fa-search"></i>
                                    <input type="text" id="investmentSearch" placeholder="Search investments...">
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table" id="investmentsTable">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>User</th>
                                            <th>Plan</th>
                                            <th>Amount</th>
                                            <th>Profit</th>
                                            <th>Start Date</th>
                                            <th>End Date</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Data will be loaded via JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Transactions Section -->
                <div class="content-section" id="transactionsSection">
                    <div class="page-header">
                        <div class="page-title">
                            <h2>Transactions</h2>
                            <p>View all deposit and withdrawal transactions</p>
                        </div>
                        <div class="page-actions">
                            <button class="btn btn-outline-primary">
                                <i class="fas fa-download"></i> Export
                            </button>
                            <button class="btn btn-primary" id="filterTransactionsBtn">
                                <i class="fas fa-filter"></i> Filter
                            </button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>Transaction History</h3>
                            <div class="actions">
                                <div class="search-bar">
                                    <i class="fas fa-search"></i>
                                    <input type="text" id="transactionSearch" placeholder="Search transactions...">
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table" id="transactionsTable">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>User</th>
                                            <th>Type</th>
                                            <th>Amount</th>
                                            <th>Method</th>
                                            <th>Date</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Data will be loaded via JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Withdrawals Section -->
                <div class="content-section" id="withdrawalsSection">
                    <div class="page-header">
                        <div class="page-title">
                            <h2>Withdrawals</h2>
                            <p>Review and process pending withdrawal requests</p>
                        </div>
                        <div class="page-actions">
                            <button class="btn btn-outline-primary">
                                <i class="fas fa-download"></i> Export
                            </button>
                            <button class="btn btn-primary" id="processAllWithdrawalsBtn">
                                <i class="fas fa-check-circle"></i> Process All
                            </button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>Pending Withdrawals</h3>
                            <div class="actions">
                                <div class="search-bar">
                                    <i class="fas fa-search"></i>
                                    <input type="text" id="withdrawalSearch" placeholder="Search withdrawals...">
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table" id="withdrawalsTable">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>User</th>
                                            <th>Amount</th>
                                            <th>Wallet</th>
                                            <th>Request Date</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Data will be loaded via JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Deposits Section -->
                <div class="content-section" id="depositsSection">
                    <div class="page-header">
                        <div class="page-title">
                            <h2>Deposits</h2>
                            <p>Monitor and verify user deposit transactions</p>
                        </div>
                        <div class="page-actions">
                            <button class="btn btn-outline-primary">
                                <i class="fas fa-download"></i> Export
                            </button>
                            <button class="btn btn-primary" id="verifyAllDepositsBtn">
                                <i class="fas fa-check-circle"></i> Verify All
                            </button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>Pending Deposits</h3>
                            <div class="actions">
                                <div class="search-bar">
                                    <i class="fas fa-search"></i>
                                    <input type="text" id="depositSearch" placeholder="Search deposits...">
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table" id="depositsTable">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>User</th>
                                            <th>Amount</th>
                                            <th>Method</th>
                                            <th>Date</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Data will be loaded via JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Support Tickets Section -->
                <div class="content-section" id="ticketsSection">
                    <div class="page-header">
                        <div class="page-title">
                            <h2>Support Tickets</h2>
                            <p>Manage and respond to user support requests</p>
                        </div>
                        <div class="page-actions">
                            <button class="btn btn-outline-primary">
                                <i class="fas fa-download"></i> Export
                            </button>
                            <button class="btn btn-primary" id="newTicketBtn">
                                <i class="fas fa-plus"></i> New Ticket
                            </button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>Open Tickets</h3>
                            <div class="actions">
                                <div class="search-bar">
                                    <i class="fas fa-search"></i>
                                    <input type="text" id="ticketSearch" placeholder="Search tickets...">
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table" id="ticketsTable">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>User</th>
                                            <th>Subject</th>
                                            <th>Category</th>
                                            <th>Priority</th>
                                            <th>Date</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Data will be loaded via JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Live Chat Section -->
                <div class="content-section" id="liveChatSection">
                    <div class="page-header">
                        <div class="page-title">
                            <h2>Live Chat</h2>
                            <p>Communicate with users in real-time</p>
                        </div>
                        <div class="page-actions">
                            <button class="btn btn-outline-primary">
                                <i class="fas fa-download"></i> Export
                            </button>
                            <button class="btn btn-primary" id="startNewChatBtn">
                                <i class="fas fa-plus"></i> New Chat
                            </button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>Active Conversations</h3>
                            <div class="actions">
                                <div class="search-bar">
                                    <i class="fas fa-search"></i>
                                    <input type="text" id="chatSearch" placeholder="Search chats...">
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="chat-list">
                                        <div class="chat-list-item active">
                                            <div class="chat-user">
                                                <img src="https://randomuser.me/api/portraits/men/1.jpg" alt="User" class="chat-avatar">
                                                <div class="chat-user-info">
                                                    <h5>John Doe</h5>
                                                    <p>Hello, I have a question about...</p>
                                                </div>
                                                <div class="chat-time">
                                                    <span>2 min ago</span>
                                                    <span class="badge">3</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="chat-list-item">
                                            <div class="chat-user">
                                                <img src="https://randomuser.me/api/portraits/women/2.jpg" alt="User" class="chat-avatar">
                                                <div class="chat-user-info">
                                                    <h5>Jane Smith</h5>
                                                    <p>Thanks for your help!</p>
                                                </div>
                                                <div class="chat-time">
                                                    <span>10 min ago</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="chat-list-item">
                                            <div class="chat-user">
                                                <img src="https://randomuser.me/api/portraits/men/3.jpg" alt="User" class="chat-avatar">
                                                <div class="chat-user-info">
                                                    <h5>Robert Johnson</h5>
                                                    <p>When will my withdrawal be processed?</p>
                                                </div>
                                                <div class="chat-time">
                                                    <span>25 min ago</span>
                                                    <span class="badge">1</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <div class="chat-window">
                                        <div class="chat-header">
                                            <h5>John Doe</h5>
                                            <div class="chat-actions">
                                                <button class="btn btn-sm btn-outline-primary">
                                                    <i class="fas fa-phone"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-primary">
                                                    <i class="fas fa-video"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-danger">
                                                    <i class="fas fa-times"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="chat-body">
                                            <div class="chat-message admin">
                                                <img src="https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1" alt="Admin" class="chat-avatar">
                                                <div class="chat-content">
                                                    <div class="chat-bubble">
                                                        Hello John, how can I help you today?
                                                    </div>
                                                    <div class="chat-time">
                                                        2:30 PM
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="chat-message user">
                                                <div class="chat-content">
                                                    <div class="chat-bubble">
                                                        Hi, I have a question about my recent deposit. It hasn't shown up in my account yet.
                                                    </div>
                                                    <div class="chat-time">
                                                        2:32 PM
                                                    </div>
                                                </div>
                                                <img src="https://randomuser.me/api/portraits/men/1.jpg" alt="User" class="chat-avatar">
                                            </div>
                                            <div class="chat-message admin">
                                                <img src="https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1" alt="Admin" class="chat-avatar">
                                                <div class="chat-content">
                                                    <div class="chat-bubble">
                                                        Can you please provide me with the transaction ID or hash so I can check the status for you?
                                                    </div>
                                                    <div class="chat-time">
                                                        2:33 PM
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="chat-footer">
                                            <div class="chat-input">
                                                <input type="text" placeholder="Type your message...">
                                                <button class="btn btn-primary">
                                                    <i class="fas fa-paper-plane"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Notifications Section -->
                <div class="content-section" id="notificationsSection">
                    <div class="page-header">
                        <div class="page-title">
                            <h2>Notifications</h2>
                            <p>Send and manage platform notifications</p>
                        </div>
                        <div class="page-actions">
                            <button class="btn btn-outline-primary">
                                <i class="fas fa-download"></i> Export
                            </button>
                            <button class="btn btn-primary" id="sendNotificationBtn">
                                <i class="fas fa-plus"></i> Send Notification
                            </button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>Notification History</h3>
                            <div class="actions">
                                <div class="search-bar">
                                    <i class="fas fa-search"></i>
                                    <input type="text" id="notificationSearch" placeholder="Search notifications...">
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table" id="notificationsTable">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Title</th>
                                            <th>Message</th>
                                            <th>Recipients</th>
                                            <th>Sent Date</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Data will be loaded via JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Promotions Section -->
                <div class="content-section" id="promotionsSection">
                    <div class="page-header">
                        <div class="page-title">
                            <h2>Promotions</h2>
                            <p>Create and manage marketing campaigns</p>
                        </div>
                        <div class="page-actions">
                            <button class="btn btn-outline-primary">
                                <i class="fas fa-download"></i> Export
                            </button>
                            <button class="btn btn-primary" id="createPromotionBtn">
                                <i class="fas fa-plus"></i> Create Promotion
                            </button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>Active Promotions</h3>
                            <div class="actions">
                                <div class="search-bar">
                                    <i class="fas fa-search"></i>
                                    <input type="text" id="promotionSearch" placeholder="Search promotions...">
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table" id="promotionsTable">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Title</th>
                                            <th>Description</th>
                                            <th>Start Date</th>
                                            <th>End Date</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Data will be loaded via JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Settings Section -->
                <div class="content-section" id="settingsSection">
                    <div class="page-header">
                        <div class="page-title">
                            <h2>Platform Settings</h2>
                            <p>Configure system-wide platform settings</p>
                        </div>
                        <div class="page-actions">
                            <button class="btn btn-primary" id="saveSettingsBtn">
                                <i class="fas fa-save"></i> Save Changes
                            </button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>General Settings</h3>
                        </div>
                        <div class="card-body">
                            <form id="generalSettingsForm">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="form-label">Platform Name</label>
                                            <input type="text" class="form-control" id="platformName" value="BitHash LLC">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="form-label">Platform Currency</label>
                                            <select class="form-control form-select" id="platformCurrency">
                                                <option value="USD">US Dollar (USD)</option>
                                                <option value="EUR">Euro (EUR)</option>
                                                <option value="GBP">British Pound (GBP)</option>
                                                <option value="BTC">Bitcoin (BTC)</option>
                                                <option value="ETH">Ethereum (ETH)</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="form-label">Maintenance Mode</label>
                                            <div class="switch">
                                                <input type="checkbox" id="maintenanceMode">
                                                <span class="slider"></span>
                                            </div>
                                            <small class="text-muted">When enabled, only admins can access the platform</small>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="form-label">Registration Status</label>
                                            <div class="switch">
                                                <input type="checkbox" id="registrationStatus" checked>
                                                <span class="slider"></span>
                                            </div>
                                            <small class="text-muted">Allow new users to register</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Platform Logo</label>
                                    <div class="file-input">
                                        <input type="file" id="platformLogo" accept="image/*">
                                        <label for="platformLogo" class="file-input-label">
                                            <i class="fas fa-upload"></i> Upload Logo
                                        </label>
                                    </div>
                                    <small class="text-muted">Recommended size: 200x200px</small>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Favicon</label>
                                    <div class="file-input">
                                        <input type="file" id="platformFavicon" accept="image/*">
                                        <label for="platformFavicon" class="file-input-label">
                                            <i class="fas fa-upload"></i> Upload Favicon
                                        </label>
                                    </div>
                                    <small class="text-muted">Recommended size: 32x32px</small>
                                </div>
                            </form>
                        </div>
                    </div>

                    <div class="card mt-4">
                        <div class="card-header">
                            <h3>Email Settings</h3>
                        </div>
                        <div class="card-body">
                            <form id="emailSettingsForm">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="form-label">SMTP Host</label>
                                            <input type="text" class="form-control" id="smtpHost" value="smtp.example.com">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="form-label">SMTP Port</label>
                                            <input type="number" class="form-control" id="smtpPort" value="587">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="form-label">SMTP Username</label>
                                            <input type="text" class="form-control" id="smtpUsername" value="noreply@example.com">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="form-label">SMTP Password</label>
                                            <input type="password" class="form-control" id="smtpPassword" placeholder="Enter password">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="form-label">Email Encryption</label>
                                            <select class="form-control form-select" id="smtpEncryption">
                                                <option value="tls">TLS</option>
                                                <option value="ssl">SSL</option>
                                                <option value="none">None</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="form-label">From Email</label>
                                            <input type="email" class="form-control" id="fromEmail" value="noreply@example.com">
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">From Name</label>
                                    <input type="text" class="form-control" id="fromName" value="BitHash LLC">
                                </div>
                            </form>
                        </div>
                    </div>

                    <div class="card mt-4">
                        <div class="card-header">
                            <h3>Payment Settings</h3>
                        </div>
                        <div class="card-body">
                            <form id="paymentSettingsForm">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="form-label">Minimum Deposit</label>
                                            <input type="number" class="form-control" id="minDeposit" value="10">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="form-label">Maximum Deposit</label>
                                            <input type="number" class="form-control" id="maxDeposit" value="100000">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="form-label">Minimum Withdrawal</label>
                                            <input type="number" class="form-control" id="minWithdrawal" value="20">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="form-label">Maximum Withdrawal</label>
                                            <input type="number" class="form-control" id="maxWithdrawal" value="50000">
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Withdrawal Fee (%)</label>
                                    <input type="number" class="form-control" id="withdrawalFee" value="1.5" step="0.1">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Payment Methods</label>
                                    <div class="custom-checkbox">
                                        <input type="checkbox" id="enableBankTransfer" checked>
                                        <label for="enableBankTransfer">Bank Transfer</label>
                                    </div>
                                    <div class="custom-checkbox">
                                        <input type="checkbox" id="enableCreditCard" checked>
                                        <label for="enableCreditCard">Credit/Debit Card</label>
                                    </div>
                                    <div class="custom-checkbox">
                                        <input type="checkbox" id="enablePaypal" checked>
                                        <label for="enablePaypal">PayPal</label>
                                    </div>
                                    <div class="custom-checkbox">
                                        <input type="checkbox" id="enableCrypto" checked>
                                        <label for="enableCrypto">Cryptocurrency</label>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Security Section -->
                <div class="content-section" id="securitySection">
                    <div class="page-header">
                        <div class="page-title">
                            <h2>Security Settings</h2>
                            <p>Configure platform security and authentication</p>
                        </div>
                        <div class="page-actions">
                            <button class="btn btn-primary" id="saveSecuritySettingsBtn">
                                <i class="fas fa-save"></i> Save Changes
                            </button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>Authentication</h3>
                        </div>
                        <div class="card-body">
                            <form id="securitySettingsForm">
                                <div class="form-group">
                                    <label class="form-label">Two-Factor Authentication</label>
                                    <div class="switch">
                                        <input type="checkbox" id="enable2FA" checked>
                                        <span class="slider"></span>
                                    </div>
                                    <small class="text-muted">Require 2FA for admin login</small>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Password Policy</label>
                                    <div class="custom-checkbox">
                                        <input type="checkbox" id="requireStrongPasswords" checked>
                                        <label for="requireStrongPasswords">Require strong passwords (min 8 chars, uppercase, number, special char)</label>
                                    </div>
                                    <div class="custom-checkbox">
                                        <input type="checkbox" id="passwordExpiration" checked>
                                        <label for="passwordExpiration">Password expires every 90 days</label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Login Attempts</label>
                                    <input type="number" class="form-control" id="maxLoginAttempts" value="5">
                                    <small class="text-muted">Maximum failed login attempts before account lock</small>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Session Timeout</label>
                                    <input type="number" class="form-control" id="sessionTimeout" value="30">
                                    <small class="text-muted">Minutes of inactivity before automatic logout</small>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">IP Whitelist</label>
                                    <textarea class="form-control" id="ipWhitelist" rows="3" placeholder="Enter allowed IP addresses (one per line)"></textarea>
                                    <small class="text-muted">Only these IPs will be allowed to access admin panel (leave empty to allow all)</small>
                                </div>
                            </form>
                        </div>
                    </div>

                    <div class="card mt-4">
                        <div class="card-header">
                            <h3>Security Logs</h3>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table" id="securityLogsTable">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Event</th>
                                            <th>IP Address</th>
                                            <th>User Agent</th>
                                            <th>Date</th>
                                            <th>Status</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Data will be loaded via JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add User Modal -->
    <div class="modal" id="addUserModal">
        <div class="modal-dialog">
            <div class="modal-header">
                <h3>Add New User</h3>
                <button class="close" id="closeAddUserModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="addUserForm">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">First Name</label>
                                <input type="text" class="form-control" id="userFirstName" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">Last Name</label>
                                <input type="text" class="form-control" id="userLastName" required>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email Address</label>
                        <input type="email" class="form-control" id="userEmail" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" class="form-control" id="userPassword" required>
                        <small class="text-muted">Minimum 8 characters with uppercase, number, and special character</small>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Confirm Password</label>
                        <input type="password" class="form-control" id="userConfirmPassword" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Phone Number</label>
                        <input type="tel" class="form-control" id="userPhone">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Country</label>
                        <select class="form-control form-select" id="userCountry">
                            <option value="">Select Country</option>
                            <option value="US">United States</option>
                            <option value="GB">United Kingdom</option>
                            <option value="CA">Canada</option>
                            <option value="AU">Australia</option>
                            <!-- More countries will be loaded via JavaScript -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Initial Balance</label>
                        <input type="number" class="form-control" id="userBalance" value="0" step="0.01">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Account Status</label>
                        <select class="form-control form-select" id="userStatus">
                            <option value="active">Active</option>
                            <option value="pending">Pending</option>
                            <option value="suspended">Suspended</option>
                            <option value="banned">Banned</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Profile Photo</label>
                        <div class="file-input">
                            <input type="file" id="userPhoto" accept="image/*">
                            <label for="userPhoto" class="file-input-label">
                                <i class="fas fa-upload"></i> Upload Photo
                            </label>
                        </div>
                        <small class="text-muted">Recommended size: 200x200px</small>
                    </div>
                </form>
                <div class="alert alert-danger mt-3" id="addUserError" style="display: none;">
                    <i class="fas fa-exclamation-circle"></i>
                    <div id="addUserErrorText"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline-primary" id="cancelAddUser">Cancel</button>
                <button class="btn btn-primary" id="submitAddUser">Add User</button>
            </div>
        </div>
    </div>

    <!-- Edit User Modal -->
    <div class="modal" id="editUserModal">
        <div class="modal-dialog">
            <div class="modal-header">
                <h3>Edit User</h3>
                <button class="close" id="closeEditUserModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="editUserForm">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">First Name</label>
                                <input type="text" class="form-control" id="editUserFirstName" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">Last Name</label>
                                <input type="text" class="form-control" id="editUserLastName" required>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email Address</label>
                        <input type="email" class="form-control" id="editUserEmail" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Phone Number</label>
                        <input type="tel" class="form-control" id="editUserPhone">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Country</label>
                        <select class="form-control form-select" id="editUserCountry">
                            <option value="">Select Country</option>
                            <option value="US">United States</option>
                            <option value="GB">United Kingdom</option>
                            <option value="CA">Canada</option>
                            <option value="AU">Australia</option>
                            <!-- More countries will be loaded via JavaScript -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Balance</label>
                        <input type="number" class="form-control" id="editUserBalance" value="0" step="0.01">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Account Status</label>
                        <select class="form-control form-select" id="editUserStatus">
                            <option value="active">Active</option>
                            <option value="pending">Pending</option>
                            <option value="suspended">Suspended</option>
                            <option value="banned">Banned</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">KYC Status</label>
                        <select class="form-control form-select" id="editUserKYCStatus">
                            <option value="pending">Pending</option>
                            <option value="verified">Verified</option>
                            <option value="rejected">Rejected</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Profile Photo</label>
                        <div class="file-input">
                            <input type="file" id="editUserPhoto" accept="image/*">
                            <label for="editUserPhoto" class="file-input-label">
                                <i class="fas fa-upload"></i> Upload New Photo
                            </label>
                        </div>
                        <small class="text-muted">Recommended size: 200x200px</small>
                    </div>
                </form>
                <div class="alert alert-danger mt-3" id="editUserError" style="display: none;">
                    <i class="fas fa-exclamation-circle"></i>
                    <div id="editUserErrorText"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline-danger" id="deleteUserBtn">Delete User</button>
                <button class="btn btn-primary" id="submitEditUser">Save Changes</button>
            </div>
        </div>
    </div>

    <!-- Add Investment Modal -->
    <div class="modal" id="addInvestmentModal">
        <div class="modal-dialog">
            <div class="modal-header">
                <h3>Add Investment</h3>
                <button class="close" id="closeAddInvestmentModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="addInvestmentForm">
                    <div class="form-group">
                        <label class="form-label">User</label>
                        <select class="form-control form-select" id="investmentUser" required>
                            <option value="">Select User</option>
                            <!-- Users will be loaded via JavaScript -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Investment Plan</label>
                        <select class="form-control form-select" id="investmentPlan" required>
                            <option value="">Select Plan</option>
                            <option value="starter">Starter Plan - 10% ROI</option>
                            <option value="premium">Premium Plan - 25% ROI</option>
                            <option value="professional">Professional Plan - 50% ROI</option>
                            <option value="vip">VIP Plan - 75% ROI</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Amount</label>
                        <input type="number" class="form-control" id="investmentAmount" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Duration (Days)</label>
                        <input type="number" class="form-control" id="investmentDuration" value="30" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Start Date</label>
                        <input type="date" class="form-control" id="investmentStartDate" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Status</label>
                        <select class="form-control form-select" id="investmentStatus">
                            <option value="active">Active</option>
                            <option value="pending">Pending</option>
                            <option value="completed">Completed</option>
                            <option value="cancelled">Cancelled</option>
                        </select>
                    </div>
                </form>
                <div class="alert alert-danger mt-3" id="addInvestmentError" style="display: none;">
                    <i class="fas fa-exclamation-circle"></i>
                    <div id="addInvestmentErrorText"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline-primary" id="cancelAddInvestment">Cancel</button>
                <button class="btn btn-primary" id="submitAddInvestment">Add Investment</button>
            </div>
        </div>
    </div>

    <!-- Edit Investment Modal -->
    <div class="modal" id="editInvestmentModal">
        <div class="modal-dialog">
            <div class="modal-header">
                <h3>Edit Investment</h3>
                <button class="close" id="closeEditInvestmentModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="editInvestmentForm">
                    <div class="form-group">
                        <label class="form-label">User</label>
                        <input type="text" class="form-control" id="editInvestmentUser" disabled>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Investment Plan</label>
                        <select class="form-control form-select" id="editInvestmentPlan" required>
                            <option value="starter">Starter Plan - 10% ROI</option>
                            <option value="premium">Premium Plan - 25% ROI</option>
                            <option value="professional">Professional Plan - 50% ROI</option>
                            <option value="vip">VIP Plan - 75% ROI</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Amount</label>
                        <input type="number" class="form-control" id="editInvestmentAmount" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Duration (Days)</label>
                        <input type="number" class="form-control" id="editInvestmentDuration" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Start Date</label>
                        <input type="date" class="form-control" id="editInvestmentStartDate" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">End Date</label>
                        <input type="date" class="form-control" id="editInvestmentEndDate" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Profit</label>
                        <input type="number" class="form-control" id="editInvestmentProfit" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Status</label>
                        <select class="form-control form-select" id="editInvestmentStatus">
                            <option value="active">Active</option>
                            <option value="pending">Pending</option>
                            <option value="completed">Completed</option>
                            <option value="cancelled">Cancelled</option>
                        </select>
                    </div>
                </form>
                <div class="alert alert-danger mt-3" id="editInvestmentError" style="display: none;">
                    <i class="fas fa-exclamation-circle"></i>
                    <div id="editInvestmentErrorText"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline-danger" id="deleteInvestmentBtn">Delete Investment</button>
                <button class="btn btn-primary" id="submitEditInvestment">Save Changes</button>
            </div>
        </div>
    </div>

    <!-- Process Withdrawal Modal -->
    <div class="modal" id="processWithdrawalModal">
        <div class="modal-dialog">
            <div class="modal-header">
                <h3>Process Withdrawal</h3>
                <button class="close" id="closeProcessWithdrawalModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="processWithdrawalForm">
                    <div class="form-group">
                        <label class="form-label">User</label>
                        <input type="text" class="form-control" id="withdrawalUser" disabled>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Amount</label>
                        <input type="text" class="form-control" id="withdrawalAmount" disabled>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Wallet Address</label>
                        <input type="text" class="form-control" id="withdrawalWallet" disabled>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Transaction Hash</label>
                        <input type="text" class="form-control" id="withdrawalHash" placeholder="Enter transaction hash">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Status</label>
                        <select class="form-control form-select" id="withdrawalStatus">
                            <option value="processing">Processing</option>
                            <option value="completed">Completed</option>
                            <option value="failed">Failed</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Notes</label>
                        <textarea class="form-control" id="withdrawalNotes" rows="3" placeholder="Enter any notes"></textarea>
                    </div>
                </form>
                <div class="alert alert-danger mt-3" id="processWithdrawalError" style="display: none;">
                    <i class="fas fa-exclamation-circle"></i>
                    <div id="processWithdrawalErrorText"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline-primary" id="cancelProcessWithdrawal">Cancel</button>
                <button class="btn btn-primary" id="submitProcessWithdrawal">Process Withdrawal</button>
            </div>
        </div>
    </div>

    <!-- Verify Deposit Modal -->
    <div class="modal" id="verifyDepositModal">
        <div class="modal-dialog">
            <div class="modal-header">
                <h3>Verify Deposit</h3>
                <button class="close" id="closeVerifyDepositModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="verifyDepositForm">
                    <div class="form-group">
                        <label class="form-label">User</label>
                        <input type="text" class="form-control" id="depositUser" disabled>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Amount</label>
                        <input type="text" class="form-control" id="depositAmount" disabled>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Payment Method</label>
                        <input type="text" class="form-control" id="depositMethod" disabled>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Transaction ID</label>
                        <input type="text" class="form-control" id="depositTransactionId" disabled>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Status</label>
                        <select class="form-control form-select" id="depositStatus">
                            <option value="pending">Pending</option>
                            <option value="completed">Completed</option>
                            <option value="failed">Failed</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Notes</label>
                        <textarea class="form-control" id="depositNotes" rows="3" placeholder="Enter any notes"></textarea>
                    </div>
                </form>
                <div class="alert alert-danger mt-3" id="verifyDepositError" style="display: none;">
                    <i class="fas fa-exclamation-circle"></i>
                    <div id="verifyDepositErrorText"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline-primary" id="cancelVerifyDeposit">Cancel</button>
                <button class="btn btn-primary" id="submitVerifyDeposit">Verify Deposit</button>
            </div>
        </div>
    </div>

    <!-- New Ticket Modal -->
    <div class="modal" id="newTicketModal">
        <div class="modal-dialog">
            <div class="modal-header">
                <h3>Create New Ticket</h3>
                <button class="close" id="closeNewTicketModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="newTicketForm">
                    <div class="form-group">
                        <label class="form-label">User</label>
                        <select class="form-control form-select" id="ticketUser" required>
                            <option value="">Select User</option>
                            <!-- Users will be loaded via JavaScript -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Subject</label>
                        <input type="text" class="form-control" id="ticketSubject" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Category</label>
                        <select class="form-control form-select" id="ticketCategory" required>
                            <option value="general">General Inquiry</option>
                            <option value="technical">Technical Support</option>
                            <option value="billing">Billing Issue</option>
                            <option value="account">Account Issue</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Priority</label>
                        <select class="form-control form-select" id="ticketPriority" required>
                            <option value="low">Low</option>
                            <option value="medium">Medium</option>
                            <option value="high">High</option>
                            <option value="urgent">Urgent</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Message</label>
                        <textarea class="form-control" id="ticketMessage" rows="5" required></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Attachments</label>
                        <div class="file-input">
                            <input type="file" id="ticketAttachments" multiple>
                            <label for="ticketAttachments" class="file-input-label">
                                <i class="fas fa-paperclip"></i> Add Attachments
                            </label>
                        </div>
                        <small class="text-muted">Maximum file size: 5MB</small>
                    </div>
                </form>
                <div class="alert alert-danger mt-3" id="newTicketError" style="display: none;">
                    <i class="fas fa-exclamation-circle"></i>
                    <div id="newTicketErrorText"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline-primary" id="cancelNewTicket">Cancel</button>
                <button class="btn btn-primary" id="submitNewTicket">Create Ticket</button>
            </div>
        </div>
    </div>

    <!-- View Ticket Modal -->
    <div class="modal" id="viewTicketModal">
        <div class="modal-dialog" style="max-width: 800px;">
            <div class="modal-header">
                <h3>Ticket #<span id="ticketId"></span></h3>
                <button class="close" id="closeViewTicketModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="ticket-header">
                    <div class="ticket-meta">
                        <div class="ticket-user">
                            <img src="https://randomuser.me/api/portraits/men/1.jpg" alt="User" class="ticket-avatar">
                            <div class="ticket-user-info">
                                <h5 id="ticketUserName">John Doe</h5>
                                <p id="ticketUserEmail">john@example.com</p>
                            </div>
                        </div>
                        <div class="ticket-details">
                            <div class="ticket-detail">
                                <span class="detail-label">Status:</span>
                                <span class="detail-value" id="ticketStatus">Open</span>
                            </div>
                            <div class="ticket-detail">
                                <span class="detail-label">Priority:</span>
                                <span class="detail-value" id="ticketPriority">High</span>
                            </div>
                            <div class="ticket-detail">
                                <span class="detail-label">Category:</span>
                                <span class="detail-value" id="ticketCategory">Technical</span>
                            </div>
                            <div class="ticket-detail">
                                <span class="detail-label">Created:</span>
                                <span class="detail-value" id="ticketCreated">2023-06-15 14:30</span>
                            </div>
                        </div>
                    </div>
                    <div class="ticket-subject">
                        <h4 id="ticketSubject">Unable to withdraw funds</h4>
                    </div>
                </div>

                <div class="ticket-conversation">
                    <div class="ticket-message">
                        <div class="message-header">
                            <img src="https://randomuser.me/api/portraits/men/1.jpg" alt="User" class="message-avatar">
                            <div class="message-info">
                                <h5>John Doe</h5>
                                <p>2023-06-15 14:30</p>
                            </div>
                        </div>
                        <div class="message-body">
                            <p id="ticketInitialMessage">Hello, I'm unable to withdraw my funds from the platform. I keep getting an error message saying "Withdrawal failed". I've tried multiple times but it's not working. Please help.</p>
                            <div class="message-attachments" id="ticketInitialAttachments">
                                <!-- Attachments will be loaded here -->
                            </div>
                        </div>
                    </div>

                    <div class="ticket-replies" id="ticketReplies">
                        <!-- Replies will be loaded here -->
                    </div>
                </div>

                <div class="ticket-reply-form">
                    <form id="ticketReplyForm">
                        <div class="form-group">
                            <label class="form-label">Reply</label>
                            <textarea class="form-control" id="ticketReplyMessage" rows="3" placeholder="Type your reply here..." required></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Status</label>
                            <select class="form-control form-select" id="ticketReplyStatus">
                                <option value="open">Open</option>
                                <option value="pending">Pending</option>
                                <option value="resolved">Resolved</option>
                                <option value="closed">Closed</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Attachments</label>
                            <div class="file-input">
                                <input type="file" id="ticketReplyAttachments" multiple>
                                <label for="ticketReplyAttachments" class="file-input-label">
                                    <i class="fas fa-paperclip"></i> Add Attachments
                                </label>
                            </div>
                            <small class="text-muted">Maximum file size: 5MB</small>
                        </div>
                    </form>
                    <div class="alert alert-danger mt-3" id="ticketReplyError" style="display: none;">
                        <i class="fas fa-exclamation-circle"></i>
                        <div id="ticketReplyErrorText"></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline-primary" id="cancelTicketReply">Cancel</button>
                <button class="btn btn-primary" id="submitTicketReply">Submit Reply</button>
            </div>
        </div>
    </div>

    <!-- Send Notification Modal -->
    <div class="modal" id="sendNotificationModal">
        <div class="modal-dialog">
            <div class="modal-header">
                <h3>Send Notification</h3>
                <button class="close" id="closeSendNotificationModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="sendNotificationForm">
                    <div class="form-group">
                        <label class="form-label">Title</label>
                        <input type="text" class="form-control" id="notificationTitle" placeholder="Enter notification title" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Message</label>
                        <textarea class="form-control" id="notificationMessage" rows="5" placeholder="Enter notification message" required></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Recipients</label>
                        <select class="form-control form-select" id="notificationRecipients" multiple="multiple">
                            <option value="all">All Users</option>
                            <option value="active">Active Users</option>
                            <option value="inactive">Inactive Users</option>
                            <option value="investors">Investors</option>
                            <option value="non-investors">Non-Investors</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Notification Type</label>
                        <select class="form-control form-select" id="notificationType">
                            <option value="info">Information</option>
                            <option value="warning">Warning</option>
                            <option value="success">Success</option>
                            <option value="error">Error</option>
                            <option value="promotion">Promotion</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Send Method</label>
                        <div class="custom-checkbox">
                            <input type="checkbox" id="sendInApp" checked>
                            <label for="sendInApp">In-App Notification</label>
                        </div>
                        <div class="custom-checkbox">
                            <input type="checkbox" id="sendEmail">
                            <label for="sendEmail">Email</label>
                        </div>
                        <div class="custom-checkbox">
                            <input type="checkbox" id="sendSMS">
                            <label for="sendSMS">SMS</label>
                        </div>
                    </div>
                </form>
                <div class="alert alert-danger mt-3" id="sendNotificationError" style="display: none;">
                    <i class="fas fa-exclamation-circle"></i>
                    <div id="sendNotificationErrorText"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline-primary" id="cancelSendNotification">Cancel</button>
                <button class="btn btn-primary" id="submitSendNotification">Send Notification</button>
            </div>
        </div>
    </div>

    <!-- Create Promotion Modal -->
    <div class="modal" id="createPromotionModal">
        <div class="modal-dialog">
            <div class="modal-header">
                <h3>Create Promotion</h3>
                <button class="close" id="closeCreatePromotionModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="createPromotionForm">
                    <div class="form-group">
                        <label class="form-label">Title</label>
                        <input type="text" class="form-control" id="promotionTitle" placeholder="Enter promotion title" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Description</label>
                        <textarea class="form-control" id="promotionDescription" rows="5" placeholder="Enter promotion description" required></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Banner Image</label>
                        <div class="file-input">
                            <input type="file" id="promotionBanner" accept="image/*">
                            <label for="promotionBanner" class="file-input-label">
                                <i class="fas fa-upload"></i> Upload Banner
                            </label>
                        </div>
                        <small class="text-muted">Recommended size: 1200x400px</small>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">Start Date</label>
                                <input type="datetime-local" class="form-control" id="promotionStartDate" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">End Date</label>
                                <input type="datetime-local" class="form-control" id="promotionEndDate" required>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Target Audience</label>
                        <select class="form-control form-select" id="promotionAudience" multiple="multiple">
                            <option value="all">All Users</option>
                            <option value="new">New Users</option>
                            <option value="existing">Existing Users</option>
                            <option value="investors">Investors</option>
                            <option value="non-investors">Non-Investors</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Promotion Type</label>
                        <select class="form-control form-select" id="promotionType">
                            <option value="bonus">Deposit Bonus</option>
                            <option value="discount">Fee Discount</option>
                            <option value="contest">Contest</option>
                            <option value="referral">Referral Bonus</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Status</label>
                        <select class="form-control form-select" id="promotionStatus">
                            <option value="draft">Draft</option>
                            <option value="active">Active</option>
                            <option value="paused">Paused</option>
                            <option value="ended">Ended</option>
                        </select>
                    </div>
                </form>
                <div class="alert alert-danger mt-3" id="createPromotionError" style="display: none;">
                    <i class="fas fa-exclamation-circle"></i>
                    <div id="createPromotionErrorText"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline-primary" id="cancelCreatePromotion">Cancel</button>
                <button class="btn btn-primary" id="submitCreatePromotion">Create Promotion</button>
            </div>
        </div>
    </div>

    <!-- View Promotion Modal -->
    <div class="modal" id="viewPromotionModal">
        <div class="modal-dialog" style="max-width: 800px;">
            <div class="modal-header">
                <h3>Promotion Details</h3>
                <button class="close" id="closeViewPromotionModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="promotion-banner">
                    <img src="https://via.placeholder.com/1200x400" alt="Promotion Banner" class="img-fluid" id="promotionViewBanner">
                </div>
                <div class="promotion-header mt-4">
                    <h2 id="promotionViewTitle">Summer Deposit Bonus</h2>
                    <div class="promotion-meta">
                        <span class="badge" id="promotionViewStatus">Active</span>
                        <span id="promotionViewDates">June 1 - June 30, 2023</span>
                    </div>
                </div>
                <div class="promotion-content mt-4">
                    <h4>Description</h4>
                    <p id="promotionViewDescription">Get a 20% bonus on all deposits made during the month of June. The bonus will be credited to your account immediately after the deposit is confirmed.</p>
                    
                    <h4 class="mt-4">Details</h4>
                    <div class="promotion-details">
                        <div class="promotion-detail">
                            <span class="detail-label">Type:</span>
                            <span class="detail-value" id="promotionViewType">Deposit Bonus</span>
                        </div>
                        <div class="promotion-detail">
                            <span class="detail-label">Target Audience:</span>
                            <span class="detail-value" id="promotionViewAudience">All Users</span>
                        </div>
                        <div class="promotion-detail">
                            <span class="detail-label">Start Date:</span>
                            <span class="detail-value" id="promotionViewStartDate">June 1, 2023 00:00</span>
                        </div>
                        <div class="promotion-detail">
                            <span class="detail-label">End Date:</span>
                            <span class="detail-value" id="promotionViewEndDate">June 30, 2023 23:59</span>
                        </div>
                        <div class="promotion-detail">
                            <span class="detail-label">Created By:</span>
                            <span class="detail-value" id="promotionViewCreator">Admin User</span>
                        </div>
                        <div class="promotion-detail">
                            <span class="detail-label">Created At:</span>
                            <span class="detail-value" id="promotionViewCreated">May 25, 2023 14:30</span>
                        </div>
                    </div>
                    
                    <h4 class="mt-4">Statistics</h4>
                    <div class="promotion-stats">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="promotionViewParticipants">1,245</h3>
                                <p>Participants</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-money-bill-wave"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="promotionViewDeposits">$245,678</h3>
                                <p>Total Deposits</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-gift"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="promotionViewBonuses">$49,135</h3>
                                <p>Total Bonuses</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline-primary" id="editPromotionBtn">Edit Promotion</button>
                <button class="btn btn-primary" id="closeViewPromotion">Close</button>
            </div>
        </div>
    </div>

    <!-- Notification Panel -->
    <div class="notification-panel" id="notificationPanel">
        <div class="notification-header">
            <h4>Notifications</h4>
            <span class="badge">3 New</span>
        </div>
        <div class="notification-list">
            <div class="notification-item unread">
                <div class="notification-icon">
                    <i class="fas fa-money-bill-wave"></i>
                </div>
                <div class="notification-content">
                    <div class="notification-title">New Withdrawal Request</div>
                    <div class="notification-message">User John Doe has requested a withdrawal of $500</div>
                    <div class="notification-time">2 minutes ago</div>
                </div>
            </div>
            <div class="notification-item unread">
                <div class="notification-icon">
                    <i class="fas fa-ticket-alt"></i>
                </div>
                <div class="notification-content">
                    <div class="notification-title">New Support Ticket</div>
                    <div class="notification-message">User Jane Smith has opened a new support ticket</div>
                    <div class="notification-time">15 minutes ago</div>
                </div>
            </div>
            <div class="notification-item unread">
                <div class="notification-icon">
                    <i class="fas fa-user-plus"></i>
                </div>
                <div class="notification-content">
                    <div class="notification-title">New User Registered</div>
                    <div class="notification-message">Robert Johnson has registered on the platform</div>
                    <div class="notification-time">1 hour ago</div>
                </div>
            </div>
            <div class="notification-item">
                <div class="notification-icon">
                    <i class="fas fa-chart-line"></i>
                </div>
                <div class="notification-content">
                    <div class="notification-title">Daily Report</div>
                    <div class="notification-message">Your daily platform report is ready</div>
                    <div class="notification-time">Today, 8:00 AM</div>
                </div>
            </div>
            <div class="notification-item">
                <div class="notification-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <div class="notification-content">
                    <div class="notification-title">System Warning</div>
                    <div class="notification-message">Server load is above 80%</div>
                    <div class="notification-time">Yesterday, 5:30 PM</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Chat Widget -->
    <div class="chat-widget" id="chatWidget">
        <div class="chat-header">
            <h4><i class="fas fa-comments"></i> Live Chat</h4>
            <button class="btn btn-sm btn-outline-danger" id="closeChatWidget">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="chat-body">
            <div class="chat-message admin">
                <img src="https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1" alt="Admin" class="chat-avatar">
                <div class="chat-content">
                    <div class="chat-bubble">
                        Hello! How can I help you today?
                    </div>
                    <div class="chat-time">
                        10:30 AM
                    </div>
                </div>
            </div>
            <div class="chat-message user">
                <div class="chat-content">
                    <div class="chat-bubble">
                        Hi, I have a question about my recent deposit.
                    </div>
                    <div class="chat-time">
                        10:32 AM
                    </div>
                </div>
                <img src="https://randomuser.me/api/portraits/men/1.jpg" alt="User" class="chat-avatar">
            </div>
            <div class="chat-message admin">
                <img src="https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1" alt="Admin" class="chat-avatar">
                <div class="chat-content">
                    <div class="chat-bubble">
                        Sure, what would you like to know about your deposit?
                    </div>
                    <div class="chat-time">
                        10:33 AM
                    </div>
                </div>
            </div>
        </div>
        <div class="chat-footer">
            <div class="chat-input">
                <input type="text" placeholder="Type your message..." id="chatMessageInput">
                <button class="btn btn-primary" id="sendChatMessage">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Notification Badge -->
    <div class="notification-badge" id="notificationBadge">
        <i class="fas fa-bell"></i>
    </div>

    <!-- Chat Badge -->
    <div class="notification-badge" style="right: 80px; background-color: var(--purple);" id="chatBadge">
        <i class="fas fa-comments"></i>
    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    
    <!-- DataTables -->
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.bootstrap5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.print.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.5.0/js/dataTables.responsive.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.5.0/js/responsive.bootstrap5.min.js"></script>
    
    <!-- Select2 -->
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- AOS Animation -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
    <!-- Toastr -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    
    <!-- Moment.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
    
    <!-- Custom Script -->
    <script>
        // Initialize AOS animation
        AOS.init({
            duration: 800,
            easing: 'ease-in-out',
            once: true
        });

        // Global variables
        let authToken = null;
        let adminData = null;
        let socket = null;
        
        // DOM Ready
        $(document).ready(function() {
            // Check if admin is already logged in
            checkAdminSession();
            
            // Initialize Select2
            $('.form-select').select2({
                width: '100%',
                dropdownParent: $('.modal')
            });
            
            // Initialize DataTables
            initDataTables();
            
            // Event listeners
            setupEventListeners();
            
            // Load initial data
            if ($('#adminContainer').is(':visible')) {
                loadDashboardData();
            }
        });
        
        // Check admin session
        function checkAdminSession() {
            const token = localStorage.getItem('adminToken');
            if (token) {
                verifyAdminToken(token);
            }
        }
        
        // Verify admin token
        function verifyAdminToken(token) {
            showLoading();
            
            $.ajax({
                url: 'https://website-backendd-1.onrender.com/api/admin/auth/verify',
                type: 'GET',
                headers: {
                    'Authorization': 'Bearer ' + token
                },
                success: function(response) {
                    hideLoading();
                    if (response.success && response.data.isValid) {
                        authToken = token;
                        adminData = response.data.admin;
                        showAdminDashboard();
                    } else {
                        localStorage.removeItem('adminToken');
                        toastr.error('Session expired. Please login again.');
                    }
                },
                error: function(xhr) {
                    hideLoading();
                    localStorage.removeItem('adminToken');
                    if (xhr.status === 401) {
                        toastr.error('Session expired. Please login again.');
                    } else {
                        toastr.error('Unable to verify session. Please try again.');
                    }
                }
            });
        }
        
        // Show admin dashboard
        function showAdminDashboard() {
            $('#loginContainer').hide();
            $('#adminContainer').show();
            
            // Set admin info
            if (adminData) {
                $('#adminName').text(adminData.name || 'Admin');
                $('#adminGreetingName').text(adminData.name || 'Admin');
                
                if (adminData.avatar) {
                    $('#adminAvatar').attr('src', adminData.avatar);
                }
            }
            
            // Connect to WebSocket
            connectWebSocket();
            
            // Load initial data
            loadDashboardData();
        }
        
        // Connect to WebSocket
        function connectWebSocket() {
            // In a real implementation, you would connect to your WebSocket server
            // This is a placeholder for the actual WebSocket connection
            /*
            socket = new WebSocket('wss://website-backendd-1.onrender.com/ws/admin');
            
            socket.onopen = function(e) {
                console.log('WebSocket connection established');
                // Authenticate with the server
                socket.send(JSON.stringify({
                    type: 'auth',
                    token: authToken
                }));
            };
            
            socket.onmessage = function(event) {
                const data = JSON.parse(event.data);
                handleWebSocketMessage(data);
            };
            
            socket.onclose = function(event) {
                if (event.wasClean) {
                    console.log(`WebSocket connection closed cleanly, code=${event.code}, reason=${event.reason}`);
                } else {
                    console.log('WebSocket connection died');
                    // Attempt to reconnect
                    setTimeout(connectWebSocket, 5000);
                }
            };
            
            socket.onerror = function(error) {
                console.log('WebSocket error:', error);
            };
            */
        }
        
        // Handle WebSocket messages
        function handleWebSocketMessage(data) {
            switch (data.type) {
                case 'notification':
                    showNotification(data);
                    break;
                case 'chat':
                    handleChatMessage(data);
                    break;
                case 'stats_update':
                    updateDashboardStats(data);
                    break;
                case 'new_user':
                    handleNewUser(data);
                    break;
                case 'new_withdrawal':
                    handleNewWithdrawal(data);
                    break;
                case 'new_ticket':
                    handleNewTicket(data);
                    break;
                default:
                    console.log('Unknown message type:', data.type);
            }
        }
        
        // Show notification
        function showNotification(data) {
            // Play notification sound
            const audio = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-alarm-digital-clock-beep-989.mp3');
            audio.play();
            
            // Show toast notification
            toastr.info(data.message, data.title, {
                timeOut: 5000,
                positionClass: 'toast-bottom-right'
            });
            
            // Update notification badge
            const badge = $('#notificationsIcon .badge');
            const count = parseInt(badge.text()) || 0;
            badge.text(count + 1);
            
            // Add to notification panel
            const notificationPanel = $('#notificationPanel .notification-list');
            notificationPanel.prepend(`
                <div class="notification-item unread">
                    <div class="notification-icon">
                        <i class="${data.icon || 'fas fa-bell'}"></i>
                    </div>
                    <div class="notification-content">
                        <div class="notification-title">${data.title}</div>
                        <div class="notification-message">${data.message}</div>
                        <div class="notification-time">Just now</div>
                    </div>
                </div>
            `);
            
            // Update notification header badge
            const headerBadge = $('#notificationPanel .notification-header .badge');
            const headerCount = parseInt(headerBadge.text()) || 0;
            headerBadge.text(headerCount + 1);
        }
        
        // Initialize DataTables
        function initDataTables() {
            // Users Table
            $('#usersTable').DataTable({
                responsive: true,
                ajax: {
                    url: 'https://website-backendd-1.onrender.com/api/admin/users',
                    type: 'GET',
                    headers: {
                        'Authorization': 'Bearer ' + authToken
                    },
                    dataSrc: 'data'
                },
                columns: [
                    { data: 'id' },
                    { 
                        data: null,
                        render: function(data) {
                            return `${data.first_name} ${data.last_name}`;
                        }
                    },
                    { data: 'email' },
                    { 
                        data: 'balance',
                        render: function(data) {
                            return `$${parseFloat(data).toFixed(2)}`;
                        }
                    },
                    { 
                        data: 'status',
                        render: function(data) {
                            let badgeClass = '';
                            switch(data) {
                                case 'active':
                                    badgeClass = 'badge-success';
                                    break;
                                case 'pending':
                                    badgeClass = 'badge-warning';
                                    break;
                                case 'suspended':
                                    badgeClass = 'badge-danger';
                                    break;
                                case 'banned':
                                    badgeClass = 'badge-secondary';
                                    break;
                                default:
                                    badgeClass = 'badge-info';
                            }
                            return `<span class="badge ${badgeClass}">${data}</span>`;
                        }
                    },
                    { 
                        data: 'created_at',
                        render: function(data) {
                            return moment(data).format('YYYY-MM-DD HH:mm');
                        }
                    },
                    {
                        data: null,
                        render: function(data) {
                            return `
                                <div class="btn-group">
                                    <button class="btn btn-sm btn-outline-primary view-user" data-id="${data.id}">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-warning edit-user" data-id="${data.id}">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-danger delete-user" data-id="${data.id}">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            `;
                        }
                    }
                ]
            });
            
            // Investments Table
            $('#investmentsTable').DataTable({
                responsive: true,
                ajax: {
                    url: 'https://website-backendd-1.onrender.com/api/admin/investments',
                    type: 'GET',
                    headers: {
                        'Authorization': 'Bearer ' + authToken
                    },
                    dataSrc: 'data'
                },
                columns: [
                    { data: 'id' },
                    { 
                        data: 'user',
                        render: function(data) {
                            return `${data.first_name} ${data.last_name}`;
                        }
                    },
                    { data: 'plan.name' },
                    { 
                        data: 'amount',
                        render: function(data) {
                            return `$${parseFloat(data).toFixed(2)}`;
                        }
                    },
                    { 
                        data: 'profit',
                        render: function(data) {
                            return `$${parseFloat(data).toFixed(2)}`;
                        }
                    },
                    { 
                        data: 'start_date',
                        render: function(data) {
                            return moment(data).format('YYYY-MM-DD');
                        }
                    },
                    { 
                        data: 'end_date',
                        render: function(data) {
                            return moment(data).format('YYYY-MM-DD');
                        }
                    },
                    { 
                        data: 'status',
                        render: function(data) {
                            let badgeClass = '';
                            switch(data) {
                                case 'active':
                                    badgeClass = 'badge-success';
                                    break;
                                case 'pending':
                                    badgeClass = 'badge-warning';
                                    break;
                                case 'completed':
                                    badgeClass = 'badge-primary';
                                    break;
                                case 'cancelled':
                                    badgeClass = 'badge-secondary';
                                    break;
                                default:
                                    badgeClass = 'badge-info';
                            }
                            return `<span class="badge ${badgeClass}">${data}</span>`;
                        }
                    },
                    {
                        data: null,
                        render: function(data) {
                            return `
                                <div class="btn-group">
                                    <button class="btn btn-sm btn-outline-primary view-investment" data-id="${data.id}">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-warning edit-investment" data-id="${data.id}">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-danger delete-investment" data-id="${data.id}">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            `;
                        }
                    }
                ]
            });
            
            // Transactions Table
            $('#transactionsTable').DataTable({
                responsive: true,
                ajax: {
                    url: 'https://website-backendd-1.onrender.com/api/admin/transactions',
                    type: 'GET',
                    headers: {
                        'Authorization': 'Bearer ' + authToken
                    },
                    dataSrc: 'data'
                },
                columns: [
                    { data: 'id' },
                    { 
                        data: 'user',
                        render: function(data) {
                            return `${data.first_name} ${data.last_name}`;
                        }
                    },
                    { 
                        data: 'type',
                        render: function(data) {
                            return data.charAt(0).toUpperCase() + data.slice(1);
                        }
                    },
                    { 
                        data: 'amount',
                        render: function(data) {
                            return `$${parseFloat(data).toFixed(2)}`;
                        }
                    },
                    { 
                        data: 'method',
                        render: function(data) {
                            return data.charAt(0).toUpperCase() + data.slice(1);
                        }
                    },
                    { 
                        data: 'created_at',
                        render: function(data) {
                            return moment(data).format('YYYY-MM-DD HH:mm');
                        }
                    },
                    { 
                        data: 'status',
                        render: function(data) {
                            let badgeClass = '';
                            switch(data) {
                                case 'completed':
                                    badgeClass = 'badge-success';
                                    break;
                                case 'pending':
                                    badgeClass = 'badge-warning';
                                    break;
                                case 'failed':
                                    badgeClass = 'badge-danger';
                                    break;
                                default:
                                    badgeClass = 'badge-info';
                            }
                            return `<span class="badge ${badgeClass}">${data}</span>`;
                        }
                    },
                    {
                        data: null,
                        render: function(data) {
                            let buttons = '';
                            if (data.type === 'deposit' && data.status === 'pending') {
                                buttons += `<button class="btn btn-sm btn-outline-success verify-deposit" data-id="${data.id}">
                                    <i class="fas fa-check"></i> Verify
                                </button>`;
                            }
                            if (data.type === 'withdrawal' && data.status === 'pending') {
                                buttons += `<button class="btn btn-sm btn-outline-success process-withdrawal" data-id="${data.id}">
                                    <i class="fas fa-check"></i> Process
                                </button>`;
                            }
                            return buttons;
                        }
                    }
                ]
            });
            
            // Withdrawals Table
            $('#withdrawalsTable').DataTable({
                responsive: true,
                ajax: {
                    url: 'https://website-backendd-1.onrender.com/api/admin/withdrawals/pending',
                    type: 'GET',
                    headers: {
                        'Authorization': 'Bearer ' + authToken
                    },
                    dataSrc: 'data'
                },
                columns: [
                    { data: 'id' },
                    { 
                        data: 'user',
                        render: function(data) {
                            return `${data.first_name} ${data.last_name}`;
                        }
                    },
                    { 
                        data: 'amount',
                        render: function(data) {
                            return `$${parseFloat(data).toFixed(2)}`;
                        }
                    },
                    { data: 'wallet_address' },
                    { 
                        data: 'created_at',
                        render: function(data) {
                            return moment(data).format('YYYY-MM-DD HH:mm');
                        }
                    },
                    {
                        data: null,
                        render: function(data) {
                            return `
                                <div class="btn-group">
                                    <button class="btn btn-sm btn-outline-success process-withdrawal" data-id="${data.id}">
                                        <i class="fas fa-check"></i> Process
                                    </button>
                                    <button class="btn btn-sm btn-outline-danger reject-withdrawal" data-id="${data.id}">
                                        <i class="fas fa-times"></i> Reject
                                    </button>
                                </div>
                            `;
                        }
                    }
                ]
            });
            
            // Deposits Table
            $('#depositsTable').DataTable({
                responsive: true,
                ajax: {
                    url: 'https://website-backendd-1.onrender.com/api/admin/deposits/pending',
                    type: 'GET',
                    headers: {
                        'Authorization': 'Bearer ' + authToken
                    },
                    dataSrc: 'data'
                },
                columns: [
                    { data: 'id' },
                    { 
                        data: 'user',
                        render: function(data) {
                            return `${data.first_name} ${data.last_name}`;
                        }
                    },
                    { 
                        data: 'amount',
                        render: function(data) {
                            return `$${parseFloat(data).toFixed(2)}`;
                        }
                    },
                    { 
                        data: 'method',
                        render: function(data) {
                            return data.charAt(0).toUpperCase() + data.slice(1);
                        }
                    },
                    { 
                        data: 'created_at',
                        render: function(data) {
                            return moment(data).format('YYYY-MM-DD HH:mm');
                        }
                    },
                    { 
                        data: 'status',
                        render: function(data) {
                            let badgeClass = '';
                            switch(data) {
                                case 'completed':
                                    badgeClass = 'badge-success';
                                    break;
                                case 'pending':
                                    badgeClass = 'badge-warning';
                                    break;
                                case 'failed':
                                    badgeClass = 'badge-danger';
                                    break;
                                default:
                                    badgeClass = 'badge-info';
                            }
                            return `<span class="badge ${badgeClass}">${data}</span>`;
                        }
                    },
                    {
                        data: null,
                        render: function(data) {
                            return `
                                <div class="btn-group">
                                    <button class="btn btn-sm btn-outline-success verify-deposit" data-id="${data.id}">
                                        <i class="fas fa-check"></i> Verify
                                    </button>
                                    <button class="btn btn-sm btn-outline-danger reject-deposit" data-id="${data.id}">
                                        <i class="fas fa-times"></i> Reject
                                    </button>
                                </div>
                            `;
                        }
                    }
                ]
            });
            
            // Tickets Table
            $('#ticketsTable').DataTable({
                responsive: true,
                ajax: {
                    url: 'https://website-backendd-1.onrender.com/api/admin/support/tickets',
                    type: 'GET',
                    headers: {
                        'Authorization': 'Bearer ' + authToken
                    },
                    dataSrc: 'data'
                },
                columns: [
                    { data: 'id' },
                    { 
                        data: 'user',
                        render: function(data) {
                            return `${data.first_name} ${data.last_name}`;
                        }
                    },
                    { data: 'subject' },
                    { 
                        data: 'category',
                        render: function(data) {
                            return data.charAt(0).toUpperCase() + data.slice(1);
                        }
                    },
                    { 
                        data: 'priority',
                        render: function(data) {
                            let badgeClass = '';
                            switch(data) {
                                case 'low':
                                    badgeClass = 'badge-success';
                                    break;
                                case 'medium':
                                    badgeClass = 'badge-primary';
                                    break;
                                case 'high':
                                    badgeClass = 'badge-warning';
                                    break;
                                case 'urgent':
                                    badgeClass = 'badge-danger';
                                    break;
                                default:
                                    badgeClass = 'badge-info';
                            }
                            return `<span class="badge ${badgeClass}">${data}</span>`;
                        }
                    },
                    { 
                        data: 'created_at',
                        render: function(data) {
                            return moment(data).format('YYYY-MM-DD HH:mm');
                        }
                    },
                    { 
                        data: 'status',
                        render: function(data) {
                            let badgeClass = '';
                            switch(data) {
                                case 'open':
                                    badgeClass = 'badge-primary';
                                    break;
                                case 'pending':
                                    badgeClass = 'badge-warning';
                                    break;
                                case 'resolved':
                                    badgeClass = 'badge-success';
                                    break;
                                case 'closed':
                                    badgeClass = 'badge-secondary';
                                    break;
                                default:
                                    badgeClass = 'badge-info';
                            }
                            return `<span class="badge ${badgeClass}">${data}</span>`;
                        }
                    },
                    {
                        data: null,
                        render: function(data) {
                            return `
                                <div class="btn-group">
                                    <button class="btn btn-sm btn-outline-primary view-ticket" data-id="${data.id}">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-warning edit-ticket" data-id="${data.id}">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-danger delete-ticket" data-id="${data.id}">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            `;
                        }
                    }
                ]
            });
            
            // Notifications Table
            $('#notificationsTable').DataTable({
                responsive: true,
                ajax: {
                    url: 'https://website-backendd-1.onrender.com/api/admin/notifications',
                    type: 'GET',
                    headers: {
                        'Authorization': 'Bearer ' + authToken
                    },
                    dataSrc: 'data'
                },
                columns: [
                    { data: 'id' },
                    { data: 'title' },
                    { data: 'message' },
                    { 
                        data: 'recipients',
                        render: function(data) {
                            if (data === 'all') {
                                return 'All Users';
                            } else if (Array.isArray(data)) {
                                return data.length + ' Selected Users';
                            } else {
                                return data;
                            }
                        }
                    },
                    { 
                        data: 'created_at',
                        render: function(data) {
                            return moment(data).format('YYYY-MM-DD HH:mm');
                        }
                    },
                    { 
                        data: 'status',
                        render: function(data) {
                            let badgeClass = '';
                            switch(data) {
                                case 'sent':
                                    badgeClass = 'badge-success';
                                    break;
                                case 'pending':
                                    badgeClass = 'badge-warning';
                                    break;
                                case 'failed':
                                    badgeClass = 'badge-danger';
                                    break;
                                default:
                                    badgeClass = 'badge-info';
                            }
                            return `<span class="badge ${badgeClass}">${data}</span>`;
                        }
                    },
                    {
                        data: null,
                        render: function(data) {
                            return `
                                <div class="btn-group">
                                    <button class="btn btn-sm btn-outline-primary view-notification" data-id="${data.id}">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-danger delete-notification" data-id="${data.id}">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            `;
                        }
                    }
                ]
            });
            
            // Promotions Table
            $('#promotionsTable').DataTable({
                responsive: true,
                ajax: {
                    url: 'https://website-backendd-1.onrender.com/api/admin/promotions',
                    type: 'GET',
                    headers: {
                        'Authorization': 'Bearer ' + authToken
                    },
                    dataSrc: 'data'
                },
                columns: [
                    { data: 'id' },
                    { data: 'title' },
                    { data: 'description' },
                    { 
                        data: 'start_date',
                        render: function(data) {
                            return moment(data).format('YYYY-MM-DD');
                        }
                    },
                    { 
                        data: 'end_date',
                        render: function(data) {
                            return moment(data).format('YYYY-MM-DD');
                        }
                    },
                    { 
                        data: 'status',
                        render: function(data) {
                            let badgeClass = '';
                            switch(data) {
                                case 'active':
                                    badgeClass = 'badge-success';
                                    break;
                                case 'pending':
                                    badgeClass = 'badge-warning';
                                    break;
                                case 'ended':
                                    badgeClass = 'badge-secondary';
                                    break;
                                default:
                                    badgeClass = 'badge-info';
                            }
                            return `<span class="badge ${badgeClass}">${data}</span>`;
                        }
                    },
                    {
                        data: null,
                        render: function(data) {
                            return `
                                <div class="btn-group">
                                    <button class="btn btn-sm btn-outline-primary view-promotion" data-id="${data.id}">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-warning edit-promotion" data-id="${data.id}">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-danger delete-promotion" data-id="${data.id}">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            `;
                        }
                    }
                ]
            });
            
            // Security Logs Table
            $('#securityLogsTable').DataTable({
                responsive: true,
                ajax: {
                    url: 'https://website-backendd-1.onrender.com/api/admin/security/logs',
                    type: 'GET',
                    headers: {
                        'Authorization': 'Bearer ' + authToken
                    },
                    dataSrc: 'data'
                },
                columns: [
                    { data: 'id' },
                    { data: 'event' },
                    { data: 'ip_address' },
                    { data: 'user_agent' },
                    { 
                        data: 'created_at',
                        render: function(data) {
                            return moment(data).format('YYYY-MM-DD HH:mm');
                        }
                    },
                    { 
                        data: 'status',
                        render: function(data) {
                            let badgeClass = '';
                            switch(data) {
                                case 'success':
                                    badgeClass = 'badge-success';
                                    break;
                                case 'failed':
                                    badgeClass = 'badge-danger';
                                    break;
                                case 'warning':
                                    badgeClass = 'badge-warning';
                                    break;
                                default:
                                    badgeClass = 'badge-info';
                            }
                            return `<span class="badge ${badgeClass}">${data}</span>`;
                        }
                    }
                ]
            });
        }
        
        // Setup event listeners
        function setupEventListeners() {
            // Login Form
            $('#loginForm').on('submit', function(e) {
                e.preventDefault();
                handleAdminLogin();
            });
            
            // Forgot Password
            $('#forgotPassword').on('click', function(e) {
                e.preventDefault();
                $('#forgotPasswordModal').addClass('active');
            });
            
            // Close Forgot Password Modal
            $('#closeForgotPasswordModal').on('click', function() {
                $('#forgotPasswordModal').removeClass('active');
            });
            
            // Submit Forgot Password
            $('#forgotPasswordForm').on('submit', function(e) {
                e.preventDefault();
                handleForgotPassword();
            });
            
            // Contact Support
            $('#contactSupport').on('click', function(e) {
                e.preventDefault();
                toastr.info('Please email support@bithash.com for assistance.');
            });
            
            // Google Login
            $('#googleLogin').on('click', function() {
                toastr.info('Google login will be implemented in production.');
            });
            
            // Toggle Sidebar
            $('#toggleSidebar').on('click', function() {
                $('#sidebar').toggleClass('active');
            });
            
            // Close Sidebar
            $('#closeSidebar').on('click', function() {
                $('#sidebar').removeClass('active');
            });
            
            // Menu Item Click
            $('.menu-item').on('click', function() {
                const section = $(this).data('section');
                showContentSection(section);
                
                // Update active menu item
                $('.menu-item').removeClass('active');
                $(this).addClass('active');
                
                // Close sidebar on mobile
                if ($(window).width() < 992) {
                    $('#sidebar').removeClass('active');
                }
            });
            
            // Logout
            $('#logoutLink').on('click', function() {
                handleAdminLogout();
            });
            
            // Profile Link
            $('#profileLink').on('click', function() {
                showContentSection('profile');
            });
            
            // Settings Link
            $('#settingsLink').on('click', function() {
                showContentSection('settings');
            });
            
            // Notification Badge
            $('#notificationBadge').on('click', function() {
                $('#notificationPanel').toggleClass('active');
            });
            
            // Chat Badge
            $('#chatBadge').on('click', function() {
                $('#chatWidget').toggleClass('active');
            });
            
            // Close Chat Widget
            $('#closeChatWidget').on('click', function() {
                $('#chatWidget').removeClass('active');
            });
            
            // Send Chat Message
            $('#sendChatMessage').on('click', function() {
                const message = $('#chatMessageInput').val().trim();
                if (message) {
                    sendChatMessage(message);
                    $('#chatMessageInput').val('');
                }
            });
            
            // Chat Message Input Enter Key
            $('#chatMessageInput').on('keypress', function(e) {
                if (e.which === 13) {
                    $('#sendChatMessage').click();
                }
            });
            
            // Refresh Dashboard
            $('#refreshDashboard').on('click', function() {
                loadDashboardData();
            });
            
            // Add User Button
            $('#addUserBtn').on('click', function() {
                $('#addUserModal').addClass('active');
            });
            
            // Close Add User Modal
            $('#closeAddUserModal, #cancelAddUser').on('click', function() {
                $('#addUserModal').removeClass('active');
            });
            
            // Submit Add User
            $('#submitAddUser').on('click', function() {
                handleAddUser();
            });
            
            // Edit User Button (delegated event)
            $(document).on('click', '.edit-user', function() {
                const userId = $(this).data('id');
                loadUserData(userId);
            });
            
            // Close Edit User Modal
            $('#closeEditUserModal, #cancelEditUser').on('click', function() {
                $('#editUserModal').removeClass('active');
            });
            
            // Submit Edit User
            $('#submitEditUser').on('click', function() {
                const userId = $('#editUserModal').data('userId');
                handleEditUser(userId);
            });
            
            // Delete User
            $('#deleteUserBtn').on('click', function() {
                const userId = $('#editUserModal').data('userId');
                handleDeleteUser(userId);
            });
            
            // Add Investment Button
            $('#addInvestmentBtn').on('click', function() {
                $('#addInvestmentModal').addClass('active');
            });
            
            // Close Add Investment Modal
            $('#closeAddInvestmentModal, #cancelAddInvestment').on('click', function() {
                $('#addInvestmentModal').removeClass('active');
            });
            
            // Submit Add Investment
            $('#submitAddInvestment').on('click', function() {
                handleAddInvestment();
            });
            
            // Edit Investment Button (delegated event)
            $(document).on('click', '.edit-investment', function() {
                const investmentId = $(this).data('id');
                loadInvestmentData(investmentId);
            });
            
            // Close Edit Investment Modal
            $('#closeEditInvestmentModal, #cancelEditInvestment').on('click', function() {
                $('#editInvestmentModal').removeClass('active');
            });
            
            // Submit Edit Investment
            $('#submitEditInvestment').on('click', function() {
                const investmentId = $('#editInvestmentModal').data('investmentId');
                handleEditInvestment(investmentId);
            });
            
            // Delete Investment
            $('#deleteInvestmentBtn').on('click', function() {
                const investmentId = $('#editInvestmentModal').data('investmentId');
                handleDeleteInvestment(investmentId);
            });
            
            // Process Withdrawal Button (delegated event)
            $(document).on('click', '.process-withdrawal', function() {
                const withdrawalId = $(this).data('id');
                loadWithdrawalData(withdrawalId);
            });
            
            // Close Process Withdrawal Modal
            $('#closeProcessWithdrawalModal, #cancelProcessWithdrawal').on('click', function() {
                $('#processWithdrawalModal').removeClass('active');
            });
            
            // Submit Process Withdrawal
            $('#submitProcessWithdrawal').on('click', function() {
                const withdrawalId = $('#processWithdrawalModal').data('withdrawalId');
                handleProcessWithdrawal(withdrawalId);
            });
            
            // Verify Deposit Button (delegated event)
            $(document).on('click', '.verify-deposit', function() {
                const depositId = $(this).data('id');
                loadDepositData(depositId);
            });
            
            // Close Verify Deposit Modal
            $('#closeVerifyDepositModal, #cancelVerifyDeposit').on('click', function() {
                $('#verifyDepositModal').removeClass('active');
            });
            
            // Submit Verify Deposit
            $('#submitVerifyDeposit').on('click', function() {
                const depositId = $('#verifyDepositModal').data('depositId');
                handleVerifyDeposit(depositId);
            });
            
            // New Ticket Button
            $('#newTicketBtn').on('click', function() {
                $('#newTicketModal').addClass('active');
            });
            
            // Close New Ticket Modal
            $('#closeNewTicketModal, #cancelNewTicket').on('click', function() {
                $('#newTicketModal').removeClass('active');
            });
            
            // Submit New Ticket
            $('#submitNewTicket').on('click', function() {
                handleNewTicket();
            });
            
            // View Ticket Button (delegated event)
            $(document).on('click', '.view-ticket', function() {
                const ticketId = $(this).data('id');
                loadTicketData(ticketId);
            });
            
            // Close View Ticket Modal
            $('#closeViewTicketModal, #cancelTicketReply').on('click', function() {
                $('#viewTicketModal').removeClass('active');
            });
            
            // Submit Ticket Reply
            $('#submitTicketReply').on('click', function() {
                const ticketId = $('#viewTicketModal').data('ticketId');
                handleTicketReply(ticketId);
            });
            
            // Send Notification Button
            $('#sendNotificationBtn').on('click', function() {
                $('#sendNotificationModal').addClass('active');
            });
            
            // Close Send Notification Modal
            $('#closeSendNotificationModal, #cancelSendNotification').on('click', function() {
                $('#sendNotificationModal').removeClass('active');
            });
            
            // Submit Send Notification
            $('#submitSendNotification').on('click', function() {
                handleSendNotification();
            });
            
            // Create Promotion Button
            $('#createPromotionBtn').on('click', function() {
                $('#createPromotionModal').addClass('active');
            });
            
            // Close Create Promotion Modal
            $('#closeCreatePromotionModal, #cancelCreatePromotion').on('click', function() {
                $('#createPromotionModal').removeClass('active');
            });
            
            // Submit Create Promotion
            $('#submitCreatePromotion').on('click', function() {
                handleCreatePromotion();
            });
            
            // View Promotion Button (delegated event)
            $(document).on('click', '.view-promotion', function() {
                const promotionId = $(this).data('id');
                loadPromotionData(promotionId);
            });
            
            // Close View Promotion Modal
            $('#closeViewPromotionModal, #closeViewPromotion').on('click', function() {
                $('#viewPromotionModal').removeClass('active');
            });
            
            // Edit Promotion Button
            $('#editPromotionBtn').on('click', function() {
                const promotionId = $('#viewPromotionModal').data('promotionId');
                // In a real implementation, you would load the promotion data into the edit form
                toastr.info('Edit promotion functionality will be implemented in production.');
            });
            
            // Save Settings Button
            $('#saveSettingsBtn').on('click', function() {
                handleSaveSettings();
            });
            
            // Save Security Settings Button
            $('#saveSecuritySettingsBtn').on('click', function() {
                handleSaveSecuritySettings();
            });
            
            // Process All Withdrawals Button
            $('#processAllWithdrawalsBtn').on('click', function() {
                handleProcessAllWithdrawals();
            });
            
            // Verify All Deposits Button
            $('#verifyAllDepositsBtn').on('click', function() {
                handleVerifyAllDeposits();
            });
            
            // Start New Chat Button
            $('#startNewChatBtn').on('click', function() {
                toastr.info('New chat functionality will be implemented in production.');
            });
            
            // Toggle Password Visibility
            $('.password-toggle').on('click', function() {
                const input = $(this).siblings('input');
                const icon = $(this).find('i');
                
                if (input.attr('type') === 'password') {
                    input.attr('type', 'text');
                    icon.removeClass('fa-eye').addClass('fa-eye-slash');
                } else {
                    input.attr('type', 'password');
                    icon.removeClass('fa-eye-slash').addClass('fa-eye');
                }
            });
            
            // Two-Factor Verification
            $('#verifyTwoFactor').on('click', function() {
                handleTwoFactorVerification();
            });
            
            // Close Two-Factor Modal
            $('#closeTwoFactorModal').on('click', function() {
                $('#twoFactorModal').removeClass('active');
            });
            
            // Two-Factor Code Input
            $('.two-factor-code input').on('input', function() {
                const value = $(this).val();
                if (value.length === 1) {
                    $(this).next('input').focus();
                }
            });
            
            // Export Users Button
            $('#exportUsers').on('click', function() {
                exportData('users');
            });
            
            // Window Resize
            $(window).on('resize', function() {
                if ($(window).width() >= 992) {
                    $('#sidebar').removeClass('active');
                }
            });
        }
        
        // Show content section
        function showContentSection(section) {
            $('.content-section').removeClass('active');
            $(`#${section}Section`).addClass('active');
            
            // Load section data if needed
            switch(section) {
                case 'dashboard':
                    loadDashboardData();
                    break;
                case 'users':
                    $('#usersTable').DataTable().ajax.reload();
                    break;
                case 'investments':
                    $('#investmentsTable').DataTable().ajax.reload();
                    break;
                case 'transactions':
                    $('#transactionsTable').DataTable().ajax.reload();
                    break;
                case 'withdrawals':
                    $('#withdrawalsTable').DataTable().ajax.reload();
                    break;
                case 'deposits':
                    $('#depositsTable').DataTable().ajax.reload();
                    break;
                case 'tickets':
                    $('#ticketsTable').DataTable().ajax.reload();
                    break;
                case 'notifications':
                    $('#notificationsTable').DataTable().ajax.reload();
                    break;
                case 'promotions':
                    $('#promotionsTable').DataTable().ajax.reload();
                    break;
                case 'security':
                    $('#securityLogsTable').DataTable().ajax.reload();
                    break;
            }
        }
        
        // Load dashboard data
        function loadDashboardData() {
            showLoading();
            
            $.ajax({
                url: 'https://website-backendd-1.onrender.com/api/admin/dashboard',
                type: 'GET',
                headers: {
                    'Authorization': 'Bearer ' + authToken
                },
                success: function(response) {
                    hideLoading();
                    if (response.success) {
                        updateDashboardStats(response.data);
                    } else {
                        toastr.error('Failed to load dashboard data');
                    }
                },
                error: function(xhr) {
                    hideLoading();
                    toastr.error('Failed to load dashboard data');
                }
            });
        }
        
        // Update dashboard stats
        function updateDashboardStats(data) {
            $('#totalUsers').text(data.total_users.toLocaleString());
            $('#totalDeposits').text('$' + data.total_deposits.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2}));
            $('#totalWithdrawals').text('$' + data.total_withdrawals.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2}));
            $('#totalProfit').text('$' + data.total_profit.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2}));
            
            // Update recent activity
            const activityTable = $('#recentActivityTable tbody');
            activityTable.empty();
            
            data.recent_activity.forEach(activity => {
                activityTable.append(`
                    <tr>
                        <td>${activity.user}</td>
                        <td>${activity.action}</td>
                        <td>${moment(activity.timestamp).format('YYYY-MM-DD HH:mm')}</td>
                        <td><span class="status-badge ${activity.status}">${activity.status}</span></td>
                    </tr>
                `);
            });
            
            // Update recent transactions
            const transactionsTable = $('#recentTransactionsTable tbody');
            transactionsTable.empty();
            
            data.recent_transactions.forEach(transaction => {
                let badgeClass = '';
                switch(transaction.status) {
                    case 'completed':
                        badgeClass = 'completed';
                        break;
                    case 'pending':
                        badgeClass = 'pending';
                        break;
                    case 'failed':
                        badgeClass = 'failed';
                        break;
                    default:
                        badgeClass = 'processing';
                }
                
                transactionsTable.append(`
                    <tr>
                        <td>${transaction.id}</td>
                        <td>${transaction.user}</td>
                        <td>$${transaction.amount.toFixed(2)}</td>
                        <td>${transaction.type.charAt(0).toUpperCase() + transaction.type.slice(1)}</td>
                        <td>${moment(transaction.date).format('YYYY-MM-DD HH:mm')}</td>
                        <td><span class="status-badge ${badgeClass}">${transaction.status}</span></td>
                        <td>
                            ${transaction.type === 'deposit' && transaction.status === 'pending' ? 
                                `<button class="btn btn-sm btn-outline-success verify-deposit" data-id="${transaction.id}">
                                    <i class="fas fa-check"></i> Verify
                                </button>` : ''}
                            ${transaction.type === 'withdrawal' && transaction.status === 'pending' ? 
                                `<button class="btn btn-sm btn-outline-success process-withdrawal" data-id="${transaction.id}">
                                    <i class="fas fa-check"></i> Process
                                </button>` : ''}
                        </td>
                    </tr>
                `);
            });
            
            // Update system status
            $('#serverLoad').text(data.system_status.server_load + '%');
            $('#serverLoadBar').css('width', data.system_status.server_load + '%');
            
            $('#databaseStatus').text(data.system_status.database_status);
            $('#databaseStatusBar').css('width', data.system_status.database_status === 'Online' ? '100%' : '0%');
            
            $('#apiResponse').text(data.system_status.api_response_time + 'ms');
            const apiResponseWidth = Math.min(100, data.system_status.api_response_time / 2);
            $('#apiResponseBar').css('width', apiResponseWidth + '%');
        }
        
        // Handle admin login
        function handleAdminLogin() {
            const email = $('#loginEmail').val().trim();
            const password = $('#loginPassword').val();
            const rememberMe = $('#rememberMe').is(':checked');
            
            if (!email || !password) {
                showLoginError('Please enter both email and password');
                return;
            }
            
            showLoading();
            
            $.ajax({
                url: 'https://website-backendd-1.onrender.com/api/admin/auth/login',
                type: 'POST',
                data: JSON.stringify({
                    email: email,
                    password: password
                }),
                contentType: 'application/json',
                success: function(response) {
                    hideLoading();
                    if (response.success) {
                        if (response.data.requires_2fa) {
                            // Show 2FA modal
                            $('#twoFactorModal').addClass('active');
                            $('.two-factor-code input').first().focus();
                        } else {
                            // Login successful
                            authToken = response.data.token;
                            adminData = response.data.admin;
                            
                            if (rememberMe) {
                                localStorage.setItem('adminToken', authToken);
                            }
                            
                            showAdminDashboard();
                        }
                    } else {
                        showLoginError(response.message || 'Login failed');
                    }
                },
                error: function(xhr) {
                    hideLoading();
                    if (xhr.responseJSON && xhr.responseJSON.message) {
                        showLoginError(xhr.responseJSON.message);
                    } else {
                        showLoginError('Login failed. Please try again.');
                    }
                }
            });
        }
        
        // Handle two-factor verification
        function handleTwoFactorVerification() {
            const code = Array.from($('.two-factor-code input')).map(input => input.value).join('');
            
            if (code.length !== 6) {
                toastr.error('Please enter a valid 6-digit code');
                return;
            }
            
            showLoading();
            
            $.ajax({
                url: 'https://website-backendd-1.onrender.com/api/admin/auth/verify-2fa',
                type: 'POST',
                headers: {
                    'Authorization': 'Bearer ' + authToken
                },
                data: JSON.stringify({
                    code: code
                }),
                contentType: 'application/json',
                success: function(response) {
                    hideLoading();
                    if (response.success) {
                        $('#twoFactorModal').removeClass('active');
                        authToken = response.data.token;
                        adminData = response.data.admin;
                        
                        if ($('#rememberMe').is(':checked')) {
                            localStorage.setItem('adminToken', authToken);
                        }
                        
                        showAdminDashboard();
                    } else {
                        toastr.error(response.message || 'Verification failed');
                    }
                },
                error: function(xhr) {
                    hideLoading();
                    if (xhr.responseJSON && xhr.responseJSON.message) {
                        toastr.error(xhr.responseJSON.message);
                    } else {
                        toastr.error('Verification failed. Please try again.');
                    }
                }
            });
        }
        
        // Handle forgot password
        function handleForgotPassword() {
            const email = $('#resetEmail').val().trim();
            
            if (!email) {
                showForgotPasswordError('Please enter your email address');
                return;
            }
            
            showLoading();
            
            $.ajax({
                url: 'https://website-backendd-1.onrender.com/api/admin/auth/forgot-password',
                type: 'POST',
                data: JSON.stringify({
                    email: email
                }),
                contentType: 'application/json',
                success: function(response) {
                    hideLoading();
                    if (response.success) {
                        $('#forgotPasswordModal').removeClass('active');
                        toastr.success('Password reset link has been sent to your email');
                    } else {
                        showForgotPasswordError(response.message || 'Failed to send reset link');
                    }
                },
                error: function(xhr) {
                    hideLoading();
                    if (xhr.responseJSON && xhr.responseJSON.message) {
                        showForgotPasswordError(xhr.responseJSON.message);
                    } else {
                        showForgotPasswordError('Failed to send reset link. Please try again.');
                    }
                }
            });
        }
        
        // Handle admin logout
        function handleAdminLogout() {
            showLoading();
            
            $.ajax({
                url: 'https://website-backendd-1.onrender.com/api/admin/auth/logout',
                type: 'POST',
                headers: {
                    'Authorization': 'Bearer ' + authToken
                },
                success: function(response) {
                    hideLoading();
                    if (response.success) {
                        localStorage.removeItem('adminToken');
                        authToken = null;
                        adminData = null;
                        
                        // Close WebSocket connection
                        if (socket) {
                            socket.close();
                            socket = null;
                        }
                        
                        // Show login page
                        $('#adminContainer').hide();
                        $('#loginContainer').show();
                        
                        // Reset login form
                        $('#loginForm')[0].reset();
                        $('#loginError').hide();
                    } else {
                        toastr.error(response.message || 'Logout failed');
                    }
                },
                error: function(xhr) {
                    hideLoading();
                    localStorage.removeItem('adminToken');
                    authToken = null;
                    adminData = null;
                    
                    // Close WebSocket connection
                    if (socket) {
                        socket.close();
                        socket = null;
                    }
                    
                    // Show login page
                    $('#adminContainer').hide();
                    $('#loginContainer').show();
                    
                    // Reset login form
                    $('#loginForm')[0].reset();
                    $('#loginError').hide();
                }
            });
        }
        
        // Handle add user
        function handleAddUser() {
            const firstName = $('#userFirstName').val().trim();
            const lastName = $('#userLastName').val().trim();
            const email = $('#userEmail').val().trim();
            const password = $('#userPassword').val();
            const confirmPassword = $('#userConfirmPassword').val();
            const phone = $('#userPhone').val().trim();
            const country = $('#userCountry').val();
            const balance = parseFloat($('#userBalance').val()) || 0;
            const status = $('#userStatus').val();
            
            if (!firstName || !lastName || !email || !password || !confirmPassword) {
                showAddUserError('Please fill in all required fields');
                return;
            }
            
            if (password !== confirmPassword) {
                showAddUserError('Passwords do not match');
                return;
            }
            
            if (password.length < 8) {
                showAddUserError('Password must be at least 8 characters long');
                return;
            }
            
            showLoading();
            
            const formData = new FormData();
            formData.append('first_name', firstName);
            formData.append('last_name', lastName);
            formData.append('email', email);
            formData.append('password', password);
            formData.append('phone', phone);
            formData.append('country', country);
            formData.append('balance', balance);
            formData.append('status', status);
            
            const photoInput = $('#userPhoto')[0];
            if (photoInput.files.length > 0) {
                formData.append('photo', photoInput.files[0]);
            }
            
            $.ajax({
                url: 'https://website-backendd-1.onrender.com/api/admin/users',
                type: 'POST',
                headers: {
                    'Authorization': 'Bearer ' + authToken
                },
                data: formData,
                processData: false,
                contentType: false,
                success: function(response) {
                    hideLoading();
                    if (response.success) {
                        $('#addUserModal').removeClass('active');
                        $('#addUserForm')[0].reset();
                        $('#addUserError').hide();
                        
                        // Refresh users table
                        $('#usersTable').DataTable().ajax.reload();
                        
                        toastr.success('User added successfully');
                    } else {
                        showAddUserError(response.message || 'Failed to add user');
                    }
                },
                error: function(xhr) {
                    hideLoading();
                    if (xhr.responseJSON && xhr.responseJSON.message) {
                        showAddUserError(xhr.responseJSON.message);
                    } else {
                        showAddUserError('Failed to add user. Please try again.');
                    }
                }
            });
        }
        
        // Load user data for editing
        function loadUserData(userId) {
            showLoading();
            
            $.ajax({
                url: `https://website-backendd-1.onrender.com/api/admin/users/${userId}`,
                type: 'GET',
                headers: {
                    'Authorization': 'Bearer ' + authToken
                },
                success: function(response) {
                    hideLoading();
                    if (response.success) {
                        const user = response.data;
                        
                        $('#editUserFirstName').val(user.first_name);
                        $('#editUserLastName').val(user.last_name);
                        $('#editUserEmail').val(user.email);
                        $('#editUserPhone').val(user.phone || '');
                        $('#editUserCountry').val(user.country || '').trigger('change');
                        $('#editUserBalance').val(user.balance || 0);
                        $('#editUserStatus').val(user.status || 'active').trigger('change');
                        $('#editUserKYCStatus').val(user.kyc_status || 'pending').trigger('change');
                        
                        $('#editUserModal').data('userId', userId);
                        $('#editUserModal').addClass('active');
                    } else {
                        toastr.error(response.message || 'Failed to load user data');
                    }
                },
                error: function(xhr) {
                    hideLoading();
                    if (xhr.responseJSON && xhr.responseJSON.message) {
                        toastr.error(xhr.responseJSON.message);
                    } else {
                        toastr.error('Failed to load user data. Please try again.');
                    }
                }
            });
        }
        
        // Handle edit user
        function handleEditUser(userId) {
            const firstName = $('#editUserFirstName').val().trim();
            const lastName = $('#editUserLastName').val().trim();
            const email = $('#editUserEmail').val().trim();
            const phone = $('#editUserPhone').val().trim();
            const country = $('#editUserCountry').val();
            const balance = parseFloat($('#editUserBalance').val()) || 0;
            const status = $('#editUserStatus').val();
            const kycStatus = $('#editUserKYCStatus').val();
            
            if (!firstName || !lastName || !email) {
                showEditUserError('Please fill in all required fields');
                return;
            }
            
            showLoading();
            
            const formData = new FormData();
            formData.append('first_name', firstName);
            formData.append('last_name', lastName);
            formData.append('email', email);
            formData.append('phone', phone);
            formData.append('country', country);
            formData.append('balance', balance);
            formData.append('status', status);
            formData.append('kyc_status', kycStatus);
            
            const photoInput = $('#editUserPhoto')[0];
            if (photoInput.files.length > 0) {
                formData.append('photo', photoInput.files[0]);
            }
            
            $.ajax({
                url: `https://website-backendd-1.onrender.com/api/admin/users/${userId}`,
                type: 'PUT',
                headers: {
                    'Authorization': 'Bearer ' + authToken
                },
                data: formData,
                processData: false,
                contentType: false,
                success: function(response) {
                    hideLoading();
                    if (response.success) {
                        $('#editUserModal').removeClass('active');
                        $('#editUserForm')[0].reset();
                        $('#editUserError').hide();
                        
                        // Refresh users table
                        $('#usersTable').DataTable().ajax.reload();
                        
                        toastr.success('User updated successfully');
                    } else {
                        showEditUserError(response.message || 'Failed to update user');
                    }
                },
                error: function(xhr) {
                    hideLoading();
                    if (xhr.responseJSON && xhr.responseJSON.message) {
                        showEditUserError(xhr.responseJSON.message);
                    } else {
                        showEditUserError('Failed to update user. Please try again.');
                    }
                }
            });
        }
        
        // Handle delete user
        function handleDeleteUser(userId) {
            if (!confirm('Are you sure you want to delete this user? This action cannot be undone.')) {
                return;
            }
            
            showLoading();
            
            $.ajax({
                url: `https://website-backendd-1.onrender.com/api/admin/users/${userId}`,
                type: 'DELETE',
                headers: {
                    'Authorization': 'Bearer ' + authToken
                },
                success: function(response) {
                    hideLoading();
                    if (response.success) {
                        $('#editUserModal').removeClass('active');
                        
                        // Refresh users table
                        $('#usersTable').DataTable().ajax.reload();
                        
                        toastr.success('User deleted successfully');
                    } else {
                        toastr.error(response.message || 'Failed to delete user');
                    }
                },
                error: function(xhr) {
                    hideLoading();
                    if (xhr.responseJSON && xhr.responseJSON.message) {
                        toastr.error(xhr.responseJSON.message);
                    } else {
                        toastr.error('Failed to delete user. Please try again.');
                    }
                }
            });
        }
        
        // Handle add investment
        function handleAddInvestment() {
            const userId = $('#investmentUser').val();
            const plan = $('#investmentPlan').val();
            const amount = parseFloat($('#investmentAmount').val()) || 0;
            const duration = parseInt($('#investmentDuration').val()) || 30;
            const startDate = $('#investmentStartDate').val();
            const status = $('#investmentStatus').val();
            
            if (!userId || !plan || !amount || !startDate) {
                showAddInvestmentError('Please fill in all required fields');
                return;
            }
            
            if (amount <= 0) {
                showAddInvestmentError('Amount must be greater than 0');
                return;
            }
            
            showLoading();
            
            $.ajax({
                url: 'https://website-backendd-1.onrender.com/api/admin/investments',
                type: 'POST',
                headers: {
                    'Authorization': 'Bearer ' + authToken,
                    'Content-Type': 'application/json'
                },
                data: JSON.stringify({
                    user_id: userId,
                    plan: plan,
                    amount: amount,
                    duration: duration,
                    start_date: startDate,
                    status: status
                }),
                success: function(response) {
                    hideLoading();
                    if (response.success) {
                        $('#addInvestmentModal').removeClass('active');
                        $('#addInvestmentForm')[0].reset();
                        $('#addInvestmentError').hide();
                        
                        // Refresh investments table
                        $('#investmentsTable').DataTable().ajax.reload();
                        
                        toastr.success('Investment added successfully');
                    } else {
                        showAddInvestmentError(response.message || 'Failed to add investment');
                    }
                },
                error: function(xhr) {
                    hideLoading();
                    if (xhr.responseJSON && xhr.responseJSON.message) {
                        showAddInvestmentError(xhr.responseJSON.message);
                    } else {
                        showAddInvestmentError('Failed to add investment. Please try again.');
                    }
                }
            });
        }
        
        // Load investment data for editing
        function loadInvestmentData(investmentId) {
            showLoading();
            
            $.ajax({
                url: `https://website-backendd-1.onrender.com/api/admin/investments/${investmentId}`,
                type: 'GET',
                headers: {
                    'Authorization': 'Bearer ' + authToken
                },
                success: function(response) {
                    hideLoading();
                    if (response.success) {
                        const investment = response.data;
                        
                        $('#editInvestmentUser').val(`${investment.user.first_name} ${investment.user.last_name}`);
                        $('#editInvestmentPlan').val(investment.plan.slug).trigger('change');
                        $('#editInvestmentAmount').val(investment.amount);
                        $('#editInvestmentDuration').val(investment.duration);
                        $('#editInvestmentStartDate').val(moment(investment.start_date).format('YYYY-MM-DD'));
                        $('#editInvestmentEndDate').val(moment(investment.end_date).format('YYYY-MM-DD'));
                        $('#editInvestmentProfit').val(investment.profit);
                        $('#editInvestmentStatus').val(investment.status).trigger('change');
                        
                        $('#editInvestmentModal').data('investmentId', investmentId);
                        $('#editInvestmentModal').addClass('active');
                    } else {
                        toastr.error(response.message || 'Failed to load investment data');
                    }
                },
                error: function(xhr) {
                    hideLoading();
                    if (xhr.responseJSON && xhr.responseJSON.message) {
                        toastr.error(xhr.responseJSON.message);
                    } else {
                        toastr.error('Failed to load investment data. Please try again.');
                    }
                }
            });
        }
        
        // Handle edit investment
        function handleEditInvestment(investmentId) {
            const plan = $('#editInvestmentPlan').val();
            const amount = parseFloat($('#editInvestmentAmount').val()) || 0;
            const duration = parseInt($('#editInvestmentDuration').val()) || 30;
            const startDate = $('#editInvestmentStartDate').val();
            const endDate = $('#editInvestmentEndDate').val();
            const profit = parseFloat($('#editInvestmentProfit').val()) || 0;
            const status = $('#editInvestmentStatus').val();
            
            if (!plan || !amount || !startDate || !endDate) {
                showEditInvestmentError('Please fill in all required fields');
                return;
            }
            
            if (amount <= 0) {
                showEditInvestmentError('Amount must be greater than 0');
                return;
            }
            
            showLoading();
            
            $.ajax({
                url: `https://website-backendd-1.onrender.com/api/admin/investments/${investmentId}`,
                type: 'PUT',
                headers: {
                    'Authorization': 'Bearer ' + authToken,
                    'Content-Type': 'application/json'
                },
                data: JSON.stringify({
                    plan: plan,
                    amount: amount,
                    duration: duration,
                    start_date: startDate,
                    end_date: endDate,
                    profit: profit,
                    status: status
                }),
                success: function(response) {
                    hideLoading();
                    if (response.success) {
                        $('#editInvestmentModal').removeClass('active');
                        
                        // Refresh investments table
                        $('#investmentsTable').DataTable().ajax.reload();
                        
                        toastr.success('Investment updated successfully');
                    } else {
                        showEditInvestmentError(response.message || 'Failed to update investment');
                    }
                },
                error: function(xhr) {
                    hideLoading();
                    if (xhr.responseJSON && xhr.responseJSON.message) {
                        showEditInvestmentError(xhr.responseJSON.message);
                    } else {
                        showEditInvestmentError('Failed to update investment. Please try again.');
                    }
                }
            });
        }
        
        // Handle delete investment
        function handleDeleteInvestment(investmentId) {
            if (!confirm('Are you sure you want to delete this investment? This action cannot be undone.')) {
                return;
            }
            
            showLoading();
            
            $.ajax({
                url: `https://website-backendd-1.onrender.com/api/admin/investments/${investmentId}`,
                type: 'DELETE',
                headers: {
                    'Authorization': 'Bearer ' + authToken
                },
                success: function(response) {
                    hideLoading();
                    if (response.success) {
                        $('#editInvestmentModal').removeClass('active');
                        
                        // Refresh investments table
                        $('#investmentsTable').DataTable().ajax.reload();
                        
                        toastr.success('Investment deleted successfully');
                    } else {
                        toastr.error(response.message || 'Failed to delete investment');
                    }
                },
                error: function(xhr) {
                    hideLoading();
                    if (xhr.responseJSON && xhr.responseJSON.message) {
                        toastr.error(xhr.responseJSON.message);
                    } else {
                        toastr.error('Failed to delete investment. Please try again.');
                    }
                }
            });
        }
        
        // Load withdrawal data for processing
        function loadWithdrawalData(withdrawalId) {
            showLoading();
            
            $.ajax({
                url: `https://website-backendd-1.onrender.com/api/admin/withdrawals/${withdrawalId}`,
                type: 'GET',
                headers: {
                    'Authorization': 'Bearer ' + authToken
                },
                success: function(response) {
                    hideLoading();
                    if (response.success) {
                        const withdrawal = response.data;
                        
                        $('#withdrawalUser').val(`${withdrawal.user.first_name} ${withdrawal.user.last_name}`);
                        $('#withdrawalAmount').val('$' + withdrawal.amount.toFixed(2));
                        $('#withdrawalWallet').val(withdrawal.wallet_address);
                        $('#withdrawalStatus').val('processing').trigger('change');
                        
                        $('#processWithdrawalModal').data('withdrawalId', withdrawalId);
                        $('#processWithdrawalModal').addClass('active');
                    } else {
                        toastr.error(response.message || 'Failed to load withdrawal data');
                    }
                },
                error: function(xhr) {
                    hideLoading();
                    if (xhr.responseJSON && xhr.responseJSON.message) {
                        toastr.error(xhr.responseJSON.message);
                    } else {
                        toastr.error('Failed to load withdrawal data. Please try again.');
                    }
                }
            });
        }
        
        // Handle process withdrawal
        function handleProcessWithdrawal(withdrawalId) {
            const transactionHash = $('#withdrawalHash').val().trim();
            const status = $('#withdrawalStatus').val();
            const notes = $('#withdrawalNotes').val().trim();
            
            if (status === 'completed' && !transactionHash) {
                showProcessWithdrawalError('Transaction hash is required for completed withdrawals');
                return;
            }
            
            showLoading();
            
            $.ajax({
                url: `https://website-backendd-1.onrender.com/api/admin/withdrawals/${withdrawalId}/process`,
                type: 'POST',
                headers: {
                    'Authorization': 'Bearer ' + authToken,
                    'Content-Type': 'application/json'
                },
                data: JSON.stringify({
                    transaction_hash: transactionHash,
                    status: status,
                    notes: notes
                }),
                success: function(response) {
                    hideLoading();
                    if (response.success) {
                        $('#processWithdrawalModal').removeClass('active');
                        $('#processWithdrawalForm')[0].reset();
                        $('#processWithdrawalError').hide();
                        
                        // Refresh withdrawals table
                        $('#withdrawalsTable').DataTable().ajax.reload();
                        // Refresh transactions table
                        $('#transactionsTable').DataTable().ajax.reload();
                        
                        toastr.success('Withdrawal processed successfully');
                    } else {
                        showProcessWithdrawalError(response.message || 'Failed to process withdrawal');
                    }
                },
                error: function(xhr) {
                    hideLoading();
                    if (xhr.responseJSON && xhr.responseJSON.message) {
                        showProcessWithdrawalError(xhr.responseJSON.message);
                    } else {
                        showProcessWithdrawalError('Failed to process withdrawal. Please try again.');
                    }
                }
            });
        }
        
        // Handle process all withdrawals
        function handleProcessAllWithdrawals() {
            if (!confirm('Are you sure you want to process all pending withdrawals? This action cannot be undone.')) {
                return;
            }
            
            showLoading();
            
            $.ajax({
                url: 'https://website-backendd-1.onrender.com/api/admin/withdrawals/process-all',
                type: 'POST',
                headers: {
                    'Authorization': 'Bearer ' + authToken
                },
                success: function(response) {
                    hideLoading();
                    if (response.success) {
                        // Refresh withdrawals table
                        $('#withdrawalsTable').DataTable().ajax.reload();
                        // Refresh transactions table
                        $('#transactionsTable').DataTable().ajax.reload();
                        
                        toastr.success('All pending withdrawals processed successfully');
                    } else {
                        toastr.error(response.message || 'Failed to process withdrawals');
                    }
                },
                error: function(xhr) {
                    hideLoading();
                    if (xhr.responseJSON && xhr.responseJSON.message) {
                        toastr.error(xhr.responseJSON.message);
                    } else {
                        toastr.error('Failed to process withdrawals. Please try again.');
                    }
                }
            });
        }
        
        // Load deposit data for verification
        function loadDepositData(depositId) {
            showLoading();
            
            $.ajax({
                url: `https://website-backendd-1.onrender.com/api/admin/deposits/${depositId}`,
                type: 'GET',
                headers: {
                    'Authorization': 'Bearer ' + authToken
                },
                success: function(response) {
                    hideLoading();
                    if (response.success) {
                        const deposit = response.data;
                        
                        $('#depositUser').val(`${deposit.user.first_name} ${deposit.user.last_name}`);
                        $('#depositAmount').val('$' + deposit.amount.toFixed(2));
                        $('#depositMethod').val(deposit.method.charAt(0).toUpperCase() + deposit.method.slice(1));
                        $('#depositTransactionId').val(deposit.transaction_id);
                        $('#depositStatus').val('pending').trigger('change');
                        
                        $('#verifyDepositModal').data('depositId', depositId);
                        $('#verifyDepositModal').addClass('active');
                    } else {
                        toastr.error(response.message || 'Failed to load deposit data');
                    }
                },
                error: function(xhr) {
                    hideLoading();
                    if (xhr.responseJSON && xhr.responseJSON.message) {
                        toastr.error(xhr.responseJSON.message);
                    } else {
                        toastr.error('Failed to load deposit data. Please try again.');
                    }
                }
            });
        }
        
        // Handle verify deposit
        function handleVerifyDeposit(depositId) {
            const status = $('#depositStatus').val();
            const notes = $('#depositNotes').val().trim();
            
            showLoading();
            
            $.ajax({
                url: `https://website-backendd-1.onrender.com/api/admin/deposits/${depositId}/verify`,
                type: 'POST',
                headers: {
                    'Authorization': 'Bearer ' + authToken,
                    'Content-Type': 'application/json'
                },
                data: JSON.stringify({
                    status: status,
                    notes: notes
                }),
                success: function(response) {
                    hideLoading();
                    if (response.success) {
                        $('#verifyDepositModal').removeClass('active');
                        $('#verifyDepositForm')[0].reset();
                        $('#verifyDepositError').hide();
                        
                        // Refresh deposits table
                        $('#depositsTable').DataTable().ajax.reload();
                        // Refresh transactions table
                        $('#transactionsTable').DataTable().ajax.reload();
                        
                        toastr.success('Deposit verified successfully');
                    } else {
                        showVerifyDepositError(response.message || 'Failed to verify deposit');
                    }
                },
                error: function(xhr) {
                    hideLoading();
                    if (xhr.responseJSON && xhr.responseJSON.message) {
                        showVerifyDepositError(xhr.responseJSON.message);
                    } else {
                        showVerifyDepositError('Failed to verify deposit. Please try again.');
                    }
                }
            });
        }
        
        // Handle verify all deposits
        function handleVerifyAllDeposits() {
            if (!confirm('Are you sure you want to verify all pending deposits? This action cannot be undone.')) {
                return;
            }
            
            showLoading();
            
            $.ajax({
                url: 'https://website-backendd-1.onrender.com/api/admin/deposits/verify-all',
                type: 'POST',
                headers: {
                    'Authorization': 'Bearer ' + authToken
                },
                success: function(response) {
                    hideLoading();
                    if (response.success) {
                        // Refresh deposits table
                        $('#depositsTable').DataTable().ajax.reload();
                        // Refresh transactions table
                        $('#transactionsTable').DataTable().ajax.reload();
                        
                        toastr.success('All pending deposits verified successfully');
                    } else {
                        toastr.error(response.message || 'Failed to verify deposits');
                    }
                },
                error: function(xhr) {
                    hideLoading();
                    if (xhr.responseJSON && xhr.responseJSON.message) {
                        toastr.error(xhr.responseJSON.message);
                    } else {
                        toastr.error('Failed to verify deposits. Please try again.');
                    }
                }
            });
        }
        
        // Handle new ticket
        function handleNewTicket() {
            const userId = $('#ticketUser').val();
            const subject = $('#ticketSubject').val().trim();
            const category = $('#ticketCategory').val();
            const priority = $('#ticketPriority').val();
            const message = $('#ticketMessage').val().trim();
            
            if (!userId || !subject || !message) {
                showNewTicketError('Please fill in all required fields');
                return;
            }
            
            showLoading();
            
            const formData = new FormData();
            formData.append('user_id', userId);
            formData.append('subject', subject);
            formData.append('category', category);
            formData.append('priority', priority);
            formData.append('message', message);
            
            const attachmentsInput = $('#ticketAttachments')[0];
            if (attachmentsInput.files.length > 0) {
                for (let i = 0; i < attachmentsInput.files.length; i++) {
                    formData.append('attachments[]', attachmentsInput.files[i]);
                }
            }
            
            $.ajax({
                url: 'https://website-backendd-1.onrender.com/api/admin/support/tickets',
                type: 'POST',
                headers: {
                    'Authorization': 'Bearer ' + authToken
                },
                data: formData,
                processData: false,
                contentType: false,
                success: function(response) {
                    hideLoading();
                    if (response.success) {
                        $('#newTicketModal').removeClass('active');
                        $('#newTicketForm')[0].reset();
                        $('#newTicketError').hide();
                        
                        // Refresh tickets table
                        $('#ticketsTable').DataTable().ajax.reload();
                        
                        toastr.success('Ticket created successfully');
                    } else {
                        showNewTicketError(response.message || 'Failed to create ticket');
                    }
                },
                error: function(xhr) {
                    hideLoading();
                    if (xhr.responseJSON && xhr.responseJSON.message) {
                        showNewTicketError(xhr.responseJSON.message);
                    } else {
                        showNewTicketError('Failed to create ticket. Please try again.');
                    }
                }
            });
        }
        
        // Load ticket data
        function loadTicketData(ticketId) {
            showLoading();
            
            $.ajax({
                url: `https://website-backendd-1.onrender.com/api/admin/support/tickets/${ticketId}`,
                type: 'GET',
                headers: {
                    'Authorization': 'Bearer ' + authToken
                },
                success: function(response) {
                    hideLoading();
                    if (response.success) {
                        const ticket = response.data;
                        
                        // Set ticket info
                        $('#ticketId').text(ticket.id);
                        $('#ticketUserName').text(`${ticket.user.first_name} ${ticket.user.last_name}`);
                        $('#ticketUserEmail').text(ticket.user.email);
                        $('#ticketStatus').text(ticket.status);
                        $('#ticketPriority').text(ticket.priority);
                        $('#ticketCategory').text(ticket.category);
                        $('#ticketCreated').text(moment(ticket.created_at).format('YYYY-MM-DD HH:mm'));
                        $('#ticketSubject').text(ticket.subject);
                        $('#ticketInitialMessage').text(ticket.message);
                        
                        // Set ticket status dropdown
                        $('#ticketReplyStatus').val(ticket.status).trigger('change');
                        
                        // Clear and set attachments
                        const attachmentsContainer = $('#ticketInitialAttachments');
                        attachmentsContainer.empty();
                        
                        if (ticket.attachments && ticket.attachments.length > 0) {
                            ticket.attachments.forEach(attachment => {
                                attachmentsContainer.append(`
                                    <div class="attachment">
                                        <a href="${attachment.url}" target="_blank" class="btn btn-sm btn-outline-primary">
                                            <i class="fas fa-paperclip"></i> ${attachment.name}
                                        </a>
                                    </div>
                                `);
                            });
                        }
                        
                        // Clear and set replies
                        const repliesContainer = $('#ticketReplies');
                        repliesContainer.empty();
                        
                        if (ticket.replies && ticket.replies.length > 0) {
                            ticket.replies.forEach(reply => {
                                const isAdmin = reply.is_admin;
                                const avatar = isAdmin ? 
                                    'https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1' : 
                                    `https://randomuser.me/api/portraits/men/${Math.floor(Math.random() * 100)}.jpg`;
                                
                                repliesContainer.append(`
                                    <div class="ticket-message ${isAdmin ? 'admin' : 'user'}">
                                        <div class="message-header">
                                            <img src="${avatar}" alt="${isAdmin ? 'Admin' : 'User'}" class="message-avatar">
                                            <div class="message-info">
                                                <h5>${isAdmin ? 'Admin' : `${reply.user.first_name} ${reply.user.last_name}`}</h5>
                                                <p>${moment(reply.created_at).format('YYYY-MM-DD HH:mm')}</p>
                                            </div>
                                        </div>
                                        <div class="message-body">
                                            <p>${reply.message}</p>
                                            ${reply.attachments && reply.attachments.length > 0 ? `
                                                <div class="message-attachments">
                                                    ${reply.attachments.map(attachment => `
                                                        <div class="attachment">
                                                            <a href="${attachment.url}" target="_blank" class="btn btn-sm btn-outline-primary">
                                                                <i class="fas fa-paperclip"></i> ${attachment.name}
                                                            </a>
                                                        </div>
                                                    `).join('')}
                                                </div>
                                            ` : ''}
                                        </div>
                                    </div>
                                `);
                            });
                        }
                        
                        $('#viewTicketModal').data('ticketId', ticketId);
                        $('#viewTicketModal').addClass('active');
                    } else {
                        toastr.error(response.message || 'Failed to load ticket data');
                    }
                },
                error: function(xhr) {
                    hideLoading();
                    if (xhr.responseJSON && xhr.responseJSON.message) {
                        toastr.error(xhr.responseJSON.message);
                    } else {
                        toastr.error('Failed to load ticket data. Please try again.');
                    }
                }
            });
        }
        
        // Handle ticket reply
        function handleTicketReply(ticketId) {
            const message = $('#ticketReplyMessage').val().trim();
            const status = $('#ticketReplyStatus').val();
            
            if (!message) {
                showTicketReplyError('Please enter a message');
                return;
            }
            
            showLoading();
            
            const formData = new FormData();
            formData.append('message', message);
            formData.append('status', status);
            
            const attachmentsInput = $('#ticketReplyAttachments')[0];
            if (attachmentsInput.files.length > 0) {
                for (let i = 0; i < attachmentsInput.files.length; i++) {
                    formData.append('attachments[]', attachmentsInput.files[i]);
                }
            }
            
            $.ajax({
                url: `https://website-backendd-1.onrender.com/api/admin/support/tickets/${ticketId}/reply`,
                type: 'POST',
                headers: {
                    'Authorization': 'Bearer ' + authToken
                },
                data: formData,
                processData: false,
                contentType: false,
                success: function(response) {
                    hideLoading();
                    if (response.success) {
                        $('#ticketReplyMessage').val('');
                        $('#ticketReplyAttachments').val('');
                        $('#ticketReplyError').hide();
                        
                        // Reload ticket data to show the new reply
                        loadTicketData(ticketId);
                        
                        toastr.success('Reply sent successfully');
                    } else {
                        showTicketReplyError(response.message || 'Failed to send reply');
                    }
                },
                error: function(xhr) {
                    hideLoading();
                    if (xhr.responseJSON && xhr.responseJSON.message) {
                        showTicketReplyError(xhr.responseJSON.message);
                    } else {
                        showTicketReplyError('Failed to send reply. Please try again.');
                    }
                }
            });
        }
        
        // Handle send notification
        function handleSendNotification() {
            const title = $('#notificationTitle').val().trim();
            const message = $('#notificationMessage').val().trim();
            const recipients = $('#notificationRecipients').val();
            const type = $('#notificationType').val();
            const sendInApp = $('#sendInApp').is(':checked');
            const sendEmail = $('#sendEmail').is(':checked');
            const sendSMS = $('#sendSMS').is(':checked');
            
            if (!title || !message || !recipients) {
                showSendNotificationError('Please fill in all required fields');
                return;
            }
            
            if (!sendInApp && !sendEmail && !sendSMS) {
                showSendNotificationError('Please select at least one delivery method');
                return;
            }
            
            showLoading();
            
            $.ajax({
                url: 'https://website-backendd-1.onrender.com/api/admin/notifications',
                type: 'POST',
                headers: {
                    'Authorization': 'Bearer ' + authToken,
                    'Content-Type': 'application/json'
                },
                data: JSON.stringify({
                    title: title,
                    message: message,
                    recipients: recipients,
                    type: type,
                    send_in_app: sendInApp,
                    send_email: sendEmail,
                    send_sms: sendSMS
                }),
                success: function(response) {
                    hideLoading();
                    if (response.success) {
                        $('#sendNotificationModal').removeClass('active');
                        $('#sendNotificationForm')[0].reset();
                        $('#sendNotificationError').hide();
                        
                        // Refresh notifications table
                        $('#notificationsTable').DataTable().ajax.reload();
                        
                        toastr.success('Notification sent successfully');
                    } else {
                        showSendNotificationError(response.message || 'Failed to send notification');
                    }
                },
                error: function(xhr) {
                    hideLoading();
                    if (xhr.responseJSON && xhr.responseJSON.message) {
                        showSendNotificationError(xhr.responseJSON.message);
                    } else {
                        showSendNotificationError('Failed to send notification. Please try again.');
                    }
                }
            });
        }
        
        // Handle create promotion
        function handleCreatePromotion() {
            const title = $('#promotionTitle').val().trim();
            const description = $('#promotionDescription').val().trim();
            const startDate = $('#promotionStartDate').val();
            const endDate = $('#promotionEndDate').val();
            const audience = $('#promotionAudience').val();
            const type = $('#promotionType').val();
            const status = $('#promotionStatus').val();
            
            if (!title || !description || !startDate || !endDate || !audience) {
                showCreatePromotionError('Please fill in all required fields');
                return;
            }
            
            if (new Date(startDate) >= new Date(endDate)) {
                showCreatePromotionError('End date must be after start date');
                return;
            }
            
            showLoading();
            
            const formData = new FormData();
            formData.append('title', title);
            formData.append('description', description);
            formData.append('start_date', startDate);
            formData.append('end_date', endDate);
            formData.append('audience', audience);
            formData.append('type', type);
            formData.append('status', status);
            
            const bannerInput = $('#promotionBanner')[0];
            if (bannerInput.files.length > 0) {
                formData.append('banner', bannerInput.files[0]);
            }
            
            $.ajax({
                url: 'https://website-backendd-1.onrender.com/api/admin/promotions',
                type: 'POST',
                headers: {
                    'Authorization': 'Bearer ' + authToken
                },
                data: formData,
                processData: false,
                contentType: false,
                success: function(response) {
                    hideLoading();
                    if (response.success) {
                        $('#createPromotionModal').removeClass('active');
                        $('#createPromotionForm')[0].reset();
                        $('#createPromotionError').hide();
                        
                        // Refresh promotions table
                        $('#promotionsTable').DataTable().ajax.reload();
                        
                        toastr.success('Promotion created successfully');
                    } else {
                        showCreatePromotionError(response.message || 'Failed to create promotion');
                    }
                },
                error: function(xhr) {
                    hideLoading();
                    if (xhr.responseJSON && xhr.responseJSON.message) {
                        showCreatePromotionError(xhr.responseJSON.message);
                    } else {
                        showCreatePromotionError('Failed to create promotion. Please try again.');
                    }
                }
            });
        }
        
        // Load promotion data
        function loadPromotionData(promotionId) {
            showLoading();
            
            $.ajax({
                url: `https://website-backendd-1.onrender.com/api/admin/promotions/${promotionId}`,
                type: 'GET',
                headers: {
                    'Authorization': 'Bearer ' + authToken
                },
                success: function(response) {
                    hideLoading();
                    if (response.success) {
                        const promotion = response.data;
                        
                        // Set promotion info
                        $('#promotionViewTitle').text(promotion.title);
                        $('#promotionViewDescription').text(promotion.description);
                        $('#promotionViewStatus').text(promotion.status);
                        $('#promotionViewDates').text(`${moment(promotion.start_date).format('MMM D, YYYY')} - ${moment(promotion.end_date).format('MMM D, YYYY')}`);
                        $('#promotionViewType').text(promotion.type);
                        $('#promotionViewAudience').text(promotion.audience);
                        $('#promotionViewStartDate').text(moment(promotion.start_date).format('MMM D, YYYY HH:mm'));
                        $('#promotionViewEndDate').text(moment(promotion.end_date).format('MMM D, YYYY HH:mm'));
                        $('#promotionViewCreator').text(promotion.created_by);
                        $('#promotionViewCreated').text(moment(promotion.created_at).format('MMM D, YYYY HH:mm'));
                        $('#promotionViewParticipants').text(promotion.stats.participants.toLocaleString());
                        $('#promotionViewDeposits').text('$' + promotion.stats.deposits.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2}));
                        $('#promotionViewBonuses').text('$' + promotion.stats.bonuses.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2}));
                        
                        // Set banner image
                        if (promotion.banner) {
                            $('#promotionViewBanner').attr('src', promotion.banner);
                        }
                        
                        // Update status badge
                        const statusBadge = $('#promotionViewStatus');
                        statusBadge.removeClass('badge-primary badge-success badge-warning badge-danger badge-info');
                        
                        switch(promotion.status) {
                            case 'active':
                                statusBadge.addClass('badge-success');
                                break;
                            case 'pending':
                                statusBadge.addClass('badge-warning');
                                break;
                            case 'ended':
                                statusBadge.addClass('badge-secondary');
                                break;
                            default:
                                statusBadge.addClass('badge-info');
                        }
                        
                        $('#viewPromotionModal').data('promotionId', promotionId);
                        $('#viewPromotionModal').addClass('active');
                    } else {
                        toastr.error(response.message || 'Failed to load promotion data');
                    }
                },
                error: function(xhr) {
                    hideLoading();
                    if (xhr.responseJSON && xhr.responseJSON.message) {
                        toastr.error(xhr.responseJSON.message);
                    } else {
                        toastr.error('Failed to load promotion data. Please try again.');
                    }
                }
            });
        }
        
        // Handle save settings
        function handleSaveSettings() {
            const platformName = $('#platformName').val().trim();
            const platformCurrency = $('#platformCurrency').val();
            const maintenanceMode = $('#maintenanceMode').is(':checked');
            const registrationStatus = $('#registrationStatus').is(':checked');
            
            const smtpHost = $('#smtpHost').val().trim();
            const smtpPort = $('#smtpPort').val().trim();
            const smtpUsername = $('#smtpUsername').val().trim();
            const smtpPassword = $('#smtpPassword').val();
            const smtpEncryption = $('#smtpEncryption').val();
            const fromEmail = $('#fromEmail').val().trim();
            const fromName = $('#fromName').val().trim();
            
            const minDeposit = parseFloat($('#minDeposit').val()) || 0;
            const maxDeposit = parseFloat($('#maxDeposit').val()) || 0;
            const minWithdrawal = parseFloat($('#minWithdrawal').val()) || 0;
            const maxWithdrawal = parseFloat($('#maxWithdrawal').val()) || 0;
            const withdrawalFee = parseFloat($('#withdrawalFee').val()) || 0;
            
            const enableBankTransfer = $('#enableBankTransfer').is(':checked');
            const enableCreditCard = $('#enableCreditCard').is(':checked');
            const enablePaypal = $('#enablePaypal').is(':checked');
            const enableCrypto = $('#enableCrypto').is(':checked');
            
            if (!platformName || !platformCurrency || !smtpHost || !smtpPort || !smtpUsername || !fromEmail || !fromName) {
                toastr.error('Please fill in all required fields');
                return;
            }
            
            if (minDeposit < 0 || maxDeposit < 0 || minWithdrawal < 0 || maxWithdrawal < 0 || withdrawalFee < 0) {
                toastr.error('All numeric values must be positive');
                return;
            }
            
            if (minDeposit > maxDeposit) {
                toastr.error('Minimum deposit cannot be greater than maximum deposit');
                return;
            }
            
            if (minWithdrawal > maxWithdrawal) {
                toastr.error('Minimum withdrawal cannot be greater than maximum withdrawal');
                return;
            }
            
            showLoading();
            
            const settings = {
                platform: {
                    name: platformName,
                    currency: platformCurrency,
                    maintenance_mode: maintenanceMode,
                    registration_status: registrationStatus
                },
                email: {
                    smtp_host: smtpHost,
                    smtp_port: smtpPort,
                    smtp_username: smtpUsername,
                    smtp_password: smtpPassword,
                    smtp_encryption: smtpEncryption,
                    from_email: fromEmail,
                    from_name: fromName
                },
                payment: {
                    min_deposit: minDeposit,
                    max_deposit: maxDeposit,
                    min_withdrawal: minWithdrawal,
                    max_withdrawal: maxWithdrawal,
                    withdrawal_fee: withdrawalFee,
                    payment_methods: {
                        bank_transfer: enableBankTransfer,
                        credit_card: enableCreditCard,
                        paypal: enablePaypal,
                        cryptocurrency: enableCrypto
                    }
                }
            };
            
            const formData = new FormData();
            formData.append('settings', JSON.stringify(settings));
            
            const logoInput = $('#platformLogo')[0];
            if (logoInput.files.length > 0) {
                formData.append('logo', logoInput.files[0]);
            }
            
            const faviconInput = $('#platformFavicon')[0];
            if (faviconInput.files.length > 0) {
                formData.append('favicon', faviconInput.files[0]);
            }
            
            $.ajax({
                url: 'https://website-backendd-1.onrender.com/api/admin/settings',
                type: 'POST',
                headers: {
                    'Authorization': 'Bearer ' + authToken
                },
                data: formData,
                processData: false,
                contentType: false,
                success: function(response) {
                    hideLoading();
                    if (response.success) {
                        toastr.success('Settings saved successfully');
                    } else {
                        toastr.error(response.message || 'Failed to save settings');
                    }
                },
                error: function(xhr) {
                    hideLoading();
                    if (xhr.responseJSON && xhr.responseJSON.message) {
                        toastr.error(xhr.responseJSON.message);
                    } else {
                        toastr.error('Failed to save settings. Please try again.');
                    }
                }
            });
        }
        
        // Handle save security settings
        function handleSaveSecuritySettings() {
            const enable2FA = $('#enable2FA').is(':checked');
            const requireStrongPasswords = $('#requireStrongPasswords').is(':checked');
            const passwordExpiration = $('#passwordExpiration').is(':checked');
            const maxLoginAttempts = parseInt($('#maxLoginAttempts').val()) || 5;
            const sessionTimeout = parseInt($('#sessionTimeout').val()) || 30;
            const ipWhitelist = $('#ipWhitelist').val().trim();
            
            if (maxLoginAttempts < 1 || maxLoginAttempts > 10) {
                toastr.error('Maximum login attempts must be between 1 and 10');
                return;
            }
            
            if (sessionTimeout < 5 || sessionTimeout > 1440) {
                toastr.error('Session timeout must be between 5 and 1440 minutes');
                return;
            }
            
            showLoading();
            
            const settings = {
                enable_2fa: enable2FA,
                require_strong_passwords: requireStrongPasswords,
                password_expiration: passwordExpiration,
                max_login_attempts: maxLoginAttempts,
                session_timeout: sessionTimeout,
                ip_whitelist: ipWhitelist ? ipWhitelist.split('\n') : []
            };
            
            $.ajax({
                url: 'https://website-backendd-1.onrender.com/api/admin/settings/security',
                type: 'POST',
                headers: {
                    'Authorization': 'Bearer ' + authToken,
                    'Content-Type': 'application/json'
                },
                data: JSON.stringify(settings),
                success: function(response) {
                    hideLoading();
                    if (response.success) {
                        toastr.success('Security settings saved successfully');
                    } else {
                        toastr.error(response.message || 'Failed to save security settings');
                    }
                },
                error: function(xhr) {
                    hideLoading();
                    if (xhr.responseJSON && xhr.responseJSON.message) {
                        toastr.error(xhr.responseJSON.message);
                    } else {
                        toastr.error('Failed to save security settings. Please try again.');
                    }
                }
            });
        }
        
        // Handle chat message
        function sendChatMessage(message) {
            // In a real implementation, you would send the message via WebSocket
            // This is a placeholder for the actual chat functionality
            
            const chatBody = $('#chatWidget .chat-body');
            const now = new Date();
            const timeString = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            
            // Add admin message to chat
            chatBody.append(`
                <div class="chat-message admin">
                    <img src="https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1" alt="Admin" class="chat-avatar">
                    <div class="chat-content">
                        <div class="chat-bubble">
                            ${message}
                        </div>
                        <div class="chat-time">
                            ${timeString}
                        </div>
                    </div>
                </div>
            `);
            
            // Scroll to bottom
            chatBody.scrollTop(chatBody[0].scrollHeight);
            
            // Simulate user reply after a delay
            setTimeout(() => {
                const replies = [
                    "Thanks for your help!",
                    "I understand now.",
                    "That makes sense.",
                    "Can you explain more about that?",
                    "When will this be fixed?",
                    "I appreciate your assistance.",
                    "What should I do next?",
                    "That's great news!"
                ];
                
                const randomReply = replies[Math.floor(Math.random() * replies.length)];
                
                chatBody.append(`
                    <div class="chat-message user">
                        <div class="chat-content">
                            <div class="chat-bubble">
                                ${randomReply}
                            </div>
                            <div class="chat-time">
                                ${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}
                            </div>
                        </div>
                        <img src="https://randomuser.me/api/portraits/men/1.jpg" alt="User" class="chat-avatar">
                    </div>
                `);
                
                // Scroll to bottom
                chatBody.scrollTop(chatBody[0].scrollHeight);
            }, 1000);
        }
        
        // Export data
        function exportData(type) {
            showLoading();
            
            let url = '';
            let fileName = '';
            
            switch(type) {
                case 'users':
                    url = 'https://website-backendd-1.onrender.com/api/admin/users/export';
                    fileName = 'users_export_' + moment().format('YYYYMMDD') + '.csv';
                    break;
                default:
                    toastr.error('Invalid export type');
                    return;
            }
            
            $.ajax({
                url: url,
                type: 'GET',
                headers: {
                    'Authorization': 'Bearer ' + authToken
                },
                xhrFields: {
                    responseType: 'blob'
                },
                success: function(data) {
                    hideLoading();
                    const a = document.createElement('a');
                    const url = window.URL.createObjectURL(data);
                    a.href = url;
                    a.download = fileName;
                    document.body.appendChild(a);
                    a.click();
                    window.URL.revokeObjectURL(url);
                    document.body.removeChild(a);
                    
                    toastr.success('Export completed successfully');
                },
                error: function(xhr) {
                    hideLoading();
                    if (xhr.responseJSON && xhr.responseJSON.message) {
                        toastr.error(xhr.responseJSON.message);
                    } else {
                        toastr.error('Failed to export data. Please try again.');
                    }
                }
            });
        }
        
        // Toggle password visibility
        function togglePassword(inputId) {
            const input = $(`#${inputId}`);
            const icon = $(`#${inputId}`).siblings('.password-toggle').find('i');
            
            if (input.attr('type') === 'password') {
                input.attr('type', 'text');
                icon.removeClass('fa-eye').addClass('fa-eye-slash');
            } else {
                input.attr('type', 'password');
                icon.removeClass('fa-eye-slash').addClass('fa-eye');
            }
        }
        
        // Show loading overlay
        function showLoading() {
            $('.loading-overlay').addClass('active');
        }
        
        // Hide loading overlay
        function hideLoading() {
            $('.loading-overlay').removeClass('active');
        }
        
        // Show login error
        function showLoginError(message) {
            $('#loginErrorText').text(message);
            $('#loginError').show();
        }
        
        // Show forgot password error
        function showForgotPasswordError(message) {
            $('#forgotPasswordErrorText').text(message);
            $('#forgotPasswordError').show();
        }
        
        // Show add user error
        function showAddUserError(message) {
            $('#addUserErrorText').text(message);
            $('#addUserError').show();
        }
        
        // Show edit user error
        function showEditUserError(message) {
            $('#editUserErrorText').text(message);
            $('#editUserError').show();
        }
        
        // Show add investment error
        function showAddInvestmentError(message) {
            $('#addInvestmentErrorText').text(message);
            $('#addInvestmentError').show();
        }
        
        // Show edit investment error
        function showEditInvestmentError(message) {
            $('#editInvestmentErrorText').text(message);
            $('#editInvestmentError').show();
        }
        
        // Show process withdrawal error
        function showProcessWithdrawalError(message) {
            $('#processWithdrawalErrorText').text(message);
            $('#processWithdrawalError').show();
        }
        
        // Show verify deposit error
        function showVerifyDepositError(message) {
            $('#verifyDepositErrorText').text(message);
            $('#verifyDepositError').show();
        }
        
        // Show new ticket error
        function showNewTicketError(message) {
            $('#newTicketErrorText').text(message);
            $('#newTicketError').show();
        }
        
        // Show ticket reply error
        function showTicketReplyError(message) {
            $('#ticketReplyErrorText').text(message);
            $('#ticketReplyError').show();
        }
        
        // Show send notification error
        function showSendNotificationError(message) {
            $('#sendNotificationErrorText').text(message);
            $('#sendNotificationError').show();
        }
        
        // Show create promotion error
        function showCreatePromotionError(message) {
            $('#createPromotionErrorText').text(message);
            $('#createPromotionError').show();
        }
    </script>
</body>
</html>
