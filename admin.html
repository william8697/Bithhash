<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Admin Dashboard | BitHash LLC - Institutional Bitcoin Mining</title>
    <meta name="description" content="BitHash LLC Admin Dashboard for managing institutional-grade Bitcoin mining operations with enterprise security standards.">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rowdies:wght@300;400;700&family=Inter:wght@300;400;500;600;700&family=Manrope:wght@500;600;700&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" href="https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1" type="image/png">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- DataTables -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.4.1/css/buttons.dataTables.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.5.0/css/responsive.dataTables.min.css">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- AOS Animation -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    
    <!-- Toastr -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    
    <style>
        :root {
            --primary: #00D395;
            --primary-dark: #00B783;
            --primary-light: #00E5A1;
            --secondary: #1E1E1E;
            --secondary-dark: #121212;
            --dark: #E5E5E5;
            --darker: #0A0A0A;
            --light: #121212;
            --lighter: #1E1E1E;
            --gray: #8E8E8E;
            --gray-light: #2E2E2E;
            --gray-lighter: #252525;
            --success: #00D395;
            --warning: #FFB800;
            --error: #FF3D57;
            --gold: #D4AF37;
            --gold-light: #FFD700;
            --gold-dark: #996515;
            --blue: #003366;
            --blue-dark: #002244;
            --blue-light: #004488;
            --purple: #784FED;
            --pink: #EC4899;
            --gradient: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            --gold-gradient: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 100%);
            --blue-gradient: linear-gradient(135deg, var(--blue) 0%, var(--blue-dark) 100%);
            --border-radius: 8px;
            --border-radius-lg: 12px;
            --box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --box-shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.2), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            --security-blue: #1A73E8;
            --security-green: #34A853;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }

        body {
            background-color: var(--secondary-dark);
            color: var(--dark);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Admin Login Styles */
        .admin-login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: var(--secondary);
            padding: 2rem;
        }

        .admin-login-box {
            background-color: var(--lighter);
            border-radius: var(--border-radius-lg);
            padding: 2.5rem;
            width: 100%;
            max-width: 500px;
            box-shadow: var(--box-shadow-lg);
            border: 1px solid var(--gray-light);
        }

        .admin-login-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .admin-login-header img {
            height: 60px;
            margin-bottom: 1rem;
        }

        .admin-login-header h1 {
            font-family: 'Manrope', sans-serif;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .admin-login-header p {
            color: var(--gray);
            font-size: 0.9rem;
        }

        .admin-login-form .form-group {
            margin-bottom: 1.5rem;
        }

        .admin-login-form label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--dark);
            font-weight: 500;
            font-size: 0.9rem;
        }

        .admin-login-form input {
            width: 100%;
            padding: 0.8rem 1rem;
            border-radius: var(--border-radius);
            border: 1px solid var(--gray-light);
            background-color: var(--secondary);
            color: var(--dark);
            font-size: 1rem;
            transition: var(--transition);
        }

        .admin-login-form input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(0, 211, 149, 0.2);
        }

        .admin-login-form button {
            width: 100%;
            padding: 0.8rem;
            border-radius: var(--border-radius);
            background: var(--gradient);
            color: white;
            border: none;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 0.5rem;
        }

        .admin-login-form button:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .admin-login-footer {
            text-align: center;
            margin-top: 1.5rem;
            font-size: 0.9rem;
            color: var(--gray);
        }

        .admin-login-footer a {
            color: var(--primary);
            text-decoration: none;
            transition: var(--transition);
        }

        .admin-login-footer a:hover {
            text-decoration: underline;
        }

        /* Admin Dashboard Styles */
        .admin-dashboard {
            display: none;
        }

        .admin-header {
            background-color: var(--lighter);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--gray-light);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .admin-header-left {
            display: flex;
            align-items: center;
        }

        .admin-header-left img {
            height: 40px;
            margin-right: 1rem;
        }

        .admin-header-left h1 {
            font-family: 'Manrope', sans-serif;
            font-weight: 700;
            color: var(--primary);
            font-size: 1.5rem;
        }

        .admin-header-right {
            display: flex;
            align-items: center;
        }

        .admin-header-right .admin-notification {
            position: relative;
            margin-right: 1.5rem;
            cursor: pointer;
        }

        .admin-header-right .admin-notification i {
            font-size: 1.3rem;
            color: var(--gray);
            transition: var(--transition);
        }

        .admin-header-right .admin-notification:hover i {
            color: var(--primary);
        }

        .admin-header-right .admin-notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: var(--error);
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 0.7rem;
            font-weight: bold;
        }

        .admin-header-right .admin-profile {
            display: flex;
            align-items: center;
            cursor: pointer;
            position: relative;
        }

        .admin-header-right .admin-profile img {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            margin-right: 0.5rem;
            object-fit: cover;
            border: 2px solid var(--primary);
        }

        .admin-header-right .admin-profile .admin-name {
            font-weight: 600;
            color: var(--dark);
            margin-right: 0.5rem;
        }

        .admin-header-right .admin-profile i {
            color: var(--gray);
            transition: var(--transition);
        }

        .admin-header-right .admin-profile:hover i {
            color: var(--primary);
        }

        .admin-header-right .admin-profile-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background-color: var(--lighter);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow-lg);
            width: 200px;
            padding: 0.5rem 0;
            z-index: 101;
            display: none;
            border: 1px solid var(--gray-light);
        }

        .admin-header-right .admin-profile:hover .admin-profile-dropdown {
            display: block;
        }

        .admin-header-right .admin-profile-dropdown a {
            display: block;
            padding: 0.7rem 1rem;
            color: var(--dark);
            text-decoration: none;
            transition: var(--transition);
            font-size: 0.9rem;
        }

        .admin-header-right .admin-profile-dropdown a:hover {
            background-color: var(--gray-light);
            color: var(--primary);
        }

        .admin-header-right .admin-profile-dropdown a i {
            margin-right: 0.5rem;
            width: 20px;
            text-align: center;
        }

        .admin-header-right .admin-profile-dropdown .divider {
            height: 1px;
            background-color: var(--gray-light);
            margin: 0.5rem 0;
        }

        .admin-sidebar {
            width: 250px;
            background-color: var(--lighter);
            height: calc(100vh - 70px);
            position: fixed;
            top: 70px;
            left: 0;
            overflow-y: auto;
            transition: var(--transition);
            border-right: 1px solid var(--gray-light);
            z-index: 99;
        }

        .admin-sidebar-menu {
            padding: 1rem 0;
        }

        .admin-sidebar-menu .menu-title {
            padding: 0.5rem 1.5rem;
            color: var(--gray);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 1rem;
        }

        .admin-sidebar-menu .menu-item {
            display: flex;
            align-items: center;
            padding: 0.8rem 1.5rem;
            color: var(--dark);
            text-decoration: none;
            transition: var(--transition);
            font-size: 0.95rem;
            font-weight: 500;
        }

        .admin-sidebar-menu .menu-item i {
            margin-right: 0.8rem;
            font-size: 1.1rem;
            width: 20px;
            text-align: center;
        }

        .admin-sidebar-menu .menu-item:hover {
            background-color: var(--gray-light);
            color: var(--primary);
        }

        .admin-sidebar-menu .menu-item.active {
            background-color: rgba(0, 211, 149, 0.1);
            color: var(--primary);
            border-left: 3px solid var(--primary);
        }

        .admin-sidebar-menu .menu-item .badge {
            margin-left: auto;
            background-color: var(--error);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 0.7rem;
            font-weight: bold;
        }

        .admin-main-content {
            margin-left: 250px;
            padding: 2rem;
            min-height: calc(100vh - 70px);
            transition: var(--transition);
        }

        .admin-page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .admin-page-header h2 {
            font-family: 'Manrope', sans-serif;
            font-weight: 700;
            color: var(--dark);
            font-size: 1.8rem;
        }

        .admin-page-header .breadcrumb {
            display: flex;
            align-items: center;
            color: var(--gray);
            font-size: 0.9rem;
        }

        .admin-page-header .breadcrumb a {
            color: var(--gray);
            text-decoration: none;
            transition: var(--transition);
        }

        .admin-page-header .breadcrumb a:hover {
            color: var(--primary);
        }

        .admin-page-header .breadcrumb i {
            margin: 0 0.5rem;
            font-size: 0.7rem;
        }

        .admin-card {
            background-color: var(--lighter);
            border-radius: var(--border-radius-lg);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: var(--box-shadow);
            border: 1px solid var(--gray-light);
        }

        .admin-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--gray-light);
        }

        .admin-card-header h3 {
            font-weight: 600;
            color: var(--dark);
            font-size: 1.2rem;
        }

        .admin-card-header .admin-card-actions {
            display: flex;
            align-items: center;
        }

        .admin-card-header .admin-card-actions button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: var(--border-radius);
            font-weight: 500;
            font-size: 0.9rem;
            cursor: pointer;
            transition: var(--transition);
            margin-left: 0.5rem;
        }

        .admin-card-header .admin-card-actions button:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
        }

        .admin-card-header .admin-card-actions button.secondary {
            background-color: var(--gray-light);
            color: var(--dark);
        }

        .admin-card-header .admin-card-actions button.secondary:hover {
            background-color: var(--gray);
        }

        .admin-stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .admin-stat-card {
            background-color: var(--lighter);
            border-radius: var(--border-radius-lg);
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            border: 1px solid var(--gray-light);
            transition: var(--transition);
        }

        .admin-stat-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--box-shadow-lg);
        }

        .admin-stat-card .stat-title {
            color: var(--gray);
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
        }

        .admin-stat-card .stat-title i {
            margin-right: 0.5rem;
            font-size: 1rem;
        }

        .admin-stat-card .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 0.5rem;
        }

        .admin-stat-card .stat-change {
            font-size: 0.9rem;
            display: flex;
            align-items: center;
        }

        .admin-stat-card .stat-change.positive {
            color: var(--success);
        }

        .admin-stat-card .stat-change.negative {
            color: var(--error);
        }

        .admin-stat-card .stat-change i {
            margin-right: 0.3rem;
        }

        .admin-table-container {
            overflow-x: auto;
            border-radius: var(--border-radius-lg);
            border: 1px solid var(--gray-light);
        }

        .admin-table {
            width: 100%;
            border-collapse: collapse;
            background-color: var(--lighter);
        }

        .admin-table thead th {
            background-color: var(--secondary);
            color: var(--dark);
            font-weight: 600;
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid var(--gray-light);
        }

        .admin-table tbody tr {
            border-bottom: 1px solid var(--gray-light);
            transition: var(--transition);
        }

        .admin-table tbody tr:last-child {
            border-bottom: none;
        }

        .admin-table tbody tr:hover {
            background-color: var(--gray-light);
        }

        .admin-table tbody td {
            padding: 1rem;
            color: var(--dark);
            font-size: 0.9rem;
        }

        .admin-table tbody td .status {
            display: inline-block;
            padding: 0.3rem 0.6rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .admin-table tbody td .status.active {
            background-color: rgba(0, 211, 149, 0.1);
            color: var(--success);
        }

        .admin-table tbody td .status.pending {
            background-color: rgba(255, 184, 0, 0.1);
            color: var(--warning);
        }

        .admin-table tbody td .status.suspended {
            background-color: rgba(255, 61, 87, 0.1);
            color: var(--error);
        }

        .admin-table tbody td .action-btn {
            background: none;
            border: none;
            color: var(--primary);
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: var(--transition);
            padding: 0.3rem 0.5rem;
            border-radius: var(--border-radius);
        }

        .admin-table tbody td .action-btn:hover {
            background-color: rgba(0, 211, 149, 0.1);
        }

        .admin-table tbody td .action-btn.delete {
            color: var(--error);
        }

        .admin-table tbody td .action-btn.delete:hover {
            background-color: rgba(255, 61, 87, 0.1);
        }

        .admin-form-group {
            margin-bottom: 1.5rem;
        }

        .admin-form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--dark);
            font-weight: 500;
            font-size: 0.9rem;
        }

        .admin-form-group input,
        .admin-form-group select,
        .admin-form-group textarea {
            width: 100%;
            padding: 0.8rem 1rem;
            border-radius: var(--border-radius);
            border: 1px solid var(--gray-light);
            background-color: var(--secondary);
            color: var(--dark);
            font-size: 1rem;
            transition: var(--transition);
        }

        .admin-form-group input:focus,
        .admin-form-group select:focus,
        .admin-form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(0, 211, 149, 0.2);
        }

        .admin-form-group textarea {
            min-height: 120px;
            resize: vertical;
        }

        .admin-form-actions {
            display: flex;
            justify-content: flex-end;
            margin-top: 2rem;
        }

        .admin-form-actions button {
            padding: 0.8rem 1.5rem;
            border-radius: var(--border-radius);
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .admin-form-actions button.primary {
            background: var(--gradient);
            color: white;
            border: none;
        }

        .admin-form-actions button.primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .admin-form-actions button.secondary {
            background-color: transparent;
            border: 1px solid var(--gray);
            color: var(--gray);
            margin-right: 1rem;
        }

        .admin-form-actions button.secondary:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .admin-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition-slow);
        }

        .admin-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .admin-modal-content {
            background-color: var(--lighter);
            border-radius: var(--border-radius-lg);
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            transform: translateY(20px);
            transition: var(--transition-slow);
            border: 1px solid var(--gray-light);
        }

        .admin-modal.active .admin-modal-content {
            transform: translateY(0);
        }

        .admin-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem;
            border-bottom: 1px solid var(--gray-light);
        }

        .admin-modal-header h3 {
            font-weight: 600;
            color: var(--dark);
            font-size: 1.3rem;
        }

        .admin-modal-header .close-modal {
            background: none;
            border: none;
            color: var(--gray);
            font-size: 1.5rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .admin-modal-header .close-modal:hover {
            color: var(--error);
        }

        .admin-modal-body {
            padding: 1.5rem;
        }

        .admin-modal-footer {
            padding: 1.5rem;
            border-top: 1px solid var(--gray-light);
            display: flex;
            justify-content: flex-end;
        }

        .admin-tabs {
            display: flex;
            border-bottom: 1px solid var(--gray-light);
            margin-bottom: 1.5rem;
        }

        .admin-tab {
            padding: 0.8rem 1.5rem;
            cursor: pointer;
            font-weight: 500;
            color: var(--gray);
            transition: var(--transition);
            border-bottom: 2px solid transparent;
        }

        .admin-tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .admin-tab-content {
            display: none;
        }

        .admin-tab-content.active {
            display: block;
        }

        .admin-chat-container {
            display: flex;
            flex-direction: column;
            height: 500px;
            border: 1px solid var(--gray-light);
            border-radius: var(--border-radius-lg);
            overflow: hidden;
        }

        .admin-chat-header {
            background-color: var(--secondary);
            padding: 1rem;
            border-bottom: 1px solid var(--gray-light);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .admin-chat-header h4 {
            font-weight: 600;
            color: var(--dark);
        }

        .admin-chat-header .chat-actions {
            display: flex;
            align-items: center;
        }

        .admin-chat-header .chat-actions button {
            background: none;
            border: none;
            color: var(--gray);
            cursor: pointer;
            font-size: 1rem;
            margin-left: 0.5rem;
            transition: var(--transition);
        }

        .admin-chat-header .chat-actions button:hover {
            color: var(--primary);
        }

        .admin-chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            background-color: var(--lighter);
        }

        .admin-chat-message {
            margin-bottom: 1rem;
            max-width: 80%;
        }

        .admin-chat-message.user {
            margin-left: auto;
        }

        .admin-chat-message.admin {
            margin-right: auto;
        }

        .admin-chat-message .message-content {
            padding: 0.8rem 1rem;
            border-radius: var(--border-radius-lg);
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .admin-chat-message.user .message-content {
            background-color: var(--primary);
            color: white;
            border-top-right-radius: 0;
        }

        .admin-chat-message.admin .message-content {
            background-color: var(--gray-light);
            color: var(--dark);
            border-top-left-radius: 0;
        }

        .admin-chat-message .message-meta {
            font-size: 0.7rem;
            color: var(--gray);
            margin-top: 0.3rem;
            display: flex;
            align-items: center;
        }

        .admin-chat-message.user .message-meta {
            justify-content: flex-end;
        }

        .admin-chat-message.admin .message-meta {
            justify-content: flex-start;
        }

        .admin-chat-message .message-meta i {
            margin-right: 0.3rem;
        }

        .admin-chat-input {
            display: flex;
            padding: 1rem;
            background-color: var(--secondary);
            border-top: 1px solid var(--gray-light);
        }

        .admin-chat-input input {
            flex: 1;
            padding: 0.8rem 1rem;
            border-radius: var(--border-radius);
            border: 1px solid var(--gray-light);
            background-color: var(--lighter);
            color: var(--dark);
            font-size: 0.9rem;
            margin-right: 0.5rem;
        }

        .admin-chat-input button {
            padding: 0.8rem 1.2rem;
            border-radius: var(--border-radius);
            background: var(--gradient);
            color: white;
            border: none;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }

        .admin-chat-input button:hover {
            background: var(--primary-dark);
        }

        .admin-notification-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .admin-notification-item {
            padding: 1rem;
            border-bottom: 1px solid var(--gray-light);
            transition: var(--transition);
            cursor: pointer;
        }

        .admin-notification-item:hover {
            background-color: var(--gray-light);
        }

        .admin-notification-item.unread {
            background-color: rgba(0, 211, 149, 0.05);
        }

        .admin-notification-item .notification-title {
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 0.3rem;
            display: flex;
            align-items: center;
        }

        .admin-notification-item .notification-title i {
            margin-right: 0.5rem;
            color: var(--primary);
        }

        .admin-notification-item .notification-message {
            font-size: 0.9rem;
            color: var(--gray);
            margin-bottom: 0.5rem;
        }

        .admin-notification-item .notification-time {
            font-size: 0.7rem;
            color: var(--gray);
            display: flex;
            align-items: center;
        }

        .admin-notification-item .notification-time i {
            margin-right: 0.3rem;
        }

        /* Responsive Styles */
        @media (max-width: 992px) {
            .admin-sidebar {
                transform: translateX(-100%);
            }

            .admin-sidebar.active {
                transform: translateX(0);
            }

            .admin-main-content {
                margin-left: 0;
            }

            .admin-header-left h1 {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .admin-stats-grid {
                grid-template-columns: 1fr;
            }

            .admin-page-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .admin-page-header .breadcrumb {
                margin-top: 0.5rem;
            }
        }

        /* DataTables Overrides */
        .dataTables_wrapper .dataTables_filter input {
            background-color: var(--secondary);
            color: var(--dark);
            border: 1px solid var(--gray-light);
            padding: 0.5rem;
            border-radius: var(--border-radius);
        }

        .dataTables_wrapper .dataTables_length select {
            background-color: var(--secondary);
            color: var(--dark);
            border: 1px solid var(--gray-light);
            padding: 0.3rem;
            border-radius: var(--border-radius);
        }

        .dataTables_wrapper .dataTables_paginate .paginate_button {
            color: var(--dark) !important;
            border: 1px solid var(--gray-light) !important;
            background-color: var(--secondary) !important;
            padding: 0.3rem 0.8rem !important;
            border-radius: var(--border-radius) !important;
            margin: 0 0.2rem !important;
        }

        .dataTables_wrapper .dataTables_paginate .paginate_button.current,
        .dataTables_wrapper .dataTables_paginate .paginate_button.current:hover {
            background: var(--gradient) !important;
            color: white !important;
            border: 1px solid var(--primary) !important;
        }

        .dataTables_wrapper .dataTables_paginate .paginate_button:hover {
            background-color: var(--gray-light) !important;
            color: var(--primary) !important;
            border: 1px solid var(--gray) !important;
        }

        /* Toastr Overrides */
        .toast {
            background-color: var(--lighter) !important;
            border: 1px solid var(--gray-light) !important;
            color: var(--dark) !important;
            box-shadow: var(--box-shadow-lg) !important;
        }

        .toast-success {
            border-left: 4px solid var(--success) !important;
        }

        .toast-error {
            border-left: 4px solid var(--error) !important;
        }

        .toast-warning {
            border-left: 4px solid var(--warning) !important;
        }

        .toast-info {
            border-left: 4px solid var(--security-blue) !important;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--secondary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--gray-light);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--gray);
        }
    </style>
</head>
<body>
    <!-- Admin Login Section -->
    <div class="admin-login-container" id="adminLoginSection">
        <div class="admin-login-box">
            <div class="admin-login-header">
                <img src="https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1" alt="BitHash LLC Logo">
                <h1>Admin Dashboard</h1>
                <p>Sign in to access the admin panel</p>
            </div>
            <form class="admin-login-form" id="adminLoginForm">
                <div class="form-group">
                    <label for="adminEmail">Email Address</label>
                    <input type="email" id="adminEmail" name="email" required>
                </div>
                <div class="form-group">
                    <label for="adminPassword">Password</label>
                    <input type="password" id="adminPassword" name="password" required>
                </div>
                <button type="submit">Sign In</button>
            </form>
            <div class="admin-login-footer">
                <a href="#" id="forgotPasswordLink">Forgot Password?</a>
            </div>
        </div>
    </div>

    <!-- 2FA Verification Modal -->
    <div class="admin-modal" id="twoFactorModal">
        <div class="admin-modal-content">
            <div class="admin-modal-header">
                <h3>Two-Factor Authentication</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="admin-modal-body">
                <p>Please enter the 6-digit code from your authenticator app to continue.</p>
                <div class="admin-form-group">
                    <label for="twoFactorCode">Verification Code</label>
                    <input type="text" id="twoFactorCode" name="code" placeholder="123456" maxlength="6">
                </div>
            </div>
            <div class="admin-modal-footer">
                <button class="secondary close-modal">Cancel</button>
                <button class="primary" id="verifyTwoFactorBtn">Verify</button>
            </div>
        </div>
    </div>

    <!-- Forgot Password Modal -->
    <div class="admin-modal" id="forgotPasswordModal">
        <div class="admin-modal-content">
            <div class="admin-modal-header">
                <h3>Reset Password</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="admin-modal-body">
                <p>Enter your email address and we'll send you a link to reset your password.</p>
                <div class="admin-form-group">
                    <label for="resetEmail">Email Address</label>
                    <input type="email" id="resetEmail" name="email" required>
                </div>
            </div>
            <div class="admin-modal-footer">
                <button class="secondary close-modal">Cancel</button>
                <button class="primary" id="sendResetLinkBtn">Send Reset Link</button>
            </div>
        </div>
    </div>

    <!-- Admin Dashboard Section -->
    <div class="admin-dashboard" id="adminDashboard">
        <!-- Admin Header -->
        <header class="admin-header">
            <div class="admin-header-left">
                <img src="https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1" alt="BitHash LLC Logo">
                <h1>BitHash LLC Admin</h1>
                <button id="sidebarToggle" style="margin-left: 1rem; background: none; border: none; color: var(--gray); font-size: 1.2rem; cursor: pointer;">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
            <div class="admin-header-right">
                <div class="admin-notification">
                    <i class="fas fa-bell"></i>
                    <span class="admin-notification-badge" id="notificationCount">0</span>
                    <div class="admin-notification-dropdown">
                        <div class="admin-notification-list" id="notificationList">
                            <!-- Notifications will be loaded here -->
                        </div>
                        <div class="admin-notification-footer">
                            <a href="#" id="viewAllNotifications">View All Notifications</a>
                        </div>
                    </div>
                </div>
                <div class="admin-profile">
                    <img src="https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1" alt="Admin Profile" id="adminProfileImage">
                    <span class="admin-name" id="adminName">Admin</span>
                    <i class="fas fa-chevron-down"></i>
                    <div class="admin-profile-dropdown">
                        <a href="#"><i class="fas fa-user"></i> My Profile</a>
                        <a href="#"><i class="fas fa-cog"></i> Settings</a>
                        <div class="divider"></div>
                        <a href="#" id="adminLogoutBtn"><i class="fas fa-sign-out-alt"></i> Logout</a>
                    </div>
                </div>
            </div>
        </header>

        <!-- Admin Sidebar -->
        <aside class="admin-sidebar" id="adminSidebar">
            <nav class="admin-sidebar-menu">
                <div class="menu-title">Main</div>
                <a href="#" class="menu-item active" data-section="dashboard">
                    <i class="fas fa-tachometer-alt"></i> Dashboard
                </a>
                
                <div class="menu-title">Management</div>
                <a href="#" class="menu-item" data-section="users">
                    <i class="fas fa-users"></i> Users
                    <span class="badge" id="pendingUsersCount">0</span>
                </a>
                <a href="#" class="menu-item" data-section="investments">
                    <i class="fas fa-chart-line"></i> Investments
                </a>
                <a href="#" class="menu-item" data-section="transactions">
                    <i class="fas fa-exchange-alt"></i> Transactions
                </a>
                <a href="#" class="menu-item" data-section="withdrawals">
                    <i class="fas fa-money-bill-wave"></i> Withdrawals
                    <span class="badge" id="pendingWithdrawalsCount">0</span>
                </a>
                
                <div class="menu-title">Support</div>
                <a href="#" class="menu-item" data-section="tickets">
                    <i class="fas fa-ticket-alt"></i> Support Tickets
                    <span class="badge" id="openTicketsCount">0</span>
                </a>
                <a href="#" class="menu-item" data-section="chat">
                    <i class="fas fa-comments"></i> Live Chat
                </a>
                
                <div class="menu-title">Marketing</div>
                <a href="#" class="menu-item" data-section="notifications">
                    <i class="fas fa-bullhorn"></i> Notifications
                </a>
                <a href="#" class="menu-item" data-section="promotions">
                    <i class="fas fa-gift"></i> Promotions
                </a>
                
                <div class="menu-title">Settings</div>
                <a href="#" class="menu-item" data-section="settings">
                    <i class="fas fa-cog"></i> System Settings
                </a>
                <a href="#" class="menu-item" data-section="security">
                    <i class="fas fa-shield-alt"></i> Security
                </a>
            </nav>
        </aside>

        <!-- Admin Main Content -->
        <main class="admin-main-content" id="adminMainContent">
            <!-- Dashboard Section -->
            <section class="admin-section active" id="dashboardSection">
                <div class="admin-page-header">
                    <h2>Dashboard Overview</h2>
                    <div class="breadcrumb">
                        <a href="#">Home</a>
                        <i class="fas fa-chevron-right"></i>
                        <span>Dashboard</span>
                    </div>
                </div>

                <div class="admin-stats-grid">
                    <div class="admin-stat-card">
                        <div class="stat-title">
                            <i class="fas fa-users"></i> Total Users
                        </div>
                        <div class="stat-value" id="totalUsers">0</div>
                        <div class="stat-change positive">
                            <i class="fas fa-arrow-up"></i> <span id="userGrowthRate">0%</span> this month
                        </div>
                    </div>
                    <div class="admin-stat-card">
                        <div class="stat-title">
                            <i class="fas fa-wallet"></i> Total Deposits
                        </div>
                        <div class="stat-value" id="totalDeposits">$0</div>
                        <div class="stat-change positive">
                            <i class="fas fa-arrow-up"></i> <span id="depositGrowthRate">0%</span> this month
                        </div>
                    </div>
                    <div class="admin-stat-card">
                        <div class="stat-title">
                            <i class="fas fa-money-bill-wave"></i> Total Withdrawals
                        </div>
                        <div class="stat-value" id="totalWithdrawals">$0</div>
                        <div class="stat-change negative">
                            <i class="fas fa-arrow-down"></i> <span id="withdrawalGrowthRate">0%</span> this month
                        </div>
                    </div>
                    <div class="admin-stat-card">
                        <div class="stat-title">
                            <i class="fas fa-chart-line"></i> Active Investments
                        </div>
                        <div class="stat-value" id="activeInvestments">0</div>
                        <div class="stat-change positive">
                            <i class="fas fa-arrow-up"></i> <span id="investmentGrowthRate">0%</span> this month
                        </div>
                    </div>
                </div>

                <div class="admin-card">
                    <div class="admin-card-header">
                        <h3>Recent Activity</h3>
                        <div class="admin-card-actions">
                            <button class="secondary">View All</button>
                        </div>
                    </div>
                    <div class="admin-table-container">
                        <table class="admin-table" id="recentActivityTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>User</th>
                                    <th>Activity</th>
                                    <th>Amount</th>
                                    <th>Date</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Recent activity will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="admin-card">
                    <div class="admin-card-header">
                        <h3>System Statistics</h3>
                        <div class="admin-card-actions">
                            <select id="statisticsTimeRange">
                                <option value="7">Last 7 Days</option>
                                <option value="30" selected>Last 30 Days</option>
                                <option value="90">Last 90 Days</option>
                                <option value="365">Last Year</option>
                            </select>
                        </div>
                    </div>
                    <div style="height: 300px;">
                        <canvas id="statisticsChart"></canvas>
                    </div>
                </div>
            </section>

            <!-- Users Section -->
            <section class="admin-section" id="usersSection">
                <div class="admin-page-header">
                    <h2>User Management</h2>
                    <div class="breadcrumb">
                        <a href="#">Home</a>
                        <i class="fas fa-chevron-right"></i>
                        <span>Users</span>
                    </div>
                </div>

                <div class="admin-card">
                    <div class="admin-card-header">
                        <h3>All Users</h3>
                        <div class="admin-card-actions">
                            <button class="secondary" id="exportUsersBtn">Export</button>
                            <button class="primary" id="addUserBtn">Add User</button>
                        </div>
                    </div>
                    <div class="admin-table-container">
                        <table class="admin-table" id="usersTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Balance</th>
                                    <th>Status</th>
                                    <th>Joined</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Users will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Add/Edit User Modal -->
            <div class="admin-modal" id="userModal">
                <div class="admin-modal-content">
                    <div class="admin-modal-header">
                        <h3 id="userModalTitle">Add New User</h3>
                        <button class="close-modal">&times;</button>
                    </div>
                    <div class="admin-modal-body">
                        <form id="userForm">
                            <input type="hidden" id="userId">
                            <div class="admin-form-group">
                                <label for="userFirstName">First Name</label>
                                <input type="text" id="userFirstName" name="firstName" required>
                            </div>
                            <div class="admin-form-group">
                                <label for="userLastName">Last Name</label>
                                <input type="text" id="userLastName" name="lastName" required>
                            </div>
                            <div class="admin-form-group">
                                <label for="userEmail">Email Address</label>
                                <input type="email" id="userEmail" name="email" required>
                            </div>
                            <div class="admin-form-group">
                                <label for="userPassword">Password</label>
                                <input type="password" id="userPassword" name="password" required>
                            </div>
                            <div class="admin-form-group">
                                <label for="userBalance">Initial Balance ($)</label>
                                <input type="number" id="userBalance" name="balance" step="0.01" min="0" required>
                            </div>
                            <div class="admin-form-group">
                                <label for="userStatus">Account Status</label>
                                <select id="userStatus" name="status" required>
                                    <option value="active">Active</option>
                                    <option value="suspended">Suspended</option>
                                    <option value="pending">Pending Verification</option>
                                </select>
                            </div>
                        </form>
                    </div>
                    <div class="admin-modal-footer">
                        <button class="secondary close-modal">Cancel</button>
                        <button class="primary" id="saveUserBtn">Save User</button>
                    </div>
                </div>
            </div>

            <!-- User Details Modal -->
            <div class="admin-modal" id="userDetailsModal">
                <div class="admin-modal-content" style="max-width: 800px;">
                    <div class="admin-modal-header">
                        <h3 id="userDetailsTitle">User Details</h3>
                        <button class="close-modal">&times;</button>
                    </div>
                    <div class="admin-modal-body">
                        <div class="admin-tabs">
                            <div class="admin-tab active" data-tab="profile">Profile</div>
                            <div class="admin-tab" data-tab="balance">Balance</div>
                            <div class="admin-tab" data-tab="investments">Investments</div>
                            <div class="admin-tab" data-tab="transactions">Transactions</div>
                            <div class="admin-tab" data-tab="activity">Activity</div>
                        </div>
                        
                        <div class="admin-tab-content active" id="profileTab">
                            <div class="admin-form-group">
                                <label>User ID</label>
                                <input type="text" id="detailUserId" readonly>
                            </div>
                            <div class="admin-form-group">
                                <label>Full Name</label>
                                <input type="text" id="detailUserName" readonly>
                            </div>
                            <div class="admin-form-group">
                                <label>Email Address</label>
                                <input type="text" id="detailUserEmail" readonly>
                            </div>
                            <div class="admin-form-group">
                                <label>Account Status</label>
                                <input type="text" id="detailUserStatus" readonly>
                            </div>
                            <div class="admin-form-group">
                                <label>Registration Date</label>
                                <input type="text" id="detailUserRegistered" readonly>
                            </div>
                            <div class="admin-form-group">
                                <label>Last Login</label>
                                <input type="text" id="detailUserLastLogin" readonly>
                            </div>
                            <div class="admin-form-group">
                                <label>IP Address</label>
                                <input type="text" id="detailUserIp" readonly>
                            </div>
                        </div>
                        
                        <div class="admin-tab-content" id="balanceTab">
                            <div class="admin-form-group">
                                <label>Available Balance</label>
                                <input type="text" id="detailUserBalance" readonly>
                            </div>
                            <div class="admin-form-group">
                                <label>Total Deposits</label>
                                <input type="text" id="detailUserDeposits" readonly>
                            </div>
                            <div class="admin-form-group">
                                <label>Total Withdrawals</label>
                                <input type="text" id="detailUserWithdrawals" readonly>
                            </div>
                            <div class="admin-form-group">
                                <label>Total Investments</label>
                                <input type="text" id="detailUserInvested" readonly>
                            </div>
                            <div class="admin-form-group">
                                <label>Total Earnings</label>
                                <input type="text" id="detailUserEarnings" readonly>
                            </div>
                            <div class="admin-form-group">
                                <label>Adjust Balance</label>
                                <div style="display: flex; gap: 10px;">
                                    <input type="number" id="adjustBalanceAmount" placeholder="Amount" style="flex: 1;">
                                    <select id="adjustBalanceType" style="flex: 1;">
                                        <option value="add">Add Funds</option>
                                        <option value="subtract">Subtract Funds</option>
                                    </select>
                                </div>
                            </div>
                            <div class="admin-form-group">
                                <label>Adjustment Note</label>
                                <input type="text" id="adjustBalanceNote" placeholder="Reason for adjustment">
                            </div>
                            <div class="admin-form-actions">
                                <button class="primary" id="adjustBalanceBtn">Apply Adjustment</button>
                            </div>
                        </div>
                        
                        <div class="admin-tab-content" id="investmentsTab">
                            <div class="admin-table-container">
                                <table class="admin-table" id="userInvestmentsTable">
                                    <thead>
                                        <tr>
                                            <th>Plan</th>
                                            <th>Amount</th>
                                            <th>Start Date</th>
                                            <th>End Date</th>
                                            <th>Status</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- User investments will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <div class="admin-tab-content" id="transactionsTab">
                            <div class="admin-table-container">
                                <table class="admin-table" id="userTransactionsTable">
                                    <thead>
                                        <tr>
                                            <th>Type</th>
                                            <th>Amount</th>
                                            <th>Date</th>
                                            <th>Status</th>
                                            <th>Details</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- User transactions will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <div class="admin-tab-content" id="activityTab">
                            <div class="admin-table-container">
                                <table class="admin-table" id="userActivityTable">
                                    <thead>
                                        <tr>
                                            <th>Activity</th>
                                            <th>Date</th>
                                            <th>IP Address</th>
                                            <th>Device</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- User activity will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="admin-modal-footer">
                        <button class="secondary" id="suspendUserBtn">Suspend User</button>
                        <button class="primary" id="saveUserDetailsBtn">Save Changes</button>
                    </div>
                </div>
            </div>

            <!-- Investments Section -->
            <section class="admin-section" id="investmentsSection">
                <div class="admin-page-header">
                    <h2>Investment Management</h2>
                    <div class="breadcrumb">
                        <a href="#">Home</a>
                        <i class="fas fa-chevron-right"></i>
                        <span>Investments</span>
                    </div>
                </div>

                <div class="admin-card">
                    <div class="admin-card-header">
                        <h3>Active Investments</h3>
                        <div class="admin-card-actions">
                            <button class="secondary">Export</button>
                            <button class="primary">Add Investment Plan</button>
                        </div>
                    </div>
                    <div class="admin-table-container">
                        <table class="admin-table" id="investmentsTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>User</th>
                                    <th>Plan</th>
                                    <th>Amount</th>
                                    <th>Start Date</th>
                                    <th>End Date</th>
                                    <th>Daily Profit</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Investments will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Transactions Section -->
            <section class="admin-section" id="transactionsSection">
                <div class="admin-page-header">
                    <h2>Transaction Management</h2>
                    <div class="breadcrumb">
                        <a href="#">Home</a>
                        <i class="fas fa-chevron-right"></i>
                        <span>Transactions</span>
                    </div>
                </div>

                <div class="admin-card">
                    <div class="admin-card-header">
                        <h3>All Transactions</h3>
                        <div class="admin-card-actions">
                            <select id="transactionFilter">
                                <option value="all">All Transactions</option>
                                <option value="deposit">Deposits</option>
                                <option value="withdrawal">Withdrawals</option>
                                <option value="investment">Investments</option>
                                <option value="profit">Profit Earnings</option>
                            </select>
                            <button class="secondary">Export</button>
                        </div>
                    </div>
                    <div class="admin-table-container">
                        <table class="admin-table" id="transactionsTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>User</th>
                                    <th>Type</th>
                                    <th>Amount</th>
                                    <th>Date</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Transactions will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Withdrawals Section -->
            <section class="admin-section" id="withdrawalsSection">
                <div class="admin-page-header">
                    <h2>Withdrawal Management</h2>
                    <div class="breadcrumb">
                        <a href="#">Home</a>
                        <i class="fas fa-chevron-right"></i>
                        <span>Withdrawals</span>
                    </div>
                </div>

                <div class="admin-card">
                    <div class="admin-card-header">
                        <h3>Pending Withdrawals</h3>
                        <div class="admin-card-actions">
                            <button class="secondary">View All</button>
                        </div>
                    </div>
                    <div class="admin-table-container">
                        <table class="admin-table" id="pendingWithdrawalsTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>User</th>
                                    <th>Amount</th>
                                    <th>Method</th>
                                    <th>Date</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Pending withdrawals will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="admin-card">
                    <div class="admin-card-header">
                        <h3>Processed Withdrawals</h3>
                        <div class="admin-card-actions">
                            <select id="processedWithdrawalsFilter">
                                <option value="30">Last 30 Days</option>
                                <option value="90">Last 90 Days</option>
                                <option value="365">Last Year</option>
                                <option value="all">All Time</option>
                            </select>
                            <button class="secondary">Export</button>
                        </div>
                    </div>
                    <div class="admin-table-container">
                        <table class="admin-table" id="processedWithdrawalsTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>User</th>
                                    <th>Amount</th>
                                    <th>Method</th>
                                    <th>Date</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Processed withdrawals will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Tickets Section -->
            <section class="admin-section" id="ticketsSection">
                <div class="admin-page-header">
                    <h2>Support Ticket Management</h2>
                    <div class="breadcrumb">
                        <a href="#">Home</a>
                        <i class="fas fa-chevron-right"></i>
                        <span>Support Tickets</span>
                    </div>
                </div>

                <div class="admin-card">
                    <div class="admin-card-header">
                        <h3>Open Tickets</h3>
                        <div class="admin-card-actions">
                            <button class="secondary">View All</button>
                        </div>
                    </div>
                    <div class="admin-table-container">
                        <table class="admin-table" id="openTicketsTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>User</th>
                                    <th>Subject</th>
                                    <th>Category</th>
                                    <th>Priority</th>
                                    <th>Last Updated</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Open tickets will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Ticket Details Modal -->
            <div class="admin-modal" id="ticketModal">
                <div class="admin-modal-content" style="max-width: 800px;">
                    <div class="admin-modal-header">
                        <h3 id="ticketModalTitle">Ticket Details</h3>
                        <button class="close-modal">&times;</button>
                    </div>
                    <div class="admin-modal-body">
                        <div class="admin-form-group">
                            <label>Ticket ID</label>
                            <input type="text" id="ticketId" readonly>
                        </div>
                        <div class="admin-form-group">
                            <label>User</label>
                            <input type="text" id="ticketUser" readonly>
                        </div>
                        <div class="admin-form-group">
                            <label>Subject</label>
                            <input type="text" id="ticketSubject" readonly>
                        </div>
                        <div class="admin-form-group">
                            <label>Category</label>
                            <input type="text" id="ticketCategory" readonly>
                        </div>
                        <div class="admin-form-group">
                            <label>Status</label>
                            <select id="ticketStatus">
                                <option value="open">Open</option>
                                <option value="pending">Pending</option>
                                <option value="resolved">Resolved</option>
                                <option value="closed">Closed</option>
                            </select>
                        </div>
                        <div class="admin-form-group">
                            <label>Priority</label>
                            <select id="ticketPriority">
                                <option value="low">Low</option>
                                <option value="medium">Medium</option>
                                <option value="high">High</option>
                                <option value="critical">Critical</option>
                            </select>
                        </div>
                        <div class="admin-form-group">
                            <label>Message</label>
                            <textarea id="ticketMessage" readonly></textarea>
                        </div>
                        
                        <div class="admin-chat-container" id="ticketConversation">
                            <div class="admin-chat-messages" id="ticketMessages">
                                <!-- Ticket conversation will be loaded here -->
                            </div>
                            <div class="admin-chat-input">
                                <input type="text" id="ticketReplyInput" placeholder="Type your reply...">
                                <button id="ticketReplyBtn">Send</button>
                            </div>
                        </div>
                    </div>
                    <div class="admin-modal-footer">
                        <button class="secondary close-modal">Close</button>
                        <button class="primary" id="saveTicketBtn">Save Changes</button>
                    </div>
                </div>
            </div>

            <!-- Chat Section -->
            <section class="admin-section" id="chatSection">
                <div class="admin-page-header">
                    <h2>Live Chat Support</h2>
                    <div class="breadcrumb">
                        <a href="#">Home</a>
                        <i class="fas fa-chevron-right"></i>
                        <span>Live Chat</span>
                    </div>
                </div>

                <div class="admin-card">
                    <div class="admin-card-header">
                        <h3>Active Conversations</h3>
                        <div class="admin-card-actions">
                            <button class="secondary">View All</button>
                        </div>
                    </div>
                    <div class="admin-table-container">
                        <table class="admin-table" id="activeChatsTable">
                            <thead>
                                <tr>
                                    <th>User</th>
                                    <th>Started</th>
                                    <th>Last Message</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Active chats will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="admin-card">
                    <div class="admin-chat-container">
                        <div class="admin-chat-header">
                            <h4 id="chatWithUser">Select a conversation to start chatting</h4>
                            <div class="chat-actions">
                                <button id="endChatBtn"><i class="fas fa-phone-slash"></i> End Chat</button>
                                <button id="transferChatBtn"><i class="fas fa-user-friends"></i> Transfer</button>
                            </div>
                        </div>
                        <div class="admin-chat-messages" id="chatMessages">
                            <!-- Chat messages will be loaded here -->
                        </div>
                        <div class="admin-chat-input">
                            <input type="text" id="chatInput" placeholder="Type your message..." disabled>
                            <button id="sendChatBtn" disabled>Send</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Notifications Section -->
            <section class="admin-section" id="notificationsSection">
                <div class="admin-page-header">
                    <h2>Notification Management</h2>
                    <div class="breadcrumb">
                        <a href="#">Home</a>
                        <i class="fas fa-chevron-right"></i>
                        <span>Notifications</span>
                    </div>
                </div>

                <div class="admin-card">
                    <div class="admin-card-header">
                        <h3>Send Notification</h3>
                    </div>
                    <form id="notificationForm">
                        <div class="admin-form-group">
                            <label for="notificationTitle">Title</label>
                            <input type="text" id="notificationTitle" name="title" required>
                        </div>
                        <div class="admin-form-group">
                            <label for="notificationMessage">Message</label>
                            <textarea id="notificationMessage" name="message" required></textarea>
                        </div>
                        <div class="admin-form-group">
                            <label for="notificationType">Type</label>
                            <select id="notificationType" name="type" required>
                                <option value="info">Information</option>
                                <option value="warning">Warning</option>
                                <option value="success">Success</option>
                                <option value="error">Error</option>
                                <option value="promotion">Promotion</option>
                            </select>
                        </div>
                        <div class="admin-form-group">
                            <label for="notificationAudience">Audience</label>
                            <select id="notificationAudience" name="audience" required>
                                <option value="all">All Users</option>
                                <option value="active">Active Users Only</option>
                                <option value="investors">Investors Only</option>
                                <option value="non-investors">Non-Investors Only</option>
                                <option value="specific">Specific Users</option>
                            </select>
                        </div>
                        <div class="admin-form-group" id="specificUsersGroup" style="display: none;">
                            <label for="specificUsers">User Emails (comma separated)</label>
                            <textarea id="specificUsers" name="specificUsers" placeholder="user1@example.com, user2@example.com"></textarea>
                        </div>
                        <div class="admin-form-actions">
                            <button type="button" class="secondary">Cancel</button>
                            <button type="submit" class="primary">Send Notification</button>
                        </div>
                    </form>
                </div>

                <div class="admin-card">
                    <div class="admin-card-header">
                        <h3>Recent Notifications</h3>
                        <div class="admin-card-actions">
                            <button class="secondary">View All</button>
                        </div>
                    </div>
                    <div class="admin-table-container">
                        <table class="admin-table" id="notificationsTable">
                            <thead>
                                <tr>
                                    <th>Title</th>
                                    <th>Message</th>
                                    <th>Type</th>
                                    <th>Sent To</th>
                                    <th>Date</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Notifications will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Promotions Section -->
            <section class="admin-section" id="promotionsSection">
                <div class="admin-page-header">
                    <h2>Promotion Management</h2>
                    <div class="breadcrumb">
                        <a href="#">Home</a>
                        <i class="fas fa-chevron-right"></i>
                        <span>Promotions</span>
                    </div>
                </div>

                <div class="admin-card">
                    <div class="admin-card-header">
                        <h3>Create New Promotion</h3>
                    </div>
                    <form id="promotionForm">
                        <div class="admin-form-group">
                            <label for="promotionTitle">Title</label>
                            <input type="text" id="promotionTitle" name="title" required>
                        </div>
                        <div class="admin-form-group">
                            <label for="promotionDescription">Description</label>
                            <textarea id="promotionDescription" name="description" required></textarea>
                        </div>
                        <div class="admin-form-group">
                            <label for="promotionCode">Promo Code (optional)</label>
                            <input type="text" id="promotionCode" name="code">
                        </div>
                        <div class="admin-form-group">
                            <label for="promotionDiscount">Discount Amount (%)</label>
                            <input type="number" id="promotionDiscount" name="discount" min="0" max="100" step="1">
                        </div>
                        <div class="admin-form-group">
                            <label for="promotionBonus">Bonus Amount (%)</label>
                            <input type="number" id="promotionBonus" name="bonus" min="0" max="100" step="1">
                        </div>
                        <div class="admin-form-group">
                            <label for="promotionStartDate">Start Date</label>
                            <input type="datetime-local" id="promotionStartDate" name="startDate" required>
                        </div>
                        <div class="admin-form-group">
                            <label for="promotionEndDate">End Date</label>
                            <input type="datetime-local" id="promotionEndDate" name="endDate" required>
                        </div>
                        <div class="admin-form-group">
                            <label for="promotionImage">Promotion Image</label>
                            <input type="file" id="promotionImage" name="image" accept="image/*">
                        </div>
                        <div class="admin-form-actions">
                            <button type="button" class="secondary">Cancel</button>
                            <button type="submit" class="primary">Create Promotion</button>
                        </div>
                    </form>
                </div>

                <div class="admin-card">
                    <div class="admin-card-header">
                        <h3>Active Promotions</h3>
                        <div class="admin-card-actions">
                            <button class="secondary">View All</button>
                        </div>
                    </div>
                    <div class="admin-table-container">
                        <table class="admin-table" id="promotionsTable">
                            <thead>
                                <tr>
                                    <th>Title</th>
                                    <th>Description</th>
                                    <th>Code</th>
                                    <th>Discount</th>
                                    <th>Bonus</th>
                                    <th>Period</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Promotions will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Settings Section -->
            <section class="admin-section" id="settingsSection">
                <div class="admin-page-header">
                    <h2>System Settings</h2>
                    <div class="breadcrumb">
                        <a href="#">Home</a>
                        <i class="fas fa-chevron-right"></i>
                        <span>Settings</span>
                    </div>
                </div>

                <div class="admin-card">
                    <div class="admin-card-header">
                        <h3>General Settings</h3>
                    </div>
                    <form id="generalSettingsForm">
                        <div class="admin-form-group">
                            <label for="siteName">Site Name</label>
                            <input type="text" id="siteName" name="siteName" required>
                        </div>
                        <div class="admin-form-group">
                            <label for="siteUrl">Site URL</label>
                            <input type="url" id="siteUrl" name="siteUrl" required>
                        </div>
                        <div class="admin-form-group">
                            <label for="siteEmail">Contact Email</label>
                            <input type="email" id="siteEmail" name="siteEmail" required>
                        </div>
                        <div class="admin-form-group">
                            <label for="siteCurrency">Default Currency</label>
                            <select id="siteCurrency" name="siteCurrency" required>
                                <option value="USD">US Dollar (USD)</option>
                                <option value="EUR">Euro (EUR)</option>
                                <option value="GBP">British Pound (GBP)</option>
                                <option value="BTC">Bitcoin (BTC)</option>
                            </select>
                        </div>
                        <div class="admin-form-group">
                            <label for="maintenanceMode">Maintenance Mode</label>
                            <select id="maintenanceMode" name="maintenanceMode" required>
                                <option value="0">Disabled</option>
                                <option value="1">Enabled</option>
                            </select>
                        </div>
                        <div class="admin-form-group">
                            <label for="maintenanceMessage">Maintenance Message</label>
                            <textarea id="maintenanceMessage" name="maintenanceMessage"></textarea>
                        </div>
                        <div class="admin-form-actions">
                            <button type="button" class="secondary">Cancel</button>
                            <button type="submit" class="primary">Save Settings</button>
                        </div>
                    </form>
                </div>
            </section>

            <!-- Security Section -->
            <section class="admin-section" id="securitySection">
                <div class="admin-page-header">
                    <h2>Security Settings</h2>
                    <div class="breadcrumb">
                        <a href="#">Home</a>
                        <i class="fas fa-chevron-right"></i>
                        <span>Security</span>
                    </div>
                </div>

                <div class="admin-card">
                    <div class="admin-card-header">
                        <h3>Login Security</h3>
                    </div>
                    <form id="loginSecurityForm">
                        <div class="admin-form-group">
                            <label for="loginAttempts">Max Login Attempts</label>
                            <input type="number" id="loginAttempts" name="loginAttempts" min="1" max="10" required>
                        </div>
                        <div class="admin-form-group">
                            <label for="loginTimeout">Login Lockout Time (minutes)</label>
                            <input type="number" id="loginTimeout" name="loginTimeout" min="1" max="1440" required>
                        </div>
                        <div class="admin-form-group">
                            <label for="twoFactorAuth">Two-Factor Authentication</label>
                            <select id="twoFactorAuth" name="twoFactorAuth" required>
                                <option value="optional">Optional</option>
                                <option value="required">Required for Admins</option>
                                <option value="required_all">Required for All Users</option>
                                <option value="disabled">Disabled</option>
                            </select>
                        </div>
                        <div class="admin-form-group">
                            <label for="sessionTimeout">Session Timeout (minutes)</label>
                            <input type="number" id="sessionTimeout" name="sessionTimeout" min="5" max="1440" required>
                        </div>
                        <div class="admin-form-actions">
                            <button type="button" class="secondary">Cancel</button>
                            <button type="submit" class="primary">Save Settings</button>
                        </div>
                    </form>
                </div>

                <div class="admin-card">
                    <div class="admin-card-header">
                        <h3>Admin Activity Log</h3>
                        <div class="admin-card-actions">
                            <button class="secondary">Export Logs</button>
                        </div>
                    </div>
                    <div class="admin-table-container">
                        <table class="admin-table" id="adminActivityTable">
                            <thead>
                                <tr>
                                    <th>Admin</th>
                                    <th>Activity</th>
                                    <th>IP Address</th>
                                    <th>Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Admin activity will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    
    <!-- DataTables -->
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.5.0/js/dataTables.responsive.min.js"></script>
    
    <!-- AOS Animation -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
    <!-- Toastr -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    
    <!-- Socket.io -->
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    
    <script>
        // Initialize AOS animation
        AOS.init({
            duration: 800,
            easing: 'ease-in-out',
            once: true
        });

        // Toastr configuration
        toastr.options = {
            positionClass: 'toast-top-right',
            timeOut: 5000,
            extendedTimeOut: 1000,
            closeButton: true,
            progressBar: true,
            newestOnTop: true,
            preventDuplicates: true
        };

        // Global variables
        let adminToken = localStorage.getItem('adminToken');
        let csrfToken = localStorage.getItem('csrfToken');
        let socket = null;
        let statisticsChart = null;

        // Initialize the admin dashboard
        $(document).ready(function() {
            // Check if admin is already logged in
            checkAdminAuth();

            // Setup event listeners
            setupEventListeners();

            // Initialize DataTables
            initDataTables();
        });

        // Check admin authentication status
        function checkAdminAuth() {
            if (adminToken) {
                verifyAdminToken();
            } else {
                showLoginSection();
            }
        }

        // Verify admin token with backend
        function verifyAdminToken() {
            $.ajax({
                url: 'https://website-backendd-1.onrender.com/api/admin/auth/verify',
                type: 'GET',
                headers: {
                    'Authorization': 'Bearer ' + adminToken,
                    'X-CSRF-TOKEN': csrfToken
                },
                success: function(response) {
                    if (response.status === 'success') {
                        showDashboardSection();
                        loadAdminData(response.data.admin);
                        connectWebSocket();
                    } else {
                        showLoginSection();
                        toastr.error(response.message || 'Session expired. Please log in again.');
                    }
                },
                error: function(xhr, status, error) {
                    showLoginSection();
                    if (xhr.status === 401) {
                        toastr.error('Session expired. Please log in again.');
                    } else {
                        toastr.error('An error occurred while verifying your session.');
                    }
                }
            });
        }

        // Setup all event listeners
        function setupEventListeners() {
            // Login form submission
            $('#adminLoginForm').on('submit', function(e) {
                e.preventDefault();
                adminLogin();
            });

            // Forgot password link
            $('#forgotPasswordLink').on('click', function(e) {
                e.preventDefault();
                $('#forgotPasswordModal').addClass('active');
            });

            // Close modal buttons
            $('.close-modal').on('click', function() {
                $(this).closest('.admin-modal').removeClass('active');
            });

            // Verify 2FA button
            $('#verifyTwoFactorBtn').on('click', function() {
                verifyTwoFactorCode();
            });

            // Send reset link button
            $('#sendResetLinkBtn').on('click', function() {
                sendPasswordResetLink();
            });

            // Logout button
            $('#adminLogoutBtn').on('click', function(e) {
                e.preventDefault();
                adminLogout();
            });

            // Sidebar toggle for mobile
            $('#sidebarToggle').on('click', function() {
                $('#adminSidebar').toggleClass('active');
            });

            // Sidebar menu items
            $('.menu-item').on('click', function(e) {
                e.preventDefault();
                const section = $(this).data('section');
                showSection(section);
                $('#adminSidebar').removeClass('active');
            });

            // User tabs
            $('.admin-tab').on('click', function() {
                const tab = $(this).data('tab');
                showUserTab(tab);
            });

            // Notification audience change
            $('#notificationAudience').on('change', function() {
                if ($(this).val() === 'specific') {
                    $('#specificUsersGroup').show();
                } else {
                    $('#specificUsersGroup').hide();
                }
            });

            // Add more event listeners as needed...
        }

        // Initialize DataTables
        function initDataTables() {
            $('#usersTable').DataTable({
                responsive: true,
                dom: '<"top"lf>rt<"bottom"ip>',
                ajax: {
                    url: 'https://website-backendd-1.onrender.com/api/admin/users',
                    type: 'GET',
                    headers: {
                        'Authorization': 'Bearer ' + adminToken,
                        'X-CSRF-TOKEN': csrfToken
                    },
                    dataSrc: 'data.users'
                },
                columns: [
                    { data: 'id' },
                    { data: 'name' },
                    { data: 'email' },
                    { data: 'balance' },
                    { 
                        data: 'status',
                        render: function(data) {
                            return `<span class="status ${data}">${data.charAt(0).toUpperCase() + data.slice(1)}</span>`;
                        }
                    },
                    { data: 'createdAt' },
                    {
                        data: 'id',
                        render: function(data) {
                            return `
                                <button class="action-btn view-user" data-id="${data}"><i class="fas fa-eye"></i></button>
                                <button class="action-btn edit-user" data-id="${data}"><i class="fas fa-edit"></i></button>
                                <button class="action-btn delete delete-user" data-id="${data}"><i class="fas fa-trash"></i></button>
                            `;
                        }
                    }
                ],
                createdRow: function(row, data, dataIndex) {
                    $(row).attr('data-id', data.id);
                }
            });

            // Initialize other DataTables as needed...
        }

        // Admin login function
        function adminLogin() {
            const email = $('#adminEmail').val();
            const password = $('#adminPassword').val();

            $.ajax({
                url: 'https://website-backendd-1.onrender.com/api/admin/auth/login',
                type: 'POST',
                data: {
                    email: email,
                    password: password
                },
                success: function(response) {
                    if (response.status === 'success') {
                        if (response.twoFactorRequired) {
                            // Show 2FA modal
                            adminToken = response.token;
                            csrfToken = response.csrfToken;
                            $('#twoFactorModal').addClass('active');
                        } else {
                            // Login successful
                            handleSuccessfulLogin(response);
                        }
                    } else {
                        toastr.error(response.message || 'Login failed. Please try again.');
                    }
                },
                error: function(xhr, status, error) {
                    const response = xhr.responseJSON;
                    toastr.error(response?.message || 'An error occurred during login. Please try again.');
                }
            });
        }

        // Verify 2FA code
        function verifyTwoFactorCode() {
            const code = $('#twoFactorCode').val();
            const email = $('#adminEmail').val();

            $.ajax({
                url: 'https://website-backendd-1.onrender.com/api/admin/auth/verify-2fa',
                type: 'POST',
                data: {
                    token: code,
                    email: email
                },
                headers: {
                    'Authorization': 'Bearer ' + adminToken,
                    'X-CSRF-TOKEN': csrfToken
                },
                success: function(response) {
                    if (response.status === 'success') {
                        adminToken = response.token;
                        handleSuccessfulLogin(response);
                        $('#twoFactorModal').removeClass('active');
                    } else {
                        toastr.error(response.message || 'Invalid verification code.');
                    }
                },
                error: function(xhr, status, error) {
                    const response = xhr.responseJSON;
                    toastr.error(response?.message || 'An error occurred during verification.');
                }
            });
        }

        // Handle successful login
        function handleSuccessfulLogin(response) {
            adminToken = response.token;
            csrfToken = response.csrfToken;
            
            // Store tokens
            localStorage.setItem('adminToken', adminToken);
            localStorage.setItem('csrfToken', csrfToken);
            
            // Show dashboard
            showDashboardSection();
            loadAdminData(response.data.admin);
            connectWebSocket();
            
            // Clear login form
            $('#adminLoginForm')[0].reset();
            
            toastr.success('Login successful!');
        }

        // Send password reset link
        function sendPasswordResetLink() {
            const email = $('#resetEmail').val();

            $.ajax({
                url: 'https://website-backendd-1.onrender.com/api/admin/auth/forgot-password',
                type: 'POST',
                data: {
                    email: email
                },
                success: function(response) {
                    if (response.status === 'success') {
                        toastr.success(response.message || 'Password reset link sent to your email.');
                        $('#forgotPasswordModal').removeClass('active');
                        $('#resetEmail').val('');
                    } else {
                        toastr.error(response.message || 'Failed to send reset link.');
                    }
                },
                error: function(xhr, status, error) {
                    const response = xhr.responseJSON;
                    toastr.error(response?.message || 'An error occurred. Please try again.');
                }
            });
        }

        // Admin logout function
        function adminLogout() {
            $.ajax({
                url: 'https://website-backendd-1.onrender.com/api/admin/auth/logout',
                type: 'POST',
                headers: {
                    'Authorization': 'Bearer ' + adminToken,
                    'X-CSRF-TOKEN': csrfToken
                },
                success: function(response) {
                    if (response.status === 'success') {
                        // Clear tokens and show login section
                        localStorage.removeItem('adminToken');
                        localStorage.removeItem('csrfToken');
                        adminToken = null;
                        csrfToken = null;
                        
                        // Disconnect WebSocket
                        if (socket) {
                            socket.disconnect();
                            socket = null;
                        }
                        
                        showLoginSection();
                        toastr.success('Logged out successfully.');
                    } else {
                        toastr.error(response.message || 'Logout failed. Please try again.');
                    }
                },
                error: function(xhr, status, error) {
                    const response = xhr.responseJSON;
                    toastr.error(response?.message || 'An error occurred during logout.');
                }
            });
        }

        // Connect to WebSocket for real-time updates
        function connectWebSocket() {
            if (!adminToken) return;

            socket = io('https://website-backendd-1.onrender.com', {
                transports: ['websocket'],
                query: {
                    token: adminToken
                }
            });

            socket.on('connect', function() {
                console.log('Connected to WebSocket');
            });

            socket.on('disconnect', function() {
                console.log('Disconnected from WebSocket');
            });

            socket.on('new_notification', function(data) {
                updateNotificationCount(data.count);
                toastr.info(data.message);
            });

            socket.on('new_withdrawal', function(data) {
                updatePendingWithdrawalsCount(data.count);
                toastr.warning(`New withdrawal request: $${data.amount}`);
            });

            socket.on('new_ticket', function(data) {
                updateOpenTicketsCount(data.count);
                toastr.info(`New support ticket: ${data.subject}`);
            });

            socket.on('new_user', function(data) {
                updatePendingUsersCount(data.count);
                toastr.success(`New user registered: ${data.email}`);
            });

            // Add more WebSocket event listeners as needed
        }

        // Load admin data
        function loadAdminData(admin) {
            $('#adminName').text(admin.name);
            $('#adminProfileImage').attr('src', admin.image || 'https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1');
            
            // Load dashboard stats
            loadDashboardStats();
            
            // Load notifications
            loadNotifications();
            
            // Load pending counts
            loadPendingCounts();
        }

        // Load dashboard statistics
        function loadDashboardStats() {
            $.ajax({
                url: 'https://website-backendd-1.onrender.com/api/admin/stats',
                type: 'GET',
                headers: {
                    'Authorization': 'Bearer ' + adminToken,
                    'X-CSRF-TOKEN': csrfToken
                },
                success: function(response) {
                    if (response.status === 'success') {
                        const stats = response.data.stats;
                        
                        // Update stat cards
                        $('#totalUsers').text(stats.totalUsers.toLocaleString());
                        $('#userGrowthRate').text(stats.userGrowthRate + '%');
                        
                        $('#totalDeposits').text('$' + stats.totalDeposits.toLocaleString());
                        $('#depositGrowthRate').text(stats.depositGrowthRate + '%');
                        
                        $('#totalWithdrawals').text('$' + stats.totalWithdrawals.toLocaleString());
                        $('#withdrawalGrowthRate').text(stats.withdrawalGrowthRate + '%');
                        
                        $('#activeInvestments').text(stats.activeInvestments.toLocaleString());
                        $('#investmentGrowthRate').text(stats.investmentGrowthRate + '%');
                        
                        // Initialize or update chart
                        initStatisticsChart(stats.chartData);
                    }
                },
                error: function(xhr, status, error) {
                    console.error('Error loading dashboard stats:', error);
                }
            });
        }

        // Initialize statistics chart
        function initStatisticsChart(chartData) {
            const ctx = document.getElementById('statisticsChart').getContext('2d');
            
            if (statisticsChart) {
                statisticsChart.destroy();
            }
            
            statisticsChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: chartData.labels,
                    datasets: [
                        {
                            label: 'Deposits',
                            data: chartData.deposits,
                            borderColor: '#00D395',
                            backgroundColor: 'rgba(0, 211, 149, 0.1)',
                            tension: 0.3,
                            fill: true
                        },
                        {
                            label: 'Withdrawals',
                            data: chartData.withdrawals,
                            borderColor: '#FF3D57',
                            backgroundColor: 'rgba(255, 61, 87, 0.1)',
                            tension: 0.3,
                            fill: true
                        },
                        {
                            label: 'Investments',
                            data: chartData.investments,
                            borderColor: '#784FED',
                            backgroundColor: 'rgba(120, 79, 237, 0.1)',
                            tension: 0.3,
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                color: '#E5E5E5'
                            }
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                color: 'rgba(46, 46, 46, 0.5)'
                            },
                            ticks: {
                                color: '#8E8E8E'
                            }
                        },
                        y: {
                            grid: {
                                color: 'rgba(46, 46, 46, 0.5)'
                            },
                            ticks: {
                                color: '#8E8E8E'
                            }
                        }
                    },
                    interaction: {
                        mode: 'nearest',
                        axis: 'x',
                        intersect: false
                    }
                }
            });
        }

        // Load notifications
        function loadNotifications() {
            $.ajax({
                url: 'https://website-backendd-1.onrender.com/api/admin/notifications',
                type: 'GET',
                headers: {
                    'Authorization': 'Bearer ' + adminToken,
                    'X-CSRF-TOKEN': csrfToken
                },
                success: function(response) {
                    if (response.status === 'success') {
                        const notifications = response.data.notifications;
                        updateNotificationCount(notifications.unreadCount);
                        
                        // Update notification dropdown
                        const notificationList = $('#notificationList');
                        notificationList.empty();
                        
                        notifications.recent.forEach(notification => {
                            notificationList.append(`
                                <div class="admin-notification-item ${notification.unread ? 'unread' : ''}">
                                    <div class="notification-title">
                                        <i class="fas ${getNotificationIcon(notification.type)}"></i>
                                        ${notification.title}
                                    </div>
                                    <div class="notification-message">${notification.message}</div>
                                    <div class="notification-time">
                                        <i class="far fa-clock"></i>
                                        ${notification.time}
                                    </div>
                                </div>
                            `);
                        });
                    }
                },
                error: function(xhr, status, error) {
                    console.error('Error loading notifications:', error);
                }
            });
        }

        // Get notification icon based on type
        function getNotificationIcon(type) {
            switch (type) {
                case 'success': return 'fa-check-circle';
                case 'warning': return 'fa-exclamation-circle';
                case 'error': return 'fa-times-circle';
                case 'info': return 'fa-info-circle';
                case 'promotion': return 'fa-gift';
                default: return 'fa-bell';
            }
        }

        // Load pending counts
        function loadPendingCounts() {
            $.ajax({
                url: 'https://website-backendd-1.onrender.com/api/admin/pending-counts',
                type: 'GET',
                headers: {
                    'Authorization': 'Bearer ' + adminToken,
                    'X-CSRF-TOKEN': csrfToken
                },
                success: function(response) {
                    if (response.status === 'success') {
                        const counts = response.data.counts;
                        
                        updatePendingUsersCount(counts.pendingUsers);
                        updatePendingWithdrawalsCount(counts.pendingWithdrawals);
                        updateOpenTicketsCount(counts.openTickets);
                    }
                },
                error: function(xhr, status, error) {
                    console.error('Error loading pending counts:', error);
                }
            });
        }

        // Update notification count
        function updateNotificationCount(count) {
            const badge = $('#notificationCount');
            badge.text(count);
            
            if (count > 0) {
                badge.show();
            } else {
                badge.hide();
            }
        }

        // Update pending users count
        function updatePendingUsersCount(count) {
            const badge = $('#pendingUsersCount');
            badge.text(count);
            
            if (count > 0) {
                badge.show();
            } else {
                badge.hide();
            }
        }

        // Update pending withdrawals count
        function updatePendingWithdrawalsCount(count) {
            const badge = $('#pendingWithdrawalsCount');
            badge.text(count);
            
            if (count > 0) {
                badge.show();
            } else {
                badge.hide();
            }
        }

        // Update open tickets count
        function updateOpenTicketsCount(count) {
            const badge = $('#openTicketsCount');
            badge.text(count);
            
            if (count > 0) {
                badge.show();
            } else {
                badge.hide();
            }
        }

        // Show login section
        function showLoginSection() {
            $('#adminLoginSection').show();
            $('#adminDashboard').hide();
        }

        // Show dashboard section
        function showDashboardSection() {
            $('#adminLoginSection').hide();
            $('#adminDashboard').show();
        }

        // Show specific section
        function showSection(sectionId) {
            $('.admin-section').removeClass('active');
            $(`#${sectionId}Section`).addClass('active');
            
            // Load section data if needed
            switch (sectionId) {
                case 'users':
                    $('#usersTable').DataTable().ajax.reload();
                    break;
                case 'investments':
                    $('#investmentsTable').DataTable().ajax.reload();
                    break;
                case 'transactions':
                    $('#transactionsTable').DataTable().ajax.reload();
                    break;
                case 'withdrawals':
                    $('#pendingWithdrawalsTable').DataTable().ajax.reload();
                    $('#processedWithdrawalsTable').DataTable().ajax.reload();
                    break;
                case 'tickets':
                    $('#openTicketsTable').DataTable().ajax.reload();
                    break;
                // Add more cases as needed
            }
        }

        // Show user tab
        function showUserTab(tabId) {
            $('.admin-tab').removeClass('active');
            $(`.admin-tab[data-tab="${tabId}"]`).addClass('active');
            
            $('.admin-tab-content').removeClass('active');
            $(`#${tabId}Tab`).addClass('active');
            
            // Load tab data if needed
            switch (tabId) {
                case 'investments':
                    $('#userInvestmentsTable').DataTable().ajax.reload();
                    break;
                case 'transactions':
                    $('#userTransactionsTable').DataTable().ajax.reload();
                    break;
                case 'activity':
                    $('#userActivityTable').DataTable().ajax.reload();
                    break;
            }
        }

        // Add more functions as needed for specific features...

        // Handle window resize
        $(window).on('resize', function() {
            if ($(window).width() > 992) {
                $('#adminSidebar').removeClass('active');
            }
        });
    </script>
</body>
</html>
