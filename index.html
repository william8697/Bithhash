<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Miner Market — Mockup</title>

  <!-- Chart.js (for charts) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

  <style>
    :root{
      --bg:#0f1113;
      --panel:#151719;
      --muted:#9aa0a6;
      --accent:#7be29f;
      --card:#1b1d1f;
      --border:rgba(255,255,255,0.04);
      --accent-2:#59c5ff;
      --danger:#ff6b6b;
    }
    html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg) 0%, #0c0d0f 100%);font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;}
    .topbar{height:36px;background:#0b0c0d;color:#dfe6e9;display:flex;align-items:center;justify-content:center;font-size:13px;border-bottom:1px solid rgba(255,255,255,0.03);position:sticky;top:0;z-index:20}
    .app{display:flex;gap:18px;padding:18px;align-items:flex-start}
    .left{
      width:58%;
      min-width:780px;
    }
    .card{
      background:var(--panel);
      border-radius:8px;
      padding:14px;
      box-shadow:0 6px 18px rgba(0,0,0,0.6);
      border:1px solid var(--border);
      color:#e6eef3;
      margin-bottom:16px;
    }

    /* Filters row */
    .filters{display:flex;gap:12px;align-items:center;margin-bottom:12px}
    .chip{background:#131516;padding:6px 10px;border-radius:999px;border:1px solid rgba(255,255,255,0.03);font-size:13px;color:var(--muted)}
    .controls{display:flex;gap:10px;flex:1}
    select, .search{
      background:#0f1213;border:1px solid var(--border);color:#dbe7ea;padding:8px 10px;border-radius:6px;font-size:14px;min-width:160px;
    }
    .results-header{font-weight:600;margin:8px 0 12px;color:#dfe7ea}
    table.miners{width:100%;border-collapse:collapse;font-size:14px}
    table.miners th, table.miners td{padding:10px 8px;text-align:left;border-bottom:1px dashed rgba(255,255,255,0.03)}
    table.miners th{color:var(--muted);font-weight:600;font-size:12px}
    .buy-btn{background:#0dbd63;color:white;padding:8px 12px;border-radius:6px;border:none;cursor:pointer;font-weight:600}
    .deal-score{color:#ffb454;font-weight:700}
    .location{color:var(--muted);font-size:13px}

    /* Offer detail panel on right */
    .right{
      width:42%;
      min-width:420px;
      display:flex;
      flex-direction:column;
      gap:14px;
    }
    .offer-header{display:flex;align-items:center;justify-content:space-between}
    .offer-title{font-size:20px;font-weight:700}
    .price-badge{background:#0dbd63;padding:8px 12px;border-radius:6px;color:#042a11;font-weight:800}

    .summary-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:12px}
    .summary-item{background:#111315;padding:12px;border-radius:8px;border:1px solid var(--border);font-size:14px}
    .summary-item .v{font-weight:800;font-size:16px;margin-top:6px}

    .left-column{display:flex;gap:14px}
    .miner-image{width:220px;height:150px;background:linear-gradient(180deg,#1a1c1d,#0e1112);border-radius:8px;border:1px solid rgba(255,255,255,0.03);display:flex;align-items:center;justify-content:center;color:var(--muted);font-size:13px}
    .offer-desc{margin-top:12px;color:var(--muted);font-size:13px}

    /* Price history chart */
    .chart-wrap{height:200px;padding:12px;background:linear-gradient(180deg,#0f1113,#0b0c0d);border-radius:8px;border:1px solid var(--border)}

    /* Miners inside offer / miner summary */
    .miners-list{margin-top:12px}
    .miner-panel{background:#111314;padding:12px;border-radius:8px;border:1px solid var(--border);display:flex;gap:12px;align-items:flex-start}
    .miner-meta{flex:1}
    .meta-row{display:flex;justify-content:space-between;color:var(--muted);padding:8px 0;border-bottom:1px dashed rgba(255,255,255,0.03)}
    .meta-row:last-child{border-bottom:none}
    .spark-wrap{width:320px;height:160px;background:linear-gradient(180deg,#0f1113,#0b0c0d);border-radius:6px;padding:8px;border:1px solid var(--border)}

    .small{font-size:12px;color:var(--muted)}
    .badge{background:#1e2022;padding:6px 8px;border-radius:6px;font-weight:700;color:#e8f6ea}
    footer{margin-top:24px;color:var(--muted);font-size:13px;text-align:center}

    /* Responsive */
    @media (max-width:1100px){
      .app{flex-direction:column;padding:12px}
      .left,.right{width:100%;min-width:unset}
    }

  </style>
</head>
<body>
  <div class="topbar">1 BTC ≈ 90,232.75 USD (Dec/13/2025 - 12:56 AM)</div>

  <div class="app">

    <!-- LEFT: listings -->
    <div class="left">
      <div class="card">
        <div style="display:flex;align-items:center;gap:12px;flex-wrap:wrap">
          <div class="chip">Deal of the Week</div>
          <div class="chip">DEALS! NEW GEN &lt;$25/TH</div>
          <div class="chip">IMMERSION</div>
          <div class="chip">HYDROS</div>
          <div style="margin-left:auto;display:flex;gap:8px">
            <select id="filterManufacturer"><option value="">Manufacturer</option><option>Bitmain</option><option>Canaan</option></select>
            <select id="filterClass"><option value="">Class</option><option>New</option><option>Used</option></select>
            <select id="filterModel"><option value="">Miner Model</option><option>S21 XP 270T</option><option>S21+ 235T</option></select>
          </div>
        </div>

        <div class="results-header">Results (545)</div>

        <div style="overflow:auto;max-height:420px">
          <table class="miners" id="minersTable">
            <thead>
              <tr>
                <th>Location / Miner</th>
                <th>Hashrate (24h)</th>
                <th>Est. Revenue (30d)</th>
                <th>Est. Profit (30d)</th>
                <th>Price</th>
                <th>Price/TH</th>
                <th>Deal Score</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <!-- rows inserted by JS -->
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- RIGHT: detail -->
    <div class="right">
      <div class="card" id="offerCard">
        <div class="offer-header">
          <div>
            <div class="offer-title" id="offerTitle">Bitmain S21 XP 270T</div>
            <div style="color:var(--muted);font-size:13px;margin-top:4px">Seller: MO-ART — <span class="small">Serial JYZZFMABEJEJG00M5</span></div>
          </div>
          <div style="text-align:right">
            <div style="font-size:12px;color:var(--muted)">Price</div>
            <div class="price-badge" id="offerPrice">$5,899.00 USD</div>
          </div>
        </div>

        <div style="display:flex;gap:12px;margin-top:12px">
          <div class="miner-image">
            <!-- simple miner SVG placeholder -->
            <svg width="120" height="90" viewBox="0 0 120 90" xmlns="http://www.w3.org/2000/svg">
              <rect x="4" y="8" rx="4" ry="4" width="90" height="74" fill="#0f1113" stroke="#2b2d2f"/>
              <g transform="translate(8,12)">
                <rect x="0" y="0" width="70" height="62" fill="#111314" rx="3"/>
                <g fill="#1f2123">
                  <circle cx="14" cy="18" r="12" stroke="#222" stroke-width="2"/>
                  <circle cx="42" cy="18" r="12" stroke="#222" stroke-width="2"/>
                  <circle cx="14" cy="44" r="12" stroke="#222" stroke-width="2"/>
                </g>
              </g>
            </svg>
          </div>

          <div style="flex:1">
            <div style="display:flex;gap:10px;align-items:center">
              <div class="badge">Deal Score ★★★★★ 100/100</div>
              <div style="margin-left:auto;color:var(--muted);font-size:13px">Pool fees: 2%</div>
            </div>

            <div class="summary-grid">
              <div class="summary-item">
                <div class="small">Accumulated Profit</div>
                <div class="v" id="accProfit">$6,592.00</div>
                <div class="small" style="margin-top:6px;color:#6fe08a">+17.53%</div>
              </div>
              <div class="summary-item">
                <div class="small">Est. Revenue (30d)</div>
                <div class="v" id="estRev">$317.02 USD</div>
              </div>
              <div class="summary-item">
                <div class="small">Est. Profit (30d)</div>
                <div class="v" id="estProfit">$117.32 USD</div>
              </div>
              <div class="summary-item">
                <div class="small">Price/TH</div>
                <div class="v" id="priceTH">21.85 USD/TH</div>
              </div>
              <div class="summary-item">
                <div class="small">Energy Price ($/kWh)</div>
                <div class="v" id="energy">$0.075</div>
              </div>
              <div class="summary-item">
                <div class="small">Est. Monthly Fee</div>
                <div class="v" id="monthlyFee">$203.39</div>
              </div>
            </div>
            <div class="offer-desc">InstaHash - Best Bitcoin Mining Rig In The World @ 13.5 Watts Per Terra Hash (most efficient = longest life)</div>
          </div>
        </div>

        <div style="margin-top:14px" class="chart-wrap card">
          <canvas id="priceChart" style="width:100%;height:100%"></canvas>
        </div>
      </div>

      <!-- miners inside this offer -->
      <div class="card miners-list">
        <div style="display:flex;align-items:center;justify-content:space-between">
          <div style="font-weight:700">Miners Inside this offer</div>
          <div class="small">Total numbers of miners: <strong id="numMiners">1</strong></div>
        </div>

        <div style="margin-top:10px" class="miner-panel">
          <div class="miner-meta">
            <div style="font-weight:800;color:#e8f6ea">JYZZFMABEJEJG00M5 <span style="color:#ffb454">273.63 TH/s</span></div>

            <div class="meta-row"><div class="small">Hashrate (24h)</div><div>273.63 TH/s</div></div>
            <div class="meta-row"><div class="small">Power Usage (24h)</div><div>3.65 kW</div></div>
            <div class="meta-row"><div class="small">Estimated Revenue (30d)</div><div>$317.02 USD</div></div>
            <div class="meta-row"><div class="small">Online Date</div><div>10/30/25</div></div>

            <div style="margin-top:10px;font-weight:700">Manufacturer Specs</div>
            <div class="meta-row"><div class="small">Miner model</div><div>S21 XP 270T</div></div>
            <div class="meta-row"><div class="small">Serial Number</div><div>JYZZFMABEJEJG00M5</div></div>
            <div class="meta-row"><div class="small">Hashrate (Ideal)</div><div>270.00 TH/s</div></div>
            <div class="meta-row"><div class="small">Power Usage (Ideal)</div><div>3.64 kW</div></div>
            <div class="meta-row"><div class="small">Online Since</div><div>10/30/25</div></div>
          </div>

          <div class="spark-wrap">
            <canvas id="miniChart" style="width:100%;height:100%"></canvas>
            <div style="font-size:12px;color:var(--muted);margin-top:6px;text-align:center">Last 7 days</div>
          </div>
        </div>
      </div>

      <footer>Mockup UI — data is illustrative</footer>
    </div>
  </div>

  <script>
    // --- Sample data used to populate table and charts
    const minersData = [
      {loc:'MO-ART', model:'Bitmain S21 XP 270T', hash:273.63, rev:317.09, profit:117.39, price:5899, pth:21.85, score:100, serial:'JYZZFMABEJEJG00M5'},
      {loc:'MO-ART', model:'Bitmain S21 XP 270T', hash:268.84, rev:317.09, profit:117.39, price:5899, pth:21.85, score:100, serial:'JYZZFMABEJEJG00M6'},
      {loc:'TX-SLN', model:'Bitmain S21+ 235T', hash:237.33, rev:275.99, profit:80.73, price:3350, pth:14.10, score:100, serial:'ABCDEF12345'},
      {loc:'KY-RH', model:'Bitmain S21 XP 270T', hash:1380, rev:1585.45, profit:586.95, price:30000, pth:22.22, score:99, serial:'BIGHASH001'}
    ];

    // Populate miners table
    function makeRow(it){
      return `
        <tr data-serial="${it.serial}">
          <td><div style="font-weight:700">${it.model}</div><div class="location">${it.loc}</div></td>
          <td>${it.hash.toLocaleString()} TH/s</td>
          <td>${it.rev.toFixed(2)} USD</td>
          <td>${it.profit.toFixed(2)} USD</td>
          <td>$${it.price.toLocaleString()}</td>
          <td>${it.pth.toFixed(2)} USD/TH</td>
          <td class="deal-score">★ ${it.score}/100</td>
          <td><button class="buy-btn" data-serial="${it.serial}">Buy</button></td>
        </tr>`;
    }

    const tbody = document.querySelector('#minersTable tbody');
    tbody.innerHTML = minersData.map(d=>makeRow(d)).join('');

    // Click handler to open details (mimics the behavior where clicking a row loads the right panel)
    tbody.addEventListener('click', (e)=>{
      const tr = e.target.closest('tr');
      const btn = e.target.closest('.buy-btn');
      if(!tr) return;
      const serial = tr.dataset.serial;
      const it = minersData.find(x=>x.serial===serial);
      if(!it) return;
      loadOffer(it);
      // if buy clicked, show checkout alert
      if(btn){
        alert('Proceed to checkout: ' + it.model + ' — ' + it.serial + '\\nPrice: $'+it.price);
      }
    });

    // Load offer details into right-hand panel
    function loadOffer(item){
      document.getElementById('offerTitle').textContent = item.model;
      document.getElementById('offerPrice').textContent = '$' + item.price.toLocaleString() + ' USD';
      document.getElementById('accProfit').textContent = '$6,592.00';
      document.getElementById('estRev').textContent = item.rev.toFixed(2) + ' USD';
      document.getElementById('estProfit').textContent = item.profit.toFixed(2) + ' USD';
      document.getElementById('priceTH').textContent = item.pth.toFixed(2) + ' USD/TH';
      document.getElementById('numMiners').textContent = '1';
      // update miner meta values
      const d = document.querySelector('.miner-panel');
      d.querySelector('.miner-meta .v')?.remove?.(); // no-op safe

      // Update the mini chart data (simulate daily hashrate for last 7 days)
      const base = item.hash;
      const miniData = [
        Math.round(base - 5),
        Math.round(base + 3),
        Math.round(base - 6),
        Math.round(base - 2),
        Math.round(base + 4),
        Math.round(base - 3),
        Math.round(base)
      ];
      updateMiniChart(miniData);
    }

    // Create price history chart
    const ctx = document.getElementById('priceChart').getContext('2d');
    const priceChart = new Chart(ctx, {
      type:'line',
      data:{
        labels:['Nov 01','Nov 10','Nov 20','Dec 01','Dec 08','Dec 12'],
        datasets:[{
          label:'Avg Sale Price',
          data:[6400,6300,6200,6150,6020,5800],
          fill:true,
          tension:0.3,
          pointRadius:4,
          borderWidth:2,
          backgroundColor: (ctx) => {
            // gradient fill
            const g = ctx.chart.ctx.createLinearGradient(0,0,0,200);
            g.addColorStop(0,'rgba(92,199,157,0.18)');
            g.addColorStop(1,'rgba(92,199,157,0.02)');
            return g;
          },
          borderColor:'rgba(123,226,159,0.95)'
        }]
      },
      options:{
        responsive:true,
        maintainAspectRatio:false,
        scales:{
          x:{grid:{display:false}, ticks:{color:'#9aa0a6'}},
          y:{ticks:{color:'#9aa0a6'}, grid:{color:'rgba(255,255,255,0.02)'}}
        },
        plugins:{legend:{display:false},tooltip:{mode:'index'}}
      }
    });

    // Mini hashrate sparkline
    const miniCtx = document.getElementById('miniChart').getContext('2d');
    let miniChart = new Chart(miniCtx, {
      type:'line',
      data:{
        labels:['Dec 05','Dec 06','Dec 07','Dec 08','Dec 09','Dec 10','Dec 11'],
        datasets:[{
          data:[268.5,267.0,267.2,267.6,267.1,267.8,268.0],
          fill:true,
          tension:0.2,
          pointRadius:3,
          borderWidth:2,
          backgroundColor:(ctx)=>{
            const g = ctx.chart.ctx.createLinearGradient(0,0,0,120);
            g.addColorStop(0,'rgba(93,197,248,0.12)');
            g.addColorStop(1,'rgba(93,197,248,0.02)');
            return g;
          },
          borderColor:'rgba(93,197,248,0.95)'
        }]
      },
      options:{
        responsive:true,
        maintainAspectRatio:false,
        scales:{x:{display:false},y:{display:false}},
        plugins:{legend:{display:false},tooltip:{enabled:true}}
      }
    });

    function updateMiniChart(values){
      miniChart.data.datasets[0].data = values;
      miniChart.update();
    }

    // initialize the first item as selected
    loadOffer(minersData[0]);

    // Accessibility / small UI niceties: keyboard focus for rows
    document.querySelectorAll('#minersTable tbody tr').forEach(r=>{
      r.setAttribute('tabindex','0');
      r.addEventListener('keydown', e=>{
        if(e.key==='Enter') r.click();
      });
    });

    // Provide CSV download of mini chart (simulate)
    function downloadCSV(){
      const rows = [['date','hashrate']];
      const labels = miniChart.data.labels;
      const values = miniChart.data.datasets[0].data;
      for(let i=0;i<labels.length;i++) rows.push([labels[i], values[i]]);
      const csv = rows.map(r=>r.join(',')).join('\\n');
      const blob = new Blob([csv],{type:'text/csv'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'miner_hashrate.csv'; document.body.appendChild(a); a.click(); a.remove();
      URL.revokeObjectURL(url);
    }

    // (Optional) wire up a keyboard shortcut: press 'd' to download CSV
    window.addEventListener('keydown', (e)=>{
      if(e.key==='d' && (e.ctrlKey || e.metaKey)===false){
        downloadCSV();
      }
    });

  </script>
</body>
</html>
