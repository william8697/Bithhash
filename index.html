<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BitHash | Leading BTC Cloud Mining Firm</title>
    <meta name="description" content="Grow your Bitcoin mining portfolio with BitHash cloud mining and unlock soft loan benefits.">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rowdies:wght@300;400;700&family=Inter:wght@300;400;500;600;700&family=Manrope:wght@500;600;700&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" href="https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1" type="image/png">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- AOS Animation -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-17721052671"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'AW-17721052671');
    </script>
    
    <style>
        /* ============================================= */
        /* ENHANCED STYLING WITH BRANDING COLORS */
        /* ============================================= */
        
        :root {
            /* Primary Brand Colors - Bitcoin Green & Gold */
            --primary: #00D395;
            --primary-dark: #00B783;
            --primary-light: #00E5A1;
            --primary-gradient: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            --primary-transparent: rgba(0, 211, 149, 0.1);
            
            /* Secondary Colors - Deep Blue & Gold */
            --secondary: #1E1E1E;
            --secondary-dark: #121212;
            --secondary-light: #2E2E2E;
            --accent-blue: #003366;
            --accent-blue-dark: #002244;
            --accent-blue-light: #004488;
            
            /* Bitcoin Gold Colors */
            --bitcoin-gold: #D4AF37;
            --bitcoin-gold-light: #FFD700;
            --bitcoin-gold-dark: #996515;
            --gold-gradient: linear-gradient(135deg, var(--bitcoin-gold) 0%, var(--bitcoin-gold-light) 100%);
            
            /* Neutral Colors */
            --dark: #E5E5E5;
            --darker: #0A0A0A;
            --light: #121212;
            --lighter: #1E1E1E;
            --gray: #8E8E8E;
            --gray-light: #2E2E2E;
            --gray-lighter: #252525;
            
            /* Status Colors */
            --success: #00D395;
            --warning: #FFB800;
            --error: #FF3D57;
            
            /* UI Colors */
            --purple: #784FED;
            --pink: #EC4899;
            --security-blue: #1A73E8;
            --security-green: #34A853;
            
            /* Borders & Shadows */
            --border-radius: 8px;
            --border-radius-lg: 12px;
            --border-radius-xl: 16px;
            --box-shadow: 0 4px 12px -1px rgba(0, 0, 0, 0.2), 0 2px 6px -1px rgba(0, 0, 0, 0.1);
            --box-shadow-lg: 0 12px 24px -3px rgba(0, 0, 0, 0.3), 0 6px 12px -2px rgba(0, 0, 0, 0.15);
            --box-shadow-xl: 0 20px 40px -5px rgba(0, 0, 0, 0.4), 0 10px 20px -3px rgba(0, 0, 0, 0.2);
            
            /* Transitions */
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-fast: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html {
            scroll-behavior: smooth;
            overflow-x: hidden;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            color: var(--dark);
            background-color: var(--light);
            line-height: 1.6;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            background: linear-gradient(135deg, var(--light) 0%, var(--darker) 100%);
            min-height: 100vh;
        }

        /* Bitcoin Logo Animation */
        @keyframes bitcoinFloat {
            0%, 100% { 
                transform: translateY(0) rotate(0deg); 
                filter: drop-shadow(0 0 8px var(--bitcoin-gold-light));
            }
            25% { 
                transform: translateY(-8px) rotate(90deg);
                filter: drop-shadow(0 0 12px var(--bitcoin-gold-light));
            }
            50% { 
                transform: translateY(0) rotate(180deg);
                filter: drop-shadow(0 0 8px var(--bitcoin-gold-light));
            }
            75% { 
                transform: translateY(-4px) rotate(270deg);
                filter: drop-shadow(0 0 12px var(--bitcoin-gold-light));
            }
        }

        .bitcoin-animation {
            display: inline-block;
            animation: bitcoinFloat 4s ease-in-out infinite;
            margin-right: 8px;
            vertical-align: middle;
            color: var(--bitcoin-gold);
            font-weight: bold;
            transform-origin: center;
            text-shadow: 0 0 20px rgba(212, 175, 55, 0.5);
        }

        /* Mining Animation */
        @keyframes miningPulse {
            0% { 
                transform: scale(1); 
                opacity: 0.8; 
            }
            50% { 
                transform: scale(1.08); 
                opacity: 1; 
                text-shadow: 0 0 15px var(--bitcoin-gold-light);
            }
            100% { 
                transform: scale(1); 
                opacity: 0.8; 
            }
        }

        .mining-animation {
            display: inline-block;
            animation: miningPulse 2s ease-in-out infinite;
            color: var(--bitcoin-gold);
            font-weight: 600;
        }

        /* Cloud Mining Icon */
        .cloud-mining-icon {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: var(--primary);
            font-weight: 600;
            font-size: 0.9rem;
            background: var(--primary-transparent);
            padding: 8px 16px;
            border-radius: 20px;
            border: 1px solid rgba(0, 211, 149, 0.3);
            backdrop-filter: blur(10px);
            margin: 10px 0;
            box-shadow: 0 4px 12px rgba(0, 211, 149, 0.1);
        }

        /* Security Badge */
        .security-badge {
            position: fixed;
            bottom: 24px;
            right: 24px;
            background: linear-gradient(135deg, var(--darker) 0%, var(--light) 100%);
            padding: 12px 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow-lg);
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.85rem;
            font-weight: 600;
            z-index: 100;
            border-left: 4px solid var(--security-green);
            color: var(--dark);
            border: 1px solid var(--gray-light);
            backdrop-filter: blur(10px);
            transition: var(--transition);
        }
        
        .security-badge:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(52, 168, 83, 0.2);
        }
        
        .security-badge i {
            color: var(--security-green);
            font-size: 1.1rem;
        }
        
        /* Loading Overlay */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--darker) 0%, var(--light) 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }
        
        .loading-overlay.hidden {
            opacity: 0;
            visibility: hidden;
        }
        
        .loading-logo {
            width: 80px;
            height: 80px;
            animation: pulse 1.5s infinite ease-in-out;
            filter: drop-shadow(0 0 20px rgba(0, 211, 149, 0.4));
        }
        
        .loading-text {
            margin-top: 24px;
            font-weight: 500;
            color: var(--gray);
            font-size: 1rem;
            letter-spacing: 1px;
        }
        
        @keyframes pulse {
            0% { 
                transform: scale(0.95); 
                opacity: 0.8; 
            }
            50% { 
                transform: scale(1.05); 
                opacity: 1; 
            }
            100% { 
                transform: scale(0.95); 
                opacity: 0.8; 
            }
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Enhanced Header Styles - Premium Design */
        header {
            background: linear-gradient(135deg, rgba(10, 10, 10, 0.98) 0%, rgba(18, 18, 18, 0.98) 100%);
            backdrop-filter: blur(20px);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            padding: 12px 0;
            transition: var(--transition-slow);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
        }
        
        header.scrolled {
            background: rgba(10, 10, 10, 0.95);
            border-bottom-color: var(--primary);
            box-shadow: 0 8px 40px rgba(0, 0, 0, 0.4);
        }
        
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            height: 100%;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            z-index: 1001;
            padding: 4px 8px;
            border-radius: var(--border-radius);
            transition: var(--transition);
        }
        
        .logo:hover {
            transform: translateY(-1px);
        }
        
        .logo img {
            height: 36px;
            width: auto;
            transition: var(--transition);
            filter: drop-shadow(0 0 10px rgba(0, 211, 149, 0.3));
        }
        
        .logo-text {
            font-family: 'Rowdies', sans-serif;
            font-weight: 700;
            font-size: 1.4rem;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 0.5px;
        }

        /* Language Selector Styles */
        .language-selector {
            position: relative;
            margin-right: 20px;
        }
        
        .language-dropdown-btn {
            background: linear-gradient(135deg, var(--lighter) 0%, var(--gray-light) 100%);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--border-radius);
            padding: 10px 16px;
            color: var(--dark);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.9rem;
            font-weight: 500;
            transition: var(--transition);
            min-width: 140px;
            backdrop-filter: blur(10px);
        }
        
        .language-dropdown-btn:hover {
            background: linear-gradient(135deg, var(--gray-light) 0%, var(--lighter) 100%);
            border-color: var(--primary);
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(0, 211, 149, 0.1);
        }
        
        .language-dropdown-btn i {
            font-size: 0.9rem;
            transition: var(--transition);
        }
        
        .language-dropdown-btn.active i {
            transform: rotate(180deg);
        }
        
        .language-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            width: 300px;
            background: linear-gradient(135deg, var(--darker) 0%, var(--light) 100%);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow-xl);
            margin-top: 8px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: var(--transition);
            z-index: 1002;
            max-height: 400px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            backdrop-filter: blur(20px);
        }
        
        .language-dropdown.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        
        .language-search {
            padding: 16px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .language-search input {
            width: 100%;
            padding: 10px 16px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--border-radius);
            color: var(--dark);
            font-size: 0.9rem;
            transition: var(--transition);
        }
        
        .language-search input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(0, 211, 149, 0.2);
            background: rgba(255, 255, 255, 0.08);
        }
        
        .language-list {
            flex: 1;
            overflow-y: auto;
            max-height: 300px;
        }
        
        .language-option {
            padding: 12px 20px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .language-option:last-child {
            border-bottom: none;
        }
        
        .language-option:hover {
            background: rgba(255, 255, 255, 0.05);
            transform: translateX(4px);
        }
        
        .language-option.active {
            background: var(--primary-transparent);
            color: var(--primary);
            border-left: 3px solid var(--primary);
        }
        
        .language-flag {
            width: 24px;
            height: 18px;
            border-radius: 2px;
            object-fit: cover;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .language-name {
            flex: 1;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .language-code {
            color: var(--gray);
            font-size: 0.8rem;
        }
        
        .language-option.active .language-code {
            color: var(--primary);
        }
        
        .language-pagination {
            display: flex;
            justify-content: space-between;
            padding: 12px 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.02);
        }
        
        .language-pagination-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--primary);
            cursor: pointer;
            font-size: 0.85rem;
            padding: 6px 12px;
            border-radius: var(--border-radius);
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .language-pagination-btn:hover:not(:disabled) {
            background: rgba(0, 211, 149, 0.1);
            border-color: var(--primary);
            transform: translateY(-1px);
        }
        
        .language-pagination-btn:disabled {
            color: var(--gray);
            cursor: not-allowed;
            opacity: 0.5;
        }
        
        .language-pagination-info {
            color: var(--gray);
            font-size: 0.85rem;
            display: flex;
            align-items: center;
        }
        
        /* Auth Buttons - Premium Style */
        .auth-buttons {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .auth-buttons .btn {
            padding: 10px 20px;
            font-size: 0.9rem;
            font-weight: 600;
            border-radius: var(--border-radius);
            transition: var(--transition);
        }
        
        /* Enhanced User Balance Container */
        .user-balance-container {
            width: 100%;
            background: linear-gradient(135deg, var(--lighter) 0%, var(--light) 100%);
            padding: 12px 0;
            position: fixed;
            top: 72px;
            z-index: 999;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            display: none;
            backdrop-filter: blur(10px);
        }
        
        .user-balances {
            display: flex;
            justify-content: center;
            gap: 24px;
            flex-wrap: wrap;
        }
        
        .user-balance {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: var(--darker);
            padding: 8px 20px;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            box-shadow: 0 4px 15px rgba(0, 211, 149, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .user-balance:hover {
            background: linear-gradient(135deg, var(--primary-light) 0%, var(--primary) 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 211, 149, 0.3);
        }
        
        .user-balance i {
            font-size: 0.9rem;
        }
        
        /* Matured Balance Animation */
        @keyframes pulseHighlight {
            0% { 
                transform: scale(1); 
                box-shadow: 0 0 0 0 rgba(212, 175, 55, 0.6); 
            }
            50% { 
                transform: scale(1.05); 
                box-shadow: 0 0 0 12px rgba(212, 175, 55, 0); 
            }
            100% { 
                transform: scale(1); 
                box-shadow: 0 0 0 0 rgba(212, 175, 55, 0); 
            }
        }
        
        @keyframes glow {
            0% { 
                text-shadow: 0 0 5px rgba(255, 215, 0, 0.5); 
            }
            50% { 
                text-shadow: 0 0 20px rgba(255, 215, 0, 0.8), 0 0 30px rgba(255, 215, 0, 0.6); 
            }
            100% { 
                text-shadow: 0 0 5px rgba(255, 215, 0, 0.5); 
            }
        }
        
        .matured-balance-animation {
            animation: pulseHighlight 2s ease-in-out infinite, glow 3s ease-in-out infinite;
            background: var(--gold-gradient) !important;
            color: var(--darker) !important;
            position: relative;
            overflow: hidden;
        }
        
        .matured-balance-animation::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to bottom right,
                rgba(255, 255, 255, 0) 0%,
                rgba(255, 255, 255, 0.8) 50%,
                rgba(255, 255, 255, 0) 100%
            );
            transform: rotate(30deg);
            animation: shine 3s ease-in-out infinite;
        }
        
        @keyframes shine {
            0% { 
                transform: translateX(-100%) translateY(-100%) rotate(30deg); 
            }
            50% { 
                transform: translateX(100%) translateY(100%) rotate(30deg); 
            }
            100% { 
                transform: translateX(100%) translateY(100%) rotate(30deg); 
            }
        }
        
        /* Mobile Menu Toggle */
        .mobile-menu-toggle {
            display: none;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--dark);
            font-size: 1.3rem;
            cursor: pointer;
            padding: 8px;
            border-radius: var(--border-radius);
            z-index: 1001;
            transition: var(--transition);
        }
        
        .mobile-menu-toggle:hover {
            color: var(--primary);
            border-color: var(--primary);
            transform: rotate(90deg);
        }
        
        .mobile-menu-dropdown {
            position: absolute;
            top: 72px;
            right: 20px;
            background: linear-gradient(135deg, var(--darker) 0%, var(--light) 100%);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow-xl);
            padding: 12px 0;
            transform: translateY(-20px);
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
            z-index: 1000;
            border: 1px solid rgba(255, 255, 255, 0.1);
            min-width: 220px;
            backdrop-filter: blur(20px);
        }
        
        .mobile-menu-dropdown.active {
            transform: translateY(0);
            opacity: 1;
            visibility: visible;
        }
        
        .mobile-menu-dropdown ul {
            list-style: none;
        }
        
        .mobile-menu-dropdown li {
            padding: 10px 20px;
        }
        
        .mobile-menu-dropdown a {
            color: var(--dark);
            text-decoration: none;
            font-size: 0.95rem;
            transition: var(--transition);
            display: block;
            font-weight: 500;
        }
        
        .mobile-menu-dropdown a:hover {
            color: var(--primary);
            transform: translateX(4px);
        }
        
        /* PC Toggle Menu */
        .pc-menu-toggle {
            display: none;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--dark);
            font-size: 1.1rem;
            cursor: pointer;
            padding: 8px;
            border-radius: var(--border-radius);
            z-index: 1001;
            transition: var(--transition);
            margin-left: 15px;
        }
        
        .pc-menu-toggle:hover {
            color: var(--primary);
            border-color: var(--primary);
        }
        
        .pc-menu-dropdown {
            position: absolute;
            top: 72px;
            right: 20px;
            background: linear-gradient(135deg, var(--darker) 0%, var(--light) 100%);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow-xl);
            padding: 12px 0;
            transform: translateY(-20px);
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
            z-index: 1000;
            border: 1px solid rgba(255, 255, 255, 0.1);
            min-width: 220px;
            backdrop-filter: blur(20px);
        }
        
        .pc-menu-dropdown.active {
            transform: translateY(0);
            opacity: 1;
            visibility: visible;
        }
        
        .pc-menu-dropdown ul {
            list-style: none;
        }
        
        .pc-menu-dropdown li {
            padding: 10px 20px;
        }
        
        .pc-menu-dropdown a {
            color: var(--dark);
            text-decoration: none;
            font-size: 0.95rem;
            transition: var(--transition);
            display: block;
            font-weight: 500;
        }
        
        .pc-menu-dropdown a:hover {
            color: var(--primary);
            transform: translateX(4px);
        }
        
        /* Main Navigation */
        nav {
            transition: var(--transition-slow);
        }
        
        nav ul {
            display: flex;
            list-style: none;
            gap: 24px;
        }
        
        nav a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            transition: var(--transition);
            position: relative;
            font-size: 0.95rem;
            padding: 4px 0;
        }
        
        nav a:hover {
            color: var(--primary);
        }
        
        nav a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary-gradient);
            transition: var(--transition);
        }
        
        nav a:hover::after {
            width: 100%;
        }
        
        /* Button Styles */
        .btn {
            padding: 12px 28px;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            font-size: 0.95rem;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            white-space: nowrap;
            position: relative;
            overflow: hidden;
        }
        
        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
        }
        
        .btn:hover::before {
            left: 100%;
        }
        
        .btn-primary {
            background: var(--primary-gradient);
            color: var(--darker);
            box-shadow: 0 4px 20px rgba(0, 211, 149, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, var(--primary-light) 0%, var(--primary) 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(0, 211, 149, 0.4);
        }
        
        .btn-outline {
            background: transparent;
            color: var(--primary);
            border: 2px solid var(--primary);
            backdrop-filter: blur(10px);
        }
        
        .btn-outline:hover {
            background: var(--primary);
            color: var(--darker);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 211, 149, 0.3);
        }
        
        .btn-gold {
            background: var(--gold-gradient);
            color: var(--darker);
            box-shadow: 0 4px 20px rgba(212, 175, 55, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .btn-gold:hover {
            background: linear-gradient(135deg, var(--bitcoin-gold-light) 0%, var(--bitcoin-gold) 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(212, 175, 55, 0.4);
        }

        /* Enhanced Announcement System */
        .announcement-center {
            position: fixed;
            top: 72px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 9998;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            pointer-events: none;
            width: 100%;
            max-width: 600px;
            padding: 0 20px;
        }

        .announcement {
            width: 100%;
            padding: 20px 24px;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--box-shadow-xl);
            display: flex;
            align-items: flex-start;
            gap: 16px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            transform: translateY(-30px) scale(0.95);
            opacity: 0;
            margin-bottom: 12px;
            font-size: 0.95rem;
            font-weight: 500;
            backdrop-filter: blur(20px);
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(248, 250, 252, 0.98) 100%);
            border: 1px solid rgba(0, 0, 0, 0.08);
            pointer-events: auto;
            position: relative;
            border-left: 6px solid var(--error);
            color: #1a1a1a;
            min-height: auto;
            max-height: none;
            overflow: visible;
            word-wrap: break-word;
            word-break: break-word;
            white-space: normal;
            line-height: 1.6;
        }

        .announcement.show {
            transform: translateY(0) scale(1);
            opacity: 1;
        }

        .announcement.error {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(253, 242, 242, 0.98) 100%);
            color: #1a1a1a;
            border-left: 6px solid var(--error);
            box-shadow: 0 8px 30px rgba(255, 61, 87, 0.15), 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .announcement.warning {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(255, 250, 235, 0.98) 100%);
            color: #1a1a1a;
            border-left: 6px solid var(--warning);
            box-shadow: 0 8px 30px rgba(255, 184, 0, 0.15), 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .announcement.info {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(235, 248, 255, 0.98) 100%);
            color: #1a1a1a;
            border-left: 6px solid var(--primary);
            box-shadow: 0 8px 30px rgba(0, 211, 149, 0.15), 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .announcement i {
            font-size: 1.5rem;
            flex-shrink: 0;
            margin-top: 2px;
        }

        .announcement.error i {
            color: var(--error);
        }

        .announcement.warning i {
            color: var(--warning);
        }

        .announcement.info i {
            color: var(--primary);
        }

        .announcement-content {
            flex: 1;
            padding-right: 16px;
            overflow: visible;
            min-width: 0;
            display: flex;
            flex-direction: column;
            gap: 12px;
            width: 100%;
        }

        .announcement-title {
            font-weight: 700;
            margin-bottom: 0;
            font-size: 1.15rem;
            color: #000000 !important;
            white-space: normal;
            overflow: visible;
            text-overflow: unset;
            line-height: 1.3;
            letter-spacing: -0.01em;
            display: block;
        }

        .announcement-message {
            font-size: 0.95rem;
            line-height: 1.6;
            color: #2d3748 !important;
            white-space: normal;
            overflow: visible;
            text-overflow: unset;
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .announcement-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.85rem;
            margin-top: 16px;
            color: var(--primary) !important;
            white-space: nowrap;
            border-top: 1px solid rgba(0, 211, 149, 0.3);
            padding-top: 16px;
            gap: 0;
            font-weight: 600 !important;
            width: 100%;
        }

        .announcement-sender {
            font-weight: 600 !important;
            color: var(--primary) !important;
            white-space: nowrap;
            overflow: visible;
            text-overflow: unset;
        }

        .announcement-date {
            opacity: 0.9;
            color: var(--primary) !important;
            font-weight: 600 !important;
            white-space: nowrap;
        }

        .announcement-close {
            position: absolute;
            top: 16px;
            right: 16px;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background-color: rgba(0, 0, 0, 0.05);
            border: none;
            color: #718096;
            cursor: pointer;
            transition: var(--transition);
            font-size: 1rem;
            padding: 0;
            opacity: 0.8;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .announcement-close:hover {
            background-color: rgba(0, 0, 0, 0.1);
            transform: scale(1.1) rotate(90deg);
            color: #2d3748;
            opacity: 1;
        }

        /* Critical Error Notification System */
        .notification-center {
            position: fixed;
            top: 24px;
            right: 24px;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            justify-content: flex-start;
            pointer-events: none;
            width: 100%;
            max-width: 380px;
        }

        .notification {
            width: 100%;
            padding: 16px 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow-xl);
            display: flex;
            align-items: start;
            gap: 12px;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            transform: translateX(30px) scale(0.95);
            opacity: 0;
            margin-bottom: 12px;
            font-size: 0.85rem;
            font-weight: 500;
            backdrop-filter: blur(20px);
            background: linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(18, 18, 18, 0.95) 100%);
            border: 1px solid rgba(255, 255, 255, 0.1);
            pointer-events: auto;
            position: relative;
            border-left: 4px solid var(--error);
        }

        .notification.show {
            transform: translateX(0) scale(1);
            opacity: 1;
        }

        .notification.error {
            background: linear-gradient(135deg, rgba(255, 61, 87, 0.95) 0%, rgba(204, 44, 77, 0.95) 100%);
            color: white;
            border-left: 4px solid #cc2c4d;
        }

        .notification.success {
            background: linear-gradient(135deg, rgba(0, 211, 149, 0.95) 0%, rgba(0, 183, 131, 0.95) 100%);
            color: var(--darker);
            border-left: 4px solid #00B783;
        }

        .notification.warning {
            background: linear-gradient(135deg, rgba(255, 184, 0, 0.95) 0%, rgba(230, 166, 0, 0.95) 100%);
            color: var(--darker);
            border-left: 4px solid #e6a600;
        }

        .notification i {
            font-size: 1.2rem;
            flex-shrink: 0;
            margin-top: 2px;
        }

        .notification-content {
            flex: 1;
            padding-right: 12px;
        }

        .notification-title {
            font-weight: 600;
            margin-bottom: 4px;
            font-size: 0.95rem;
        }

        .notification-message {
            font-size: 0.85rem;
            line-height: 1.4;
        }

        .notification-close {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background-color: rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.8rem;
        }

        .notification-close:hover {
            background-color: rgba(0, 0, 0, 0.2);
            transform: rotate(90deg);
        }

        /* Hero Section - Premium Design */
        .hero-section {
            padding: 180px 0 100px;
            background: linear-gradient(135deg, var(--light) 0%, var(--darker) 100%);
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 50%, rgba(0, 211, 149, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(212, 175, 55, 0.05) 0%, transparent 50%);
            pointer-events: none;
        }

        .hero-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            align-items: center;
            position: relative;
            z-index: 1;
        }

        .hero-content {
            max-width: 600px;
        }

        .hero-content h1 {
            font-size: 3.2rem;
            margin-bottom: 24px;
            color: var(--dark);
            line-height: 1.2;
            font-weight: 700;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .hero-content h1 span {
            color: var(--primary);
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero-content p {
            font-size: 1.2rem;
            margin-bottom: 32px;
            color: var(--gray);
            line-height: 1.6;
        }

        .hero-buttons {
            display: flex;
            gap: 16px;
            margin-bottom: 32px;
            flex-wrap: wrap;
        }

        /* Security Indicators */
        .security-indicator {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.9rem;
            color: var(--gray);
            margin-top: 12px;
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: var(--border-radius);
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: var(--transition);
        }

        .security-indicator:hover {
            background: rgba(255, 255, 255, 0.05);
            transform: translateX(4px);
        }

        .security-indicator i {
            color: var(--security-green);
            font-size: 1.1rem;
        }

        /* Bitcoin Price Container */
        .btc-price-container {
            width: 100%;
            max-width: 420px;
            background: linear-gradient(135deg, var(--darker) 0%, var(--light) 100%);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--box-shadow-xl);
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: var(--transition);
            backdrop-filter: blur(10px);
            margin-left: auto;
        }

        .btc-price-container:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
            border-color: var(--bitcoin-gold);
        }

        .btc-price-header {
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(10, 10, 10, 0.8) 100%);
            padding: 20px 24px;
            display: flex;
            align-items: center;
            gap: 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .btc-price-header i {
            font-size: 1.8rem;
            color: var(--bitcoin-gold);
            filter: drop-shadow(0 0 8px rgba(212, 175, 55, 0.4));
        }

        .btc-price-header h3 {
            font-size: 1.3rem;
            color: var(--dark);
            margin: 0;
            font-weight: 600;
        }

        .btc-price-display {
            padding: 24px;
        }

        .btc-price-main {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 24px;
        }

        .btc-price {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--bitcoin-gold);
            font-family: 'Manrope', sans-serif;
            text-shadow: 0 0 20px rgba(212, 175, 55, 0.3);
        }

        .btc-change {
            padding: 8px 16px;
            border-radius: var(--border-radius);
            font-weight: 600;
            font-size: 1rem;
            backdrop-filter: blur(10px);
        }

        .btc-change.positive {
            background: rgba(0, 211, 149, 0.2);
            color: var(--success);
            border: 1px solid rgba(0, 211, 149, 0.3);
        }

        .btc-change.negative {
            background: rgba(255, 61, 87, 0.2);
            color: var(--error);
            border: 1px solid rgba(255, 61, 87, 0.3);
        }

        .btc-price-details {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
        }

        .btc-price-detail {
            display: flex;
            flex-direction: column;
            gap: 6px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: var(--border-radius);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .btc-price-detail span:first-child {
            font-size: 0.85rem;
            color: var(--gray);
            font-weight: 500;
        }

        .btc-price-detail span:last-child {
            font-size: 1rem;
            color: var(--dark);
            font-weight: 600;
        }

        .btc-price-footer {
            padding: 16px 24px;
            background: rgba(0, 0, 0, 0.3);
            font-size: 0.8rem;
            color: var(--gray);
            text-align: center;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
        }

        /* Enhanced Stats Section */
        .stats-section {
            padding: 100px 0;
            background: linear-gradient(135deg, var(--lighter) 0%, var(--light) 100%);
            position: relative;
            overflow: hidden;
        }

        .stats-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 30% 50%, rgba(0, 211, 149, 0.05) 0%, transparent 40%),
                radial-gradient(circle at 70% 50%, rgba(212, 175, 55, 0.03) 0%, transparent 40%);
            pointer-events: none;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 24px;
            margin-top: 40px;
            position: relative;
            z-index: 1;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--light) 0%, var(--lighter) 100%);
            border-radius: var(--border-radius-lg);
            padding: 32px;
            text-align: center;
            transition: var(--transition);
            box-shadow: var(--box-shadow);
            border: 1px solid rgba(255, 255, 255, 0.05);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--primary-gradient);
            opacity: 0;
            transition: var(--transition);
            z-index: 0;
        }

        .stat-card:hover::before {
            opacity: 0.1;
        }

        .stat-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: var(--box-shadow-xl);
            border-color: var(--primary);
        }

        .stat-icon {
            font-size: 2.8rem;
            color: var(--primary);
            margin-bottom: 20px;
            transition: var(--transition);
            position: relative;
            z-index: 1;
        }

        .stat-card:hover .stat-icon {
            transform: scale(1.1) rotate(5deg);
            color: var(--primary-light);
        }

        .stat-number {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 12px;
            font-family: 'Manrope', sans-serif;
            transition: var(--transition);
            position: relative;
            z-index: 1;
        }

        .stat-card:hover .stat-number {
            color: var(--primary);
            text-shadow: 0 0 20px rgba(0, 211, 149, 0.3);
        }

        .stat-label {
            font-size: 1rem;
            color: var(--gray);
            line-height: 1.5;
            min-height: 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 1;
        }

        .stat-label span {
            font-size: 0.9rem;
            margin-top: 8px;
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }

        /* About Section */
        .about-section {
            padding: 100px 0;
            background: linear-gradient(135deg, var(--lighter) 0%, var(--light) 100%);
            position: relative;
            overflow: hidden;
        }

        .about-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 80% 20%, rgba(0, 211, 149, 0.03) 0%, transparent 40%);
            pointer-events: none;
        }

        .section-title {
            text-align: center;
            margin-bottom: 60px;
            position: relative;
            z-index: 1;
        }

        .section-title h2 {
            font-size: 2.8rem;
            color: var(--dark);
            margin-bottom: 20px;
            font-weight: 700;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .section-title p {
            color: var(--gray);
            max-width: 700px;
            margin: 0 auto;
            font-size: 1.1rem;
            line-height: 1.6;
        }

        .about-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            align-items: center;
            position: relative;
            z-index: 1;
        }

        .about-image {
            position: relative;
            border-radius: var(--border-radius-xl);
            overflow: hidden;
            box-shadow: var(--box-shadow-xl);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .about-image img {
            width: 100%;
            height: 500px;
            object-fit: cover;
            display: block;
            transition: transform 0.5s ease;
        }

        .about-image:hover img {
            transform: scale(1.05);
        }

        .about-content h3 {
            font-size: 2rem;
            margin-bottom: 24px;
            color: var(--dark);
            font-weight: 600;
        }

        .about-content p {
            margin-bottom: 24px;
            color: var(--gray);
            font-size: 1.1rem;
            line-height: 1.7;
        }

        .about-features {
            margin-top: 32px;
        }

        .about-feature {
            display: flex;
            align-items: flex-start;
            gap: 16px;
            margin-bottom: 20px;
            padding: 16px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: var(--border-radius);
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: var(--transition);
        }

        .about-feature:hover {
            background: rgba(255, 255, 255, 0.05);
            transform: translateX(8px);
            border-color: var(--primary);
        }

        .about-feature-icon {
            width: 28px;
            height: 28px;
            background: var(--primary-gradient);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--darker);
            flex-shrink: 0;
            font-size: 1rem;
            box-shadow: 0 4px 12px rgba(0, 211, 149, 0.2);
        }

        .about-feature-text h4 {
            font-size: 1.1rem;
            margin-bottom: 8px;
            color: var(--dark);
            font-weight: 600;
        }

        .about-feature-text p {
            font-size: 0.95rem;
            margin-bottom: 0;
            color: var(--gray);
        }

        /* Enhanced Plans Section */
        .plans-section {
            padding: 100px 0;
            background: linear-gradient(135deg, var(--light) 0%, var(--darker) 100%);
            position: relative;
            overflow: hidden;
        }

        .plans-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(0, 211, 149, 0.05) 0%, transparent 40%),
                radial-gradient(circle at 80% 70%, rgba(212, 175, 55, 0.03) 0%, transparent 40%);
            pointer-events: none;
        }

        .plans-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 32px;
            margin-top: 48px;
            position: relative;
            z-index: 1;
        }

        .plan-card {
            background: linear-gradient(135deg, var(--lighter) 0%, var(--light) 100%);
            border-radius: var(--border-radius-xl);
            padding: 40px 32px;
            box-shadow: var(--box-shadow);
            transition: var(--transition-slow);
            position: relative;
            overflow: hidden;
            z-index: 1;
            border: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            flex-direction: column;
            min-height: 680px;
            backdrop-filter: blur(10px);
        }

        .plan-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--plan-primary, var(--primary)) 0%, var(--plan-secondary, var(--primary-dark)) 100%);
            opacity: 0.1;
            z-index: -1;
            transition: var(--transition-slow);
        }

        .plan-card:hover::before {
            opacity: 0.2;
        }

        .plan-card:hover {
            transform: translateY(-12px) scale(1.02);
            box-shadow: var(--box-shadow-xl);
            border-color: var(--plan-accent, var(--primary));
        }

        .plan-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .plan-icon {
            font-size: 2rem;
            color: var(--plan-accent, var(--primary));
            background: rgba(var(--plan-primary-rgb, 0, 211, 149), 0.1);
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 20px rgba(var(--plan-primary-rgb, 0, 211, 149), 0.2);
        }

        .plan-name {
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--dark);
            transition: var(--transition);
            flex: 1;
        }

        .plan-card:hover .plan-name {
            color: var(--plan-accent, var(--primary));
        }

        .plan-mining-image {
            width: 100%;
            height: 200px;
            border-radius: var(--border-radius);
            overflow: hidden;
            margin: 20px 0;
            position: relative;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .plan-mining-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .plan-card:hover .plan-mining-image img {
            transform: scale(1.05);
        }

        .mining-image-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
            padding: 12px;
            color: white;
            font-size: 0.9rem;
            text-align: center;
        }

        .cloud-mining-description {
            font-size: 0.95rem;
            color: var(--gray);
            margin: 20px 0;
            line-height: 1.6;
            background: rgba(255, 255, 255, 0.03);
            padding: 16px;
            border-radius: var(--border-radius);
            border-left: 3px solid var(--plan-accent, var(--primary));
        }

        .plan-features {
            margin-bottom: 32px;
            flex: 1;
        }

        .plan-feature {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
            font-size: 0.95rem;
            color: var(--gray);
        }

        .plan-feature i {
            color: var(--plan-accent, var(--primary));
            font-size: 1rem;
            width: 20px;
            text-align: center;
        }

        .plan-limits {
            display: flex;
            justify-content: space-between;
            margin-top: 24px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.95rem;
        }

        .plan-min, .plan-max {
            display: flex;
            flex-direction: column;
        }

        .plan-min span:first-child, .plan-max span:first-child {
            color: var(--gray);
            font-size: 0.85rem;
        }

        .plan-min span:last-child, .plan-max span:last-child {
            color: var(--dark);
            font-weight: 600;
        }

        .plan-button {
            width: 100%;
            padding: 16px 24px;
            font-size: 1rem;
            font-weight: 600;
            border-radius: var(--border-radius);
            background: linear-gradient(135deg, var(--light) 0%, var(--lighter) 100%);
            color: var(--dark);
            border: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-top: auto;
            backdrop-filter: blur(10px);
        }

        .plan-button:hover:not(:disabled) {
            background: linear-gradient(135deg, var(--plan-primary, var(--primary)) 0%, var(--plan-secondary, var(--primary-dark)) 100%);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(var(--plan-primary-rgb, 0, 211, 149), 0.3);
        }

        /* Investment Modal */
        .investment-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 10, 10, 0.95);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition-slow);
            backdrop-filter: blur(20px);
            padding: 20px;
        }

        .investment-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: linear-gradient(135deg, var(--lighter) 0%, var(--light) 100%);
            border-radius: var(--border-radius-xl);
            width: 100%;
            max-width: 500px;
            box-shadow: var(--box-shadow-xl);
            transform: translateY(20px);
            transition: var(--transition-slow);
            border: 1px solid rgba(255, 255, 255, 0.1);
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            backdrop-filter: blur(20px);
        }

        .investment-modal.active .modal-content {
            transform: translateY(0);
        }

        .modal-header {
            padding: 24px 32px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            background: linear-gradient(135deg, var(--lighter) 0%, var(--light) 100%);
            z-index: 10;
            backdrop-filter: blur(20px);
        }

        .modal-header h3 {
            font-size: 1.5rem;
            color: var(--dark);
            margin: 0;
            font-weight: 600;
        }

        .modal-close {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--gray);
            font-size: 1.8rem;
            cursor: pointer;
            transition: var(--transition);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover {
            color: var(--primary);
            border-color: var(--primary);
            transform: rotate(90deg);
        }

        /* Rest of the styles remain similar but with enhanced colors and positioning */

        /* Responsive Design */
        @media (max-width: 1200px) {
            .hero-content h1 {
                font-size: 2.8rem;
            }
            
            .section-title h2 {
                font-size: 2.4rem;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 992px) {
            .hero-container,
            .about-container {
                grid-template-columns: 1fr;
                gap: 40px;
            }
            
            .hero-content {
                text-align: center;
            }
            
            .hero-buttons {
                justify-content: center;
            }
            
            .btc-price-container {
                margin: 0 auto;
            }
            
            .plans-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .mobile-menu-toggle {
                display: block;
            }
            
            .pc-menu-toggle {
                display: none;
            }
            
            nav {
                display: none;
            }
            
            .language-selector {
                margin-right: 10px;
            }
            
            .auth-buttons {
                display: none;
            }
            
            .hero-section {
                padding: 140px 0 60px;
            }
            
            .hero-content h1 {
                font-size: 2.4rem;
            }
            
            .section-title h2 {
                font-size: 2rem;
            }
            
            .stats-grid,
            .plans-grid {
                grid-template-columns: 1fr;
            }
            
            .announcement-center {
                top: 72px;
                max-width: 90%;
            }
        }

        @media (max-width: 576px) {
            .container {
                padding: 0 15px;
            }
            
            .hero-content h1 {
                font-size: 2rem;
            }
            
            .hero-content p {
                font-size: 1rem;
            }
            
            .btn {
                padding: 10px 20px;
                font-size: 0.9rem;
            }
            
            .section-title h2 {
                font-size: 1.8rem;
            }
            
            .btc-price-details {
                grid-template-columns: 1fr;
            }
        }

        /* Additional enhancements for better visual appeal */
        .hero-image {
            position: relative;
        }

        .hero-image::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 120%;
            height: 120%;
            background: radial-gradient(circle, rgba(0, 211, 149, 0.1) 0%, transparent 70%);
            filter: blur(40px);
            z-index: 0;
        }

        .cloud-mining-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: linear-gradient(135deg, var(--plan-primary, var(--primary)) 0%, var(--plan-secondary, var(--primary-dark)) 100%);
            color: white;
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-top: 8px;
            box-shadow: 0 4px 15px rgba(var(--plan-primary-rgb, 0, 211, 149), 0.2);
        }

        /* Animation for sections */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in-up {
            animation: fadeInUp 0.8s ease-out forwards;
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--light);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-light);
        }

        /* Selection color */
        ::selection {
            background: var(--primary);
            color: var(--darker);
        }

        /* Focus styles for accessibility */
        :focus {
            outline: 2px solid var(--primary);
            outline-offset: 2px;
        }

        /* Smooth transitions for all interactive elements */
        a, button, input, select, textarea {
            transition: var(--transition-fast);
        }

        /* Enhanced text shadows for better readability */
        h1, h2, h3, h4 {
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        /* Gradient borders for premium look */
        .gradient-border {
            position: relative;
            border-radius: var(--border-radius);
        }

        .gradient-border::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: var(--primary-gradient);
            border-radius: inherit;
            z-index: -1;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .gradient-border:hover::before {
            opacity: 1;
        }
    </style>
</head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <img src="https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1" alt="BitHash Logo" class="loading-logo">    
        <div class="loading-text">Establishing Secure Connection</div>
    </div>

    <!-- Security Badge -->
    <div class="security-badge">
        <i class="fas fa-shield-alt"></i>
        <span>256-bit AES & TLS 1.3 Encrypted</span>
    </div>

    <!-- Enhanced Announcement System -->
    <div class="announcement-center" id="announcement-center">
        <!-- Announcements will be dynamically inserted here -->
    </div>

    <!-- Critical Error Notification System -->
    <div class="notification-center" id="notification-center">
        <!-- Critical error notifications will be dynamically inserted here -->
    </div>

    <!-- Loan Qualification Popup -->
    <div class="loan-popup" id="loan-popup">
        <div class="loan-popup-header">
            <div class="loan-popup-title">Loan Qualification</div>
            <button class="loan-popup-close" id="loan-popup-close">&times;</button>
        </div>
        <div class="loan-popup-content" id="loan-popup-content">
            <!-- Content will be dynamically inserted here -->
        </div>
        <div class="loan-popup-footer">
            <button class="loan-popup-btn loan-popup-btn-secondary" id="loan-popup-cancel">Cancel</button>
            <button class="loan-popup-btn loan-popup-btn-primary" id="loan-popup-apply">Apply Now</button>
        </div>
    </div>

    <!-- Enhanced Header -->
    <header id="main-header">
        <div class="container header-container">
            <div class="logo" onclick="window.location.href='index.html'">
                <img src="https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1" alt="BitHash Logo" class="loading-logo">    
                <span class="logo-text">
                    <span class="bitcoin-animation"></span>itHash
                </span>
            </div>
            
            <!-- Language Selector -->
            <div class="language-selector">
                <button class="language-dropdown-btn" id="language-dropdown-btn">
                    <i class="fas fa-globe"></i>
                    <span id="current-language">English</span>
                    <i class="fas fa-chevron-down"></i>
                </button>
                <div class="language-dropdown" id="language-dropdown">
                    <div class="language-search">
                        <input type="text" id="language-search" placeholder="Search languages...">
                    </div>
                    <div class="language-list" id="language-list">
                        <!-- Languages will be dynamically loaded here -->
                    </div>
                    <div class="language-pagination">
                        <button class="language-pagination-btn" id="language-prev" disabled>
                            <i class="fas fa-chevron-left"></i> Prev
                        </button>
                        <span class="language-pagination-info" id="language-page-info">Page 1 of 5</span>
                        <button class="language-pagination-btn" id="language-next">
                            Next <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <button class="mobile-menu-toggle" id="mobile-menu-toggle" aria-label="Toggle navigation">
                <i class="fas fa-bars"></i>
            </button>
            
            <button class="pc-menu-toggle" id="pc-menu-toggle" aria-label="Toggle navigation">
                <i class="fas fa-ellipsis-v"></i>
            </button>
            
            <div class="mobile-menu-dropdown" id="mobile-menu-dropdown">
                <ul>
                    <li><a href="#plans">Cloud Mining Plans</a></li>
                    <li><a href="#how-it-works">How It Works</a></li>
                    <li><a href="dashboard.html">Dashboard</a></li>
                    <li><a href="accountsetting.html">Settings</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </div>
            
            <div class="pc-menu-dropdown" id="pc-menu-dropdown">
                <ul>
                    <li><a href="#plans">Cloud Mining Plans</a></li>
                    <li><a href="#how-it-works">How It Works</a></li>
                    <li><a href="dashboard.html">Dashboard</a></li>
                    <li><a href="accountsetting.html">Settings</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </div>
            
            <nav id="main-nav">
                <ul>
                    <li><a href="#plans">Cloud Mining Plans</a></li>
                    <li><a href="#how-it-works">How It Works</a></li>
                    <li><a href="dashboard.html">Dashboard</a></li>
                    <li><a href="accountsetting.html">Settings</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </nav>
            
            <div class="auth-buttons" id="auth-buttons">
                <button class="btn btn-outline" onclick="window.location.href='login.html'">Login</button>
                <button class="btn btn-primary" onclick="window.location.href='signup.html'">Sign Up</button>
            </div>
        </div>
    </header>

    <!-- Enhanced User Balance Container -->
    <div class="user-balance-container" id="user-balance-container">
        <div class="container">
            <div class="user-balances">
                <div class="user-balance" id="main-balance" onclick="redirectToDashboard()">
                    <i class="fas fa-wallet"></i>
                    <span id="main-balance-amount">Main: $0.00</span>
                </div>
                <div class="user-balance" id="matured-balance" onclick="redirectToDashboard()">
                    <i class="fas fa-piggy-bank"></i>
                    <span id="matured-balance-amount">Matured: $0.00</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Hero Section -->
    <section class="hero-section" id="home">
        <div class="container">
            <div class="hero-container">
                <div class="hero-content" data-aos="fade-right">
                    <h1><span class="bitcoin-animation"></span>itcoin Cloud Mining Powered <span>by Efficiency and Scale</span></h1>
                    <p>Join BitHash and access SHA-256 ASIC miners operating across energy-efficient data centers through cloud mining. Invest in live mining units, with payouts based on verified output and distributed per your selected plan.</p>
                    
                    <div class="hero-buttons">
                        <button class="btn btn-primary" onclick="window.location.href='signup.html'">Start Cloud Mining</button>
                        <button class="btn btn-outline" onclick="window.location.href='#plans'">View Cloud Mining Plans</button>
                    </div>
                    
                    <!-- Security Indicators -->
                    <div class="security-indicator">
                        <i class="fas fa-lock"></i>
                        <span>256-bit AES Encryption</span>
                    </div>
                    <div class="security-indicator">
                        <i class="fas fa-shield-alt"></i>
                        <span>Multi-Signature Wallets</span>
                    </div>
                    <div class="security-indicator">
                        <i class="fas fa-user-shield"></i>
                        <span>SOC 2 Type II Certified</span>
                    </div>
                </div>
                <div class="hero-image" data-aos="fade-left">
                    <div class="btc-price-container">
                        <div class="btc-price-header">
                            <i class="fab fa-bitcoin"></i>
                            <h3>Bitcoin Price</h3>
                        </div>
                        <div class="btc-price-display">
                            <div class="btc-price-main">
                                <span class="btc-price" id="btc-price">$0.00</span>
                                <span class="btc-change" id="btc-change">0.00%</span>
                            </div>
                            <div class="btc-price-details">
                                <div class="btc-price-detail">
                                    <span>24h High</span>
                                    <span id="btc-high">$0.00</span>
                                </div>
                                <div class="btc-price-detail">
                                    <span>24h Low</span>
                                    <span id="btc-low">$0.00</span>
                                </div>
                                <div class="btc-price-detail">
                                    <span>24h Volume</span>
                                    <span id="btc-volume">0 BTC</span>
                                </div>
                            </div>
                        </div>
                        <div class="btc-price-footer">
                            <span>Real-time prices from <span class="bitcoin-animation"></span>itHash LCC</span>
                        </div>
                    </div> 
                </div>
            </div>
        </div>
    </section>

    <section class="stats-section">
        <div class="container">
            <div class="section-title" data-aos="fade-up">
                <h2>Live Cloud Mining Stats</h2>
                <p>Live metrics from BitHash cloud mining operations across all active data centers worldwide.</p>
            </div>
            
            <div class="stats-grid" id="stats-container">
                <div class="stat-card" data-aos="fade-up" data-aos-delay="100">
                    <div class="stat-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-number" id="total-investors">0</div>
                    <div class="stat-label">
                        Total Active Cloud Miners
                        <span id="investors-change"></span>
                    </div>
                </div>
                
                <div class="stat-card" data-aos="fade-up" data-aos-delay="200">
                    <div class="stat-icon">
                        <i class="fas fa-coins"></i>
                    </div>
                    <div class="stat-number" id="total-invested">$0</div>
                    <div class="stat-label">
                        24-Hour Cloud Mining Investment
                        <span id="invested-change"></span>
                    </div>
                </div>
                
                <div class="stat-card" data-aos="fade-up" data-aos-delay="300">
                    <div class="stat-icon">
                        <i class="fas fa-hand-holding-usd"></i>
                    </div>
                    <div class="stat-number" id="total-withdrawals">$0</div>
                    <div class="stat-label">
                        24-Hour Mining Payouts
                        <span id="withdrawals-change"></span>
                    </div>
                </div>
                
                <div class="stat-card" data-aos="fade-up" data-aos-delay="400">
                    <div class="stat-icon">
                        <i class="fas fa-piggy-bank"></i>
                    </div>
                    <div class="stat-number" id="total-loans">$0</div>
                    <div class="stat-label">
                        24-Hour Loan Disbursements
                        <span id="loans-change"></span>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- About Section -->
    <section class="about-section" id="about">
        <div class="container">
            <div class="section-title" data-aos="fade-up">
                <h2>Why Choose BitHash Cloud Mining?</h2>
                <p>BitHash connects you to high efficiency Bitcoin mining systems through cloud mining, with real-time performance tracking and secure, automated payouts.</p>
            </div>
            
            <div class="about-container">
                <div class="about-image" data-aos="fade-right">
                    <img src="https://www.dropbox.com/scl/fi/0qn1054f0y3d3dzvn9w5h/WhatsApp-Image-2025-07-19-at-17.16.42_679cc7d5.jpg?rlkey=la1zhkgazqsoh182cn67wtc19&raw=1" alt="BitHash Mining Facility">
                </div>
                <div class="about-content" data-aos="fade-left">
                    <h3>Professional Cloud Mining Infrastructure</h3>
                    <p>BitHash runs a globally distributed Bitcoin cloud mining network with data centers strategically located across North America, Europe, and Asia for optimal energy efficiency and uptime.</p>
                    <p>Our facilities deploy next-generation SHA-256 ASIC miners with advanced thermal management, including liquid cooling, to deliver sustained high hash rates beyond the reach of individual setups.</p>
                    
                    <div class="about-features">
                        <div class="about-feature">
                            <div class="about-feature-icon">
                                <i class="fas fa-bolt"></i>
                            </div>
                            <div class="about-feature-text">
                                <h4>Renewable Energy</h4>
                                <p>85% of our energy comes from sustainable sources, reducing environmental impact.</p>
                            </div>
                        </div>
                        <div class="about-feature">
                            <div class="about-feature-icon">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <div class="about-feature-text">
                                <h4>High-Level Security</h4>
                                <p>Biometric access controls and 24/7 monitoring protect our facilities.</p>
                            </div>
                        </div>
                        <div class="about-feature">
                            <div class="about-feature-icon">
                                <i class="fas fa-network-wired"></i>
                            </div>
                            <div class="about-feature-text">
                                <h4>99.99% Uptime</h4>
                                <p>Redundant network connections ensure continuous mining operations.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Plans Section -->
    <section class="plans-section" id="plans">
        <div class="container">
            <div class="section-title" data-aos="fade-up">
                <h2>Bitcoin Cloud Mining Plans</h2>
                <p>Each cloud mining plan operates under a distinct contract hash, tied to live ASIC miner deployments. Invest in cloud mining and earn based on actual mining output.</p>
                <div class="cloud-mining-icon">
                    <i class="fas fa-cloud"></i>
                    <span>CLOUD MINING INVESTMENT</span>
                </div>
                <div id="balance-display" style="display: none; margin-top: 15px;">
                    <span style="color: var(--primary); font-weight: 600;">Your Balances: </span>
                    <span id="current-balance">Main: $0.00 | Matured: $0.00</span>
                </div>
            </div>
            
            <div class="plans-grid" id="plans-container">
                <!-- Cloud Mining Plans will be dynamically loaded here -->
            </div>
        </div>
    </section>

    <!-- Investment Modal -->
    <div class="investment-modal" id="investment-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-plan-name">Cloud Mining Plan</h3>
                <button class="modal-close" id="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="plan-details">
                    <div class="detail-row">
                        <span class="detail-label">Mining Return:</span>
                        <span class="detail-value" id="modal-plan-return">0%</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Mining Duration:</span>
                        <span class="detail-value" id="modal-plan-duration">0 hours</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Minimum Investment:</span>
                        <span class="detail-value" id="modal-plan-min">$200</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Maximum Investment:</span>
                        <span class="detail-value" id="modal-plan-max">$0</span>
                    </div>
                </div>
                
                <div class="investment-form">
                    <!-- Balance Selector -->
                    <div class="form-group">
                        <label for="balance-type">Select Balance to Use for Cloud Mining</label>
                        <div class="balance-selector" id="balance-selector">
                            <div class="balance-option" data-balance="main">
                                <div class="balance-info">
                                    <i class="fas fa-wallet"></i>
                                    <div class="balance-details">
                                        <span class="balance-name">Main Balance</span>
                                        <span class="balance-amount" id="modal-main-balance-amount">$0.00</span>
                                    </div>
                                </div>
                                <div class="balance-radio"></div>
                            </div>
                            <div class="balance-option" data-balance="matured">
                                <div class="balance-info">
                                    <i class="fas fa-piggy-bank"></i>
                                    <div class="balance-details">
                                        <span class="balance-name">Matured Balance</span>
                                        <span class="balance-amount" id="modal-matured-balance-amount">$0.00</span>
                                    </div>
                                </div>
                                <div class="balance-radio"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Fee Information -->
                    <div class="fee-info">
                        <i class="fas fa-info-circle"></i>
                        <span>A 3% mining fee will be deducted from your selected balance before the cloud mining contract is processed.</span>
                    </div>
                    
                    <div class="form-group">
                        <label for="investment-amount">Cloud Mining Investment ($)</label>
                        <input type="number" id="investment-amount" class="form-control" placeholder="Enter investment amount">
                        <div class="amount-error" id="amount-error"></div>
                    </div>
                    
                    <div class="expected-return">
                        <span>Expected Mining Return (after 3% fee):</span>
                        <span id="expected-return">$0.00</span>
                    </div>
                    
                    <button class="btn btn-primary" id="confirm-investment">Start Cloud Mining</button>
                    <div class="investment-status" id="investment-status"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- How It Works Section -->
    <section class="how-it-works-section" id="how-it-works">
        <div class="container">
            <div class="section-title" data-aos="fade-up">
                <h2>How Cloud Mining Works</h2>
                <p>Our streamlined process makes Bitcoin cloud mining accessible to everyone</p>
            </div>
            
            <div class="steps-container">
                <div class="step-card" data-aos="fade-up" data-aos-delay="100">
                    <div class="step-number">1</div>
                    <h3>Create Account</h3>
                    <p>Register in minutes with our secure onboarding process. No technical knowledge required.</p>
                </div>
                <div class="step-card" data-aos="fade-up" data-aos-delay="200">
                    <div class="step-number">2</div>
                    <h3>Choose Cloud Mining Plan</h3>
                    <p>Select a cloud mining plan that matches your goals and invest securely.</p>
                </div>
                <div class="step-card" data-aos="fade-up" data-aos-delay="300">
                    <div class="step-number">3</div>
                    <h3>Start Earning from Mining</h3>
                    <p>Watch your investment grow with daily mining updates. Withdraw profits anytime.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Mining Video Section -->
    <section class="mining-video-section">
        <div class="container">
            <div class="section-title" data-aos="fade-up">
                <h2>Real-Time Crypto Cloud Mining Operations</h2>
                <p>Our 24/7 Bitcoin cloud mining hubs equipped with high efficiency ASIC rigs and live performance monitoring</p>
            </div>
            
            <div class="video-container" data-aos="fade-up">
                <video autoplay loop muted playsinline disablePictureInPicture disableRemotePlayback>
                    <source src="https://www.dropbox.com/scl/fi/2ln68i04x0ep95aisvtnz/Cryptocurrency-Bitcoins-mining-in-4K-UHD-flat-animation-1.mp4?rlkey=vpsim9qc57886qu8dppx9npax&raw=1" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <div class="video-overlay"></div>
            </div>
        </div>
    </section>

    <!-- Loans Section -->
    <section class="loans-section" id="loans">
        <div class="container">
            <div class="section-title" data-aos="fade-up">
                <h2><span class="bitcoin-animation"></span>itHash Loans</h2>
                <p>We now qualify borrowers based on their transaction history. Build your creditworthiness through consistent activity.</p>
            </div>
            
            <div class="loan-calculator" data-aos="fade-up">
                <h3>Loan Eligibility Calculator</h3>
                <div class="loan-calculator-grid">
                    <div class="form-group">
                        <label for="loan-amount" class="form-label">Desired Loan Amount</label>
                        <input type="number" id="loan-amount-input" class="form-control" placeholder="Enter amount in USD" min="1000">
                    </div>
                    <div class="form-group">
                        <label for="loan-term" class="form-label">Loan Term (months)</label>
                        <select id="loan-term" class="form-control">
                            <option value="3">3 Months</option>
                            <option value="6">6 Months</option>
                            <option value="12" selected>12 Months</option>
                            <option value="24">24 Months</option>
                        </select>
                    </div>
                </div>
                
                <div class="loan-summary">
                    <div class="loan-summary-item">
                        <span class="loan-summary-label">Estimated Monthly Payment:</span>
                        <span class="loan-summary-value" id="monthly-payment">$0.00</span>
                    </div>
                    <div class="loan-summary-item">
                        <span class="loan-summary-label">Monthly Interest Rate:</span>
                        <span class="loan-summary-value">9.99%</span>
                    </div>
                    <div class="loan-summary-item">
                        <span class="loan-summary-label">Total Repayment:</span>
                        <span class="loan-summary-value highlight" id="total-repayment">$0.00</span>
                    </div>
                </div>
                
                <button class="btn btn-primary" style="width: 100%;" onclick="checkLoanEligibility()">Check Eligibility</button>
                
                <div style="margin-top: 25px; padding: 15px; background-color: rgba(0, 0, 0, 0.3); border-radius: var(--border-radius);">
                    <h4 style="margin-bottom: 12px; font-size: 1.1rem;">How Our Loans Work</h4>
                    <p style="color: rgba(255, 255, 255, 0.8); font-size: 0.9rem; line-height: 1.6;">
                        Your loan eligibility is algorithmically assessed based on your historical account activity with BitHash. We evaluate factors such as deposit behavior, cloud mining consistency, and overall platform engagement to calculate creditworthiness. The minimum loan amount is $1,000, with a fixed monthly interest rate of 9.99%.
                    </p>
                    <p style="color: rgba(255, 255, 255, 0.8); font-size: 0.9rem; line-height: 1.6; margin-top: 10px;">
                        <strong>Note:</strong> Loan approval is subject to verification of your transaction history and requires at least 3 months of consistent activity with BitHash.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- BTC News Section -->
    <section class="btc-news-section" id="news">
        <div class="container">
            <div class="section-title" data-aos="fade-up">
                <h2>Latest Bitcoin News</h2>
                <p>Stay updated with the latest developments in Bitcoin and cryptocurrency mining</p>
            </div>
            
            <div class="news-grid" id="news-container">
                <!-- News cards will be dynamically loaded here -->
                <div class="news-loading">
                    <div class="loading-spinner"></div>
                    <p>Loading latest Bitcoin news...</p>
                </div>
            </div>
            
            <div class="news-navigation">
                <button class="btn btn-outline" id="prev-news" disabled>Previous</button>
                <span id="news-page-info">Page 1</span>
                <button class="btn btn-outline" id="next-news">Next</button>
            </div>
        </div>
    </section>

    <!-- News Modal -->
    <div class="news-modal" id="news-modal">
        <div class="news-modal-content">
            <button class="news-modal-close" id="news-modal-close">&times;</button>
            <div class="news-modal-header">
                <img id="news-modal-image" src="" alt="News Image">
                <div class="news-modal-header-text">
                    <h3 id="news-modal-title"></h3>
                    <div class="news-modal-meta">
                        <span id="news-modal-source"></span>
                        <span id="news-modal-date"></span>
                    </div>
                </div>
            </div>
            <div class="news-modal-body">
                <p id="news-modal-description"></p>
                <a href="#" target="_blank" id="news-modal-link" class="btn btn-primary">Read Full Article</a>
            </div>
        </div>
    </div>
    
    <!-- CTA Section -->
    <section class="cta-section">
        <div class="container">
            <div class="cta-container" data-aos="fade-up">
                <h2>Ready to Start Cloud Mining Bitcoin?</h2>
                <p>Start with a minimum investment of $200 and begin earning from mining today.</p>
                <button class="btn btn-gold" onclick="window.location.href='signup.html'">Start Cloud Mining Now</button>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer id="contact">
        <div class="container">
            <div class="footer-container">
                <div class="footer-about">
                    <div class="footer-logo">
                        <img src="https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1" alt="BitHash Logo" class="loading-logo">    
                        <span class="footer-logo-text"><span class="bitcoin-animation"></span>itHash</span>
                    </div>
                    <p>Bitcoin cloud mining platform serving investors worldwide with transparent operations and reliable returns.</p>
                    <div class="footer-social">
                        <!-- Social Share Buttons -->
                        <a href="https://twitter.com/intent/tweet?url=https://bithhash.vercel.app/&text=Check%20out%20this%20Bitcoin%20cloud%20mining%20platform!" 
                           class="social-icon twitter" aria-label="Twitter" target="_blank" rel="noopener">
                           <i class="fab fa-twitter"></i>
                        </a>
                        <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://bithhash.vercel.app/" 
                           class="social-icon linkedin" aria-label="LinkedIn" target="_blank" rel="noopener">
                           <i class="fab fa-linkedin-in"></i>
                        </a>
                        <a href="https://www.facebook.com/sharer/sharer.php?u=https://bithhash.vercel.app/" 
                           class="social-icon facebook" aria-label="Facebook" target="_blank" rel="noopener">
                           <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="https://www.instagram.com" 
                           class="social-icon instagram" aria-label="Instagram" target="_blank" rel="noopener" 
                           onclick="alert('Instagram does not support direct sharing via links. Please share manually.'); return false;">
                           <i class="fab fa-instagram"></i>
                        </a>
                    </div>
                </div>
                
                <div class="footer-links">
                    <h3 class="footer-title">Platform</h3>
                    <ul>
                        <li><a href="#home">Dashboard</a></li>
                        <li><a href="#plans">Cloud Mining Plans</a></li>
                        <li><a href="#loans">Loans</a></li>
                        <li><a href="dashboard.html">My Account</a></li>
                        <li><a href="rewards.html">Rewards</a></li>
                    </ul>
                </div>
                
                <div class="footer-links">
                    <h3 class="footer-title">Company</h3>
                    <ul>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="careers.html">Careers</a></li>
                        <li><a href="press.html">Press</a></li>
                        <li><a href="blog.html">Blog</a></li>
                        <li><a href="partners.html">Partners</a></li>
                    </ul>
                </div>
                
                <div class="footer-contact">
                    <h3 class="footer-title">Contact Us</h3>
                    <p><i class="fas fa-envelope"></i> support@bithash.com</p>
                    <p><i class="fas fa-phone"></i> +1 606-363-2032</p>
                    <p><i class="fas fa-map-marker-alt"></i> 800 Plant St, Wilmington, DE 19801, United States</p>
                    <p><i class="fas fa-clock"></i> 24/7 Support</p>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; <span id="current-year"></span> BitHash LLC. All Rights Reserved. Registered in Delaware, USA. FINRA/SIPC Member.</p>
            </div>
        </div>
    </footer>

    <!-- AOS Animation -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Smartsupp Live Chat script -->
    <script type="text/javascript">
        var _smartsupp = _smartsupp || {};
        _smartsupp.key = '164ffa4b3acec94eb79a39bad2033ab6eb10f487';
        window.smartsupp||(function(d) {
            var s,c,o=smartsupp=function(){ o._.push(arguments)};o._=[];
            s=d.getElementsByTagName('script')[0];c=d.createElement('script');
            c.type='text/javascript';c.charset='utf-8';c.async=true;
            c.src='https://www.smartsuppchat.com/loader.js?';s.parentNode.insertBefore(c,s);
        })(document);
    </script>
    <noscript> Powered by <a href=https://www.smartsupp.com target=_blank>Smartsupp</a></noscript>

<script>
    // Initialize AOS animation
    AOS.init({
        duration: 800,
        once: true,
        easing: 'ease-in-out'
    });
    
    // Global variable to track if modal event listeners are already set up
    let investmentModalInitialized = false;
    
    // Hide loading overlay when page is loaded
    window.addEventListener('load', function() {
        setTimeout(function() {
            document.getElementById('loading-overlay').classList.add('hidden');
        }, 1000);
        
        // Load all dynamic data from backend
        loadStatsData();
        loadPlansData();
        checkAuthState();
        
        // Initialize language selector
        initializeLanguageSelector();
        
        // Initialize video autoplay
        const video = document.querySelector('video');
        if (video) {
            video.setAttribute('autoplay', '');
            video.setAttribute('loop', '');
            video.setAttribute('muted', '');
            video.setAttribute('playsinline', '');
            
            // Prevent right-click menu on video
            video.addEventListener('contextmenu', function(e) {
                e.preventDefault();
            });
            
            // Ensure video plays even if autoplay is blocked
            const playVideo = () => {
                video.play().catch(error => {
                    console.log('Video autoplay prevented:', error);
                });
            };
            
            // Try to play when page loads
            playVideo();
            
            // Try to play when user interacts with page
            document.addEventListener('click', playVideo, { once: true });
            document.addEventListener('scroll', playVideo, { once: true });
        }
    });
    
    // Set current year in footer
    document.getElementById('current-year').textContent = new Date().getFullYear();
    




    // Language Selector Functionality
    function initializeLanguageSelector() {
        const languageBtn = document.getElementById('language-dropdown-btn');
        const languageDropdown = document.getElementById('language-dropdown');
        const languageSearch = document.getElementById('language-search');
        const languageList = document.getElementById('language-list');
        const languagePrev = document.getElementById('language-prev');
        const languageNext = document.getElementById('language-next');
        const languagePageInfo = document.getElementById('language-page-info');
        
        let currentPage = 1;
        const languagesPerPage = 10;
        let allLanguages = [];
        let filteredLanguages = [];
        
        // Toggle dropdown
        languageBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            languageDropdown.classList.toggle('active');
            languageBtn.classList.toggle('active');
            
            if (languageDropdown.classList.contains('active')) {
                loadLanguages();
            }
        });
        
        // Close dropdown when clicking outside
        document.addEventListener('click', function() {
            languageDropdown.classList.remove('active');
            languageBtn.classList.remove('active');
        });
        
        // Prevent dropdown from closing when clicking inside
        languageDropdown.addEventListener('click', function(e) {
            e.stopPropagation();
        });
        
        // Search functionality
        languageSearch.addEventListener('input', function() {
            const searchTerm = this.value.toLowerCase();
            filteredLanguages = allLanguages.filter(lang => 
                lang.name.toLowerCase().includes(searchTerm) || 
                lang.nativeName.toLowerCase().includes(searchTerm) ||
                lang.code.toLowerCase().includes(searchTerm)
            );
            currentPage = 1;
            renderLanguages();
        });
        
        // Pagination
        languagePrev.addEventListener('click', function() {
            if (currentPage > 1) {
                currentPage--;
                renderLanguages();
            }
        });
        
        languageNext.addEventListener('click', function() {
            const totalPages = Math.ceil(filteredLanguages.length / languagesPerPage);
            if (currentPage < totalPages) {
                currentPage++;
                renderLanguages();
            }
        });
        
        // Load languages from backend
        async function loadLanguages() {
            try {
                const response = await fetch('https://bithashcapital.onrender.com/api/languages');
                if (response.ok) {
                    const data = await response.json();
                    allLanguages = data.languages || [];
                    filteredLanguages = [...allLanguages];
                    renderLanguages();
                } else {
                    throw new Error('Failed to load languages');
                }
            } catch (error) {
                console.error('Error loading languages:', error);
                // Fallback to default languages
                allLanguages = getDefaultLanguages();
                filteredLanguages = [...allLanguages];
                renderLanguages();
            }
        }
        
        // Render languages in the dropdown
        function renderLanguages() {
            const startIndex = (currentPage - 1) * languagesPerPage;
            const endIndex = startIndex + languagesPerPage;
            const languagesToShow = filteredLanguages.slice(startIndex, endIndex);
            
            languageList.innerHTML = languagesToShow.map(lang => `
                <div class="language-option ${lang.code === getCurrentLanguage() ? 'active' : ''}" 
                     data-code="${lang.code}">
                    <img src="${lang.flag}" alt="${lang.name}" class="language-flag" onerror="this.style.display='none'">
                    <span class="language-name">${lang.name}</span>
                    <span class="language-code">${lang.nativeName}</span>
                </div>
            `).join('');
            
            // Add click event listeners
            document.querySelectorAll('.language-option').forEach(option => {
                option.addEventListener('click', function() {
                    const languageCode = this.getAttribute('data-code');
                    changeLanguage(languageCode);
                });
            });
            
            // Update pagination
            const totalPages = Math.ceil(filteredLanguages.length / languagesPerPage);
            languagePageInfo.textContent = `Page ${currentPage} of ${totalPages}`;
            languagePrev.disabled = currentPage === 1;
            languageNext.disabled = currentPage === totalPages;
        }
        
        // Get current language from localStorage or browser
        function getCurrentLanguage() {
            return localStorage.getItem('preferred-language') || 
                   navigator.language.split('-')[0] || 'en';
        }
        
        // Change language
        async function changeLanguage(languageCode) {
            try {
                // Save preference to backend if user is logged in
                const token = localStorage.getItem('jwtToken');
                if (token) {
                    await fetch('https://bithashcapital.onrender.com/api/users/language', {
                        method: 'PUT',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${token}`
                        },
                        body: JSON.stringify({ language: languageCode })
                    });
                }
                
                // Save to localStorage
                localStorage.setItem('preferred-language', languageCode);
                
                // Update UI
                const selectedLanguage = allLanguages.find(lang => lang.code === languageCode);
                if (selectedLanguage) {
                    document.getElementById('current-language').textContent = selectedLanguage.name;
                }
                
                // Close dropdown
                languageDropdown.classList.remove('active');
                languageBtn.classList.remove('active');
                
                // Show success message
                showNotification('success', 'Language Updated', `Language changed to ${selectedLanguage?.name || languageCode}`);
                
                // Reload translations
                loadTranslations(languageCode);
                
            } catch (error) {
                console.error('Error changing language:', error);
                showNotification('error', 'Language Error', 'Failed to change language');
            }
        }
        
        // Load translations for the selected language
        async function loadTranslations(languageCode) {
            try {
                const response = await fetch(`https://bithashcapital.onrender.com/api/translations/${languageCode}`);
                if (response.ok) {
                    const translations = await response.json();
                    applyTranslations(translations);
                }
            } catch (error) {
                console.error('Error loading translations:', error);
            }
        }
        
        // Apply translations to the page
        function applyTranslations(translations) {
            // This would update all translatable elements on the page
            // For now, we'll just update a few key elements as an example
            const elementsToTranslate = {
                'hero-title': translations.heroTitle || 'Bitcoin Cloud Mining Powered by Efficiency and Scale',
                'hero-description': translations.heroDescription || 'Join BitHash and access SHA-256 ASIC miners operating across energy-efficient data centers through cloud mining.',
                'investment-plans-title': translations.investmentPlansTitle || 'Bitcoin Cloud Mining Plans'
            };
            
            // Update elements with data-translate attribute
            document.querySelectorAll('[data-translate]').forEach(element => {
                const key = element.getAttribute('data-translate');
                if (translations[key]) {
                    element.textContent = translations[key];
                }
            });
        }
        
        // Initialize with current language
        const currentLang = getCurrentLanguage();
        const currentLangData = getDefaultLanguages().find(lang => lang.code === currentLang);
        if (currentLangData) {
            document.getElementById('current-language').textContent = currentLangData.name;
        }
    }
    
    // Default languages fallback
    function getDefaultLanguages() {
        return [
            { code: 'en', name: 'English', nativeName: 'English', flag: 'https://flagcdn.com/w40/gb.png' },
            { code: 'fi', name: 'Finnish', nativeName: 'Suomi', flag: 'https://flagcdn.com/w40/fi.png' },
            { code: 'sv', name: 'Swedish', nativeName: 'Svenska', flag: 'https://flagcdn.com/w40/se.png' },
            { code: 'no', name: 'Norwegian', nativeName: 'Norsk', flag: 'https://flagcdn.com/w40/no.png' },
            { code: 'da', name: 'Danish', nativeName: 'Dansk', flag: 'https://flagcdn.com/w40/dk.png' },
            { code: 'de', name: 'German', nativeName: 'Deutsch', flag: 'https://flagcdn.com/w40/de.png' },
            { code: 'fr', name: 'French', nativeName: 'Franais', flag: 'https://flagcdn.com/w40/fr.png' },
            { code: 'es', name: 'Spanish', nativeName: 'Espaol', flag: 'https://flagcdn.com/w40/es.png' },
            { code: 'it', name: 'Italian', nativeName: 'Italiano', flag: 'https://flagcdn.com/w40/it.png' },
            { code: 'pt', name: 'Portuguese', nativeName: 'Portugus', flag: 'https://flagcdn.com/w40/pt.png' },
            { code: 'nl', name: 'Dutch', nativeName: 'Nederlands', flag: 'https://flagcdn.com/w40/nl.png' },
            { code: 'ru', name: 'Russian', nativeName: '', flag: 'https://flagcdn.com/w40/ru.png' },
            { code: 'zh', name: 'Chinese', nativeName: '', flag: 'https://flagcdn.com/w40/cn.png' },
            { code: 'ja', name: 'Japanese', nativeName: '', flag: 'https://flagcdn.com/w40/jp.png' },
            { code: 'ko', name: 'Korean', nativeName: '', flag: 'https://flagcdn.com/w40/kr.png' },
            { code: 'ar', name: 'Arabic', nativeName: '', flag: 'https://flagcdn.com/w40/sa.png' },
            { code: 'hi', name: 'Hindi', nativeName: '', flag: 'https://flagcdn.com/w40/in.png' },
            { code: 'tr', name: 'Turkish', nativeName: 'Trke', flag: 'https://flagcdn.com/w40/tr.png' },
            { code: 'pl', name: 'Polish', nativeName: 'Polski', flag: 'https://flagcdn.com/w40/pl.png' },
            { code: 'uk', name: 'Ukrainian', nativeName: '', flag: 'https://flagcdn.com/w40/ua.png' },
            { code: 'cs', name: 'Czech', nativeName: 'etina', flag: 'https://flagcdn.com/w40/cz.png' },
            { code: 'el', name: 'Greek', nativeName: '', flag: 'https://flagcdn.com/w40/gr.png' },
            { code: 'he', name: 'Hebrew', nativeName: '', flag: 'https://flagcdn.com/w40/il.png' },
            { code: 'th', name: 'Thai', nativeName: '', flag: 'https://flagcdn.com/w40/th.png' },
            { code: 'vi', name: 'Vietnamese', nativeName: 'Ting Vit', flag: 'https://flagcdn.com/w40/vn.png' },
            { code: 'id', name: 'Indonesian', nativeName: 'Bahasa Indonesia', flag: 'https://flagcdn.com/w40/id.png' },
            { code: 'ms', name: 'Malay', nativeName: 'Bahasa Melayu', flag: 'https://flagcdn.com/w40/my.png' },
            { code: 'fil', name: 'Filipino', nativeName: 'Filipino', flag: 'https://flagcdn.com/w40/ph.png' },
            { code: 'ro', name: 'Romanian', nativeName: 'Romn', flag: 'https://flagcdn.com/w40/ro.png' },
            { code: 'hu', name: 'Hungarian', nativeName: 'Magyar', flag: 'https://flagcdn.com/w40/hu.png' },
            { code: 'bg', name: 'Bulgarian', nativeName: '', flag: 'https://flagcdn.com/w40/bg.png' },
            { code: 'hr', name: 'Croatian', nativeName: 'Hrvatski', flag: 'https://flagcdn.com/w40/hr.png' },
            { code: 'sr', name: 'Serbian', nativeName: '', flag: 'https://flagcdn.com/w40/rs.png' },
            { code: 'sk', name: 'Slovak', nativeName: 'Slovenina', flag: 'https://flagcdn.com/w40/sk.png' },
            { code: 'sl', name: 'Slovenian', nativeName: 'Slovenina', flag: 'https://flagcdn.com/w40/si.png' },
            { code: 'et', name: 'Estonian', nativeName: 'Eesti', flag: 'https://flagcdn.com/w40/ee.png' },
            { code: 'lv', name: 'Latvian', nativeName: 'Latvieu', flag: 'https://flagcdn.com/w40/lv.png' },
            { code: 'lt', name: 'Lithuanian', nativeName: 'Lietuvi', flag: 'https://flagcdn.com/w40/lt.png' },
            { code: 'mt', name: 'Maltese', nativeName: 'Malti', flag: 'https://flagcdn.com/w40/mt.png' },
            { code: 'ga', name: 'Irish', nativeName: 'Gaeilge', flag: 'https://flagcdn.com/w40/ie.png' },
            { code: 'is', name: 'Icelandic', nativeName: 'slenska', flag: 'https://flagcdn.com/w40/is.png' },
            { code: 'sq', name: 'Albanian', nativeName: 'Shqip', flag: 'https://flagcdn.com/w40/al.png' },
            { code: 'mk', name: 'Macedonian', nativeName: '', flag: 'https://flagcdn.com/w40/mk.png' },
            { code: 'bs', name: 'Bosnian', nativeName: 'Bosanski', flag: 'https://flagcdn.com/w40/ba.png' },
            { code: 'ca', name: 'Catalan', nativeName: 'Catal', flag: 'https://flagcdn.com/w40/ad.png' },
            { code: 'eu', name: 'Basque', nativeName: 'Euskara', flag: 'https://flagcdn.com/w40/es-pv.png' },
            { code: 'gl', name: 'Galician', nativeName: 'Galego', flag: 'https://flagcdn.com/w40/es-ga.png' },
            { code: 'af', name: 'Afrikaans', nativeName: 'Afrikaans', flag: 'https://flagcdn.com/w40/za.png' },
            { code: 'sw', name: 'Swahili', nativeName: 'Kiswahili', flag: 'https://flagcdn.com/w40/ke.png' },
            { code: 'zu', name: 'Zulu', nativeName: 'isiZulu', flag: 'https://flagcdn.com/w40/za.png' }
        ];
    }





    
    // Mobile menu toggle functionality
    const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
    const mobileMenuDropdown = document.getElementById('mobile-menu-dropdown');
    
    mobileMenuToggle.addEventListener('click', function() {
        mobileMenuDropdown.classList.toggle('active');
        this.innerHTML = mobileMenuDropdown.classList.contains('active') ? 
            '<i class="fas fa-times"></i>' : '<i class="fas fa-bars"></i>';
        this.setAttribute('aria-expanded', mobileMenuDropdown.classList.contains('active'));
    });
    
    // PC menu toggle functionality
    const pcMenuToggle = document.getElementById('pc-menu-toggle');
    const pcMenuDropdown = document.getElementById('pc-menu-dropdown');
    
    pcMenuToggle.addEventListener('click', function() {
        pcMenuDropdown.classList.toggle('active');
        this.setAttribute('aria-expanded', pcMenuDropdown.classList.contains('active'));
    });
    
    // Close menus when clicking outside
    document.addEventListener('click', function(event) {
        if (!mobileMenuToggle.contains(event.target)) {
            mobileMenuDropdown.classList.remove('active');
            mobileMenuToggle.innerHTML = '<i class="fas fa-bars"></i>';
            mobileMenuToggle.setAttribute('aria-expanded', 'false');
        }
        
        if (!pcMenuToggle.contains(event.target)) {
            pcMenuDropdown.classList.remove('active');
            pcMenuToggle.setAttribute('aria-expanded', 'false');
        }
    });







    
    /* ============================================= */
    /* Enhanced Announcement System */
    /* ============================================= */
    
    // Start polling for announcements
    function startAnnouncementsPolling() {
        // Poll every 30 seconds for new announcements
        setInterval(async () => {
            await checkAnnouncements();
        }, 30000);
        
        // Initial check
        checkAnnouncements();
    }
    
    // Check for new announcements
    async function checkAnnouncements() {
        try {
            const response = await apiCall('https://bithashcapital.onrender.com/api/announcements');
            const announcements = response.data || [];
            
            // Filter out already shown announcements and dismissed ones
            const newAnnouncements = announcements.filter(announcement => 
                !AppState.activeAnnouncements.has(announcement.id) && 
                !isAnnouncementDismissed(announcement.id)
            );
            
            // Show new announcements (only one at a time)
            if (newAnnouncements.length > 0) {
                // Clear existing announcements first
                clearAllAnnouncements();
                
                // Show only the first new announcement
                const announcement = newAnnouncements[0];
                showAnnouncement(announcement);
                AppState.activeAnnouncements.set(announcement.id, announcement);
                
                // Store in localStorage for persistence
                localStorage.setItem('activeAnnouncement', JSON.stringify(announcement));
            }
            
            // Remove announcements that are no longer active
            const activeIds = announcements.map(a => a.id);
            for (const [id, announcement] of AppState.activeAnnouncements.entries()) {
                if (!activeIds.includes(id)) {
                    removeAnnouncement(id);
                }
            }
            
        } catch (error) {
            console.error('Error checking announcements:', error);
            // Try to load from localStorage if API fails
            const storedAnnouncement = localStorage.getItem('activeAnnouncement');
            if (storedAnnouncement && !document.querySelector('.announcement.show')) {
                try {
                    const announcement = JSON.parse(storedAnnouncement);
                    // Check if this announcement was dismissed by user
                    if (!isAnnouncementDismissed(announcement.id)) {
                        showAnnouncement(announcement);
                        AppState.activeAnnouncements.set(announcement.id, announcement);
                    }
                } catch (e) {
                    console.error('Error loading stored announcement:', e);
                }
            }
        }
    }
    
    // Check if announcement was dismissed by user
    function isAnnouncementDismissed(announcementId) {
        const dismissedAnnouncements = JSON.parse(localStorage.getItem('dismissedAnnouncements') || '[]');
        return dismissedAnnouncements.includes(announcementId);
    }
    
    // Mark announcement as dismissed
    function dismissAnnouncement(announcementId) {
        const dismissedAnnouncements = JSON.parse(localStorage.getItem('dismissedAnnouncements') || '[]');
        if (!dismissedAnnouncements.includes(announcementId)) {
            dismissedAnnouncements.push(announcementId);
            localStorage.setItem('dismissedAnnouncements', JSON.stringify(dismissedAnnouncements));
        }
    }
    
    // Show announcement notification
    function showAnnouncement(announcement) {
        const announcementCenter = document.getElementById('announcement-center');
        if (!announcementCenter) return;
        
        // Create announcement element
        const announcementEl = document.createElement('div');
        announcementEl.className = 'announcement';
        announcementEl.id = `announcement-${announcement.id}`;
        
        // Determine announcement type and icon
        let type = 'info';
        let icon = 'fa-bullhorn';
        
        if (announcement.type === 'error' || announcement.priority === 'high') {
            type = 'error';
            icon = 'fa-exclamation-circle';
        } else if (announcement.type === 'warning') {
            type = 'warning';
            icon = 'fa-exclamation-triangle';
        }
        
        announcementEl.classList.add(type);
        
        // Format date
        const announcementDate = announcement.createdAt ? formatDate(announcement.createdAt) : '';
        
        announcementEl.innerHTML = `
            <i class="fas ${icon}"></i>
            <div class="announcement-content">
                <div class="announcement-title">${announcement.title || 'Announcement'}</div>
                <div class="announcement-message">${announcement.message || ''}</div>
                <div class="announcement-meta">
                    <span class="announcement-sender">${announcement.sender || 'BitHash Support'}</span>
                    <span class="announcement-date">${announcementDate}</span>
                </div>
            </div>
            <button class="announcement-close" title="Dismiss this announcement">
                <i class="fas fa-times"></i>
            </button>
        `;
        
        // Add to announcement center
        announcementCenter.appendChild(announcementEl);
        
        // Add event listener to close button
        const closeButton = announcementEl.querySelector('.announcement-close');
        closeButton.addEventListener('click', function() {
            dismissAnnouncement(announcement.id);
            removeAnnouncement(announcement.id);
        });
        
        // Force reflow to enable animation
        void announcementEl.offsetWidth;
        
        // Show announcement with animation
        announcementEl.classList.add('show');
        
        // Add vibration for mobile devices on error announcements
        if ('vibrate' in navigator && type === 'error') {
            navigator.vibrate([200, 100, 200]);
        }
    }
    
    // Clear all announcements
    function clearAllAnnouncements() {
        const announcementCenter = document.getElementById('announcement-center');
        if (!announcementCenter) return;
        
        const announcements = announcementCenter.querySelectorAll('.announcement');
        announcements.forEach(announcement => {
            announcement.classList.remove('show');
            setTimeout(() => {
                if (announcement.parentNode) {
                    announcement.parentNode.removeChild(announcement);
                }
            }, 400);
        });
    }
    
    // Remove announcement
    function removeAnnouncement(announcementId) {
        const announcementEl = document.getElementById(`announcement-${announcementId}`);
        if (!announcementEl) return;
        
        announcementEl.classList.remove('show');
        
        // Remove after animation completes
        setTimeout(() => {
            if (announcementEl.parentNode) {
                announcementEl.parentNode.removeChild(announcementEl);
            }
            AppState.activeAnnouncements.delete(announcementId);
            
            // Also remove from localStorage
            const storedAnnouncement = localStorage.getItem('activeAnnouncement');
            if (storedAnnouncement) {
                const parsedAnnouncement = JSON.parse(storedAnnouncement);
                if (parsedAnnouncement.id === announcementId) {
                    localStorage.removeItem('activeAnnouncement');
                }
            }
        }, 400);
    }

    



    
    /* ============================================= */
    /* Critical Error Notification System */
    /* ============================================= */
    
    // Notification queue to manage multiple notifications
    const notificationQueue = [];
    let isNotificationShowing = false;
    
    /**
     * Show a notification in the top right corner
     * @param {string} type - 'error' or 'success'
     * @param {string} title - Notification title
     * @param {string} message - Notification message
     * @param {number} duration - Time in ms to show the notification (0 for persistent)
     */
    function showNotification(type, title, message, duration = 5000) {
        // Add to queue
        notificationQueue.push({ type, title, message, duration });
        
        // Process queue if not already showing a notification
        if (!isNotificationShowing) {
            processNotificationQueue();
        }
    }
    
    function processNotificationQueue() {
        if (notificationQueue.length === 0) {
            isNotificationShowing = false;
            return;
        }
        
        isNotificationShowing = true;
        const { type, title, message, duration } = notificationQueue.shift();
        
        // Create notification element
        const notification = document.createElement('div');
        notification.className = `notification ${type}`;
        
        const icon = type === 'error' ? 'fa-exclamation-circle' : 
                    type === 'warning' ? 'fa-exclamation-triangle' : 'fa-check-circle';
        
        notification.innerHTML = `
            <i class="fas ${icon}"></i>
            <div class="notification-content">
                <div class="notification-title">${title}</div>
                <div class="notification-message">${message}</div>
            </div>
            <div class="notification-close">&times;</div>
        `;
        
        // Add to notification center
        const notificationCenter = document.getElementById('notification-center');
        notificationCenter.appendChild(notification);
        
        // Force reflow to enable animation
        void notification.offsetWidth;
        
        // Show notification
        notification.classList.add('show');
        
        // Add vibration for mobile devices on error
        if (type === 'error' && 'vibrate' in navigator) {
            navigator.vibrate([200, 100, 200]);
        }
        
        // Close button functionality
        notification.querySelector('.notification-close').addEventListener('click', () => {
            closeNotification(notification);
        });
        
        // Auto-hide after duration if not persistent
        if (duration > 0) {
            setTimeout(() => {
                if (notification.parentNode) {
                    closeNotification(notification);
                }
            }, duration);
        }
    }
    
    function closeNotification(notification) {
        notification.classList.remove('show');
        
        // Remove after animation completes
        setTimeout(() => {
            if (notification.parentNode) {
                notification.parentNode.removeChild(notification);
                }
            
            // Process next notification in queue
            processNotificationQueue();
        }, 400);
    }

    // Fetch Bitcoin price from CoinGecko API
    async function fetchBitcoinPrice() {
        try {
            const response = await fetch('https://api.coingecko.com/api/v3/coins/bitcoin?localization=false&tickers=false&market_data=true&community_data=false&developer_data=false&sparkline=false');
            
            if (!response.ok) {
                throw new Error('Failed to fetch Bitcoin price');
            }
            
            const data = await response.json();
            return data.market_data;
        } catch (error) {
            console.error('Error fetching Bitcoin price:', error);
            // Fallback to CoinGecko's simple price API if detailed fails
            return fetchSimpleBitcoinPrice();
        }
    }

    // Fallback API call if main API fails
    async function fetchSimpleBitcoinPrice() {
        try {
            const response = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd&include_24hr_change=true');
            
            if (!response.ok) {
                throw new Error('Failed to fetch simple Bitcoin price');
            }
            
            const data = await response.json();
            return {
                current_price: { usd: data.bitcoin.usd },
                price_change_percentage_24h: data.bitcoin.usd_24h_change,
                high_24h: { usd: data.bitcoin.usd * 1.05 }, // Approximate since simple API doesn't provide
                low_24h: { usd: data.bitcoin.usd * 0.95 }, // Approximate since simple API doesn't provide
                total_volume: { btc: 0 } // Not available in simple API
            };
        } catch (error) {
            console.error('Error fetching simple Bitcoin price:', error);
            return null;
        }
    }

    // Update Bitcoin price display
    function updateBitcoinPriceDisplay(marketData) {
        if (!marketData) {
            showNotification('error', 'Price Error', 'Failed to load Bitcoin price data');
            return;
        }

        const currentPrice = marketData.current_price.usd;
        const priceChange = marketData.price_change_percentage_24h;
        const high24h = marketData.high_24h.usd;
        const low24h = marketData.low_24h.usd;
        const volume24h = marketData.total_volume.btc;

        // Format numbers
        const formatCurrency = num => '$' + num.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
        const formatPercentage = num => num.toFixed(2) + '%';
        const formatVolume = num => num.toLocaleString('en-US', { maximumFractionDigits: 2 }) + ' BTC';

        // Update DOM elements
        document.getElementById('btc-price').textContent = formatCurrency(currentPrice);
        
        const changeElement = document.getElementById('btc-change');
        changeElement.textContent = formatPercentage(priceChange);
        changeElement.className = priceChange >= 0 ? 'btc-change positive' : 'btc-change negative';
        
        document.getElementById('btc-high').textContent = formatCurrency(high24h);
        document.getElementById('btc-low').textContent = formatCurrency(low24h);
        document.getElementById('btc-volume').textContent = formatVolume(volume24h);
    }

    // Initialize Bitcoin price updates
    async function initBitcoinPriceUpdates() {
        // First load
        const marketData = await fetchBitcoinPrice();
        updateBitcoinPriceDisplay(marketData);
        
        // Update every 60 seconds
        setInterval(async () => {
            const marketData = await fetchBitcoinPrice();
            updateBitcoinPriceDisplay(marketData);
        }, 60000);
    }

    // Start Bitcoin price updates when page loads
    document.addEventListener('DOMContentLoaded', initBitcoinPriceUpdates);
    
    // Enhanced stats loading with real-time updates and animations
    async function loadStatsData() {
        try {
            const response = await fetch('https://bithashcapital.onrender.com/api/stats');
            if (response.ok) {
                const data = await response.json();
                
                // Format numbers with commas and animate changes
                animateNumberChange('total-investors', data.totalInvestors, 0);
                animateNumberChange('total-invested', data.totalInvested, 2);
                animateNumberChange('total-withdrawals', data.totalWithdrawals, 2);
                animateNumberChange('total-loans', data.totalLoans, 2);
                
                // Update change indicators
                updateChangeIndicator('investors-change', data.changeRates.investors);
                updateChangeIndicator('invested-change', data.changeRates.invested);
                updateChangeIndicator('withdrawals-change', data.changeRates.withdrawals);
                updateChangeIndicator('loans-change', data.changeRates.loans);
                
                // Schedule next update (every 5 seconds)
                setTimeout(loadStatsData, 5000);
            } else {
                console.error('Failed to load stats data');
                showNotification('error', 'Backend Error', 'Failed to load statistics data. Please try again later.');
                // Retry after 30 seconds if error
                setTimeout(loadStatsData, 30000);
            }
        } catch (error) {
            console.error('Error loading stats data:', error);
            showNotification('error', 'Connection Error', 'Failed to connect to statistics service. Please check your connection.');
            // Retry after 30 seconds if error
            setTimeout(loadStatsData, 30000);
        }
    }

    // Animate number changes
    function animateNumberChange(elementId, targetValue, decimals) {
        const element = document.getElementById(elementId);
        if (!element) return; // FIX: Check if element exists before trying to update it
        
        const currentValue = parseFloat(element.textContent.replace(/,/g, '') || '0');
        const duration = 1000; // Animation duration in ms
        const startTime = performance.now();
        
        const formatNumber = (num) => {
            if (decimals === 0) {
                return num.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ",");
            }
            return num.toFixed(decimals).replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        };

        function updateNumber(currentTime) {
            const elapsed = currentTime - startTime;
            const progress = Math.min(elapsed / duration, 1);
            const value = currentValue + (targetValue - currentValue) * progress;
            
            element.textContent = formatNumber(value);
            
            if (progress < 1) {
                requestAnimationFrame(updateNumber);
            } else {
                element.textContent = formatNumber(targetValue);
            }
        }
        
        requestAnimationFrame(updateNumber);
    }

    // Update change indicators with arrows
    function updateChangeIndicator(elementId, changeRate) {
        const element = document.getElementById(elementId);
        if (!element) return; // FIX: Check if element exists before trying to update it
        
        element.innerHTML = '';
        
        const arrow = document.createElement('span');
        arrow.style.marginLeft = '5px';
        arrow.style.fontSize = '0.8em';
        
        if (changeRate > 0) {
            arrow.innerHTML = `<i class="fas fa-arrow-up" style="color: var(--success);"></i> ${Math.abs(changeRate)}%`;
        } else if (changeRate < 0) {
            arrow.innerHTML = `<i class="fas fa-arrow-down" style="color: var(--error);"></i> ${Math.abs(changeRate)}%`;
        } else {
            arrow.innerHTML = `<i class="fas fa-minus" style="color: var(--gray);"></i> 0%`;
        }
        
        element.appendChild(arrow);
    }

    // BTC News functionality
    let currentNewsPage = 1;
    const newsPerPage = 3;
    let allNewsData = [];

    // DOM elements
    const newsContainer = document.getElementById('news-container');
    const prevNewsBtn = document.getElementById('prev-news');
    const nextNewsBtn = document.getElementById('next-news');
    const newsPageInfo = document.getElementById('news-page-info');
    const newsModal = document.getElementById('news-modal');
    const newsModalClose = document.getElementById('news-modal-close');

    // Fetch BTC news from backend
    async function fetchBTCNews() {
        try {
            newsContainer.innerHTML = `
                <div class="news-loading">
                    <div class="loading-spinner"></div>
                    <p>Loading latest Bitcoin news...</p>
                </div>
            `;
            
            const response = await fetch('https://bithashcapital.onrender.com/api/btc-news');
            if (response.ok) {
                const data = await response.json();
                allNewsData = data.data || [];
                renderNews();
            } else {
                throw new Error('Failed to fetch news');
            }
        } catch (error) {
            console.error('Error fetching BTC news:', error);
            newsContainer.innerHTML = `
                <div class="news-loading">
                    <i class="fas fa-exclamation-triangle" style="font-size: 2rem; color: var(--error); margin-bottom: 15px;"></i>
                    <p>Failed to load news. Please try again later.</p>
                    <button class="btn btn-outline" onclick="fetchBTCNews()" style="margin-top: 15px;">Retry</button>
                </div>
            `;
        }
    }

    // Render news based on current page
    function renderNews() {
        if (allNewsData.length === 0) {
            newsContainer.innerHTML = `
                <div class="news-loading">
                    <i class="fas fa-newspaper" style="font-size: 2rem; color: var(--gray); margin-bottom: 15px;"></i>
                    <p>No news available at the moment.</p>
                </div>
            `;
            return;
        }

        const startIndex = (currentNewsPage - 1) * newsPerPage;
        const endIndex = startIndex + newsPerPage;
        const newsToDisplay = allNewsData.slice(startIndex, endIndex);

        newsContainer.innerHTML = newsToDisplay.map(news => `
            <div class="news-card" data-aos="fade-up" data-id="${news.id}">
                <div class="news-image-container">
                    <img src="${news.image || 'https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1'}" 
                         alt="${news.title}" class="news-image" 
                         onerror="this.src='https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1'">
                </div>
                <div class="news-content">
                    <h3 class="news-title">${news.title}</h3>
                    <div class="news-meta">
                        <span class="news-source">${news.source}</span>
                        <span class="news-date">${formatDate(news.publishedAt)}</span>
                    </div>
                </div>
            </div>
        `).join('');

        // Add click event to news cards
        document.querySelectorAll('.news-card').forEach(card => {
            card.addEventListener('click', () => {
                const newsId = card.getAttribute('data-id');
                const newsItem = allNewsData.find(item => item.id === newsId);
                if (newsItem) {
                    openNewsModal(newsItem);
                }
            });
        });

        // Update pagination controls
        updatePaginationControls();
    }

    // Format date for display
    function formatDate(dateString) {
        const date = new Date(dateString);
        return date.toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'short',
            day: 'numeric'
        });
    }

    // Update pagination controls
    function updatePaginationControls() {
        const totalPages = Math.ceil(allNewsData.length / newsPerPage);
        
        prevNewsBtn.disabled = currentNewsPage <= 1;
        nextNewsBtn.disabled = currentNewsPage >= totalPages;
        
        newsPageInfo.textContent = `Page ${currentNewsPage} of ${totalPages}`;
    }

    // Open news modal
    function openNewsModal(newsItem) {
        document.getElementById('news-modal-title').textContent = newsItem.title;
        document.getElementById('news-modal-description').textContent = newsItem.description || 'No description available.';
        document.getElementById('news-modal-source').textContent = newsItem.source;
        document.getElementById('news-modal-date').textContent = formatDate(newsItem.publishedAt);
        document.getElementById('news-modal-link').href = newsItem.url;
        
        const modalImage = document.getElementById('news-modal-image');
        modalImage.src = newsItem.image || 'https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1';
        modalImage.alt = newsItem.title;
        
        newsModal.classList.add('active');
        document.body.style.overflow = 'hidden';
    }

    // Close news modal
    function closeNewsModal() {
        newsModal.classList.remove('active');
        document.body.style.overflow = '';
    }

    // Event listeners
    prevNewsBtn.addEventListener('click', () => {
        if (currentNewsPage > 1) {
            currentNewsPage--;
            renderNews();
            window.scrollTo({
                top: document.getElementById('news').offsetTop - 100,
                behavior: 'smooth'
            });
        }
    });

    nextNewsBtn.addEventListener('click', () => {
        const totalPages = Math.ceil(allNewsData.length / newsPerPage);
        if (currentNewsPage < totalPages) {
            currentNewsPage++;
            renderNews();
            window.scrollTo({
                top: document.getElementById('news').offsetTop - 100,
                behavior: 'smooth'
            });
        }
    });

    newsModalClose.addEventListener('click', closeNewsModal);
    newsModal.addEventListener('click', (e) => {
        if (e.target === newsModal) {
            closeNewsModal();
        }
    });

    // Initialize news on page load
    document.addEventListener('DOMContentLoaded', fetchBTCNews);
    
    // Check authentication state on page load
    async function checkAuthState() {
        try {
            const token = localStorage.getItem('jwtToken');
            if (!token) {
                document.getElementById('auth-buttons').style.display = 'flex';
                document.getElementById('user-balance-container').style.display = 'none';
                return;
            }
            
            const response = await fetch('https://bithashcapital.onrender.com/api/users/me', {
                headers: {
                    'Authorization': `Bearer ${token}`
                }
            });
            
            if (response.ok) {
                const userData = await response.json();
                document.getElementById('auth-buttons').style.display = 'none';
                fetchAndUpdateBalances(); // Fetch and show both balances
            } else {
                localStorage.removeItem('jwtToken');
                document.getElementById('auth-buttons').style.display = 'flex';
                document.getElementById('user-balance-container').style.display = 'none';
                showNotification('error', 'Session Expired', 'Your session has expired. Please login again.');
            }
        } catch (error) {
            console.error('Authentication check failed:', error);
            showNotification('error', 'Session Error', 'Failed to verify your session. Please login again.');
        }
    }





    

    
// Enhanced Banner Management System with Countdown
class EnhancedBannerManager {
    constructor() {
        this.nonLoggedBanner1 = document.getElementById('nonLoggedBanner1');
        this.nonLoggedBanner2 = document.getElementById('nonLoggedBanner2');
        this.loggedInBanner = document.getElementById('loggedInBanner');
        this.isLoggedIn = this.checkLoginStatus();
        this.currentBanner = null;
        this.secondBannerTimer = null;
        this.countdownIntervals = [];
        
        console.log('Enhanced Banner Manager Initialized - User logged in:', this.isLoggedIn);
        
        this.init();
    }
    
    checkLoginStatus() {
        return localStorage.getItem('jwtToken') !== null || 
               document.cookie.includes('auth_token') ||
               window.location.pathname.includes('dashboard');
    }
    
    init() {
        this.setupCloseButtons();
        this.setupCTAs();
        this.initializeCountdowns();
        this.showAppropriateBanner();
        
        console.log('Enhanced banner system ready with countdown timers');
    }
    
    // Initialize countdown timers for all banners
    initializeCountdowns() {
        // Set promotion end date to next Friday
        const nextFriday = this.getNextFriday();
        
        // Initialize countdown for non-logged banners
        this.startCountdown('countdown1', nextFriday);
        this.startCountdown('countdown2', nextFriday);
        
        // Initialize hourly countdown for logged-in banner
        this.startHourlyCountdown('countdown3');
    }
    
    // Get next Friday date
    getNextFriday() {
        const today = new Date();
        const dayOfWeek = today.getDay(); // 0 = Sunday, 5 = Friday
        const daysUntilFriday = dayOfWeek <= 5 ? 5 - dayOfWeek : 5 + (7 - dayOfWeek);
        
        const nextFriday = new Date(today);
        nextFriday.setDate(today.getDate() + daysUntilFriday);
        nextFriday.setHours(23, 59, 59, 999); // End of day
        
        return nextFriday;
    }
    
    // Start countdown timer
    startCountdown(countdownId, endDate) {
        const countdownElement = document.getElementById(countdownId);
        if (!countdownElement) return;
        
        const updateCountdown = () => {
            const now = new Date().getTime();
            const distance = endDate - now;
            
            if (distance < 0) {
                // Countdown finished
                this.stopCountdown(countdownId);
                countdownElement.innerHTML = '<div class="countdown-expired">Offer Expired</div>';
                return;
            }
            
            // Calculate days, hours, minutes, seconds
            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);
            
            // Update DOM elements
            const daysElement = document.getElementById(countdownId.replace('countdown', 'days'));
            const hoursElement = document.getElementById(countdownId.replace('countdown', 'hours'));
            const minutesElement = document.getElementById(countdownId.replace('countdown', 'minutes'));
            const secondsElement = document.getElementById(countdownId.replace('countdown', 'seconds'));
            
            if (daysElement) daysElement.textContent = this.formatTime(days);
            if (hoursElement) hoursElement.textContent = this.formatTime(hours);
            if (minutesElement) minutesElement.textContent = this.formatTime(minutes);
            if (secondsElement) secondsElement.textContent = this.formatTime(seconds);
            
            // Add pulse animation to seconds
            if (secondsElement) {
                secondsElement.style.animation = 'countdownPulse 1s ease-in-out';
                setTimeout(() => {
                    secondsElement.style.animation = '';
                }, 1000);
            }
        };
        
        // Update immediately and then every second
        updateCountdown();
        const intervalId = setInterval(updateCountdown, 1000);
        this.countdownIntervals.push({ id: countdownId, interval: intervalId });
    }
    
    // Start hourly countdown for logged-in users
    startHourlyCountdown(countdownId) {
        const updateHourlyCountdown = () => {
            const now = new Date();
            const nextHour = new Date(now);
            nextHour.setHours(now.getHours() + 1, 0, 0, 0);
            
            const distance = nextHour - now;
            
            // Calculate hours, minutes, seconds
            const hours = Math.floor(distance / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);
            
            // Update DOM elements
            const hoursElement = document.getElementById(countdownId.replace('countdown', 'hours'));
            const minutesElement = document.getElementById(countdownId.replace('countdown', 'minutes'));
            const secondsElement = document.getElementById(countdownId.replace('countdown', 'seconds'));
            
            if (hoursElement) hoursElement.textContent = this.formatTime(hours);
            if (minutesElement) minutesElement.textContent = this.formatTime(minutes);
            if (secondsElement) secondsElement.textContent = this.formatTime(seconds);
            
            // Add pulse animation to seconds
            if (secondsElement) {
                secondsElement.style.animation = 'countdownPulse 1s ease-in-out';
                setTimeout(() => {
                    secondsElement.style.animation = '';
                }, 1000);
            }
        };
        
        // Update immediately and then every second
        updateHourlyCountdown();
        const intervalId = setInterval(updateHourlyCountdown, 1000);
        this.countdownIntervals.push({ id: countdownId, interval: intervalId });
    }
    
    // Stop a specific countdown
    stopCountdown(countdownId) {
        const countdownIndex = this.countdownIntervals.findIndex(item => item.id === countdownId);
        if (countdownIndex !== -1) {
            clearInterval(this.countdownIntervals[countdownIndex].interval);
            this.countdownIntervals.splice(countdownIndex, 1);
        }
    }
    
    // Stop all countdowns
    stopAllCountdowns() {
        this.countdownIntervals.forEach(item => {
            clearInterval(item.interval);
        });
        this.countdownIntervals = [];
    }
    
    // Format time to always show two digits
    formatTime(time) {
        return time < 10 ? `0${time}` : time;
    }
    
    setupCloseButtons() {
        const closeButtons = document.querySelectorAll('.promo-close');
        closeButtons.forEach(button => {
            button.addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
                const banner = e.target.closest('.promo-banner-overlay');
                this.closeBanner(banner);
            });
        });
        
        document.querySelectorAll('.promo-banner-overlay').forEach(overlay => {
            overlay.addEventListener('click', (e) => {
                if (e.target === overlay) {
                    this.closeBanner(overlay);
                }
            });
        });
        
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && this.currentBanner) {
                this.closeBanner(this.currentBanner);
            }
        });
    }
    
    setupCTAs() {
        document.getElementById('nonLoggedCTA1')?.addEventListener('click', () => {
            this.trackCTAConversion('nonLoggedBanner1');
            window.location.href = 'signup.html';
        });
        
        document.getElementById('nonLoggedCTA2')?.addEventListener('click', () => {
            this.trackCTAConversion('nonLoggedBanner2');
            window.location.href = 'signup.html';
        });
        
        document.getElementById('loggedInCTA')?.addEventListener('click', () => {
            this.trackCTAConversion('loggedInBanner');
            window.location.href = 'dashboard.html#transact';
        });
    }
    
    // Track CTA conversions for analytics
    trackCTAConversion(bannerId) {
        console.log(`CTA conversion tracked for: ${bannerId}`);
        // Here you would typically send this to your analytics service
        // Example: gtag('event', 'banner_conversion', { banner_id: bannerId });
    }
    
    showAppropriateBanner() {
        const delay = Math.floor(Math.random() * 4000) + 3000;
        
        console.log(`Banner will show in ${delay}ms`);
        
        setTimeout(() => {
            if (this.isLoggedIn) {
                console.log('Showing logged in user banner');
                this.showBanner(this.loggedInBanner);
            } else {
                const showFirstBanner = Math.random() > 0.5;
                const banner = showFirstBanner ? this.nonLoggedBanner1 : this.nonLoggedBanner2;
                
                console.log(`Showing non-logged user banner: ${showFirstBanner ? 'Version 1' : 'Version 2'}`);
                this.showBanner(banner);
                
                this.secondBannerTimer = setTimeout(() => {
                    if (!this.isLoggedIn && this.currentBanner) {
                        const nextBanner = this.currentBanner === this.nonLoggedBanner1 ? this.nonLoggedBanner2 : this.nonLoggedBanner1;
                        console.log(`Showing alternative banner: ${nextBanner === this.nonLoggedBanner1 ? 'Version 1' : 'Version 2'}`);
                        this.closeBanner(this.currentBanner);
                        setTimeout(() => {
                            this.showBanner(nextBanner);
                        }, 500);
                    }
                }, 25000);
            }
        }, delay);
    }
    
    showBanner(banner) {
        if (!banner) {
            console.error('No banner element found');
            return;
        }
        
        this.hideAllBanners();
        banner.classList.add('active');
        this.currentBanner = banner;
        
        console.log('Banner displayed successfully');
        
        // Auto-close after 30 seconds
        setTimeout(() => {
            if (this.currentBanner === banner) {
                this.closeBanner(banner);
            }
        }, 30000);
    }
    
    hideAllBanners() {
        document.querySelectorAll('.promo-banner-overlay').forEach(banner => {
            banner.classList.remove('active');
        });
    }
    
    closeBanner(banner) {
        if (!banner) return;
        
        banner.classList.remove('active');
        this.currentBanner = null;
        
        if (this.secondBannerTimer) {
            clearTimeout(this.secondBannerTimer);
        }
        
        console.log('Banner closed');
    }
    
    // Public method to manually show a specific banner
    showSpecificBanner(bannerId) {
        const banner = document.getElementById(bannerId);
        if (banner) {
            this.showBanner(banner);
        }
    }
    
    // Public method to manually close all banners
    closeAllBanners() {
        this.hideAllBanners();
        this.stopAllCountdowns();
        this.currentBanner = null;
        if (this.secondBannerTimer) {
            clearTimeout(this.secondBannerTimer);
        }
    }
}

// Initialize the enhanced banner system
document.addEventListener('DOMContentLoaded', () => {
    console.log('DOM loaded - initializing enhanced banners');
    window.enhancedBannerManager = new EnhancedBannerManager();
});

window.addEventListener('load', () => {
    if (!window.enhancedBannerManager) {
        console.log('Window loaded - initializing enhanced banners as fallback');
        window.enhancedBannerManager = new EnhancedBannerManager();
    }
});




    
    // Load and render cloud mining plans
    async function loadPlansData() {
        try {
            console.log('Loading cloud mining plans data...');
            const token = localStorage.getItem('jwtToken');
            const headers = token ? { 'Authorization': `Bearer ${token}` } : {};
            
            // Fetch cloud mining plans
            const plansResponse = await fetch('https://bithashcapital.onrender.com/api/plans', {
                headers: headers
            });
            
            if (!plansResponse.ok) {
                throw new Error(`Failed to load plans: ${plansResponse.status}`);
            }
            
            const plansData = await plansResponse.json();
            console.log('Cloud mining plans data loaded:', plansData);
            
            let userBalance = null;
            let userMaturedBalance = null;
            
            // Fetch user balances if logged in
            if (token) {
                try {
                    const balanceResponse = await fetch('https://bithashcapital.onrender.com/api/users/balances', {
                        headers: headers
                    });
                    
                    if (balanceResponse.ok) {
                        const balanceData = await balanceResponse.json();
                        console.log('User balances:', balanceData);
                        userBalance = balanceData.data?.balances?.main || 0;
                        userMaturedBalance = balanceData.data?.balances?.matured || 0;
                    }
                } catch (balanceError) {
                    console.warn('Could not fetch user balances:', balanceError);
                }
            }
            
            renderPlans(plansData.data?.plans || [], userBalance, userMaturedBalance);
            
        } catch (error) {
            console.error('Error loading cloud mining plans data:', error);
            showNotification('error', 'Connection Error', 'Failed to load cloud mining plans. Please try again later.');
            
            // Show fallback message in plans container
            const plansContainer = document.getElementById('plans-container');
            if (plansContainer) {
                plansContainer.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: var(--gray);">
                        <i class="fas fa-exclamation-triangle" style="font-size: 3rem; margin-bottom: 20px;"></i>
                        <p>Unable to load cloud mining plans. Please check your connection and try again.</p>
                        <button class="btn btn-primary" onclick="loadPlansData()" style="margin-top: 15px;">
                            <i class="fas fa-redo"></i> Retry
                        </button>
                    </div>
                `;
            }
        }
    }

    // Render cloud mining plans to the DOM
    function renderPlans(plans, userBalance = null, userMaturedBalance = null) {
        const plansContainer = document.getElementById('plans-container');
        if (!plansContainer) {
            console.error('Plans container element not found');
            return;
        }
        
        // Clear existing content
        plansContainer.innerHTML = '';
        
        // Update balance display if user is logged in
        const balanceDisplay = document.getElementById('balance-display');
        if (balanceDisplay) {
            if (userBalance !== null) {
                balanceDisplay.style.display = 'block';
                const currentBalanceElement = document.getElementById('current-balance');
                if (currentBalanceElement) {
                    currentBalanceElement.textContent = `Main: $${userBalance.toFixed(2)} | Matured: $${userMaturedBalance.toFixed(2)}`;
                }
            } else {
                balanceDisplay.style.display = 'none';
            }
        }
        
        // Handle empty plans array
        if (!plans || plans.length === 0) {
            plansContainer.innerHTML = `
                <div style="text-align: center; padding: 40px; color: var(--gray);">
                    <i class="fas fa-inbox" style="font-size: 3rem; margin-bottom: 20px;"></i>
                    <p>No cloud mining plans available at the moment.</p>
                    <p style="font-size: 0.9rem; margin-top: 10px;">Please check back later or contact support.</p>
                </div>
            `;
            return;
        }
        
        // Sort plans by minimum investment amount (ascending)
        const sortedPlans = [...plans].sort((a, b) => a.minAmount - b.minAmount);
        
        // Cloud mining images for different plans
        const cloudMiningImages = [
            'https://www.dropbox.com/scl/fi/9b69f9sll2gj6ozzjb58d/WhatsApp-Image-2025-12-13-at-1.27.06-AM.jpeg?rlkey=ea4rqkom2ubwvwvki83yd3lgr&raw=1',
            'https://www.dropbox.com/scl/fi/nmapzrnkx9kcvk839tzte/WhatsApp-Image-2026-01-12-at-11.43.02-AM.jpeg?rlkey=3tde1g2bnuyjnh4v26frl58rz&raw=1',
            'https://www.dropbox.com/scl/fi/yvbb5aexy5ssxqlowadkl/WhatsApp-Image-l2026-01-12-at-11.43.03-AM.jpeg?rlkey=b4mks0p68perwqum12cg8841m&raw=1',
            'https://www.dropbox.com/scl/fi/ya1o0lgg1l0tuzss619rg/WhatsApp-Imageg-2026-01-12-at-11.43.02-AM.jpeg?rlkey=s0du0qllprsui00c1fnoaemvy&raw=1',
            'https://www.dropbox.com/scl/fi/v43ux1dnqj1usc6eocvsl/WhatsApp-Imagek-2026-01-12-at-11.43.02-AM.jpeg?rlkey=xqh93bl1onk3b2qiajezoxpje&raw=1',
            'https://www.dropbox.com/scl/fi/lz60ouvvbr565du5afcwx/WhatsApp-Image-20l26-01-12-at-11.43.03-AM.jpeg?rlkey=dgnhcskve2p0gq6npr2igjidf&raw=1'
        ];
        
        // Plan color schemes
        const planColorSchemes = [
            { primary: '#003366', secondary: '#004488', accent: '#0066CC' },
            { primary: '#006400', secondary: '#008000', accent: '#00AA00' },
            { primary: '#4B0082', secondary: '#6A0DAD', accent: '#8A2BE2' },
            { primary: '#8B0000', secondary: '#B22222', accent: '#DC143C' },
            { primary: '#DAA520', secondary: '#FFD700', accent: '#FFEC8B' },
            { primary: '#2F4F4F', secondary: '#4682B4', accent: '#5F9EA0' }
        ];
        
        // Render each cloud mining plan card
        sortedPlans.forEach((plan, index) => {
            const animationDelay = (index + 1) * 100;
            const miningImage = cloudMiningImages[index % cloudMiningImages.length];
            const colorScheme = planColorSchemes[index % planColorSchemes.length];
            
            const planCard = document.createElement('div');
            planCard.className = 'plan-card';
            planCard.setAttribute('data-aos', 'fade-up');
            planCard.setAttribute('data-aos-delay', animationDelay);
            
            // Set CSS custom properties for plan styling
            planCard.style.setProperty('--plan-primary', colorScheme.primary);
            planCard.style.setProperty('--plan-secondary', colorScheme.secondary);
            planCard.style.setProperty('--plan-accent', colorScheme.accent);
            planCard.style.setProperty('--plan-primary-rgb', 
                parseInt(colorScheme.primary.slice(1, 3), 16) + ',' +
                parseInt(colorScheme.primary.slice(3, 5), 16) + ',' +
                parseInt(colorScheme.primary.slice(5, 7), 16)
            );
            
            // Determine stake eligibility
            const isLoggedIn = localStorage.getItem('jwtToken') !== null;
            const hasSufficientMainBalance = userBalance !== null && userBalance >= 200; // Minimum investment is 200
            const hasSufficientMaturedBalance = userMaturedBalance !== null && userMaturedBalance >= 200; // Minimum investment is 200
            const canInvest = hasSufficientMainBalance || hasSufficientMaturedBalance;
            
            // Generate button text and state
            let buttonText, buttonIcon, buttonTitle;
            if (!isLoggedIn) {
                buttonText = 'Login to Invest';
                buttonIcon = 'fa-lock';
                buttonTitle = 'Please login to invest in cloud mining';
            } else if (!canInvest) {
                buttonText = 'Insufficient Balance';
                buttonIcon = 'fa-exclamation-circle';
                buttonTitle = `Minimum $200 required in main or matured balance for cloud mining`;
            } else {
                buttonText = 'Start Cloud Mining';
                buttonIcon = 'fa-cloud';
                buttonTitle = `Click to invest in ${plan.name} cloud mining`;
            }
            
            planCard.innerHTML = `
                <div class="plan-header">
                    <div class="plan-icon">
                        <i class="fas fa-cloud"></i>
                    </div>
                    <div>
                        <h3 class="plan-name">${plan.name}</h3>
                        <div class="cloud-mining-badge">
                            <i class="fas fa-cloud"></i>
                            <span>CLOUD MINING</span>
                        </div>
                    </div>
                </div>
                
                <div class="plan-mining-image">
                    <img src="${miningImage}" alt="${plan.name} Cloud Mining" 
                         onerror="this.src='https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1'">
                    <div class="mining-image-overlay">
                        <i class="fas fa-server"></i> Live Mining Operations
                    </div>
                </div>
                
                <div class="cloud-mining-description">
                    <strong>Cloud Mining Investment:</strong> Your investment funds live ASIC miners in our data centers. 
                    Earn returns based on actual Bitcoin mining output.
                </div>
                
                <div class="plan-features">
                    <div class="plan-feature">
                        <i class="fas fa-chart-line"></i>
                        <span><strong>${plan.percentage}% mining return</strong> after ${plan.duration} hours</span>
                    </div>
                    <div class="plan-feature">
                        <i class="fas fa-dollar-sign"></i>
                        <span>Minimum investment: <strong>$${plan.minAmount}</strong></span>
                    </div>
                    <div class="plan-feature">
                        <i class="fas fa-shield-alt"></i>
                        <span>Principal protection guarantee</span>
                    </div>
                    <div class="plan-feature">
                        <i class="fas fa-users"></i>
                        <span>Referral bonus: ${plan.referralBonus}%</span>
                    </div>
                    <div class="plan-feature">
                        <i class="fas fa-percentage"></i>
                        <span>3% company fee upon maturity</span>
                    </div>
                </div>
                
                <div class="plan-limits">
                    <div class="plan-min">
                        <span>Minimum Investment</span>
                        <span>$${plan.minAmount}</span>
                    </div>
                    <div class="plan-max">
                        <span>Maximum Investment</span>
                        <span>$${plan.maxAmount}</span>
                    </div>
                </div>
                
                <button class="btn plan-button" 
                    onclick="handlePlanSelection('${plan.id}', ${plan.minAmount}, ${plan.maxAmount}, ${plan.percentage}, ${plan.duration}, '${plan.name.replace(/'/g, "\\'")}')" 
                    ${!isLoggedIn || !canInvest ? 'disabled' : ''}
                    title="${buttonTitle}">
                    <i class="fas ${buttonIcon}"></i>
                    ${buttonText}
                </button>
            `;
            
            plansContainer.appendChild(planCard);
        });
        
        // Refresh animations for dynamically added elements
        AOS.refresh();
    }

    // Handle plan selection and open cloud mining modal
    async function handlePlanSelection(planId, minAmount, maxAmount, percentage, duration, planName) {
        const token = localStorage.getItem('jwtToken');
        
        if (!token) {
            showNotification('error', 'Authentication Required', 'Please login or create an account to invest in cloud mining.');
            setTimeout(() => {
                window.location.href = 'signup.html';
            }, 2000);
            return;
        }
        
        await openInvestmentModal(planId, minAmount, maxAmount, percentage, duration, planName);
    }

    // Open cloud mining modal with plan details
    async function openInvestmentModal(planId, minAmount, maxAmount, percentage, duration, planName) {
        const modal = document.getElementById('investment-modal');
        if (!modal) {
            console.error('Cloud mining modal not found');
            return;
        }
        
        // Update modal header with plan details
        document.getElementById('modal-plan-name').textContent = `${planName} - Cloud Mining`;
        document.getElementById('modal-plan-return').textContent = `${percentage}%`;
        document.getElementById('modal-plan-duration').textContent = `${duration} hours`;
        document.getElementById('modal-plan-min').textContent = `$${minAmount}`;
        document.getElementById('modal-plan-max').textContent = `$${maxAmount}`;
        
        // Store plan data in modal dataset
        modal.dataset.planId = planId;
        modal.dataset.minAmount = minAmount;
        modal.dataset.maxAmount = maxAmount;
        modal.dataset.percentage = percentage;
        
        // Reset form state
        document.getElementById('investment-amount').value = minAmount;
        document.getElementById('amount-error').textContent = '';
        document.getElementById('expected-return').textContent = '$0.00';
        document.getElementById('investment-status').textContent = '';
        
        // Update balance information in modal
        await updateModalBalances();
        
        // Reset and configure balance selection
        const balanceOptions = document.querySelectorAll('.balance-option');
        balanceOptions.forEach(option => {
            option.classList.remove('selected', 'disabled');
        });
        
        // Auto-select first available balance option
        const firstAvailableOption = document.querySelector('.balance-option:not(.disabled)');
        if (firstAvailableOption) {
            firstAvailableOption.classList.add('selected');
            modal.dataset.balanceSource = firstAvailableOption.dataset.balance;
        } else {
            // No available balances - show warning
            showNotification('warning', 'Insufficient Funds', 
                `You need at least $200 in either main or matured balance to invest in cloud mining.`);
        }
        
        // Calculate initial expected return
        calculateExpectedReturn(minAmount, percentage);
        
        // Setup event listeners only once
        if (!investmentModalInitialized) {
            setupModalEventListeners();
            investmentModalInitialized = true;
        }
        
        // Show modal
        modal.classList.add('active');
        document.body.style.overflow = 'hidden';
    }

    // Update balance information in cloud mining modal
    async function updateModalBalances() {
        try {
            const token = localStorage.getItem('jwtToken');
            if (!token) {
                console.log('No authentication token found');
                return;
            }
            
            console.log('Fetching balances for modal display...');
            
            const response = await fetch('https://bithashcapital.onrender.com/api/users/balances', {
                headers: {
                    'Authorization': `Bearer ${token}`
                }
            });
            
            if (!response.ok) {
                throw new Error(`Balance fetch failed: ${response.status}`);
            }
            
            const balanceData = await response.json();
            console.log('Modal balance data:', balanceData);
            
            const mainBalance = balanceData.data?.balances?.main || 0;
            const maturedBalance = balanceData.data?.balances?.matured || 0;
            
            // Update balance display elements
            const mainBalanceElement = document.getElementById('modal-main-balance-amount');
            const maturedBalanceElement = document.getElementById('modal-matured-balance-amount');
            
            if (mainBalanceElement) {
                mainBalanceElement.textContent = `$${mainBalance.toFixed(2)}`;
            }
            if (maturedBalanceElement) {
                maturedBalanceElement.textContent = `$${maturedBalance.toFixed(2)}`;
            }
            
            // Update balance option availability based on minimum investment
            const balanceOptions = document.querySelectorAll('.balance-option');
            const minAmount = parseFloat(document.getElementById('modal-plan-min').textContent.replace('$', '')) || 0;
            
            balanceOptions.forEach(option => {
                const balanceType = option.dataset.balance;
                const balanceAmount = balanceType === 'main' ? mainBalance : maturedBalance;
                
                if (balanceAmount < minAmount) {
                    option.classList.add('disabled');
                } else {
                    option.classList.remove('disabled');
                }
            });
            
        } catch (error) {
            console.error('Error updating modal balances:', error);
            
            // Set fallback values on error
            const mainBalanceElement = document.getElementById('modal-main-balance-amount');
            const maturedBalanceElement = document.getElementById('modal-matured-balance-amount');
            
            if (mainBalanceElement) mainBalanceElement.textContent = '$0.00';
            if (maturedBalanceElement) maturedBalanceElement.textContent = '$0.00';
            
            // Disable all balance options on error
            const balanceOptions = document.querySelectorAll('.balance-option');
            balanceOptions.forEach(option => {
                option.classList.add('disabled');
            });
            
            showNotification('error', 'Balance Error', 'Failed to load balance information. Please try again.');
        }
    }

    // Setup modal event listeners - called only once
    function setupModalEventListeners() {
        const modal = document.getElementById('investment-modal');
        const amountInput = document.getElementById('investment-amount');
        const balanceOptions = document.querySelectorAll('.balance-option');
        const confirmBtn = document.getElementById('confirm-investment');
        
        // Remove any existing event listeners first by cloning elements
        const newAmountInput = amountInput.cloneNode(true);
        amountInput.parentNode.replaceChild(newAmountInput, amountInput);
        
        // Amount input handler
        newAmountInput.addEventListener('input', function() {
            const minAmount = parseFloat(modal.dataset.minAmount) || 0;
            const maxAmount = parseFloat(modal.dataset.maxAmount) || 0;
            const percentage = parseFloat(modal.dataset.percentage) || 0;
            const amount = parseFloat(this.value) || 0;
            validateInvestmentAmount(amount, minAmount, maxAmount);
            calculateExpectedReturn(amount, percentage);
        });
        
        // Balance selection handler
        balanceOptions.forEach(option => {
            // Remove existing listeners by cloning
            const newOption = option.cloneNode(true);
            option.parentNode.replaceChild(newOption, option);
            
            newOption.addEventListener('click', function() {
                if (this.classList.contains('disabled')) return;
                
                // Update selection
                document.querySelectorAll('.balance-option').forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
                modal.dataset.balanceSource = this.dataset.balance;
                
                // Re-validate amount with new balance source
                const minAmount = parseFloat(modal.dataset.minAmount) || 0;
                const maxAmount = parseFloat(modal.dataset.maxAmount) || 0;
                const amount = parseFloat(newAmountInput.value) || 0;
                validateInvestmentAmount(amount, minAmount, maxAmount);
            });
        });
        
        // Investment confirmation handler - with debouncing
        let isProcessing = false;
        
        // Remove existing listeners from confirm button by cloning
        const newConfirmBtn = confirmBtn.cloneNode(true);
        confirmBtn.parentNode.replaceChild(newConfirmBtn, confirmBtn);
        
        newConfirmBtn.addEventListener('click', async function() {
            // Prevent multiple simultaneous clicks
            if (isProcessing) {
                console.log('Cloud mining investment already in progress, please wait...');
                return;
            }
            
            isProcessing = true;
            newConfirmBtn.disabled = true;
            
            try {
                const amount = parseFloat(newAmountInput.value);
                const selectedBalanceSource = modal.dataset.balanceSource;
                const minAmount = parseFloat(modal.dataset.minAmount) || 0;
                const maxAmount = parseFloat(modal.dataset.maxAmount) || 0;
                const planId = modal.dataset.planId;
                
                if (await validateInvestmentAmount(amount, minAmount, maxAmount)) {
                    await createInvestment(planId, amount, selectedBalanceSource);
                }
            } catch (error) {
                console.error('Cloud mining investment error:', error);
                showNotification('error', 'Investment Error', 'An unexpected error occurred. Please try again.');
            } finally {
                // Re-enable button after a short delay
                setTimeout(() => {
                    isProcessing = false;
                    newConfirmBtn.disabled = false;
                }, 2000);
            }
        });
    }

    // Close cloud mining modal
    function closeInvestmentModal() {
        const modal = document.getElementById('investment-modal');
        modal.classList.remove('active');
        document.body.style.overflow = '';
        
        // Clean up modal data
        delete modal.dataset.planId;
        delete modal.dataset.minAmount;
        delete modal.dataset.maxAmount;
        delete modal.dataset.percentage;
        delete modal.dataset.balanceSource;
    }

    // Validate cloud mining investment amount
    async function validateInvestmentAmount(amount, minAmount, maxAmount) {
        const errorElement = document.getElementById('amount-error');
        const modal = document.getElementById('investment-modal');
        const selectedBalanceSource = modal.dataset.balanceSource;
        
        // Clear previous errors
        errorElement.textContent = '';
        
        // Basic validation
        if (isNaN(amount) || amount <= 0) {
            errorElement.textContent = 'Please enter a valid investment amount';
            return false;
        }
        
        if (amount < 200) { // Minimum investment is 200
            errorElement.textContent = `Minimum cloud mining investment is $200`;
            return false;
        }
        
        if (amount > maxAmount) {
            errorElement.textContent = `Maximum cloud mining investment is $${maxAmount}`;
            return false;
        }
        
        // Check balance availability if source is selected
        if (selectedBalanceSource) {
            try {
                const token = localStorage.getItem('jwtToken');
                if (!token) {
                    errorElement.textContent = 'Authentication required';
                    return false;
                }
                
                const response = await fetch('https://bithashcapital.onrender.com/api/users/balances', {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });
                
                if (response.ok) {
                    const balanceData = await response.json();
                    const selectedBalance = balanceData.data?.balances?.[selectedBalanceSource] || 0;
                    
                    if (selectedBalance < amount) {
                        errorElement.textContent = 
                            `Insufficient ${selectedBalanceSource} balance. Available: $${selectedBalance.toFixed(2)}`;
                        return false;
                    }
                } else {
                    throw new Error('Failed to verify balance');
                }
            } catch (error) {
                console.error('Balance validation error:', error);
                errorElement.textContent = 'Unable to verify balance. Please try again.';
                return false;
            }
        } else {
            errorElement.textContent = 'Please select a balance source';
            return false;
        }
        
        return true;
    }

    // Calculate expected cloud mining return
    function calculateExpectedReturn(amount, percentage) {
        const returnElement = document.getElementById('expected-return');
        
        if (isNaN(amount) || amount <= 0) {
            returnElement.textContent = '$0.00';
            return;
        }
        
        // Calculate with 3% mining fee
        const miningFee = amount * 0.03;
        const netInvestment = amount - miningFee;
        const totalReturn = netInvestment + (netInvestment * percentage / 100);
        
        returnElement.textContent = `$${totalReturn.toFixed(2)}`;
    }

    // Create new cloud mining investment
    async function createInvestment(planId, amount, balanceSource) {
        const token = localStorage.getItem('jwtToken');
        if (!token) return;
        
        const statusElement = document.getElementById('investment-status');
        
        try {
            // Update UI state
            statusElement.textContent = 'Processing your cloud mining investment...';
            statusElement.style.color = 'var(--primary)';
            
            console.log('Creating cloud mining investment:', { planId, amount, balanceSource });
            
            const response = await fetch('https://bithashcapital.onrender.com/api/investments', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}`
                },
                body: JSON.stringify({
                    planId: planId,
                    amount: parseFloat(amount),
                    balanceType: balanceSource
                })
            });
            
            let responseData;
            try {
                responseData = await response.json();
            } catch (parseError) {
                console.error('Response parse error:', parseError);
                responseData = { status: 'success' }; // Assume success for 2xx status
            }
            
            if (response.ok) {
                // Success handling
                statusElement.textContent = 'Cloud mining investment started successfully!';
                statusElement.style.color = 'var(--success)';
                
                showNotification('success', 'Cloud Mining Started', 
                    `Your cloud mining investment of $${amount} has been created successfully. ` +
                    `Returns will be generated from actual mining operations and available after the plan duration.`);
                
                // Close modal and refresh data
                setTimeout(() => {
                    closeInvestmentModal();
                    loadPlansData(); // Refresh plans with updated balances
                    checkAndCompleteInvestments(); // Check for any matured investments
                }, 1500);
                
            } else {
                // Error handling
                throw new Error(responseData.message || `Cloud mining investment failed: ${response.status}`);
            }
            
        } catch (error) {
            console.error('Cloud mining investment creation error:', error);
            statusElement.textContent = error.message || 'Failed to create cloud mining investment';
            statusElement.style.color = 'var(--error)';
            
            showNotification('error', 'Investment Failed', 
                error.message || 'There was an issue creating your cloud mining investment. Please try again.');
        }
    }

    // Check and complete matured cloud mining investments
    async function checkAndCompleteInvestments() {
        const token = localStorage.getItem('jwtToken');
        if (!token) return;
        
        try {
            const response = await fetch('https://bithashcapital.onrender.com/api/investments/active', {
                headers: {
                    'Authorization': `Bearer ${token}`
                }
            });
            
            if (response.ok) {
                const data = await response.json();
                const investments = data.data?.investments || [];
                const now = new Date();
                
                // Check each active cloud mining investment for maturity
                for (const investment of investments) {
                    if (investment.status === 'active') {
                        const endDate = new Date(investment.endDate);
                        
                        if (endDate <= now) {
                            await completeInvestment(investment.id);
                        }
                    }
                }
            }
        } catch (error) {
            console.error('Error checking cloud mining investments:', error);
        }
    }

    // Complete a specific cloud mining investment
    async function completeInvestment(investmentId) {
        const token = localStorage.getItem('jwtToken');
        if (!token) return;
        
        try {
            const response = await fetch(`https://bithashcapital.onrender.com/api/investments/${investmentId}/complete`, {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${token}`
                }
            });
            
            if (response.ok) {
                const data = await response.json();
                console.log('Cloud mining investment completed:', data);
                
                // Refresh UI
                fetchAndUpdateBalances();
                loadPlansData();
                
                showNotification('success', 'Cloud Mining Completed', 
                    'Your cloud mining investment has matured! Mining returns have been transferred to your matured balance.');
            }
        } catch (error) {
            console.error('Error completing cloud mining investment:', error);
        }
    }

    // Initialize modal close functionality
    document.addEventListener('DOMContentLoaded', function() {
        const modalCloseBtn = document.getElementById('modal-close');
        const investmentModal = document.getElementById('investment-modal');
        
        if (modalCloseBtn) {
            modalCloseBtn.addEventListener('click', closeInvestmentModal);
        }
        
        if (investmentModal) {
            investmentModal.addEventListener('click', function(e) {
                if (e.target === this) {
                    closeInvestmentModal();
                }
            });
        }
    });

    // Fetch and update user balances
    async function fetchAndUpdateBalances() {
        try {
            const token = localStorage.getItem('jwtToken');
            const userBalanceContainer = document.getElementById('user-balance-container');
            
            if (!token) {
                if (userBalanceContainer) userBalanceContainer.style.display = 'none';
                return;
            }
            
            const response = await fetch('https://bithashcapital.onrender.com/api/users/balances', {
                headers: {
                    'Authorization': `Bearer ${token}`
                }
            });
            
            if (response.ok) {
                const data = await response.json();
                const mainBalance = data.data?.balances?.main || 0;
                const maturedBalance = data.data?.balances?.matured || 0;
                
                // Update balance display
                const mainBalanceElement = document.getElementById('main-balance-amount');
                const maturedBalanceElement = document.getElementById('matured-balance-amount');
                
                if (mainBalanceElement) mainBalanceElement.textContent = `Main: $${mainBalance.toFixed(2)}`;
                if (maturedBalanceElement) maturedBalanceElement.textContent = `Matured: $${maturedBalance.toFixed(2)}`;
                if (userBalanceContainer) userBalanceContainer.style.display = 'block';
                
                // Start animation for matured balance
                if (maturedBalance > 0) {
                    startMaturedBalanceAnimation();
                }
            } else {
                throw new Error('Failed to fetch balances');
            }
        } catch (error) {
            console.error('Error fetching balances:', error);
            // Set fallback values
            const mainBalanceElement = document.getElementById('main-balance-amount');
            const maturedBalanceElement = document.getElementById('matured-balance-amount');
            
            if (mainBalanceElement) mainBalanceElement.textContent = 'Main: $0.00';
            if (maturedBalanceElement) maturedBalanceElement.textContent = 'Matured: $0.00';
        }
    }

    // Start matured balance animation
    function startMaturedBalanceAnimation() {
        const maturedBalanceElement = document.getElementById('matured-balance');
        if (maturedBalanceElement) {
            maturedBalanceElement.classList.add('matured-balance-animation');
            
            // Remove animation after 90 seconds
            setTimeout(() => {
                maturedBalanceElement.classList.remove('matured-balance-animation');
            }, 90000);
        }
    }

    // Redirect to dashboard
    function redirectToDashboard() {
        window.location.href = 'dashboard.html';
    }

    // Initialize balance updates
    function startBalanceUpdates() {
        fetchAndUpdateBalances();
        
        // Update balances every 30 seconds
        setInterval(fetchAndUpdateBalances, 30000);
        
        // Check for completed cloud mining investments every minute
        setInterval(checkAndCompleteInvestments, 60000);
    }

    // Initialize when DOM is loaded
    document.addEventListener('DOMContentLoaded', function() {
        startBalanceUpdates();
        loadPlansData();
        checkAndCompleteInvestments();
    });

    // Utility function for currency formatting
    function formatCurrency(amount) {
        return '$' + parseFloat(amount).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }

    // Loan eligibility placeholder
    function checkLoanEligibility() {
        showNotification('info', 'Loan Feature', 'Loan eligibility assessment is coming soon!');
    }

    
</script>
</body>
</html>
