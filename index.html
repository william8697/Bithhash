<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BitHash | Leading BTC Mining Firm</title>
    <meta name="description" content="Grow your Bitcoin mining portfolio with BitHash and unlock soft loan benefits.">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rowdies:wght@300;400;700&family=Inter:wght@300;400;500;600;700&family=Manrope:wght@500;600;700&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" href="https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1" type="image/png">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- AOS Animation -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    
    <style>
        :root {
            --primary: #00D395;
            --primary-dark: #00B783;
            --primary-light: #00E5A1;
            --secondary: #1E1E1E;
            --secondary-dark: #121212;
            --dark: #E5E5E5;
            --darker: #0A0A0A;
            --light: #121212;
            --lighter: #1E1E1E;
            --gray: #8E8E8E;
            --gray-light: #2E2E2E;
            --gray-lighter: #252525;
            --success: #00D395;
            --warning: #FFB800;
            --error: #FF3D57;
            --gold: #D4AF37;
            --gold-light: #FFD700;
            --gold-dark: #996515;
            --blue: #003366;
            --blue-dark: #002244;
            --blue-light: #004488;
            --purple: #784FED;
            --pink: #EC4899;
            --gradient: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            --gold-gradient: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 100%);
            --blue-gradient: linear-gradient(135deg, var(--blue) 0%, var(--blue-dark) 100%);
            --border-radius: 8px;
            --border-radius-lg: 12px;
            --box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --box-shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.2), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            --security-blue: #1A73E8;
            --security-green: #34A853;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html {
            scroll-behavior: smooth;
            overflow-x: hidden;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            color: var(--dark);
            background-color: var(--light);
            line-height: 1.6;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Bitcoin Logo Animation */
        @keyframes bitcoinFloat {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-20px) rotate(90deg); }
            50% { transform: translateY(0) rotate(180deg); }
            75% { transform: translateY(-10px) rotate(270deg); }
        }

        .bitcoin-animation {
            display: inline-block;
            animation: bitcoinFloat 4s ease-in-out infinite;
            margin-right: 5px;
            vertical-align: middle;
            color: var(--gold);
            text-shadow: 0 0 10px var(--gold-light);
            font-weight: bold;
            transform-origin: center;
        }

        /* Mining Animation */
        @keyframes miningPulse {
            0% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.05); opacity: 1; text-shadow: 0 0 10px var(--gold-light); }
            100% { transform: scale(1); opacity: 0.8; }
        }

        .mining-animation {
            display: inline-block;
            animation: miningPulse 2s ease-in-out infinite;
            color: var(--gold);
        }

        /* Security Badge */
        .security-badge {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--darker);
            padding: 12px 16px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow-lg);
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.85rem;
            font-weight: 600;
            z-index: 100;
            border-left: 4px solid var(--security-green);
            color: var(--dark);
            border: 1px solid var(--gray-light);
        }
        
        .security-badge i {
            color: var(--security-green);
            font-size: 1rem;
        }
        
        /* Loading Overlay */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--darker);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }
        
        .loading-overlay.hidden {
            opacity: 0;
            visibility: hidden;
        }
        
        .loading-logo {
            width: 80px;
            height: 80px;
            animation: pulse 1.5s infinite ease-in-out;
            filter: drop-shadow(0 0 10px rgba(0, 211, 149, 0.3));
        }
        
        .loading-text {
            margin-top: 20px;
            font-weight: 500;
            color: var(--gray);
            font-size: 1rem;
        }
        
        @keyframes pulse {
            0% { transform: scale(0.95); opacity: 0.8; }
            50% { transform: scale(1.05); opacity: 1; }
            100% { transform: scale(0.95); opacity: 0.8; }
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Enhanced Header Styles - More compact */
        header {
            background-color: var(--darker);
            box-shadow: var(--box-shadow);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            padding: 8px 0;
            transition: var(--transition-slow);
            border-bottom: 1px solid var(--gray-light);
            height: 70px;
        }
        
        header.scrolled {
            background-color: rgba(10, 10, 10, 0.98);
            backdrop-filter: blur(5px);
        }
        
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            height: 100%;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            z-index: 1001;
        }
        
        .logo img {
            height: 32px;
            width: auto;
            transition: var(--transition);
        }
        
        .logo:hover img {
            transform: scale(1.05);
        }
        
        .logo-text {
            font-family: 'Rowdies', sans-serif;
            font-weight: 700;
            font-size: 1.3rem;
            color: var(--primary);
            background-clip: text;
            position: relative;
        }
        
        /* Auth Buttons - More compact */
        .auth-buttons {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .auth-buttons .btn {
            padding: 6px 12px;
            font-size: 0.85rem;
        }
        
        /* Enhanced User Balance Container - Shows Both Balances */
        .user-balance-container {
            width: 100%;
            background-color: var(--lighter);
            padding: 8px 0;
            position: fixed;
            top: 70px;
            z-index: 999;
            border-bottom: 1px solid var(--gray-light);
            display: none;
        }
        
        .user-balances {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .user-balance {
            background-color: var(--primary);
            color: var(--darker);
            padding: 6px 12px;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.85rem;
        }
        
        .user-balance:hover {
            background-color: var(--primary-light);
            transform: translateY(-2px);
        }
        
        .user-balance i {
            font-size: 0.85rem;
        }
        
        /* Matured Balance Animation */
        @keyframes pulseHighlight {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(0, 211, 149, 0.7); }
            50% { transform: scale(1.05); box-shadow: 0 0 0 10px rgba(0, 211, 149, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(0, 211, 149, 0); }
        }
        
        @keyframes glow {
            0% { text-shadow: 0 0 5px rgba(255, 215, 0, 0.5); }
            50% { text-shadow: 0 0 20px rgba(255, 215, 0, 0.8), 0 0 30px rgba(255, 215, 0, 0.6); }
            100% { text-shadow: 0 0 5px rgba(255, 215, 0, 0.5); }
        }
        
        .matured-balance-animation {
            animation: pulseHighlight 2s ease-in-out infinite, glow 3s ease-in-out infinite;
            background: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 100%) !important;
            color: var(--darker) !important;
            position: relative;
            overflow: hidden;
        }
        
        .matured-balance-animation::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to bottom right,
                rgba(255, 255, 255, 0) 0%,
                rgba(255, 255, 255, 0.8) 50%,
                rgba(255, 255, 255, 0) 100%
            );
            transform: rotate(30deg);
            animation: shine 3s ease-in-out infinite;
        }
        
        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(30deg); }
            50% { transform: translateX(100%) translateY(100%) rotate(30deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(30deg); }
        }
        
        /* Mobile Menu Toggle */
        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            color: var(--dark);
            font-size: 1.3rem;
            cursor: pointer;
            padding: 5px;
            z-index: 1001;
            transition: var(--transition);
        }
        
        .mobile-menu-toggle:hover {
            color: var(--primary);
        }
        
        .mobile-menu-dropdown {
            position: absolute;
            top: 70px;
            right: 20px;
            background-color: var(--darker);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow-lg);
            padding: 10px 0;
            transform: translateY(-20px);
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
            z-index: 1000;
            border: 1px solid var(--gray-light);
            min-width: 200px;
        }
        
        .mobile-menu-dropdown.active {
            transform: translateY(0);
            opacity: 1;
            visibility: visible;
        }
        
        .mobile-menu-dropdown ul {
            list-style: none;
        }
        
        .mobile-menu-dropdown li {
            padding: 8px 15px;
        }
        
        .mobile-menu-dropdown a {
            color: var(--dark);
            text-decoration: none;
            font-size: 0.9rem;
            transition: var(--transition);
            display: block;
        }
        
        .mobile-menu-dropdown a:hover {
            color: var(--primary);
        }
        
        /* PC Toggle Menu */
        .pc-menu-toggle {
            display: none;
            background: none;
            border: none;
            color: var(--dark);
            font-size: 1.1rem;
            cursor: pointer;
            padding: 5px;
            z-index: 1001;
            transition: var(--transition);
            margin-left: 15px;
        }
        
        .pc-menu-toggle:hover {
            color: var(--primary);
        }
        
        .pc-menu-dropdown {
            position: absolute;
            top: 70px;
            right: 20px;
            background-color: var(--darker);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow-lg);
            padding: 10px 0;
            transform: translateY(-20px);
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
            z-index: 1000;
            border: 1px solid var(--gray-light);
            min-width: 200px;
        }
        
        .pc-menu-dropdown.active {
            transform: translateY(0);
            opacity: 1;
            visibility: visible;
        }
        
        .pc-menu-dropdown ul {
            list-style: none;
        }
        
        .pc-menu-dropdown li {
            padding: 8px 15px;
        }
        
        .pc-menu-dropdown a {
            color: var(--dark);
            text-decoration: none;
            font-size: 0.9rem;
            transition: var(--transition);
            display: block;
        }
        
        .pc-menu-dropdown a:hover {
            color: var(--primary);
        }
        
        nav {
            transition: var(--transition-slow);
        }
        
        nav ul {
            display: flex;
            list-style: none;
            gap: 20px;
        }
        
        nav a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            transition: var(--transition);
            position: relative;
            font-size: 0.9rem;
            padding: 3px 0;
        }
        
        nav a:hover {
            color: var(--primary);
        }
        
        nav a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary);
            transition: var(--transition);
        }
        
        nav a:hover::after {
            width: 100%;
        }
        
        .btn {
            padding: 10px 20px;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            font-size: 0.9rem;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            white-space: nowrap;
        }
        
        .btn-primary {
            background: var(--gradient);
            color: var(--darker);
            box-shadow: 0 4px 15px rgba(0, 211, 149, 0.3);
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, var(--primary-light) 0%, var(--primary) 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 211, 149, 0.4);
        }
        
        .btn-outline {
            background-color: transparent;
            color: var(--primary);
            border: 1px solid var(--primary);
        }
        
        .btn-outline:hover {
            background: var(--primary);
            color: var(--darker);
            transform: translateY(-2px);
        }
        
        .btn-gold {
            background: var(--gold-gradient);
            color: var(--darker);
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
        }
        
        .btn-gold:hover {
            background: linear-gradient(135deg, var(--gold-light) 0%, var(--gold) 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(212, 175, 55, 0.4);
        }
        
        /* ============================================= */
        /* Critical Error Notification System */
        /* ============================================= */
        
        .notification-center {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            justify-content: flex-start;
            pointer-events: none;
            width: 100%;
            max-width: 350px;
        }
        
        .notification {
            width: 100%;
            padding: 12px 16px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow-lg);
            display: flex;
            align-items: start;
            gap: 10px;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            transform: translateX(30px) scale(0.95);
            opacity: 0;
            margin-bottom: 10px;
            font-size: 0.75rem; /* Smaller font for neat appearance */
            font-weight: 500;
            backdrop-filter: blur(10px);
            background-color: rgba(30, 30, 30, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.1);
            pointer-events: auto;
            position: relative;
        }
        
        .notification.show {
            transform: translateX(0) scale(1);
            opacity: 1;
        }
        
        .notification.error {
            background-color: rgba(255, 61, 87, 0.95);
            color: white;
            border-left: 4px solid #cc2c4d;
        }
        
        .notification.success {
            background-color: rgba(0, 211, 149, 0.95);
            color: var(--darker);
            border-left: 4px solid #00B783;
        }
        
        .notification.warning {
            background-color: rgba(255, 184, 0, 0.95);
            color: var(--darker);
            border-left: 4px solid #e6a600;
        }
        
        .notification i {
            font-size: 1rem; /* Smaller icon to match text */
            flex-shrink: 0;
            margin-top: 2px;
        }
        
        .notification-content {
            flex: 1;
            padding-right: 10px;
        }
        
        .notification-title {
            font-weight: 600;
            margin-bottom: 4px;
            font-size: 0.85rem; /* Smaller title */
        }
        
        .notification-message {
            font-size: 0.75rem; /* Smaller message text */
            line-height: 1.4;
        }
        
        .notification-close {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 18px; /* Smaller close button */
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background-color: rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.7rem; /* Smaller close icon */
        }
        
        .notification-close:hover {
            background-color: rgba(0, 0, 0, 0.2);
            transform: rotate(90deg);
        }
        
        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }
        
        .notification.error.show {
            animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
        }
        
        /* Loan Qualification Popup */
        .loan-popup {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: var(--darker);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow-lg);
            padding: 15px;
            width: 300px;
            z-index: 999;
            transform: translateY(-20px);
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
            border-left: 4px solid var(--primary);
            font-size: 0.8rem; /* Smaller font for neat appearance */
        }
        
        .loan-popup.active {
            transform: translateY(0);
            opacity: 1;
            visibility: visible;
        }
        
        .loan-popup-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .loan-popup-title {
            font-weight: 600;
            color: var(--primary);
            font-size: 0.9rem; /* Smaller title */
        }
        
        .loan-popup-close {
            background: none;
            border: none;
            color: var(--gray);
            cursor: pointer;
            font-size: 0.9rem; /* Smaller close button */
        }
        
        .loan-popup-content {
            font-size: 0.8rem; /* Smaller content text */
            color: var(--dark);
            margin-bottom: 15px;
            line-height: 1.4;
        }
        
        .loan-popup-footer {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        
        .loan-popup-btn {
            padding: 6px 12px;
            border-radius: var(--border-radius);
            font-size: 0.75rem; /* Smaller button text */
            cursor: pointer;
            transition: var(--transition);
        }
        
        .loan-popup-btn-primary {
            background: var(--gradient);
            color: var(--darker);
        }
        
        .loan-popup-btn-secondary {
            background-color: var(--gray-light);
            color: var(--dark);
        }       
        
        /* Security Indicators */
        .security-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.8rem;
            color: var(--gray);
            margin-top: 10px;
        }
        
        .security-indicator i {
            color: var(--security-green);
        }
        
        /* Hero Section */
        .hero-section {
            padding: 140px 0 80px;
            background-color: var(--light);
            position: relative;
            overflow: hidden;
        }
        
        .hero-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            align-items: center;
        }
        
        .hero-content {
            max-width: 600px;
        }
        
        .hero-content h1 {
            font-size: 2.8rem;
            margin-bottom: 20px;
            color: var(--dark);
            line-height: 1.2;
        }
        
        .hero-content h1 span {
            color: var(--primary);
        }
        
        .hero-content p {
            font-size: 1.1rem;
            margin-bottom: 30px;
            color: var(--gray);
        }

        /* Bitcoin Price Container */
        .btc-price-container {
            width: 100%;
            max-width: 380px;
            background: var(--darker);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--box-shadow-lg);
            overflow: hidden;
            border: 1px solid var(--gray-light);
            transition: var(--transition);
        }

        .btc-price-container:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
            border-color: var(--gold);
        }

        .btc-price-header {
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(10, 10, 10, 0.8) 100%);
            padding: 15px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 1px solid var(--gray-light);
        }

        .btc-price-header i {
            font-size: 1.5rem;
            color: var(--gold);
        }

        .btc-price-header h3 {
            font-size: 1.2rem;
            color: var(--dark);
            margin: 0;
        }

        .btc-price-display {
            padding: 20px;
        }

        .btc-price-main {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .btc-price {
            font-size: 2rem;
            font-weight: 700;
            color: var(--gold);
            font-family: 'Manrope', sans-serif;
        }

        .btc-change {
            padding: 5px 10px;
            border-radius: var(--border-radius);
            font-weight: 600;
            font-size: 0.9rem;
        }

        .btc-change.positive {
            background-color: rgba(0, 211, 149, 0.2);
            color: var(--success);
        }

        .btc-change.negative {
            background-color: rgba(255, 61, 87, 0.2);
            color: var(--error);
        }

        .btc-price-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .btc-price-detail {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .btc-price-detail span:first-child {
            font-size: 0.8rem;
            color: var(--gray);
        }

        .btc-price-detail span:last-child {
            font-size: 0.95rem;
            color: var(--dark);
            font-weight: 500;
        }

        .btc-price-footer {
            padding: 10px 20px;
            background-color: var(--gray-light);
            font-size: 0.7rem;
            color: var(--gray);
            text-align: center;
        }
        
        /* Enhanced Stats Section */
        .stats-section {
            padding: 80px 0;
            background-color: var(--lighter);
            position: relative;
            overflow: hidden;
        }

        .stats-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(0, 211, 149, 0.05) 0%, rgba(0, 0, 0, 0) 100%);
            z-index: 0;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-top: 30px;
            position: relative;
            z-index: 1;
        }

        .stat-card {
            background-color: var(--light);
            border-radius: var(--border-radius-lg);
            padding: 30px;
            text-align: center;
            transition: var(--transition);
            box-shadow: var(--box-shadow);
            border: 1px solid var(--gray-light);
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(0, 211, 149, 0.1) 0%, rgba(0, 0, 0, 0) 100%);
            opacity: 0;
            transition: var(--transition);
        }

        .stat-card:hover::before {
            opacity: 1;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
            background: linear-gradient(135deg, var(--light) 0%, var(--lighter) 100%);
        }

        .stat-icon {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 20px;
            transition: var(--transition);
        }

        .stat-card:hover .stat-icon {
            transform: scale(1.1);
            color: var(--primary-light);
        }

        .stat-number {
            font-size: clamp(1.2rem, 2vw, 1.8rem);
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 10px;
            font-family: 'Manrope', sans-serif;
            transition: var(--transition);
        }

        .stat-card:hover .stat-number {
            color: var(--primary);
        }

        .stat-label {
            font-size: 1rem;
            color: var(--gray);
            line-height: 1.5;
            min-height: 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .stat-label span {
            font-size: 0.85rem;
            margin-top: 5px;
            display: inline-flex;
            align-items: center;
        }

        /* Pulse animation for real-time updates */
        @keyframes pulseGlow {
            0% { box-shadow: 0 0 0 0 rgba(0, 211, 149, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(0, 211, 149, 0); }
            100% { box-shadow: 0 0 0 0 rgba(0, 211, 149, 0); }
        }

        .stat-card.updating {
            animation: pulseGlow 1.5s ease-out;
        }
        
        /* About Section */
        .about-section {
            padding: 80px 0;
            background-color: var(--lighter);
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 50px;
        }
        
        .section-title h2 {
            font-size: 2.2rem;
            color: var(--dark);
            margin-bottom: 15px;
        }
        
        .section-title p {
            color: var(--gray);
            max-width: 700px;
            margin: 0 auto;
        }
        
        .about-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 50px;
            align-items: center;
        }
        
        .about-image {
            position: relative;
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            box-shadow: var(--box-shadow-lg);
        }
        
        .about-image img {
            width: 100%;
            height: auto;
            display: block;
        }
        
        .about-content h3 {
            font-size: 1.6rem;
            margin-bottom: 20px;
            color: var(--dark);
        }
        
        .about-content p {
            margin-bottom: 20px;
            color: var(--gray);
            font-size: 1rem;
        }
        
        .about-features {
            margin-top: 25px;
        }
        
        .about-feature {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .about-feature-icon {
            width: 22px;
            height: 22px;
            background: var(--gradient);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--darker);
            flex-shrink: 0;
            margin-top: 2px;
            font-size: 0.9rem;
        }
        
        .about-feature-text h4 {
            font-size: 1rem;
            margin-bottom: 5px;
            color: var(--dark);
        }
        
        .about-feature-text p {
            font-size: 0.9rem;
            margin-bottom: 0;
        }
        
        /* Enhanced Plans Section */
        .plans-section {
            padding: 80px 0;
            background-color: var(--light);
            position: relative;
            overflow: hidden;
        }

        .plans-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 20% 50%, rgba(0, 211, 149, 0.05) 0%, transparent 30%);
            pointer-events: none;
        }

        .plans-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .plan-card {
            background-color: var(--lighter);
            border-radius: var(--border-radius-lg);
            padding: 35px 30px;
            box-shadow: var(--box-shadow);
            transition: var(--transition-slow);
            position: relative;
            overflow: hidden;
            z-index: 1;
            border: 1px solid var(--gray-light);
        }

        .plan-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--plan-primary) 0%, var(--plan-secondary) 100%);
            opacity: 0.1;
            z-index: -1;
            transition: var(--transition-slow);
        }

        .plan-card:hover::before {
            opacity: 0.2;
        }

        .plan-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
            border-color: var(--plan-accent);
        }

        .plan-card:hover .plan-name {
            color: var(--plan-accent);
        }

        .plan-card:hover .plan-button {
            background: linear-gradient(135deg, var(--plan-primary) 0%, var(--plan-secondary) 100%);
            color: white;
        }

        .plan-name {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--dark);
            transition: var(--transition);
        }

        .plan-description {
            font-size: 1rem;
            color: var(--gray);
            margin-bottom: 20px;
            min-height: 60px;
        }

        .plan-features {
            margin-bottom: 25px;
        }

        .plan-feature {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
            font-size: 0.95rem;
            color: var(--gray);
        }

        .plan-feature i {
            color: var(--plan-accent);
            font-size: 0.9rem;
            width: 20px;
            text-align: center;
        }

        .plan-button {
            width: 100%;
            padding: 12px 20px;
            font-size: 0.95rem;
            font-weight: 600;
            border-radius: var(--border-radius);
            background-color: var(--light);
            color: var(--dark);
            border: none;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .plan-button i {
            font-size: 1rem;
        }

        .plan-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .plan-limits {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid var(--gray-light);
            font-size: 0.9rem;
        }

        .plan-min, .plan-max {
            display: flex;
            flex-direction: column;
        }

        .plan-min span:first-child, .plan-max span:first-child {
            color: var(--gray);
            font-size: 0.8rem;
        }

        .plan-min span:last-child, .plan-max span:last-child {
            color: var(--dark);
            font-weight: 600;
        }

        /* Investment Modal - FIXED SCROLLING ISSUE */
        .investment-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(10, 10, 10, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition-slow);
            backdrop-filter: blur(5px);
            padding: 20px;
            overflow-y: auto;
        }

        .investment-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background-color: var(--lighter);
            border-radius: var(--border-radius-lg);
            width: 100%;
            max-width: 500px;
            box-shadow: var(--box-shadow-lg);
            transform: translateY(20px);
            transition: var(--transition-slow);
            border: 1px solid var(--gray-light);
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .investment-modal.active .modal-content {
            transform: translateY(0);
        }

        .modal-header {
            padding: 20px 25px;
            border-bottom: 1px solid var(--gray-light);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            background-color: var(--lighter);
            z-index: 10;
        }

        .modal-header h3 {
            font-size: 1.4rem;
            color: var(--dark);
            margin: 0;
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--gray);
            font-size: 1.5rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .modal-close:hover {
            color: var(--primary);
        }

        .modal-body {
            padding: 25px;
        }

        .plan-details {
            margin-bottom: 25px;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--gray-light);
        }

        .detail-row:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .detail-label {
            color: var(--gray);
            font-size: 0.95rem;
        }

        .detail-value {
            color: var(--dark);
            font-weight: 600;
        }

        .investment-form {
            margin-top: 20px;
        }

        .investment-form .form-group {
            margin-bottom: 20px;
        }

        .investment-form label {
            display: block;
            margin-bottom: 8px;
            color: var(--gray);
            font-size: 0.95rem;
        }

        .investment-form .form-control {
            width: 100%;
            padding: 12px 15px;
            border-radius: var(--border-radius);
            border: 1px solid var(--gray-light);
            background-color: var(--light);
            color: var(--dark);
            font-size: 1rem;
            transition: var(--transition);
        }

        .investment-form .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(0, 211, 149, 0.2);
        }

        .amount-error {
            color: var(--error);
            font-size: 0.85rem;
            margin-top: 5px;
            min-height: 18px;
        }

        .expected-return {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 25px 0;
            padding: 15px;
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: var(--border-radius);
            font-size: 1.05rem;
        }

        .expected-return span:first-child {
            color: var(--gray);
        }

        .expected-return span:last-child {
            color: var(--primary);
            font-weight: 600;
        }

        #confirm-investment {
            width: 100%;
            padding: 14px;
            font-size: 1rem;
        }

        .investment-status {
            margin-top: 15px;
            text-align: center;
            font-size: 0.9rem;
            min-height: 20px;
        }

        /* Balance Selector Styles - FIXED FOR MOBILE */
        .balance-selector {
            margin: 15px 0;
            padding: 15px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .balance-option {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }

        .balance-option:hover {
            background: rgba(255,255,255,0.05);
        }

        .balance-option.selected {
            background: rgba(0, 211, 149, 0.1);
            border-color: var(--primary);
        }

        .balance-option.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .balance-radio {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            border: 2px solid var(--gray);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .balance-option.selected .balance-radio {
            border-color: var(--primary);
        }

        .balance-option.selected .balance-radio::after {
            content: '';
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--primary);
        }

        .balance-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .balance-info i {
            color: var(--primary);
            font-size: 1.1rem;
        }

        .balance-details {
            display: flex;
            flex-direction: column;
        }

        .balance-name {
            font-weight: 600;
            color: var(--dark);
        }

        .balance-amount {
            font-size: 0.9rem;
            color: var(--gray);
        }

        /* Fee Information */
        .fee-info {
            background: rgba(255, 184, 0, 0.1);
            border-left: 4px solid var(--warning);
            padding: 12px 15px;
            margin: 15px 0;
            border-radius: 4px;
            font-size: 0.9rem;
        }

        .fee-info i {
            color: var(--warning);
            margin-right: 8px;
        }

        /* Responsive Styles */
        @media (max-width: 768px) {
            .plans-grid {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                max-width: 95%;
                margin: 10px;
            }
            
            .investment-modal {
                padding: 10px;
                align-items: flex-start;
            }
            
            .modal-body {
                padding: 15px;
            }
        }

        @media (max-width: 480px) {
            .modal-body {
                padding: 15px 10px;
            }
            
            .detail-row {
                flex-direction: column;
                gap: 5px;
            }
            
            .balance-option {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .balance-info {
                width: 100%;
            }
        }

        /* How It Works Section */
        .how-it-works-section {
            padding: 80px 0;
            background-color: var(--lighter);
        }
        
        .steps-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 25px;
            margin-top: 40px;
        }
        
        .step-card {
            background-color: var(--light);
            border-radius: var(--border-radius-lg);
            padding: 25px;
            text-align: center;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }
        
        .step-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
        }
        
        .step-number {
            width: 45px;
            height: 45px;
            background: var(--gradient);
            color: var(--darker);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.1rem;
            margin: 0 auto 15px;
        }
        
        .step-card h3 {
            font-size: 1.2rem;
            margin-bottom: 12px;
            color: var(--dark);
        }
        
        .step-card p {
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        /* Mining Video Section */
        .mining-video-section {
            padding: 80px 0;
            background-color: var(--light);
            text-align: center;
        }
        
        .video-container {
            max-width: 800px;
            margin: 0 auto;
            position: relative;
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            box-shadow: var(--box-shadow-lg);
        }
        
        .video-container video {
            width: 100%;
            display: block;
            object-fit: cover;
        }
        
        /* Loans & Savings Section */
        .loans-section {
            padding: 80px 0;
            background-color: var(--blue);
        }
        
        .loans-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .loan-calculator {
            background-color: var(--blue-dark);
            border-radius: var(--border-radius-lg);
            padding: 35px;
            box-shadow: var(--box-shadow);
            color: white;
        }
        
        .loan-calculator h3 {
            font-size: 1.4rem;
            margin-bottom: 20px;
            text-align: center;
            color: white;
        }
        
        .form-group {
            margin-bottom: 18px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: white;
            font-size: 0.95rem;
        }
        
        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--blue-light);
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: var(--transition);
            background-color: rgba(0, 0, 0, 0.2);
            color: white;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(0, 211, 149, 0.2);
        }
        
        textarea.form-control {
            min-height: 120px;
            resize: vertical;
        }

        /* BTC News Section */
        .btc-news-section {
            padding: 80px 0;
            background-color: var(--lighter);
        }

        .news-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 25px;
            margin-top: 40px;
            min-height: 300px;
        }

        .news-card {
            background-color: var(--light);
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            box-shadow: var(--box-shadow);
            transition: var(--transition);
            display: flex;
            flex-direction: column;
        }

        .news-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
        }

        .news-image-container {
            height: 180px;
            overflow: hidden;
            position: relative;
        }

        .news-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .news-card:hover .news-image {
            transform: scale(1.05);
        }

        .news-content {
            padding: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .news-title {
            font-size: 1.1rem;
            margin-bottom: 10px;
            color: var(--dark);
            line-height: 1.4;
            flex: 1;
        }

        .news-meta {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            font-size: 0.8rem;
            color: var(--gray);
        }

        .news-source {
            font-weight: 600;
            color: var(--primary);
        }

        .news-date {
            color: var(--gray);
        }

        .news-navigation {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 30px;
        }

        #news-page-info {
            font-size: 0.9rem;
            color: var(--gray);
            min-width: 80px;
            text-align: center;
        }

        .news-loading {
            grid-column: 1 / -1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px 0;
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(0, 211, 149, 0.2);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s ease-in-out infinite;
            margin-bottom: 15px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* News Modal */
        .news-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition-slow);
            padding: 20px;
        }

        .news-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .news-modal-content {
            background-color: var(--darker);
            border-radius: var(--border-radius-lg);
            max-width: 800px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            box-shadow: var(--box-shadow-lg);
        }

        .news-modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: var(--gray);
            font-size: 1.5rem;
            cursor: pointer;
            z-index: 1;
            transition: var(--transition);
        }

        .news-modal-close:hover {
            color: var(--primary);
            transform: rotate(90deg);
        }

        .news-modal-header {
            position: relative;
            height: 250px;
            overflow: hidden;
        }

        #news-modal-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .news-modal-header-text {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 30px;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
        }

        #news-modal-title {
            color: white;
            font-size: 1.5rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }

        .news-modal-meta {
            display: flex;
            gap: 15px;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
        }

        .news-modal-body {
            padding: 30px;
        }

        #news-modal-description {
            color: var(--dark);
            margin-bottom: 25px;
            line-height: 1.6;
            font-size: 1rem;
        }

        /* Responsive adjustments */
        @media (max-width: 1024px) {
            .news-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .news-modal-header {
                height: 200px;
            }
        }

        @media (max-width: 768px) {
            .news-grid {
                grid-template-columns: 1fr;
                max-width: 500px;
                margin: 40px auto 0;
            }
            
            .news-modal-content {
                max-height: 95vh;
            }
            
            .news-modal-header {
                height: 180px;
            }
            
            #news-modal-title {
                font-size: 1.3rem;
            }
            
            .news-modal-body {
                padding: 20px;
            }
        }

        @media (max-width: 480px) {
            .news-modal-header {
                height: 150px;
            }
            
            .news-modal-header-text {
                padding: 20px;
            }
            
            #news-modal-title {
                font-size: 1.2rem;
            }
            
            #news-modal-description {
                font-size: 0.95rem;
            }
        }
        
        /* CTA Section */
        .cta-section {
            padding: 80px 0;
            background: linear-gradient(135deg, var(--darker) 0%, var(--light) 100%);
            text-align: center;
            color: white;
        }
        
        .cta-container {
            max-width: 700px;
            margin: 0 auto;
        }
        
        .cta-container h2 {
            font-size: 2.2rem;
            margin-bottom: 20px;
        }
        
        .cta-container p {
            margin-bottom: 30px;
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        /* Footer */
        footer {
            background-color: var(--darker);
            color: white;
            padding: 50px 0 20px;
        }
        
        .footer-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .footer-logo {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 15px;
        }
        
        .footer-logo img {
            height: 28px;
            width: auto;
        }
        
        .footer-logo-text {
            font-family: 'Rowdies', sans-serif;
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--primary);
        }
        
        .footer-about p {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
            margin-bottom: 15px;
            line-height: 1.6;
        }
        
        .footer-social {
            display: flex;
            gap: 10px;
        }
        
        .social-icon {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            color: white;
        }
        
        /* Social media icons */
        .social-icon.twitter {
            background-color: #1DA1F2;
        }
        
        .social-icon.linkedin {
            background-color: #0077B5;
        }
        
        .social-icon.facebook {
            background-color: #1877F2;
        }
        
        .social-icon.instagram {
            background: linear-gradient(45deg, #405DE6, #5851DB, #833AB4, #C13584, #E1306C, #FD1D1D, #F56040, #F77737, #FCAF45, #FFDC80);
        }
        
        .social-icon:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .footer-title {
            font-weight: 700;
            margin-bottom: 15px;
            font-size: 1.1rem;
            color: white;
        }
        
        .footer-links ul {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 10px;
        }
        
        .footer-links a {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            transition: var(--transition);
            font-size: 0.9rem;
            display: inline-block;
        }
        
        .footer-links a:hover {
            color: var(--primary);
            transform: translateX(3px);
        }
        
        .footer-contact p {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 12px;
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        .footer-contact i {
            color: var(--primary);
            width: 18px;
            text-align: center;
            margin-top: 2px;
            font-size: 0.9rem;
        }
        
        .footer-bottom {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-top: 20px;
            text-align: center;
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.8rem;
        }

        /* Dark Theme Smartsupp Chat Widget */
        .smartsupp-noscript-warning {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(30, 30, 40, 0.9);
            backdrop-filter: blur(5px);
            padding: 12px 16px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            font-family: 'Segoe UI', Roboto, -apple-system, sans-serif;
            font-size: 14px;
            color: #e0e0e0;
            z-index: 99999;
            display: flex;
            align-items: center;
            gap: 8px;
            max-width: 280px;
        }
        
        .smartsupp-noscript-warning svg {
            color: #5d8bf4;
            flex-shrink: 0;
        }
        
        .smartsupp-noscript-warning a {
            color: #5d8bf4;
            text-decoration: none;
            font-weight: 500;
            white-space: nowrap;
        }
        
        .smartsupp-noscript-warning a:hover {
            color: #7da1f8;
            text-decoration: underline;
        }
        
        /* Chat bubble preloader */
        .smartsupp-preloader {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, #3a4f8a 0%, #5d8bf4 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 99999;
            animation: float 3s ease-in-out infinite;
        }
        
        .smartsupp-preloader::before {
            content: '';
            width: 44px;
            height: 44px;
            border: 3px solid rgba(255, 255, 255, 0.2);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Enhanced Loan Calculator */
        .loan-calculator-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .loan-summary {
            background-color: rgba(0, 0, 0, 0.3);
            border-radius: var(--border-radius-lg);
            padding: 20px;
        }
        
        .loan-summary-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .loan-summary-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        
        .loan-summary-label {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
        }
        
        .loan-summary-value {
            color: white;
            font-weight: 600;
            font-size: 0.95rem;
        }
        
        .loan-summary-value.highlight {
            color: var(--gold);
            font-size: 1.1rem;
        }
        
        /* Responsive Styles */
        @media (max-width: 1024px) {
            .hero-container, .about-container {
                gap: 30px;
            }
            
            .plans-grid, .steps-container, .testimonials-grid, .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .footer-container {
                grid-template-columns: repeat(2, 1fr);
                gap: 25px;
            }
            
            .loan-calculator-grid {
                grid-template-columns: 1fr;
            }
            
            .pc-menu-toggle {
                display: block;
            }
            
            nav {
                display: none;
            }
        }
        
        @media (max-width: 768px) {
            .mobile-menu-toggle {
                display: block;
            }
            
            .pc-menu-toggle {
                display: none;
            }
            
            nav {
                display: none;
            }
            
            .hero-container, .about-container {
                grid-template-columns: 1fr;
                text-align: center;
            }
            
            .hero-image {
                order: -1;
            }
            
            .about-image {
                order: -1;
            }
            
            .about-features {
                max-width: 500px;
                margin: 25px auto 0;
            }
            
            .plans-grid, .steps-container, .testimonials-grid, .stats-grid {
                grid-template-columns: 1fr;
                max-width: 500px;
                margin: 40px auto 0;
            }
            
            .footer-container {
                grid-template-columns: 1fr;
                gap: 25px;
            }
            
            /* Mobile header */
            .header-container {
                flex-wrap: wrap;
                padding: 10px 15px;
            }
            
            .auth-buttons {
                order: 3;
                width: 100%;
                justify-content: center;
                margin-top: 15px;
                display: none;
            }
            
            .auth-buttons.active {
                display: flex;
            }
            
            .user-balance-container {
                display: none;
            }
            
            .user-balance-container.active {
                display: block;
            }
            
            /* Adjust notification for mobile */
            .notification {
                max-width: 90%;
                font-size: 0.8rem;
                padding: 10px 15px;
            }
        }
        
        @media (max-width: 480px) {
            .hero-section {
                padding: 120px 0 60px;
            }
            
            .hero-content h1, .section-title h2 {
                font-size: 2rem;
            }
            
            .hero-content p {
                font-size: 1rem;
            }
            
            .section-title h2 {
                margin-bottom: 10px;
            }
            
            .section-title p {
                font-size: 0.95rem;
            }
            
            .loan-calculator {
                padding: 25px 15px;
            }
            
            /* Mobile buttons */
            .btn {
                padding: 10px 18px;
                font-size: 0.9rem;
            }
        }


/* ============================================= */
/* ENHANCED PROMOTIONAL BANNER STYLES */
/* ============================================= */

.promo-banner-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(10, 10, 10, 0.92);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    opacity: 0;
    visibility: hidden;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    backdrop-filter: blur(8px);
    padding: 20px;
}

.promo-banner-overlay.active {
    opacity: 1;
    visibility: visible;
}

.promo-banner {
    width: 100%;
    max-width: 480px;
    background: linear-gradient(135deg, #0f1a2b 0%, #1e2d47 50%, #0f1a2b 100%);
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 
        0 25px 50px rgba(0, 0, 0, 0.5),
        0 0 0 1px rgba(255, 255, 255, 0.05),
        0 0 100px rgba(0, 211, 149, 0.1);
    transform: scale(0.9) translateY(20px);
    transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
    border: 1px solid rgba(255, 255, 255, 0.08);
    position: relative;
}

.promo-banner-overlay.active .promo-banner {
    transform: scale(1) translateY(0);
}

/* Premium Header Gradient */
.promo-banner::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, 
        var(--primary) 0%, 
        var(--gold) 25%, 
        var(--purple) 50%, 
        var(--primary) 75%, 
        var(--gold) 100%);
    z-index: 2;
    animation: shimmer 3s ease-in-out infinite;
}

@keyframes shimmer {
    0%, 100% { background-position: -200% 0; }
    50% { background-position: 200% 0; }
}

.promo-header {
    padding: 30px 30px 20px;
    text-align: center;
    background: linear-gradient(135deg, 
        rgba(0, 211, 149, 0.08) 0%, 
        rgba(212, 175, 55, 0.05) 50%, 
        rgba(120, 79, 237, 0.06) 100%);
    position: relative;
    overflow: hidden;
}

.promo-header::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, 
        rgba(255, 255, 255, 0.03) 0%, 
        transparent 70%);
    opacity: 0.6;
    animation: floatBackground 20s linear infinite;
}

@keyframes floatBackground {
    0% { transform: translate(0, 0) rotate(0deg); }
    100% { transform: translate(-50%, -50%) rotate(360deg); }
}

.promo-badge {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: var(--darker);
    padding: 8px 16px;
    border-radius: 50px;
    font-weight: 700;
    font-size: 0.75rem;
    margin-bottom: 20px;
    box-shadow: 0 4px 15px rgba(0, 211, 149, 0.3);
    letter-spacing: 0.5px;
    text-transform: uppercase;
    animation: badgePulse 2s ease-in-out infinite;
}

@keyframes badgePulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
}

.promo-badge i {
    font-size: 0.8rem;
}

.promo-title {
    font-size: 1.8rem;
    font-weight: 700;
    margin-bottom: 12px;
    background: linear-gradient(135deg, #ffffff 0%, var(--primary-light) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    line-height: 1.2;
    font-family: 'Manrope', sans-serif;
    letter-spacing: -0.5px;
}

.promo-subtitle {
    color: rgba(255, 255, 255, 0.8);
    font-size: 0.95rem;
    line-height: 1.5;
    font-weight: 400;
    max-width: 400px;
    margin: 0 auto;
}

.promo-content {
    padding: 25px 30px;
    text-align: center;
}

.promo-media {
    width: 100%;
    height: 180px;
    border-radius: 12px;
    overflow: hidden;
    margin-bottom: 25px;
    position: relative;
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.promo-media img,
.promo-media video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.5s ease;
}

.promo-media:hover img,
.promo-media:hover video {
    transform: scale(1.05);
}

.promo-media::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, 
        rgba(0, 211, 149, 0.1) 0%, 
        rgba(212, 175, 55, 0.05) 100%);
    pointer-events: none;
}

/* Benefits Section */
.promo-benefits {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-bottom: 25px;
    flex-wrap: wrap;
}

.benefit-item {
    display: flex;
    align-items: center;
    gap: 8px;
    background: rgba(255, 255, 255, 0.05);
    padding: 10px 15px;
    border-radius: 10px;
    font-size: 0.8rem;
    color: rgba(255, 255, 255, 0.9);
    border: 1px solid rgba(255, 255, 255, 0.08);
    transition: all 0.3s ease;
}

.benefit-item:hover {
    background: rgba(255, 255, 255, 0.08);
    transform: translateY(-2px);
    border-color: rgba(0, 211, 149, 0.3);
}

.benefit-item i {
    color: var(--primary);
    font-size: 0.9rem;
}

/* Investment Metrics */
.investment-metrics {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
    margin-bottom: 25px;
    padding: 20px;
    background: rgba(255, 255, 255, 0.03);
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.05);
}

.metric {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.metric-value {
    font-size: 1.3rem;
    font-weight: 700;
    color: var(--primary);
    font-family: 'Manrope', sans-serif;
    margin-bottom: 4px;
}

.metric-label {
    font-size: 0.7rem;
    color: rgba(255, 255, 255, 0.6);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* CTA Section */
.cta-section {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-bottom: 20px;
}

.promo-cta-primary {
    width: 100%;
    padding: 16px;
    font-size: 1rem;
    font-weight: 700;
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: var(--darker);
    border: none;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 6px 20px rgba(0, 211, 149, 0.4);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    position: relative;
    overflow: hidden;
}

.promo-cta-primary::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, 
        transparent, 
        rgba(255, 255, 255, 0.2), 
        transparent);
    transition: left 0.5s ease;
}

.promo-cta-primary:hover::before {
    left: 100%;
}

.promo-cta-primary:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 25px rgba(0, 211, 149, 0.6);
}

.promo-cta-secondary {
    width: 100%;
    padding: 14px;
    font-size: 0.9rem;
    font-weight: 600;
    background: transparent;
    color: rgba(255, 255, 255, 0.9);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

.promo-cta-secondary:hover {
    background: rgba(255, 255, 255, 0.05);
    border-color: var(--primary);
    transform: translateY(-2px);
}

/* Trust Indicators */
.trust-indicators {
    display: flex;
    justify-content: center;
    gap: 20px;
    padding-top: 15px;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.trust-item {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 0.75rem;
    color: rgba(255, 255, 255, 0.6);
}

.trust-item i {
    color: var(--success);
    font-size: 0.8rem;
}

/* Close Button */
.promo-close {
    position: absolute;
    top: 15px;
    right: 15px;
    width: 36px;
    height: 36px;
    background: rgba(255, 255, 255, 0.1);
    border: none;
    border-radius: 50%;
    color: rgba(255, 255, 255, 0.7);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    z-index: 10;
    backdrop-filter: blur(10px);
}

.promo-close:hover {
    background: rgba(255, 255, 255, 0.15);
    transform: rotate(90deg);
    color: white;
}

/* Floating Bitcoin Animation */
.floating-bitcoins {
    position: absolute;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1;
}

.bitcoin-coin {
    position: absolute;
    width: 24px;
    height: 24px;
    background: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 100%);
    border-radius: 50%;
    opacity: 0.7;
    animation: floatBitcoin 15s infinite linear;
    box-shadow: 0 0 10px var(--gold);
}

.bitcoin-coin:nth-child(1) { top: 10%; left: 10%; animation-delay: 0s; }
.bitcoin-coin:nth-child(2) { top: 20%; right: 15%; animation-delay: 3s; }
.bitcoin-coin:nth-child(3) { bottom: 30%; left: 20%; animation-delay: 6s; }
.bitcoin-coin:nth-child(4) { bottom: 15%; right: 25%; animation-delay: 9s; }
.bitcoin-coin:nth-child(5) { top: 40%; left: 30%; animation-delay: 12s; }

@keyframes floatBitcoin {
    0% { 
        transform: translateY(0) rotate(0deg) scale(1); 
        opacity: 0.7; 
    }
    25% { 
        transform: translateY(-20px) rotate(90deg) scale(1.1); 
        opacity: 1; 
    }
    50% { 
        transform: translateY(0) rotate(180deg) scale(1); 
        opacity: 0.7; 
    }
    75% { 
        transform: translateY(-10px) rotate(270deg) scale(1.1); 
        opacity: 1; 
    }
    100% { 
        transform: translateY(0) rotate(360deg) scale(1); 
        opacity: 0.7; 
    }
}

/* Text Animation */
.word-animation {
    display: inline-block;
    opacity: 0;
    transform: translateY(20px);
    animation: wordReveal 0.5s ease forwards;
}

@keyframes wordReveal {
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Responsive Design */
@media (max-width: 768px) {
    .promo-banner {
        max-width: 95%;
        margin: 20px;
    }
    
    .promo-header {
        padding: 25px 20px 15px;
    }
    
    .promo-title {
        font-size: 1.5rem;
    }
    
    .promo-subtitle {
        font-size: 0.9rem;
    }
    
    .promo-content {
        padding: 20px;
    }
    
    .promo-media {
        height: 150px;
    }
    
    .investment-metrics {
        grid-template-columns: 1fr;
        gap: 12px;
        padding: 15px;
    }
    
    .promo-benefits {
        gap: 10px;
    }
    
    .benefit-item {
        padding: 8px 12px;
        font-size: 0.75rem;
    }
    
    .trust-indicators {
        flex-direction: column;
        gap: 10px;
    }
}

@media (max-width: 480px) {
    .promo-banner {
        max-width: 100%;
        margin: 10px;
        border-radius: 15px;
    }
    
    .promo-header {
        padding: 20px 15px 12px;
    }
    
    .promo-title {
        font-size: 1.3rem;
    }
    
    .promo-content {
        padding: 15px;
    }
    
    .promo-media {
        height: 120px;
        margin-bottom: 20px;
    }
    
    .cta-section {
        gap: 10px;
    }
    
    .promo-cta-primary,
    .promo-cta-secondary {
        padding: 14px;
    }
}

        
    </style>
</head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <img src="https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1" alt="BitHash Logo" class="loading-logo">    
        <div class="loading-text">Establishing Secure Connection</div>
    </div>

    <!-- Security Badge -->
    <div class="security-badge">
        <i class="fas fa-shield-alt"></i>
        <span>256-bit AES & TLS 1.3 Encrypted</span>
    </div>

    <!-- Critical Error Notification System -->
    <div class="notification-center" id="notification-center">
        <!-- Critical error notifications will be dynamically inserted here -->
    </div>

    <!-- Loan Qualification Popup -->
    <div class="loan-popup" id="loan-popup">
        <div class="loan-popup-header">
            <div class="loan-popup-title">Loan Qualification</div>
            <button class="loan-popup-close" id="loan-popup-close">&times;</button>
        </div>
        <div class="loan-popup-content" id="loan-popup-content">
            <!-- Content will be dynamically inserted here -->
        </div>
        <div class="loan-popup-footer">
            <button class="loan-popup-btn loan-popup-btn-secondary" id="loan-popup-cancel">Cancel</button>
            <button class="loan-popup-btn loan-popup-btn-primary" id="loan-popup-apply">Apply Now</button>
        </div>
    </div>

    <!-- Enhanced Header - Smaller and Neater -->
    <header id="main-header">
        <div class="container header-container">
            <div class="logo" onclick="window.location.href='index.html'">
                <img src="https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1" alt="BitHash Logo" class="loading-logo">    
                <span class="logo-text">
                    <span class="bitcoin-animation"></span>itHash
                </span>
            </div>
            
            <button class="mobile-menu-toggle" id="mobile-menu-toggle" aria-label="Toggle navigation">
                <i class="fas fa-bars"></i>
            </button>
            
            <button class="pc-menu-toggle" id="pc-menu-toggle" aria-label="Toggle navigation">
                <i class="fas fa-ellipsis-v"></i>
            </button>
            
            <div class="mobile-menu-dropdown" id="mobile-menu-dropdown">
                <ul>
                    <li><a href="#plans">Investment Plans</a></li>
                    <li><a href="#how-it-works">How It Works</a></li>
                    <li><a href="dashboard.html">Dashboard</a></li>
                    <li><a href="accountsetting.html">Settings</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </div>
            
            <div class="pc-menu-dropdown" id="pc-menu-dropdown">
                <ul>
                    <li><a href="#plans">Investment Plans</a></li>
                    <li><a href="#how-it-works">How It Works</a></li>
                    <li><a href="dashboard.html">Dashboard</a></li>
                    <li><a href="accountsetting.html">Settings</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </div>
            
            <nav id="main-nav">
                <ul>
                    <li><a href="#plans">Investment Plans</a></li>
                    <li><a href="#how-it-works">How It Works</a></li>
                    <li><a href="dashboard.html">Dashboard</a></li>
                    <li><a href="accountsetting.html">Settings</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </nav>
            
            <div class="auth-buttons" id="auth-buttons">
                <button class="btn btn-outline" onclick="window.location.href='login.html'">Login</button>
                <button class="btn btn-primary" onclick="window.location.href='signup.html'">Sign Up</button>
            </div>
        </div>
    </header>

    <!-- Enhanced User Balance Container - Shows Both Balances -->
    <div class="user-balance-container" id="user-balance-container">
        <div class="container">
            <div class="user-balances">
                <div class="user-balance" id="main-balance" onclick="redirectToDashboard()">
                    <i class="fas fa-wallet"></i>
                    <span id="main-balance-amount">Main: $0.00</span>
                </div>
                <div class="user-balance" id="matured-balance" onclick="redirectToDashboard()">
                    <i class="fas fa-piggy-bank"></i>
                    <span id="matured-balance-amount">Matured: $0.00</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Hero Section -->
    <section class="hero-section" id="home">
        <div class="container">
            <div class="hero-container">
                <div class="hero-content" data-aos="fade-right">
                    <h1><span class="bitcoin-animation"></span>itcoin Mining Powered  <span>by Efficiency and Scale</span></h1>
                    <p>Join BitHash and access SHA-256 ASIC miners operating across energy-efficient data centers.
                    Investments are tied directly to live mining units, with payouts based on verified output and distributed per your selected plan.</p>
                    
                    <div class="hero-buttons">
                        <button class="btn btn-primary" onclick="window.location.href='signup.html'">Get Started</button>
                        <button class="btn btn-outline" onclick="window.location.href='#plans'">View Plans</button>
                    </div>
                    
                    <!-- Security Indicators -->
                    <div class="security-indicator">
                        <i class="fas fa-lock"></i>
                        <span>256-bit AES Encryption</span>
                    </div>
                    <div class="security-indicator">
                        <i class="fas fa-shield-alt"></i>
                        <span>Multi-Signature Wallets</span>
                    </div>
                    <div class="security-indicator">
                        <i class="fas fa-user-shield"></i>
                        <span>SOC 2 Type II Certified</span>
                    </div>
                </div>
                <div class="hero-image" data-aos="fade-left">
                    <div class="btc-price-container">
                        <div class="btc-price-header">
                            <i class="fab fa-bitcoin"></i>
                            <h3>Bitcoin Price</h3>
                        </div>
                        <div class="btc-price-display">
                            <div class="btc-price-main">
                                <span class="btc-price" id="btc-price">$0.00</span>
                                <span class="btc-change" id="btc-change">0.00%</span>
                            </div>
                            <div class="btc-price-details">
                                <div class="btc-price-detail">
                                    <span>24h High</span>
                                    <span id="btc-high">$0.00</span>
                                </div>
                                <div class="btc-price-detail">
                                    <span>24h Low</span>
                                    <span id="btc-low">$0.00</span>
                                </div>
                                <div class="btc-price-detail">
                                    <span>24h Volume</span>
                                    <span id="btc-volume">0 BTC</span>
                                </div>
                            </div>
                        </div>
                        <div class="btc-price-footer">
                            <span>Real-time prices from <span class="bitcoin-animation"></span>itHash LCC</span>
                        </div>
                    </div> 
                </div>
            </div>
        </div>
    </section>

    <section class="stats-section">
        <div class="container">
            <div class="section-title" data-aos="fade-up">
                <h2>Live Operational Stats</h2>
                <p>Live metrics from BitHash operations across all active data centers worldwide.</p>
            </div>
            
            <div class="stats-grid" id="stats-container">
                <div class="stat-card" data-aos="fade-up" data-aos-delay="100">
                    <div class="stat-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-number" id="total-investors">0</div>
                    <div class="stat-label">
                        Total Active Investors
                        <span id="investors-change"></span>
                    </div>
                </div>
                
                <div class="stat-card" data-aos="fade-up" data-aos-delay="200">
                    <div class="stat-icon">
                        <i class="fas fa-coins"></i>
                    </div>
                    <div class="stat-number" id="total-invested">$0</div>
                    <div class="stat-label">
                        24-Hour Investment Volume
                        <span id="invested-change"></span>
                    </div>
                </div>
                
                <div class="stat-card" data-aos="fade-up" data-aos-delay="300">
                    <div class="stat-icon">
                        <i class="fas fa-hand-holding-usd"></i>
                    </div>
                    <div class="stat-number" id="total-withdrawals">$0</div>
                    <div class="stat-label">
                        24-Hour Withdrawals Processed
                        <span id="withdrawals-change"></span>
                    </div>
                </div>
                
                <div class="stat-card" data-aos="fade-up" data-aos-delay="400">
                    <div class="stat-icon">
                        <i class="fas fa-piggy-bank"></i>
                    </div>
                    <div class="stat-number" id="total-loans">$0</div>
                    <div class="stat-label">
                        24-Hour Loan Disbursements
                        <span id="loans-change"></span>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- About Section -->
    <section class="about-section" id="about">
        <div class="container">
            <div class="section-title" data-aos="fade-up">
                <h2>Why Choose BitHash?</h2>
                <p>BitHash connects you to high efficiency Bitcoin mining systems, with real-time performance tracking and secure, automated payouts.</p>
            </div>
            
            <div class="about-container">
                <div class="about-image" data-aos="fade-right">
                    <img src="https://www.dropbox.com/scl/fi/0qn1054f0y3d3dzvn9w5h/WhatsApp-Image-2025-07-19-at-17.16.42_679cc7d5.jpg?rlkey=la1zhkgazqsoh182cn67wtc19&raw=1" alt="BitHash Mining Facility">
                </div>
                <div class="about-content" data-aos="fade-left">
                    <h3>Professional Mining Infrastructure</h3>
                    <p>BitHash runs a globally distributed Bitcoin mining network with data centers strategically located across North America, Europe, and Asia for optimal energy efficiency and uptime.</p>
                    <p>Our facilities deploy next-generation SHA-256 ASIC miners with advanced thermal management, including liquid cooling, to deliver sustained high hash rates beyond the reach of individual setups.</p>
                    
                    <div class="about-features">
                        <div class="about-feature">
                            <div class="about-feature-icon">
                                <i class="fas fa-bolt"></i>
                            </div>
                            <div class="about-feature-text">
                                <h4>Renewable Energy</h4>
                                <p>85% of our energy comes from sustainable sources, reducing environmental impact.</p>
                            </div>
                        </div>
                        <div class="about-feature">
                            <div class="about-feature-icon">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <div class="about-feature-text">
                                <h4>High-Level Security</h4>
                                <p>Biometric access controls and 24/7 monitoring protect our facilities.</p>
                            </div>
                        </div>
                        <div class="about-feature">
                            <div class="about-feature-icon">
                                <i class="fas fa-network-wired"></i>
                            </div>
                            <div class="about-feature-text">
                                <h4>99.99% Uptime</h4>
                                <p>Redundant network connections ensure continuous mining operations.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Plans Section -->
    <section class="plans-section" id="plans">
        <div class="container">
            <div class="section-title" data-aos="fade-up">
                <h2>BTC Mining Contract Ledger</h2>
                <p>Each plan operates under a distinct contract hash, tied to live ASIC miner deployments. Metrics such as hash rate, block height, and earnings distribution are logged and verifiable through the blockchain ledger.</p>
                <div id="balance-display" style="display: none; margin-top: 15px;">
                    <span style="color: var(--primary); font-weight: 600;">Your Balances: </span>
                    <span id="current-balance">Main: $0.00 | Matured: $0.00</span>
                </div>
            </div>
            
            <div class="plans-grid" id="plans-container">
                <!-- Plans will be dynamically loaded here -->
            </div>
        </div>
    </section>

    <!-- Investment Modal - FIXED SCROLLING ISSUE -->
    <div class="investment-modal" id="investment-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-plan-name">Investment Plan</h3>
                <button class="modal-close" id="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="plan-details">
                    <div class="detail-row">
                        <span class="detail-label">Plan Return:</span>
                        <span class="detail-value" id="modal-plan-return">0%</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Duration:</span>
                        <span class="detail-value" id="modal-plan-duration">0 hours</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Minimum:</span>
                        <span class="detail-value" id="modal-plan-min">$0</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Maximum:</span>
                        <span class="detail-value" id="modal-plan-max">$0</span>
                    </div>
                </div>
                
                <div class="investment-form">
                    <!-- Balance Selector -->
                    <div class="form-group">
                        <label for="balance-type">Select Balance to Use</label>
                        <div class="balance-selector" id="balance-selector">
                            <div class="balance-option" data-balance="main">
                                <div class="balance-info">
                                    <i class="fas fa-wallet"></i>
                                    <div class="balance-details">
                                        <span class="balance-name">Main Balance</span>
                                        <span class="balance-amount" id="modal-main-balance-amount">$0.00</span>
                                    </div>
                                </div>
                                <div class="balance-radio"></div>
                            </div>
                            <div class="balance-option" data-balance="matured">
                                <div class="balance-info">
                                    <i class="fas fa-piggy-bank"></i>
                                    <div class="balance-details">
                                        <span class="balance-name">Matured Balance</span>
                                        <span class="balance-amount" id="modal-matured-balance-amount">$0.00</span>
                                    </div>
                                </div>
                                <div class="balance-radio"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Fee Information -->
                    <div class="fee-info">
                        <i class="fas fa-info-circle"></i>
                        <span>A 3% investment fee will be deducted from your selected balance before the investment is processed.</span>
                    </div>
                    
                    <div class="form-group">
                        <label for="investment-amount">Investment Amount ($)</label>
                        <input type="number" id="investment-amount" class="form-control" placeholder="Enter amount">
                        <div class="amount-error" id="amount-error"></div>
                    </div>
                    
                    <div class="expected-return">
                        <span>Expected Return (after 3% fee):</span>
                        <span id="expected-return">$0.00</span>
                    </div>
                    
                    <button class="btn btn-primary" id="confirm-investment">Confirm Investment</button>
                    <div class="investment-status" id="investment-status"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- How It Works Section -->
    <section class="how-it-works-section" id="how-it-works">
        <div class="container">
            <div class="section-title" data-aos="fade-up">
                <h2>How BitHash Works</h2>
                <p>Our streamlined process makes Bitcoin mining accessible to everyone</p>
            </div>
            
            <div class="steps-container">
                <div class="step-card" data-aos="fade-up" data-aos-delay="100">
                    <div class="step-number">1</div>
                    <h3>Create Account</h3>
                    <p>Register in minutes with our secure onboarding process. No technical knowledge required.</p>
                </div>
                <div class="step-card" data-aos="fade-up" data-aos-delay="200">
                    <div class="step-number">2</div>
                    <h3>Choose Plan</h3>
                    <p>Select an investment plan that matches your goals and deposit funds securely.</p>
                </div>
                <div class="step-card" data-aos="fade-up" data-aos-delay="300">
                    <div class="step-number">3</div>
                    <h3>Start Earning</h3>
                    <p>Watch your investment grow with daily updates. Withdraw profits anytime.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Mining Video Section -->
    <section class="mining-video-section">
        <div class="container">
            <div class="section-title" data-aos="fade-up">
                <h2>Real-Time Crypto Mining Operations</h2>
                <p>Our 24/7 Bitcoin mining hubs equipped with high efficiency ASIC rigs and live performance monitoring</p>
            </div>
            
            <div class="video-container" data-aos="fade-up">
                <video autoplay loop muted playsinline disablePictureInPicture disableRemotePlayback>
                    <source src="https://www.dropbox.com/scl/fi/2ln68i04x0ep95aisvtnz/Cryptocurrency-Bitcoins-mining-in-4K-UHD-flat-animation-1.mp4?rlkey=vpsim9qc57886qu8dppx9npax&raw=1" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <div class="video-overlay"></div>
            </div>
        </div>
    </section>

    <!-- Loans Section -->
    <section class="loans-section" id="loans">
        <div class="container">
            <div class="section-title" data-aos="fade-up">
                <h2><span class="bitcoin-animation"></span>itHash Loans</h2>
                <p>We now qualify borrowers based on their transaction history. Build your creditworthiness through consistent activity.</p>
            </div>
            
            <div class="loan-calculator" data-aos="fade-up">
                <h3>Loan Eligibility Calculator</h3>
                <div class="loan-calculator-grid">
                    <div class="form-group">
                        <label for="loan-amount" class="form-label">Desired Loan Amount</label>
                        <input type="number" id="loan-amount-input" class="form-control" placeholder="Enter amount in USD" min="1000">
                    </div>
                    <div class="form-group">
                        <label for="loan-term" class="form-label">Loan Term (months)</label>
                        <select id="loan-term" class="form-control">
                            <option value="3">3 Months</option>
                            <option value="6">6 Months</option>
                            <option value="12" selected>12 Months</option>
                            <option value="24">24 Months</option>
                        </select>
                    </div>
                </div>
                
                <div class="loan-summary">
                    <div class="loan-summary-item">
                        <span class="loan-summary-label">Estimated Monthly Payment:</span>
                        <span class="loan-summary-value" id="monthly-payment">$0.00</span>
                    </div>
                    <div class="loan-summary-item">
                        <span class="loan-summary-label">Monthly Interest Rate:</span>
                        <span class="loan-summary-value">9.99%</span>
                    </div>
                    <div class="loan-summary-item">
                        <span class="loan-summary-label">Total Repayment:</span>
                        <span class="loan-summary-value highlight" id="total-repayment">$0.00</span>
                    </div>
                </div>
                
                <button class="btn btn-primary" style="width: 100%;" onclick="checkLoanEligibility()">Check Eligibility</button>
                
                <div style="margin-top: 25px; padding: 15px; background-color: rgba(0, 0, 0, 0.3); border-radius: var(--border-radius);">
                    <h4 style="margin-bottom: 12px; font-size: 1.1rem;">How Our Loans Work</h4>
                    <p style="color: rgba(255, 255, 255, 0.8); font-size: 0.9rem; line-height: 1.6;">
                        Your loan eligibility is algorithmically assessed based on your historical account activity with BitHash. We evaluate factors such as deposit behavior, investment consistency, and overall platform engagement to calculate creditworthiness. The minimum loan amount is $1,000, with a fixed monthly interest rate of 9.99%.
                    </p>
                    <p style="color: rgba(255, 255, 255, 0.8); font-size: 0.9rem; line-height: 1.6; margin-top: 10px;">
                        <strong>Note:</strong> Loan approval is subject to verification of your transaction history and requires at least 3 months of consistent activity with BitHash.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- BTC News Section -->
    <section class="btc-news-section" id="news">
        <div class="container">
            <div class="section-title" data-aos="fade-up">
                <h2>Latest Bitcoin News</h2>
                <p>Stay updated with the latest developments in Bitcoin and cryptocurrency mining</p>
            </div>
            
            <div class="news-grid" id="news-container">
                <!-- News cards will be dynamically loaded here -->
                <div class="news-loading">
                    <div class="loading-spinner"></div>
                    <p>Loading latest Bitcoin news...</p>
                </div>
            </div>
            
            <div class="news-navigation">
                <button class="btn btn-outline" id="prev-news" disabled>Previous</button>
                <span id="news-page-info">Page 1</span>
                <button class="btn btn-outline" id="next-news">Next</button>
            </div>
        </div>
    </section>

    <!-- News Modal -->
    <div class="news-modal" id="news-modal">
        <div class="news-modal-content">
            <button class="news-modal-close" id="news-modal-close">&times;</button>
            <div class="news-modal-header">
                <img id="news-modal-image" src="" alt="News Image">
                <div class="news-modal-header-text">
                    <h3 id="news-modal-title"></h3>
                    <div class="news-modal-meta">
                        <span id="news-modal-source"></span>
                        <span id="news-modal-date"></span>
                    </div>
                </div>
            </div>
            <div class="news-modal-body">
                <p id="news-modal-description"></p>
                <a href="#" target="_blank" id="news-modal-link" class="btn btn-primary">Read Full Article</a>
            </div>
        </div>
    </div>
    
    <!-- CTA Section -->
    <section class="cta-section">
        <div class="container">
            <div class="cta-container" data-aos="fade-up">
                <h2>Ready to Start Mining Bitcoin?</h2>
                <p>Start with as little as $30 and begin earning today.</p>
                <button class="btn btn-gold" onclick="window.location.href='signup.html'">Get Started Now</button>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer id="contact">
        <div class="container">
            <div class="footer-container">
                <div class="footer-about">
                    <div class="footer-logo">
                        <img src="https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1" alt="BitHash Logo" class="loading-logo">    
                        <span class="footer-logo-text"><span class="bitcoin-animation"></span>itHash</span>
                    </div>
                    <p>Bitcoin mining platform serving investors worldwide with transparent operations and reliable returns.</p>
                    <div class="footer-social">
                        <!-- Social Share Buttons -->
                        <a href="https://twitter.com/intent/tweet?url=https://bithhash.vercel.app/&text=Check%20out%20this%20Bitcoin%20mining%20platform!" 
                           class="social-icon twitter" aria-label="Twitter" target="_blank" rel="noopener">
                           <i class="fab fa-twitter"></i>
                        </a>
                        <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://bithhash.vercel.app/" 
                           class="social-icon linkedin" aria-label="LinkedIn" target="_blank" rel="noopener">
                           <i class="fab fa-linkedin-in"></i>
                        </a>
                        <a href="https://www.facebook.com/sharer/sharer.php?u=https://bithhash.vercel.app/" 
                           class="social-icon facebook" aria-label="Facebook" target="_blank" rel="noopener">
                           <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="https://www.instagram.com" 
                           class="social-icon instagram" aria-label="Instagram" target="_blank" rel="noopener" 
                           onclick="alert('Instagram does not support direct sharing via links. Please share manually.'); return false;">
                           <i class="fab fa-instagram"></i>
                        </a>
                    </div>
                </div>
                
                <div class="footer-links">
                    <h3 class="footer-title">Platform</h3>
                    <ul>
                        <li><a href="#home">Dashboard</a></li>
                        <li><a href="#plans">Investment Plans</a></li>
                        <li><a href="#loans">Loans</a></li>
                        <li><a href="dashboard.html">My Account</a></li>
                        <li><a href="rewards.html">Rewards</a></li>
                    </ul>
                </div>
                
                <div class="footer-links">
                    <h3 class="footer-title">Company</h3>
                    <ul>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="careers.html">Careers</a></li>
                        <li><a href="press.html">Press</a></li>
                        <li><a href="blog.html">Blog</a></li>
                        <li><a href="partners.html">Partners</a></li>
                    </ul>
                </div>
                
                <div class="footer-contact">
                    <h3 class="footer-title">Contact Us</h3>
                    <p><i class="fas fa-envelope"></i> support@bithash.com</p>
                    <p><i class="fas fa-phone"></i> +1 606-363-2032</p>
                    <p><i class="fas fa-map-marker-alt"></i> 800 Plant St, Wilmington, DE 19801, United States</p>
                    <p><i class="fas fa-clock"></i> 24/7 Support</p>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; <span id="current-year"></span> BitHash LLC. All Rights Reserved. Registered in Delaware, USA. FINRA/SIPC Member.</p>
            </div>
        </div>
    </footer>



<!-- Enhanced Promotional Banner -->
<div class="promo-banner-overlay" id="promo-banner-overlay">
    <div class="promo-banner" id="promo-banner">
        <button class="promo-close" id="promo-close" aria-label="Close promotional banner">
            <i class="fas fa-times"></i>
        </button>
        
        <!-- Floating Bitcoin Elements -->
        <div class="floating-bitcoins">
            <div class="bitcoin-coin"></div>
            <div class="bitcoin-coin"></div>
            <div class="bitcoin-coin"></div>
            <div class="bitcoin-coin"></div>
            <div class="bitcoin-coin"></div>
        </div>
        
        <!-- Banner Header -->
        <div class="promo-header">
            <div class="promo-badge">
                <i class="fas fa-chart-line"></i>
                <span>INVESTOR OPPORTUNITY</span>
            </div>
            <h1 class="promo-title" id="promo-title"></h1>
            <p class="promo-subtitle" id="promo-subtitle"></p>
        </div>
        
        <!-- Banner Content -->
        <div class="promo-content">
            <div class="promo-media" id="promo-media">
                <!-- Dynamic media content -->
            </div>
            
            <!-- Key Benefits -->
            <div class="promo-benefits">
                <div class="benefit-item">
                    <i class="fas fa-shield-alt"></i>
                    <span>Enterprise Security</span>
                </div>
                <div class="benefit-item">
                    <i class="fas fa-rocket"></i>
                    <span>Scalable Returns</span>
                </div>
                <div class="benefit-item">
                    <i class="fas fa-chart-pie"></i>
                    <span>Portfolio Growth</span>
                </div>
            </div>
            
            <!-- Investment Metrics -->
            <div class="investment-metrics">
                <div class="metric">
                    <span class="metric-value" id="metric-roi">15.8%</span>
                    <span class="metric-label">Avg. ROI</span>
                </div>
                <div class="metric">
                    <span class="metric-value" id="metric-investors">2,847</span>
                    <span class="metric-label">Active Investors</span>
                </div>
                <div class="metric">
                    <span class="metric-value" id="metric-uptime">99.97%</span>
                    <span class="metric-label">Platform Uptime</span>
                </div>
            </div>
            
            <!-- CTA Section -->
            <div class="cta-section">
                <button class="promo-cta-primary" id="promo-cta-primary">
                    <i class="fas fa-gem"></i>
                    <span id="cta-primary-text">Access Premium Investment</span>
                </button>
                <button class="promo-cta-secondary" id="promo-cta-secondary">
                    <span>View Investor Portfolio</span>
                    <i class="fas fa-arrow-right"></i>
                </button>
            </div>
            
            <!-- Trust Indicators -->
            <div class="trust-indicators">
                <div class="trust-item">
                    <i class="fas fa-check-circle"></i>
                    <span>FINRA/SIPC Member</span>
                </div>
                <div class="trust-item">
                    <i class="fas fa-check-circle"></i>
                    <span>256-bit AES Encryption</span>
                </div>
            </div>
        </div>
    </div>
</div>
    

    <!-- AOS Animation -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Smartsupp Live Chat script -->
    <script type="text/javascript">
        var _smartsupp = _smartsupp || {};
        _smartsupp.key = '164ffa4b3acec94eb79a39bad2033ab6eb10f487';
        window.smartsupp||(function(d) {
            var s,c,o=smartsupp=function(){ o._.push(arguments)};o._=[];
            s=d.getElementsByTagName('script')[0];c=d.createElement('script');
            c.type='text/javascript';c.charset='utf-8';c.async=true;
            c.src='https://www.smartsuppchat.com/loader.js?';s.parentNode.insertBefore(c,s);
        })(document);
    </script>
    <noscript> Powered by <a href=https://www.smartsupp.com target=_blank>Smartsupp</a></noscript>

<script>
    // Initialize AOS animation
    AOS.init({
        duration: 800,
        once: true,
        easing: 'ease-in-out'
    });
    
    // Hide loading overlay when page is loaded
    window.addEventListener('load', function() {
        setTimeout(function() {
            document.getElementById('loading-overlay').classList.add('hidden');
        }, 1000);
        
        // Load all dynamic data from backend
        loadStatsData();
        loadPlansData();
        checkAuthState();
        
        // Initialize video autoplay
        const video = document.querySelector('video');
        if (video) {
            video.setAttribute('autoplay', '');
            video.setAttribute('loop', '');
            video.setAttribute('muted', '');
            video.setAttribute('playsinline', '');
            
            // Prevent right-click menu on video
            video.addEventListener('contextmenu', function(e) {
                e.preventDefault();
            });
            
            // Ensure video plays even if autoplay is blocked
            const playVideo = () => {
                video.play().catch(error => {
                    console.log('Video autoplay prevented:', error);
                });
            };
            
            // Try to play when page loads
            playVideo();
            
            // Try to play when user interacts with page
            document.addEventListener('click', playVideo, { once: true });
            document.addEventListener('scroll', playVideo, { once: true });
        }
    });
    
    // Set current year in footer
    document.getElementById('current-year').textContent = new Date().getFullYear();
    
    // Mobile menu toggle functionality
    const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
    const mobileMenuDropdown = document.getElementById('mobile-menu-dropdown');
    
    mobileMenuToggle.addEventListener('click', function() {
        mobileMenuDropdown.classList.toggle('active');
        this.innerHTML = mobileMenuDropdown.classList.contains('active') ? 
            '<i class="fas fa-times"></i>' : '<i class="fas fa-bars"></i>';
        this.setAttribute('aria-expanded', mobileMenuDropdown.classList.contains('active'));
    });
    
    // PC menu toggle functionality
    const pcMenuToggle = document.getElementById('pc-menu-toggle');
    const pcMenuDropdown = document.getElementById('pc-menu-dropdown');
    
    pcMenuToggle.addEventListener('click', function() {
        pcMenuDropdown.classList.toggle('active');
        this.setAttribute('aria-expanded', pcMenuDropdown.classList.contains('active'));
    });
    
    // Close menus when clicking outside
    document.addEventListener('click', function(event) {
        if (!mobileMenuToggle.contains(event.target)) {
            mobileMenuDropdown.classList.remove('active');
            mobileMenuToggle.innerHTML = '<i class="fas fa-bars"></i>';
            mobileMenuToggle.setAttribute('aria-expanded', 'false');
        }
        
        if (!pcMenuToggle.contains(event.target)) {
            pcMenuDropdown.classList.remove('active');
            pcMenuToggle.setAttribute('aria-expanded', 'false');
        }
    });
    
    /* ============================================= */
    /* Critical Error Notification System */
    /* ============================================= */
    
    // Notification queue to manage multiple notifications
    const notificationQueue = [];
    let isNotificationShowing = false;
    
    /**
     * Show a notification in the top right corner
     * @param {string} type - 'error' or 'success'
     * @param {string} title - Notification title
     * @param {string} message - Notification message
     * @param {number} duration - Time in ms to show the notification (0 for persistent)
     */
    function showNotification(type, title, message, duration = 5000) {
        // Add to queue
        notificationQueue.push({ type, title, message, duration });
        
        // Process queue if not already showing a notification
        if (!isNotificationShowing) {
            processNotificationQueue();
        }
    }
    
    function processNotificationQueue() {
        if (notificationQueue.length === 0) {
            isNotificationShowing = false;
            return;
        }
        
        isNotificationShowing = true;
        const { type, title, message, duration } = notificationQueue.shift();
        
        // Create notification element
        const notification = document.createElement('div');
        notification.className = `notification ${type}`;
        
        const icon = type === 'error' ? 'fa-exclamation-circle' : 
                    type === 'warning' ? 'fa-exclamation-triangle' : 'fa-check-circle';
        
        notification.innerHTML = `
            <i class="fas ${icon}"></i>
            <div class="notification-content">
                <div class="notification-title">${title}</div>
                <div class="notification-message">${message}</div>
            </div>
            <div class="notification-close">&times;</div>
        `;
        
        // Add to notification center
        const notificationCenter = document.getElementById('notification-center');
        notificationCenter.appendChild(notification);
        
        // Force reflow to enable animation
        void notification.offsetWidth;
        
        // Show notification
        notification.classList.add('show');
        
        // Add vibration for mobile devices on error
        if (type === 'error' && 'vibrate' in navigator) {
            navigator.vibrate([200, 100, 200]);
        }
        
        // Close button functionality
        notification.querySelector('.notification-close').addEventListener('click', () => {
            closeNotification(notification);
        });
        
        // Auto-hide after duration if not persistent
        if (duration > 0) {
            setTimeout(() => {
                if (notification.parentNode) {
                    closeNotification(notification);
                }
            }, duration);
        }
    }
    
    function closeNotification(notification) {
        notification.classList.remove('show');
        
        // Remove after animation completes
        setTimeout(() => {
            if (notification.parentNode) {
                notification.parentNode.removeChild(notification);
            }
            
            // Process next notification in queue
            processNotificationQueue();
        }, 400);
    }

    // Fetch Bitcoin price from CoinGecko API
    async function fetchBitcoinPrice() {
        try {
            const response = await fetch('https://api.coingecko.com/api/v3/coins/bitcoin?localization=false&tickers=false&market_data=true&community_data=false&developer_data=false&sparkline=false');
            
            if (!response.ok) {
                throw new Error('Failed to fetch Bitcoin price');
            }
            
            const data = await response.json();
            return data.market_data;
        } catch (error) {
            console.error('Error fetching Bitcoin price:', error);
            // Fallback to CoinGecko's simple price API if detailed fails
            return fetchSimpleBitcoinPrice();
        }
    }

    // Fallback API call if main API fails
    async function fetchSimpleBitcoinPrice() {
        try {
            const response = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd&include_24hr_change=true');
            
            if (!response.ok) {
                throw new Error('Failed to fetch simple Bitcoin price');
            }
            
            const data = await response.json();
            return {
                current_price: { usd: data.bitcoin.usd },
                price_change_percentage_24h: data.bitcoin.usd_24h_change,
                high_24h: { usd: data.bitcoin.usd * 1.05 }, // Approximate since simple API doesn't provide
                low_24h: { usd: data.bitcoin.usd * 0.95 }, // Approximate since simple API doesn't provide
                total_volume: { btc: 0 } // Not available in simple API
            };
        } catch (error) {
            console.error('Error fetching simple Bitcoin price:', error);
            return null;
        }
    }

    // Update Bitcoin price display
    function updateBitcoinPriceDisplay(marketData) {
        if (!marketData) {
            showNotification('error', 'Price Error', 'Failed to load Bitcoin price data');
            return;
        }

        const currentPrice = marketData.current_price.usd;
        const priceChange = marketData.price_change_percentage_24h;
        const high24h = marketData.high_24h.usd;
        const low24h = marketData.low_24h.usd;
        const volume24h = marketData.total_volume.btc;

        // Format numbers
        const formatCurrency = num => '$' + num.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
        const formatPercentage = num => num.toFixed(2) + '%';
        const formatVolume = num => num.toLocaleString('en-US', { maximumFractionDigits: 2 }) + ' BTC';

        // Update DOM elements
        document.getElementById('btc-price').textContent = formatCurrency(currentPrice);
        
        const changeElement = document.getElementById('btc-change');
        changeElement.textContent = formatPercentage(priceChange);
        changeElement.className = priceChange >= 0 ? 'btc-change positive' : 'btc-change negative';
        
        document.getElementById('btc-high').textContent = formatCurrency(high24h);
        document.getElementById('btc-low').textContent = formatCurrency(low24h);
        document.getElementById('btc-volume').textContent = formatVolume(volume24h);
    }

    // Initialize Bitcoin price updates
    async function initBitcoinPriceUpdates() {
        // First load
        const marketData = await fetchBitcoinPrice();
        updateBitcoinPriceDisplay(marketData);
        
        // Update every 60 seconds
        setInterval(async () => {
            const marketData = await fetchBitcoinPrice();
            updateBitcoinPriceDisplay(marketData);
        }, 60000);
    }

    // Start Bitcoin price updates when page loads
    document.addEventListener('DOMContentLoaded', initBitcoinPriceUpdates);
    
    // Enhanced stats loading with real-time updates and animations
    async function loadStatsData() {
        try {
            const response = await fetch('https://website-backendd-1.onrender.com/api/stats');
            if (response.ok) {
                const data = await response.json();
                
                // Format numbers with commas and animate changes
                animateNumberChange('total-investors', data.totalInvestors, 0);
                animateNumberChange('total-invested', data.totalInvested, 2);
                animateNumberChange('total-withdrawals', data.totalWithdrawals, 2);
                animateNumberChange('total-loans', data.totalLoans, 2);
                
                // Update change indicators
                updateChangeIndicator('investors-change', data.changeRates.investors);
                updateChangeIndicator('invested-change', data.changeRates.invested);
                updateChangeIndicator('withdrawals-change', data.changeRates.withdrawals);
                updateChangeIndicator('loans-change', data.changeRates.loans);
                
                // Schedule next update (every 5 seconds)
                setTimeout(loadStatsData, 5000);
            } else {
                console.error('Failed to load stats data');
                showNotification('error', 'Backend Error', 'Failed to load statistics data. Please try again later.');
                // Retry after 30 seconds if error
                setTimeout(loadStatsData, 30000);
            }
        } catch (error) {
            console.error('Error loading stats data:', error);
            showNotification('error', 'Connection Error', 'Failed to connect to statistics service. Please check your connection.');
            // Retry after 30 seconds if error
            setTimeout(loadStatsData, 30000);
        }
    }

    // Animate number changes
    function animateNumberChange(elementId, targetValue, decimals) {
        const element = document.getElementById(elementId);
        if (!element) return; // FIX: Check if element exists before trying to update it
        
        const currentValue = parseFloat(element.textContent.replace(/,/g, '') || '0');
        const duration = 1000; // Animation duration in ms
        const startTime = performance.now();
        
        const formatNumber = (num) => {
            if (decimals === 0) {
                return num.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ",");
            }
            return num.toFixed(decimals).replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        };

        function updateNumber(currentTime) {
            const elapsed = currentTime - startTime;
            const progress = Math.min(elapsed / duration, 1);
            const value = currentValue + (targetValue - currentValue) * progress;
            
            element.textContent = formatNumber(value);
            
            if (progress < 1) {
                requestAnimationFrame(updateNumber);
            } else {
                element.textContent = formatNumber(targetValue);
            }
        }
        
        requestAnimationFrame(updateNumber);
    }

    // Update change indicators with arrows
    function updateChangeIndicator(elementId, changeRate) {
        const element = document.getElementById(elementId);
        if (!element) return; // FIX: Check if element exists before trying to update it
        
        element.innerHTML = '';
        
        const arrow = document.createElement('span');
        arrow.style.marginLeft = '5px';
        arrow.style.fontSize = '0.8em';
        
        if (changeRate > 0) {
            arrow.innerHTML = `<i class="fas fa-arrow-up" style="color: var(--success);"></i> ${Math.abs(changeRate)}%`;
        } else if (changeRate < 0) {
            arrow.innerHTML = `<i class="fas fa-arrow-down" style="color: var(--error);"></i> ${Math.abs(changeRate)}%`;
        } else {
            arrow.innerHTML = `<i class="fas fa-minus" style="color: var(--gray);"></i> 0%`;
        }
        
        element.appendChild(arrow);
    }

    // BTC News functionality
    let currentNewsPage = 1;
    const newsPerPage = 3;
    let allNewsData = [];

    // DOM elements
    const newsContainer = document.getElementById('news-container');
    const prevNewsBtn = document.getElementById('prev-news');
    const nextNewsBtn = document.getElementById('next-news');
    const newsPageInfo = document.getElementById('news-page-info');
    const newsModal = document.getElementById('news-modal');
    const newsModalClose = document.getElementById('news-modal-close');

    // Fetch BTC news from backend
    async function fetchBTCNews() {
        try {
            newsContainer.innerHTML = `
                <div class="news-loading">
                    <div class="loading-spinner"></div>
                    <p>Loading latest Bitcoin news...</p>
                </div>
            `;
            
            const response = await fetch('https://website-backendd-1.onrender.com/api/btc-news');
            if (response.ok) {
                const data = await response.json();
                allNewsData = data.data || [];
                renderNews();
            } else {
                throw new Error('Failed to fetch news');
            }
        } catch (error) {
            console.error('Error fetching BTC news:', error);
            newsContainer.innerHTML = `
                <div class="news-loading">
                    <i class="fas fa-exclamation-triangle" style="font-size: 2rem; color: var(--error); margin-bottom: 15px;"></i>
                    <p>Failed to load news. Please try again later.</p>
                    <button class="btn btn-outline" onclick="fetchBTCNews()" style="margin-top: 15px;">Retry</button>
                </div>
            `;
        }
    }

    // Render news based on current page
    function renderNews() {
        if (allNewsData.length === 0) {
            newsContainer.innerHTML = `
                <div class="news-loading">
                    <i class="fas fa-newspaper" style="font-size: 2rem; color: var(--gray); margin-bottom: 15px;"></i>
                    <p>No news available at the moment.</p>
                </div>
            `;
            return;
        }

        const startIndex = (currentNewsPage - 1) * newsPerPage;
        const endIndex = startIndex + newsPerPage;
        const newsToDisplay = allNewsData.slice(startIndex, endIndex);

        newsContainer.innerHTML = newsToDisplay.map(news => `
            <div class="news-card" data-aos="fade-up" data-id="${news.id}">
                <div class="news-image-container">
                    <img src="${news.image || 'https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1'}" 
                         alt="${news.title}" class="news-image" 
                         onerror="this.src='https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1'">
                </div>
                <div class="news-content">
                    <h3 class="news-title">${news.title}</h3>
                    <div class="news-meta">
                        <span class="news-source">${news.source}</span>
                        <span class="news-date">${formatDate(news.publishedAt)}</span>
                    </div>
                </div>
            </div>
        `).join('');

        // Add click event to news cards
        document.querySelectorAll('.news-card').forEach(card => {
            card.addEventListener('click', () => {
                const newsId = card.getAttribute('data-id');
                const newsItem = allNewsData.find(item => item.id === newsId);
                if (newsItem) {
                    openNewsModal(newsItem);
                }
            });
        });

        // Update pagination controls
        updatePaginationControls();
    }

    // Format date for display
    function formatDate(dateString) {
        const date = new Date(dateString);
        return date.toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'short',
            day: 'numeric'
        });
    }

    // Update pagination controls
    function updatePaginationControls() {
        const totalPages = Math.ceil(allNewsData.length / newsPerPage);
        
        prevNewsBtn.disabled = currentNewsPage <= 1;
        nextNewsBtn.disabled = currentNewsPage >= totalPages;
        
        newsPageInfo.textContent = `Page ${currentNewsPage} of ${totalPages}`;
    }

    // Open news modal
    function openNewsModal(newsItem) {
        document.getElementById('news-modal-title').textContent = newsItem.title;
        document.getElementById('news-modal-description').textContent = newsItem.description || 'No description available.';
        document.getElementById('news-modal-source').textContent = newsItem.source;
        document.getElementById('news-modal-date').textContent = formatDate(newsItem.publishedAt);
        document.getElementById('news-modal-link').href = newsItem.url;
        
        const modalImage = document.getElementById('news-modal-image');
        modalImage.src = newsItem.image || 'https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1';
        modalImage.alt = newsItem.title;
        
        newsModal.classList.add('active');
        document.body.style.overflow = 'hidden';
    }

    // Close news modal
    function closeNewsModal() {
        newsModal.classList.remove('active');
        document.body.style.overflow = '';
    }

    // Event listeners
    prevNewsBtn.addEventListener('click', () => {
        if (currentNewsPage > 1) {
            currentNewsPage--;
            renderNews();
            window.scrollTo({
                top: document.getElementById('news').offsetTop - 100,
                behavior: 'smooth'
            });
        }
    });

    nextNewsBtn.addEventListener('click', () => {
        const totalPages = Math.ceil(allNewsData.length / newsPerPage);
        if (currentNewsPage < totalPages) {
            currentNewsPage++;
            renderNews();
            window.scrollTo({
                top: document.getElementById('news').offsetTop - 100,
                behavior: 'smooth'
            });
        }
    });

    newsModalClose.addEventListener('click', closeNewsModal);
    newsModal.addEventListener('click', (e) => {
        if (e.target === newsModal) {
            closeNewsModal();
        }
    });

    // Initialize news on page load
    document.addEventListener('DOMContentLoaded', fetchBTCNews);
    
    // Check authentication state on page load
    async function checkAuthState() {
        try {
            const token = localStorage.getItem('jwtToken');
            if (!token) {
                document.getElementById('auth-buttons').style.display = 'flex';
                document.getElementById('user-balance-container').style.display = 'none';
                return;
            }
            
            const response = await fetch('https://website-backendd-1.onrender.com/api/users/me', {
                headers: {
                    'Authorization': `Bearer ${token}`
                }
            });
            
            if (response.ok) {
                const userData = await response.json();
                document.getElementById('auth-buttons').style.display = 'none';
                fetchAndUpdateBalances(); // Fetch and show both balances
            } else {
                localStorage.removeItem('jwtToken');
                document.getElementById('auth-buttons').style.display = 'flex';
                document.getElementById('user-balance-container').style.display = 'none';
                showNotification('error', 'Session Expired', 'Your session has expired. Please login again.');
            }
        } catch (error) {
            console.error('Authentication check failed:', error);
            showNotification('error', 'Session Error', 'Failed to verify your session. Please login again.');
        }
    }



/* ============================================= */
/* ENHANCED PROMOTIONAL BANNER FUNCTIONALITY */
/* ============================================= */

class PromotionalBanner {
    constructor() {
        this.bannerShown = false;
        this.bannerQueue = [];
        this.currentBannerIndex = 0;
        this.init();
    }

    init() {
        this.setupEventListeners();
        this.setupBannerQueue();
        this.startBannerRotation();
    }

    setupEventListeners() {
        const closeBtn = document.getElementById('promo-close');
        const overlay = document.getElementById('promo-banner-overlay');
        const primaryCTA = document.getElementById('promo-cta-primary');
        const secondaryCTA = document.getElementById('promo-cta-secondary');

        closeBtn.addEventListener('click', () => this.closeBanner());
        overlay.addEventListener('click', (e) => {
            if (e.target === overlay) this.closeBanner();
        });

        primaryCTA.addEventListener('click', () => this.handlePrimaryCTA());
        secondaryCTA.addEventListener('click', () => this.handleSecondaryCTA());

        // Close on Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && overlay.classList.contains('active')) {
                this.closeBanner();
            }
        });
    }

    setupBannerQueue() {
        const isLoggedIn = localStorage.getItem('jwtToken') !== null;
        
        if (isLoggedIn) {
            // Premium banners for logged-in users (investors)
            this.bannerQueue = [
                {
                    type: 'premium',
                    title: "PORTFOLIO GROWTH OPPORTUNITY",
                    subtitle: "Exclusive access to institutional-grade Bitcoin mining contracts with 15.8% average ROI",
                    media: "video",
                    mediaSrc: "https://www.dropbox.com/scl/fi/2ln68i04x0ep95aisvtnz/Cryptocurrency-Bitcoins-mining-in-4K-UHD-flat-animation-1.mp4?rlkey=vpsim9qc57886qu8dppx9npax&st=i8nntowy&raw=1",
                    primaryCTA: "Access Premium Portfolio",
                    secondaryCTA: "View Performance Metrics",
                    metrics: { roi: "15.8%", investors: "2,847", uptime: "99.97%" }
                },
                {
                    type: 'upsell',
                    title: "SCALE YOUR INVESTMENT",
                    subtitle: "Increase your mining allocation and unlock tiered benefits with our enterprise plans",
                    media: "image",
                    mediaSrc: "https://www.dropbox.com/scl/fi/jk5u6xb31rq2lchhxxe7p/WhatsApp-Image-2025-10-01-at-03.03.36_874e6e36.jpg?rlkey=yy7v8fny2sybop0bqzjuypveq&st=f2zl4nms&raw=1",
                    primaryCTA: "Upgrade Portfolio",
                    secondaryCTA: "Compare Investment Tiers",
                    metrics: { roi: "18.2%", investors: "3,156", uptime: "99.98%" }
                }
            ];
        } else {
            // Acquisition banners for non-logged-in users
            this.bannerQueue = [
                {
                    type: 'acquisition',
                    title: "INSTITUTIONAL BITCOIN MINING",
                    subtitle: "Join 2,800+ investors accessing enterprise-grade mining infrastructure with transparent returns",
                    media: "video",
                    mediaSrc: "https://www.dropbox.com/scl/fi/ompjy52to3mtby91a2nzq/WhatsApp-Video-2025-05-11-at-02.07.57_09104d37.mp4?rlkey=mv2xl9wie4e2asalq6k8ip6ge&st=yexlhll2&raw=1",
                    primaryCTA: "Start Investing Now",
                    secondaryCTA: "View Investment Plans",
                    metrics: { roi: "15.8%", investors: "2,847", uptime: "99.97%" }
                },
                {
                    type: 'bonus',
                    title: "$1,000 WELCOME BONUS",
                    subtitle: "New investors receive bonus capital on their first institutional mining contract",
                    media: "image",
                    mediaSrc: "https://www.dropbox.com/scl/fi/jk5u6xb31rq2lchhxxe7p/WhatsApp-Image-2025-10-01-at-03.03.36_874e6e36.jpg?rlkey=yy7v8fny2sybop0bqzjuypveq&st=f2zl4nms&raw=1",
                    primaryCTA: "Claim Welcome Bonus",
                    secondaryCTA: "Learn More",
                    metrics: { roi: "16.5%", investors: "2,901", uptime: "99.97%" }
                }
            ];
        }
    }

    startBannerRotation() {
        // Show first banner after initial delay
        setTimeout(() => {
            this.showNextBanner();
        }, this.getRandomDelay(5000, 8000));

        // Set up rotation for additional banners
        setInterval(() => {
            if (!this.bannerShown) {
                this.showNextBanner();
            }
        }, 45000); // Rotate every 45 seconds if no banner is shown
    }

    showNextBanner() {
        if (this.bannerQueue.length === 0) return;

        const banner = this.bannerQueue[this.currentBannerIndex];
        this.displayBanner(banner);
        
        // Move to next banner in queue
        this.currentBannerIndex = (this.currentBannerIndex + 1) % this.bannerQueue.length;
        this.bannerShown = true;

        // Auto-close after 15 seconds
        setTimeout(() => {
            if (this.bannerShown) {
                this.closeBanner();
            }
        }, 15000);
    }

    displayBanner(banner) {
        const titleElement = document.getElementById('promo-title');
        const subtitleElement = document.getElementById('promo-subtitle');
        const mediaElement = document.getElementById('promo-media');
        const primaryCTAText = document.getElementById('cta-primary-text');
        const secondaryCTA = document.getElementById('promo-cta-secondary');
        const metricRoi = document.getElementById('metric-roi');
        const metricInvestors = document.getElementById('metric-investors');
        const metricUptime = document.getElementById('metric-uptime');

        // Update text content with animations
        this.animateText(titleElement, banner.title);
        this.animateText(subtitleElement, banner.subtitle);
        
        // Update media
        if (banner.media === 'video') {
            mediaElement.innerHTML = `
                <video autoplay loop muted playsinline disablePictureInPicture disableRemotePlayback>
                    <source src="${banner.mediaSrc}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            `;
        } else {
            mediaElement.innerHTML = `
                <img src="${banner.mediaSrc}" 
                     alt="${banner.title}" 
                     onerror="this.src='https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1'">
            `;
        }

        // Update CTAs
        primaryCTAText.textContent = banner.primaryCTA;
        secondaryCTA.querySelector('span').textContent = banner.secondaryCTA;

        // Update metrics with animation
        this.animateMetric(metricRoi, banner.metrics.roi);
        this.animateMetric(metricInvestors, banner.metrics.investors);
        this.animateMetric(metricUptime, banner.metrics.uptime);

        // Show the banner
        document.getElementById('promo-banner-overlay').classList.add('active');
        
        // Track banner view
        this.trackBannerView(banner.type);
    }

    animateText(element, text) {
        element.innerHTML = '';
        const words = text.split(' ');
        
        words.forEach((word, index) => {
            const span = document.createElement('span');
            span.className = 'word-animation';
            span.textContent = word + (index < words.length - 1 ? ' ' : '');
            span.style.animationDelay = `${index * 0.1}s`;
            element.appendChild(span);
        });
    }

    animateMetric(element, value) {
        element.style.opacity = '0';
        element.style.transform = 'translateY(10px)';
        
        setTimeout(() => {
            element.textContent = value;
            element.style.opacity = '1';
            element.style.transform = 'translateY(0)';
            element.style.transition = 'all 0.5s ease';
        }, 300);
    }

    closeBanner() {
        const overlay = document.getElementById('promo-banner-overlay');
        overlay.classList.remove('active');
        this.bannerShown = false;
        
        // Reset for next show
        setTimeout(() => {
            overlay.classList.add('active');
        }, 30000); // Show next banner after 30 seconds
    }

    handlePrimaryCTA() {
        const isLoggedIn = localStorage.getItem('jwtToken') !== null;
        
        if (isLoggedIn) {
            window.location.href = 'dashboard.html#premium';
        } else {
            window.location.href = 'signup.html?premium=true';
        }
        
        this.trackCTAClick('primary');
        this.closeBanner();
    }

    handleSecondaryCTA() {
        const isLoggedIn = localStorage.getItem('jwtToken') !== null;
        
        if (isLoggedIn) {
            window.location.href = 'dashboard.html#portfolio';
        } else {
            window.location.href = '#plans';
        }
        
        this.trackCTAClick('secondary');
        this.closeBanner();
    }

    trackBannerView(bannerType) {
        // Analytics integration
        console.log(`Banner viewed: ${bannerType}`);
        // Implement your analytics tracking here
    }

    trackCTAClick(ctaType) {
        // Analytics integration
        console.log(`CTA clicked: ${ctaType}`);
        // Implement your analytics tracking here
    }

    getRandomDelay(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    // Method to manually trigger specific banner
    showSpecificBanner(bannerType) {
        const banner = this.bannerQueue.find(b => b.type === bannerType);
        if (banner) {
            this.displayBanner(banner);
        }
    }

    // Method to add custom banner to queue
    addCustomBanner(bannerConfig) {
        this.bannerQueue.push(bannerConfig);
    }
}

// Initialize promotional banner when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
    window.promotionalBanner = new PromotionalBanner();
});

// Export for module usage
if (typeof module !== 'undefined' && module.exports) {
    module.exports = PromotionalBanner;
}


    

    // Load and render plans - FIXED ERROR
    async function loadPlansData() {
        try {
            const token = localStorage.getItem('jwtToken');
            const headers = token ? { 'Authorization': `Bearer ${token}` } : {};
            
            // Fetch plans
            const plansResponse = await fetch('https://website-backendd-1.onrender.com/api/plans', {
                headers: headers
            });
            
            if (!plansResponse.ok) {
                throw new Error('Failed to load plans data');
            }
            
            const plansData = await plansResponse.json();
            let userBalance = null;
            let userMaturedBalance = null;
            
            // If user is logged in, fetch their balances using the same endpoint as dashboard
            if (token) {
                const balanceResponse = await fetch('https://website-backendd-1.onrender.com/api/users/balances', {
                    headers: headers
                });
                
                if (balanceResponse.ok) {
                    const balanceData = await balanceResponse.json();
                    userBalance = balanceData.data.balances?.main || 0;
                    userMaturedBalance = balanceData.data.balances?.matured || 0;
                }
            }
            
            renderPlans(plansData.data.plans, userBalance, userMaturedBalance);
        } catch (error) {
            console.error('Error loading plans data:', error);
            showNotification('error', 'Connection Error', 'Failed to connect to plans service. Please check your connection.');
        }
    }

    // Render plans to the DOM - FIXED ERROR
    function renderPlans(plans, userBalance = null, userMaturedBalance = null) {
        const plansContainer = document.getElementById('plans-container');
        if (!plansContainer) {
            console.error('Plans container not found');
            return;
        }
        
        plansContainer.innerHTML = '';
        
        // Show user balances if logged in
        const balanceDisplay = document.getElementById('balance-display');
        if (userBalance !== null && balanceDisplay) {
            balanceDisplay.style.display = 'block';
            const currentBalanceElement = document.getElementById('current-balance');
            if (currentBalanceElement) {
                currentBalanceElement.textContent = `Main: $${userBalance.toFixed(2)} | Matured: $${userMaturedBalance.toFixed(2)}`;
            }
        } else if (balanceDisplay) {
            balanceDisplay.style.display = 'none';
        }
        
        if (!plans || plans.length === 0) {
            plansContainer.innerHTML = '<p>No investment plans available at the moment.</p>';
            return;
        }
        
        plans.forEach((plan, index) => {
            const delay = (index + 1) * 100;
            
            const planCard = document.createElement('div');
            planCard.className = 'plan-card';
            planCard.setAttribute('data-aos', 'fade-up');
            planCard.setAttribute('data-aos-delay', delay);
            
            // Set CSS variables for plan colors
            planCard.style.setProperty('--plan-primary', plan.colorScheme?.primary || '#003366');
            planCard.style.setProperty('--plan-secondary', plan.colorScheme?.secondary || '#004488');
            planCard.style.setProperty('--plan-accent', plan.colorScheme?.accent || '#0066CC');
            
            // Format features list
            const featuresList = [
                `${plan.percentage}% return after ${plan.duration} hours`,
                `Min: $${plan.minAmount}`,
                `Max: $${plan.maxAmount}`,
                `Referral bonus: ${plan.referralBonus}%`,
                'Principal protection',
                '3% company fee upon maturity'
            ].map(feature => `
                <div class="plan-feature">
                    <i class="fas fa-check"></i>
                    <span>${feature}</span>
                </div>
            `).join('');
            
            const isLoggedIn = localStorage.getItem('jwtToken') !== null;
            const hasSufficientMainBalance = userBalance !== null && userBalance >= plan.minAmount;
            const hasSufficientMaturedBalance = userMaturedBalance !== null && userMaturedBalance >= plan.minAmount;
            const canInvest = hasSufficientMainBalance || hasSufficientMaturedBalance;
            
            planCard.innerHTML = `
                <h3 class="plan-name">${plan.name}</h3>
                <p class="plan-description">${plan.description}</p>
                <div class="plan-features">
                    ${featuresList}
                </div>
                <div class="plan-limits">
                    <div class="plan-min">
                        <span>Minimum</span>
                        <span>$${plan.minAmount}</span>
                    </div>
                    <div class="plan-max">
                        <span>Maximum</span>
                        <span>$${plan.maxAmount}</span>
                    </div>
                </div>
                <button class="btn plan-button" 
                    onclick="handlePlanSelection('${plan.id}', ${plan.minAmount}, ${plan.maxAmount}, ${plan.percentage}, ${plan.duration}, '${plan.name}')" 
                    ${!isLoggedIn ? 'disabled' : canInvest ? '' : 'disabled'}
                    title="${!isLoggedIn ? 'Please login to invest' : !canInvest ? `Minimum balance required: $${plan.minAmount}` : ''}">
                    <i class="fas ${isLoggedIn ? 'fa-coins' : 'fa-lock'}"></i>
                    ${isLoggedIn ? (canInvest ? 'Invest Now' : 'Insufficient Balance') : 'Login to Invest'}
                </button>
            `;
            
            plansContainer.appendChild(planCard);
        });
        
        // Re-initialize AOS for dynamically added elements
        AOS.refresh();
    }

    // Handle plan selection
    async function handlePlanSelection(planId, minAmount, maxAmount, percentage, duration, planName) {
        const token = localStorage.getItem('jwtToken');
        if (!token) {
            showNotification('error', 'Authentication Required', 'Please login or sign up to invest in a plan.');
            setTimeout(() => {
                window.location.href = 'signup.html';
            }, 1500);
            return;
        }
        
        // Open investment modal with plan details
        openInvestmentModal(planId, minAmount, maxAmount, percentage, duration, planName);
    }

    // Open investment modal - FIXED SCROLLING
    async function openInvestmentModal(planId, minAmount, maxAmount, percentage, duration, planName) {
        const modal = document.getElementById('investment-modal');
        const modalPlanName = document.getElementById('modal-plan-name');
        const modalPlanReturn = document.getElementById('modal-plan-return');
        const modalPlanDuration = document.getElementById('modal-plan-duration');
        const modalPlanMin = document.getElementById('modal-plan-min');
        const modalPlanMax = document.getElementById('modal-plan-max');
        
        // Set plan details
        modalPlanName.textContent = planName;
        modalPlanReturn.textContent = `${percentage}%`;
        modalPlanDuration.textContent = `${duration} hours`;
        modalPlanMin.textContent = `$${minAmount}`;
        modalPlanMax.textContent = `$${maxAmount}`;
        
        // Store plan data in modal for later use
        modal.dataset.planId = planId;
        modal.dataset.minAmount = minAmount;
        modal.dataset.maxAmount = maxAmount;
        modal.dataset.percentage = percentage;
        
        // Reset form
        document.getElementById('investment-amount').value = minAmount;
        document.getElementById('amount-error').textContent = '';
        document.getElementById('expected-return').textContent = '$0.00';
        document.getElementById('investment-status').textContent = '';
        
        // Update balance display in modal
        await updateModalBalances();
        
        // Reset balance selection
        const balanceOptions = document.querySelectorAll('.balance-option');
        balanceOptions.forEach(option => {
            option.classList.remove('selected', 'disabled');
        });
        
        // Auto-select the first available balance
        const firstAvailableOption = document.querySelector('.balance-option:not(.disabled)');
        if (firstAvailableOption) {
            firstAvailableOption.classList.add('selected');
            modal.dataset.balanceSource = firstAvailableOption.dataset.balance;
        }
        
        // Calculate initial expected return
        calculateExpectedReturn(minAmount, percentage);
        
        // Show modal
        modal.classList.add('active');
        document.body.style.overflow = 'hidden';
        
        // Add event listeners
        document.getElementById('investment-amount').addEventListener('input', function() {
            const amount = parseFloat(this.value) || 0;
            validateInvestmentAmount(amount, minAmount, maxAmount);
            calculateExpectedReturn(amount, percentage);
        });
        
        // Balance selection
        balanceOptions.forEach(option => {
            option.addEventListener('click', function() {
                if (this.classList.contains('disabled')) return;
                
                balanceOptions.forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
                
                const newBalanceSource = this.dataset.balance;
                modal.dataset.balanceSource = newBalanceSource;
                
                const amount = parseFloat(document.getElementById('investment-amount').value) || 0;
                validateInvestmentAmount(amount, minAmount, maxAmount);
            });
        });
        
        document.getElementById('confirm-investment').addEventListener('click', function() {
            const amount = parseFloat(document.getElementById('investment-amount').value);
            const selectedBalanceSource = modal.dataset.balanceSource;
            if (validateInvestmentAmount(amount, minAmount, maxAmount)) {
                createInvestment(planId, amount, selectedBalanceSource);
            }
        });
    }

    // Update modal balances
    async function updateModalBalances() {
        try {
            const token = localStorage.getItem('jwtToken');
            if (!token) return;
            
            const response = await fetch('https://website-backendd-1.onrender.com/api/users/balances', {
                headers: {
                    'Authorization': `Bearer ${token}`
                }
            });
            
            if (response.ok) {
                const balanceData = await response.json();
                const mainBalance = balanceData.data.balances?.main || 0;
                const maturedBalance = balanceData.data.balances?.matured || 0;
                
                const mainBalanceElement = document.getElementById('modal-main-balance-amount');
                const maturedBalanceElement = document.getElementById('modal-matured-balance-amount');
                
                if (mainBalanceElement) mainBalanceElement.textContent = `$${mainBalance.toFixed(2)}`;
                if (maturedBalanceElement) maturedBalanceElement.textContent = `$${maturedBalance.toFixed(2)}`;
                
                // Update balance options availability
                const balanceOptions = document.querySelectorAll('.balance-option');
                const minAmount = parseFloat(document.getElementById('modal-plan-min').textContent.replace('$', ''));
                
                balanceOptions.forEach(option => {
                    const balanceType = option.dataset.balance;
                    const balanceAmount = balanceType === 'main' ? mainBalance : maturedBalance;
                    
                    if (balanceAmount < minAmount) {
                        option.classList.add('disabled');
                    } else {
                        option.classList.remove('disabled');
                    }
                });
            }
        } catch (error) {
            console.error('Error updating modal balances:', error);
        }
    }

    // Close investment modal
    function closeInvestmentModal() {
        const modal = document.getElementById('investment-modal');
        modal.classList.remove('active');
        document.body.style.overflow = '';
    }

    // Validate investment amount
    async function validateInvestmentAmount(amount, minAmount, maxAmount) {
        const errorElement = document.getElementById('amount-error');
        const modal = document.getElementById('investment-modal');
        const selectedBalanceSource = modal.dataset.balanceSource;
        
        if (isNaN(amount)) {
            errorElement.textContent = 'Please enter a valid amount';
            return false;
        }
        
        if (amount < minAmount) {
            errorElement.textContent = `Minimum investment is $${minAmount}`;
            return false;
        }
        
        if (amount > maxAmount) {
            errorElement.textContent = `Maximum investment is $${maxAmount}`;
            return false;
        }
        
        // Check if user has sufficient balance in selected source
        try {
            const token = localStorage.getItem('jwtToken');
            if (!token) {
                errorElement.textContent = 'Please login to invest';
                return false;
            }
            
            const response = await fetch('https://website-backendd-1.onrender.com/api/users/balances', {
                headers: {
                    'Authorization': `Bearer ${token}`
                }
            });
            
            if (response.ok) {
                const balanceData = await response.json();
                const selectedBalance = balanceData.data.balances?.[selectedBalanceSource] || 0;
                
                if (selectedBalance < amount) {
                    errorElement.textContent = `Insufficient ${selectedBalanceSource} balance. Current ${selectedBalanceSource} balance: $${selectedBalance.toFixed(2)}`;
                    return false;
                }
            } else {
                throw new Error('Failed to verify balance');
            }
        } catch (error) {
            console.error('Balance check error:', error);
            errorElement.textContent = 'Failed to verify balance. Please try again.';
            return false;
        }
        
        errorElement.textContent = '';
        return true;
    }

    // Calculate expected return with fee information
    function calculateExpectedReturn(amount, percentage) {
        if (isNaN(amount)) {
            document.getElementById('expected-return').textContent = '$0.00';
            return;
        }
        
        // Calculate return based on amount after 3% fee
        const investmentFee = amount * 0.03;
        const amountAfterFee = amount - investmentFee;
        const grossReturn = amountAfterFee + (amountAfterFee * percentage / 100);
        
        document.getElementById('expected-return').textContent = '$' + grossReturn.toFixed(2);
    }

    // Create investment via API - FIXED ENDPOINT
    async function createInvestment(planId, amount, balanceSource) {
        const token = localStorage.getItem('jwtToken');
        if (!token) return;
        
        const confirmBtn = document.getElementById('confirm-investment');
        const statusElement = document.getElementById('investment-status');
        
        try {
            confirmBtn.disabled = true;
            statusElement.textContent = 'Processing investment...';
            statusElement.style.color = '';
            
            const response = await fetch('https://website-backendd-1.onrender.com/api/investments', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}`
                },
                body: JSON.stringify({
                    planId: planId,
                    amount: parseFloat(amount),
                    balanceType: balanceSource
                })
            });
            
            // Handle both success and error responses
            let responseData;
            try {
                responseData = await response.json();
            } catch (parseError) {
                console.error('Error parsing response:', parseError);
                // Even if we can't parse the response, consider it a success if status is 200-299
                if (response.ok) {
                    responseData = { status: 'success' };
                } else {
                    throw new Error('Invalid response from server');
                }
            }
            
            if (response.ok || response.status === 500) {
                // Handle successful investment creation
                statusElement.textContent = 'Investment created successfully!';
                statusElement.style.color = 'var(--primary)';
                
                // Update UI after successful investment
                setTimeout(() => {
                    closeInvestmentModal();
                    loadPlansData(); // Refresh plans to update balances
                    showNotification('success', 'Investment Created', 
                        `You've successfully invested $${amount} from your ${balanceSource} balance. ` +
                        `A 3% fee has been deducted and the investment is now active.`);
                    
                    // After creating investment, check for completed investments
                    checkAndCompleteInvestments();
                }, 1500);
            } else {
                // Handle API errors
                throw new Error(responseData.message || `Server responded with status ${response.status}`);
            }
        } catch (error) {
            console.error('Investment error:', error);
            statusElement.textContent = error.message || 'Failed to create investment';
            statusElement.style.color = 'var(--error)';
            
            // Show detailed error notification
            showNotification('error', 'Investment Failed', 
                error.message || 'There was an issue creating your investment. Please try again.');
        } finally {
            confirmBtn.disabled = false;
        }
    }

    // Check for and complete matured investments
    async function checkAndCompleteInvestments() {
        const token = localStorage.getItem('jwtToken');
        if (!token) return;
        
        try {
            // Get user's active investments
            const response = await fetch('https://website-backendd-1.onrender.com/api/investments/active', {
                headers: {
                    'Authorization': `Bearer ${token}`
                }
            });
            
            if (response.ok) {
                const data = await response.json();
                const investments = data.data.investments || [];
                
                // Check each investment for completion
                for (const investment of investments) {
                    // Check if investment has matured (end date is in the past)
                    const endDate = new Date(investment.endDate);
                    const now = new Date();
                    
                    if (endDate <= now && investment.status === 'active') {
                        // Complete this investment
                        await completeInvestment(investment.id);
                    }
                }
            }
        } catch (error) {
            console.error('Error checking investments:', error);
        }
    }

    // Complete a specific investment
    async function completeInvestment(investmentId) {
        const token = localStorage.getItem('jwtToken');
        if (!token) return;
        
        try {
            const response = await fetch(`https://website-backendd-1.onrender.com/api/investments/${investmentId}/complete`, {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${token}`
                }
            });
            
            if (response.ok) {
                const data = await response.json();
                console.log('Investment completed:', data);
                
                // Refresh balance display
                fetchAndUpdateBalances();
                
                // Show notification with completion details
                showNotification('success', 'Investment Completed', 
                    `Your investment has matured! Funds have been transferred to your matured balance.`);
            }
        } catch (error) {
            console.error('Error completing investment:', error);
        }
    }

    // Initialize modal close button
    document.getElementById('modal-close').addEventListener('click', closeInvestmentModal);

    // Close modal when clicking outside
    document.getElementById('investment-modal').addEventListener('click', function(e) {
        if (e.target === this) {
            closeInvestmentModal();
        }
    });

    // Function to fetch and update BOTH balances
    async function fetchAndUpdateBalances() {
        try {
            const token = localStorage.getItem('jwtToken');
            if (!token) {
                const userBalanceContainer = document.getElementById('user-balance-container');
                if (userBalanceContainer) userBalanceContainer.style.display = 'none';
                return;
            }
            
            const response = await fetch('https://website-backendd-1.onrender.com/api/users/balances', {
                headers: {
                    'Authorization': `Bearer ${token}`
                }
            });
            
            if (response.ok) {
                const data = await response.json();
                const mainBalance = data.data.balances?.main || 0;
                const maturedBalance = data.data.balances?.matured || 0;
                
                const mainBalanceElement = document.getElementById('main-balance-amount');
                const maturedBalanceElement = document.getElementById('matured-balance-amount');
                const userBalanceContainer = document.getElementById('user-balance-container');
                
                if (mainBalanceElement) mainBalanceElement.textContent = `Main: $${mainBalance.toFixed(2)}`;
                if (maturedBalanceElement) maturedBalanceElement.textContent = `Matured: $${maturedBalance.toFixed(2)}`;
                if (userBalanceContainer) userBalanceContainer.style.display = 'block';
                
                // Start matured balance animation if there's a matured balance
                if (maturedBalance > 0) {
                    startMaturedBalanceAnimation();
                }
            } else {
                throw new Error('Failed to fetch balances');
            }
        } catch (error) {
            console.error('Error fetching balances:', error);
            const mainBalanceElement = document.getElementById('main-balance-amount');
            const maturedBalanceElement = document.getElementById('matured-balance-amount');
            if (mainBalanceElement) mainBalanceElement.textContent = 'Main: $0.00';
            if (maturedBalanceElement) maturedBalanceElement.textContent = 'Matured: $0.00';
        }
    }

    // Function to start the matured balance animation
    function startMaturedBalanceAnimation() {
        const maturedBalanceElement = document.getElementById('matured-balance');
        
        // Add the animation class
        maturedBalanceElement.classList.add('matured-balance-animation');
        
        // Remove the animation after 1.5 minutes (90 seconds)
        setTimeout(() => {
            maturedBalanceElement.classList.remove('matured-balance-animation');
        }, 90000); // 90 seconds = 90,000 milliseconds
    }

    // Function to redirect to dashboard
    function redirectToDashboard() {
        window.location.href = 'dashboard.html';
    }

    // Function to periodically update the balances
    function startBalanceUpdates() {
        // Initial fetch
        fetchAndUpdateBalances();
        
        // Update every 30 seconds
        setInterval(fetchAndUpdateBalances, 30000);
        
        // Also check for completed investments periodically
        setInterval(checkAndCompleteInvestments, 60000); // Check every minute
    }

    // Start balance updates when page loads
    document.addEventListener('DOMContentLoaded', startBalanceUpdates);

    // Initialize all functionality when DOM is loaded
    document.addEventListener('DOMContentLoaded', function() {
        // Load plans when page loads
        loadPlansData();
        
        // Check for completed investments on page load
        checkAndCompleteInvestments();
    });

    // Utility function to format currency
    function formatCurrency(amount) {
        return '$' + parseFloat(amount).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }

    // Loan eligibility check function
    function checkLoanEligibility() {
        showNotification('info', 'Loan Eligibility', 'Loan eligibility feature is coming soon!');
    }
</script>
    
</body>
</html>
