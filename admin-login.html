<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Admin Dashboard | BitHash LLC - Institutional Bitcoin Mining</title>
    <meta name="description" content="BitHash LLC Admin Dashboard for managing institutional-grade Bitcoin mining operations with enterprise security standards.">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rowdies:wght@300;400;700&family=Inter:wght@300;400;500;600;700&family=Manrope:wght@500;600;700&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" href="https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1" type="image/png">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- DataTables -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.4.1/css/buttons.dataTables.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.5.0/css/responsive.dataTables.min.css">
    
    <!-- Chart.js -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.css">
    
    <!-- AOS Animation -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    
    <!-- Select2 -->
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet">
    
    <style>
        :root {
            --primary: #00D395;
            --primary-dark: #00B783;
            --primary-light: #00E5A1;
            --secondary: #1E1E1E;
            --secondary-dark: #121212;
            --dark: #E5E5E5;
            --darker: #0A0A0A;
            --light: #121212;
            --lighter: #1E1E1E;
            --gray: #8E8E8E;
            --gray-light: #2E2E2E;
            --gray-lighter: #252525;
            --success: #00D395;
            --warning: #FFB800;
            --error: #FF3D57;
            --gold: #D4AF37;
            --gold-light: #FFD700;
            --gold-dark: #996515;
            --blue: #003366;
            --blue-dark: #002244;
            --blue-light: #004488;
            --purple: #784FED;
            --pink: #EC4899;
            --gradient: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            --gold-gradient: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 100%);
            --blue-gradient: linear-gradient(135deg, var(--blue) 0%, var(--blue-dark) 100%);
            --border-radius: 8px;
            --border-radius-lg: 12px;
            --box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --box-shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.2), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            --visa-blue: #1A1F71;
            --visa-gold: #F7B600;
            --security-blue: #1A73E8;
            --security-green: #34A853;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }

        body {
            background-color: var(--secondary-dark);
            color: var(--dark);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .admin-container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar Styles */
        .admin-sidebar {
            width: 280px;
            background-color: var(--secondary);
            border-right: 1px solid var(--gray-light);
            height: 100vh;
            position: fixed;
            z-index: 1000;
            transition: var(--transition);
        }

        .sidebar-collapsed .admin-sidebar {
            width: 80px;
        }

        .sidebar-collapsed .admin-main {
            margin-left: 80px;
        }

        .admin-logo {
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-bottom: 1px solid var(--gray-light);
            height: 80px;
        }

        .admin-logo img {
            height: 40px;
        }

        .admin-logo span {
            font-family: 'Rowdies', sans-serif;
            font-size: 20px;
            margin-left: 10px;
            color: var(--primary);
            display: inline-block;
        }

        .sidebar-collapsed .admin-logo span {
            display: none;
        }

        .admin-menu {
            padding: 20px 0;
        }

        .menu-item {
            padding: 12px 20px;
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
        }

        .menu-item:hover {
            background-color: var(--gray-light);
        }

        .menu-item.active {
            background-color: var(--gray-light);
            border-left: 3px solid var(--primary);
        }

        .menu-item i {
            font-size: 18px;
            color: var(--gray);
            width: 24px;
            text-align: center;
            margin-right: 12px;
        }

        .menu-item.active i {
            color: var(--primary);
        }

        .menu-item span {
            font-size: 14px;
            font-weight: 500;
            color: var(--dark);
        }

        .sidebar-collapsed .menu-item span {
            display: none;
        }

        .menu-item .badge {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            background-color: var(--error);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
        }

        .sidebar-collapsed .menu-item .badge {
            right: 5px;
        }

        .submenu {
            padding-left: 56px;
            max-height: 0;
            overflow: hidden;
            transition: var(--transition);
        }

        .menu-item.has-submenu.active .submenu {
            max-height: 500px;
        }

        .submenu-item {
            padding: 8px 0;
            font-size: 13px;
            color: var(--gray);
            cursor: pointer;
            transition: var(--transition);
        }

        .submenu-item:hover {
            color: var(--primary);
        }

        .submenu-item.active {
            color: var(--primary);
            font-weight: 500;
        }

        .sidebar-collapsed .submenu {
            display: none;
        }

        /* Main Content Styles */
        .admin-main {
            flex: 1;
            margin-left: 280px;
            transition: var(--transition);
        }

        .admin-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px 30px;
            background-color: var(--secondary);
            border-bottom: 1px solid var(--gray-light);
            height: 80px;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-left {
            display: flex;
            align-items: center;
        }

        .sidebar-toggle {
            font-size: 20px;
            color: var(--gray);
            cursor: pointer;
            margin-right: 20px;
            transition: var(--transition);
        }

        .sidebar-toggle:hover {
            color: var(--primary);
        }

        .page-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--dark);
        }

        .header-right {
            display: flex;
            align-items: center;
        }

        .header-icon {
            font-size: 18px;
            color: var(--gray);
            cursor: pointer;
            margin-left: 20px;
            position: relative;
            transition: var(--transition);
        }

        .header-icon:hover {
            color: var(--primary);
        }

        .header-icon .badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: var(--error);
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
        }

        .admin-profile {
            display: flex;
            align-items: center;
            margin-left: 20px;
            cursor: pointer;
            position: relative;
        }

        .profile-image {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 10px;
            border: 2px solid var(--primary);
        }

        .profile-name {
            font-size: 14px;
            font-weight: 500;
            color: var(--dark);
        }

        .profile-dropdown {
            position: absolute;
            top: 50px;
            right: 0;
            background-color: var(--secondary);
            border: 1px solid var(--gray-light);
            border-radius: var(--border-radius);
            width: 200px;
            padding: 10px 0;
            box-shadow: var(--box-shadow-lg);
            z-index: 100;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .admin-profile:hover .profile-dropdown {
            opacity: 1;
            visibility: visible;
            top: 45px;
        }

        .dropdown-item {
            padding: 10px 20px;
            font-size: 14px;
            color: var(--gray);
            cursor: pointer;
            transition: var(--transition);
        }

        .dropdown-item:hover {
            background-color: var(--gray-light);
            color: var(--primary);
        }

        .dropdown-item i {
            margin-right: 10px;
            width: 18px;
            text-align: center;
        }

        .dropdown-divider {
            height: 1px;
            background-color: var(--gray-light);
            margin: 5px 0;
        }

        /* Content Styles */
        .admin-content {
            padding: 30px;
        }

        .content-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 30px;
        }

        .content-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--dark);
            font-family: 'Manrope', sans-serif;
        }

        .content-actions {
            display: flex;
            align-items: center;
        }

        .btn {
            padding: 10px 20px;
            border-radius: var(--border-radius);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .btn i {
            margin-right: 8px;
        }

        .btn-primary {
            background-color: var(--primary);
            color: var(--secondary-dark);
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--gray);
            color: var(--gray);
            margin-left: 10px;
        }

        .btn-outline:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .btn-danger {
            background-color: var(--error);
            color: white;
        }

        .btn-danger:hover {
            background-color: #ff2b4a;
        }

        /* Card Styles */
        .card {
            background-color: var(--secondary);
            border-radius: var(--border-radius-lg);
            border: 1px solid var(--gray-light);
            margin-bottom: 30px;
            box-shadow: var(--box-shadow);
        }

        .card-header {
            padding: 20px;
            border-bottom: 1px solid var(--gray-light);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .card-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--dark);
        }

        .card-tools {
            display: flex;
            align-items: center;
        }

        .card-tools .btn {
            padding: 5px 10px;
            font-size: 12px;
            margin-left: 5px;
        }

        .card-body {
            padding: 20px;
        }

        /* Stats Cards */
        .stats-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stats-card {
            background-color: var(--secondary);
            border-radius: var(--border-radius-lg);
            border: 1px solid var(--gray-light);
            padding: 20px;
            display: flex;
            align-items: center;
            transition: var(--transition);
        }

        .stats-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--box-shadow-lg);
        }

        .stats-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 20px;
            font-size: 24px;
        }

        .stats-icon.users {
            background-color: rgba(0, 211, 149, 0.1);
            color: var(--primary);
        }

        .stats-icon.transactions {
            background-color: rgba(120, 79, 237, 0.1);
            color: var(--purple);
        }

        .stats-icon.revenue {
            background-color: rgba(212, 175, 55, 0.1);
            color: var(--gold);
        }

        .stats-icon.active {
            background-color: rgba(0, 61, 166, 0.1);
            color: var(--blue);
        }

        .stats-info h3 {
            font-size: 24px;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 5px;
            font-family: 'Manrope', sans-serif;
        }

        .stats-info p {
            font-size: 14px;
            color: var(--gray);
        }

        /* Table Styles */
        .table-responsive {
            overflow-x: auto;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
        }

        .table th {
            background-color: var(--gray-light);
            color: var(--gray);
            font-weight: 500;
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            padding: 12px 15px;
            text-align: left;
        }

        .table td {
            padding: 15px;
            border-bottom: 1px solid var(--gray-light);
            color: var(--dark);
            font-size: 14px;
        }

        .table tr:last-child td {
            border-bottom: none;
        }

        .table tr:hover td {
            background-color: var(--gray-lighter);
        }

        .status-badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }

        .status-badge.success {
            background-color: rgba(0, 211, 149, 0.1);
            color: var(--success);
        }

        .status-badge.warning {
            background-color: rgba(255, 184, 0, 0.1);
            color: var(--warning);
        }

        .status-badge.danger {
            background-color: rgba(255, 61, 87, 0.1);
            color: var(--error);
        }

        .status-badge.info {
            background-color: rgba(26, 115, 232, 0.1);
            color: var(--security-blue);
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 10px;
        }

        .user-info {
            display: flex;
            align-items: center;
        }

        .user-name {
            font-weight: 500;
            margin-bottom: 3px;
        }

        .user-email {
            font-size: 12px;
            color: var(--gray);
        }

        .action-buttons {
            display: flex;
            align-items: center;
        }

        .action-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: transparent;
            border: none;
            cursor: pointer;
            transition: var(--transition);
            margin-right: 5px;
        }

        .action-btn:hover {
            background-color: var(--gray-light);
        }

        .action-btn.edit {
            color: var(--primary);
        }

        .action-btn.delete {
            color: var(--error);
        }

        .action-btn.view {
            color: var(--security-blue);
        }

        /* Chart Styles */
        .chart-container {
            position: relative;
            height: 350px;
            width: 100%;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
            font-weight: 500;
            color: var(--dark);
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            background-color: var(--secondary);
            border: 1px solid var(--gray-light);
            border-radius: var(--border-radius);
            color: var(--dark);
            font-size: 14px;
            transition: var(--transition);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(0, 211, 149, 0.2);
        }

        .form-select {
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 10px center;
            background-size: 16px;
        }

        .form-row {
            display: flex;
            flex-wrap: wrap;
            margin: 0 -10px;
        }

        .form-col {
            flex: 1;
            padding: 0 10px;
            min-width: 250px;
        }

        /* Modal Styles */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-dialog {
            background-color: var(--secondary);
            border-radius: var(--border-radius-lg);
            width: 100%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--box-shadow-lg);
            transform: translateY(-50px);
            transition: var(--transition);
        }

        .modal.active .modal-dialog {
            transform: translateY(0);
        }

        .modal-header {
            padding: 20px;
            border-bottom: 1px solid var(--gray-light);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .modal-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--dark);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            color: var(--gray);
            cursor: pointer;
            transition: var(--transition);
        }

        .modal-close:hover {
            color: var(--error);
        }

        .modal-body {
            padding: 20px;
        }

        .modal-footer {
            padding: 20px;
            border-top: 1px solid var(--gray-light);
            display: flex;
            align-items: center;
            justify-content: flex-end;
        }

        .modal-footer .btn {
            margin-left: 10px;
        }

        /* Tabs Styles */
        .tabs {
            display: flex;
            border-bottom: 1px solid var(--gray-light);
            margin-bottom: 20px;
        }

        .tab {
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 500;
            color: var(--gray);
            cursor: pointer;
            transition: var(--transition);
            position: relative;
        }

        .tab.active {
            color: var(--primary);
        }

        .tab.active:after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Notification Styles */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: var(--secondary);
            border: 1px solid var(--gray-light);
            border-radius: var(--border-radius);
            padding: 15px 20px;
            display: flex;
            align-items: center;
            box-shadow: var(--box-shadow-lg);
            z-index: 1100;
            transform: translateX(150%);
            transition: var(--transition);
        }

        .notification.active {
            transform: translateX(0);
        }

        .notification.success {
            border-left: 4px solid var(--success);
        }

        .notification.error {
            border-left: 4px solid var(--error);
        }

        .notification.warning {
            border-left: 4px solid var(--warning);
        }

        .notification-icon {
            font-size: 20px;
            margin-right: 15px;
        }

        .notification.success .notification-icon {
            color: var(--success);
        }

        .notification.error .notification-icon {
            color: var(--error);
        }

        .notification.warning .notification-icon {
            color: var(--warning);
        }

        .notification-content h4 {
            font-size: 14px;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 5px;
        }

        .notification-content p {
            font-size: 13px;
            color: var(--gray);
        }

        .notification-close {
            margin-left: 15px;
            font-size: 16px;
            color: var(--gray);
            cursor: pointer;
        }

        /* Loading Styles */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1200;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .loading-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* Responsive Styles */
        @media (max-width: 992px) {
            .admin-sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar-collapsed .admin-sidebar {
                transform: translateX(0);
                width: 280px;
            }
            
            .admin-main {
                margin-left: 0;
            }
            
            .sidebar-collapsed .admin-main {
                margin-left: 0;
            }
            
            .sidebar-toggle {
                display: block;
            }
        }

        @media (max-width: 768px) {
            .stats-cards {
                grid-template-columns: 1fr;
            }
            
            .form-col {
                flex: 0 0 100%;
                margin-bottom: 15px;
            }
            
            .content-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .content-actions {
                margin-top: 15px;
                width: 100%;
                justify-content: flex-end;
            }
        }

        /* Custom DataTables Styles */
        .dataTables_wrapper .dataTables_length,
        .dataTables_wrapper .dataTables_filter,
        .dataTables_wrapper .dataTables_info,
        .dataTables_wrapper .dataTables_paginate {
            color: var(--gray);
        }

        .dataTables_wrapper .dataTables_filter input {
            background-color: var(--secondary);
            border: 1px solid var(--gray-light);
            color: var(--dark);
            padding: 5px 10px;
            border-radius: var(--border-radius);
        }

        .dataTables_wrapper .dataTables_paginate .paginate_button {
            color: var(--gray) !important;
            border: 1px solid var(--gray-light) !important;
            background-color: var(--secondary) !important;
        }

        .dataTables_wrapper .dataTables_paginate .paginate_button.current,
        .dataTables_wrapper .dataTables_paginate .paginate_button.current:hover {
            background: var(--gradient) !important;
            color: var(--secondary-dark) !important;
            border: 1px solid var(--primary) !important;
        }

        .dataTables_wrapper .dataTables_paginate .paginate_button:hover {
            background: var(--gray-light) !important;
            color: var(--dark) !important;
        }

        /* Select2 Custom Styles */
        .select2-container--default .select2-selection--single {
            background-color: var(--secondary);
            border: 1px solid var(--gray-light);
            border-radius: var(--border-radius);
            height: 42px;
        }

        .select2-container--default .select2-selection--single .select2-selection__rendered {
            color: var(--dark);
            line-height: 42px;
        }

        .select2-container--default .select2-selection--single .select2-selection__arrow {
            height: 40px;
        }

        .select2-container--default .select2-results__option--selected {
            background-color: var(--gray-light);
        }

        .select2-container--default .select2-results__option--highlighted.select2-results__option--selectable {
            background-color: var(--primary);
            color: var(--secondary-dark);
        }

        .select2-dropdown {
            background-color: var(--secondary);
            border: 1px solid var(--gray-light);
        }

        /* Login Page Styles */
        .login-container {
            display: flex;
            min-height: 100vh;
            background-color: var(--secondary-dark);
        }

        .login-left {
            flex: 1;
            background: url('https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1') no-repeat center center;
            background-size: cover;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 50px;
            position: relative;
        }

        .login-left:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
        }

        .login-content {
            position: relative;
            z-index: 1;
            max-width: 500px;
        }

        .login-logo {
            margin-bottom: 30px;
            text-align: center;
        }

        .login-logo img {
            height: 60px;
        }

        .login-title {
            font-size: 28px;
            font-weight: 700;
            color: white;
            margin-bottom: 15px;
            font-family: 'Rowdies', sans-serif;
            text-align: center;
        }

        .login-subtitle {
            font-size: 16px;
            color: var(--gray);
            margin-bottom: 30px;
            text-align: center;
        }

        .login-right {
            width: 500px;
            background-color: var(--secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 50px;
        }

        .login-form {
            width: 100%;
        }

        .form-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 30px;
            text-align: center;
        }

        .input-group {
            position: relative;
            margin-bottom: 20px;
        }

        .input-icon {
            position: absolute;
            top: 50%;
            left: 15px;
            transform: translateY(-50%);
            color: var(--gray);
        }

        .login-input {
            width: 100%;
            padding: 12px 15px 12px 45px;
            background-color: var(--secondary-dark);
            border: 1px solid var(--gray-light);
            border-radius: var(--border-radius);
            color: var(--dark);
            font-size: 14px;
        }

        .login-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .remember-forgot {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .remember-me {
            display: flex;
            align-items: center;
        }

        .remember-me input {
            margin-right: 8px;
        }

        .remember-me label {
            font-size: 14px;
            color: var(--gray);
            cursor: pointer;
        }

        .forgot-password {
            font-size: 14px;
            color: var(--primary);
            text-decoration: none;
            transition: var(--transition);
        }

        .forgot-password:hover {
            text-decoration: underline;
        }

        .login-btn {
            width: 100%;
            padding: 12px;
            background-color: var(--primary);
            color: var(--secondary-dark);
            border: none;
            border-radius: var(--border-radius);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 20px;
        }

        .login-btn:hover {
            background-color: var(--primary-dark);
        }

        .login-divider {
            display: flex;
            align-items: center;
            margin: 20px 0;
        }

        .login-divider:before,
        .login-divider:after {
            content: '';
            flex: 1;
            height: 1px;
            background-color: var(--gray-light);
        }

        .login-divider span {
            padding: 0 15px;
            font-size: 14px;
            color: var(--gray);
        }

        .social-login {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .social-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--secondary-dark);
            color: var(--gray);
            border: 1px solid var(--gray-light);
            cursor: pointer;
            transition: var(--transition);
        }

        .social-btn:hover {
            background-color: var(--gray-light);
            color: var(--dark);
        }

        .login-footer {
            text-align: center;
            margin-top: 20px;
        }

        .login-footer p {
            font-size: 14px;
            color: var(--gray);
        }

        .login-footer a {
            color: var(--primary);
            text-decoration: none;
            transition: var(--transition);
        }

        .login-footer a:hover {
            text-decoration: underline;
        }

        /* 2FA Verification Styles */
        .verification-container {
            max-width: 400px;
            margin: 0 auto;
        }

        .verification-inputs {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
        }

        .verification-input {
            width: 50px;
            height: 50px;
            text-align: center;
            font-size: 20px;
            background-color: var(--secondary-dark);
            border: 1px solid var(--gray-light);
            border-radius: var(--border-radius);
            color: var(--dark);
        }

        .verification-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .verification-resend {
            text-align: center;
            margin-top: 20px;
        }

        .verification-resend a {
            color: var(--primary);
            text-decoration: none;
            transition: var(--transition);
        }

        .verification-resend a:hover {
            text-decoration: underline;
        }

        /* Responsive Login */
        @media (max-width: 992px) {
            .login-left {
                display: none;
            }
            
            .login-right {
                width: 100%;
            }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--secondary-dark);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--gray-light);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--gray);
        }
    </style>
</head>
<body>
    <!-- Login Page (Initially visible) -->
    <div class="login-container" id="loginPage">
        <div class="login-left">
            <div class="login-content">
                <div class="login-logo">
                    <img src="https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1" alt="BitHash Logo">
                </div>
                <h1 class="login-title">BitHash LLC</h1>
                <p class="login-subtitle">Institutional Bitcoin Mining Platform - Admin Dashboard</p>
            </div>
        </div>
        <div class="login-right">
            <div class="login-form">
                <h2 class="form-title">Admin Login</h2>
                <form id="loginForm">
                    <div class="input-group">
                        <i class="fas fa-envelope input-icon"></i>
                        <input type="email" class="login-input" id="loginEmail" placeholder="Email Address" required>
                    </div>
                    <div class="input-group">
                        <i class="fas fa-lock input-icon"></i>
                        <input type="password" class="login-input" id="loginPassword" placeholder="Password" required>
                    </div>
                    <div class="remember-forgot">
                        <div class="remember-me">
                            <input type="checkbox" id="rememberMe">
                            <label for="rememberMe">Remember me</label>
                        </div>
                        <a href="#" class="forgot-password" id="forgotPassword">Forgot password?</a>
                    </div>
                    <button type="submit" class="login-btn">Login</button>
                </form>
                
                <!-- 2FA Verification (Initially hidden) -->
                <div id="twoFactorAuth" style="display: none;">
                    <h2 class="form-title">Two-Factor Authentication</h2>
                    <p style="text-align: center; color: var(--gray); margin-bottom: 20px;">Enter the 6-digit code from your authenticator app</p>
                    <form id="twoFactorForm">
                        <div class="verification-inputs">
                            <input type="text" class="verification-input" maxlength="1" pattern="[0-9]">
                            <input type="text" class="verification-input" maxlength="1" pattern="[0-9]">
                            <input type="text" class="verification-input" maxlength="1" pattern="[0-9]">
                            <input type="text" class="verification-input" maxlength="1" pattern="[0-9]">
                            <input type="text" class="verification-input" maxlength="1" pattern="[0-9]">
                            <input type="text" class="verification-input" maxlength="1" pattern="[0-9]">
                        </div>
                        <button type="submit" class="login-btn">Verify</button>
                        <div class="verification-resend">
                            <p>Didn't receive a code? <a href="#" id="resendCode">Resend code</a></p>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Dashboard (Initially hidden) -->
    <div class="admin-container" id="adminDashboard" style="display: none;">
        <!-- Sidebar -->
        <div class="admin-sidebar">
            <div class="admin-logo">
                <img src="https://www.dropbox.com/scl/fi/1dq16nex1borvvknpcwox/circular_dark_background.png?rlkey=sq2ujl2oxxk9vyvg1j7oz0cdb&raw=1" alt="BitHash Logo">
                <span>BitHash</span>
            </div>
            <div class="admin-menu">
                <div class="menu-item active" data-section="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </div>
                
                <div class="menu-item has-submenu" data-section="users">
                    <i class="fas fa-users"></i>
                    <span>User Management</span>
                    <span class="badge">24</span>
                </div>
                <div class="submenu">
                    <div class="submenu-item active" data-subsection="all-users">All Users</div>
                    <div class="submenu-item" data-subsection="new-users">New Users</div>
                    <div class="submenu-item" data-subsection="suspended">Suspended</div>
                    <div class="submenu-item" data-subsection="kyc-pending">KYC Pending</div>
                </div>
                
                <div class="menu-item has-submenu" data-section="financial">
                    <i class="fas fa-wallet"></i>
                    <span>Financial</span>
                </div>
                <div class="submenu">
                    <div class="submenu-item" data-subsection="transactions">Transactions</div>
                    <div class="submenu-item" data-subsection="deposits">Deposits</div>
                    <div class="submenu-item" data-subsection="withdrawals">Withdrawals</div>
                    <div class="submenu-item" data-subsection="investments">Investments</div>
                </div>
                
                <div class="menu-item" data-section="mining">
                    <i class="fas fa-microchip"></i>
                    <span>Mining Operations</span>
                </div>
                
                <div class="menu-item has-submenu" data-section="support">
                    <i class="fas fa-headset"></i>
                    <span>Support</span>
                    <span class="badge">5</span>
                </div>
                <div class="submenu">
                    <div class="submenu-item" data-subsection="tickets">Tickets</div>
                    <div class="submenu-item" data-subsection="live-chat">Live Chat</div>
                </div>
                
                <div class="menu-item has-submenu" data-section="marketing">
                    <i class="fas fa-bullhorn"></i>
                    <span>Marketing</span>
                </div>
                <div class="submenu">
                    <div class="submenu-item" data-subsection="promotions">Promotions</div>
                    <div class="submenu-item" data-subsection="notifications">Notifications</div>
                    <div class="submenu-item" data-subsection="email-campaigns">Email Campaigns</div>
                </div>
                
                <div class="menu-item" data-section="reports">
                    <i class="fas fa-chart-bar"></i>
                    <span>Reports</span>
                </div>
                
                <div class="menu-item has-submenu" data-section="settings">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </div>
                <div class="submenu">
                    <div class="submenu-item" data-subsection="system">System</div>
                    <div class="submenu-item" data-subsection="security">Security</div>
                    <div class="submenu-item" data-subsection="payment-methods">Payment Methods</div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="admin-main">
            <!-- Header -->
            <div class="admin-header">
                <div class="header-left">
                    <div class="sidebar-toggle">
                        <i class="fas fa-bars"></i>
                    </div>
                    <div class="page-title">Dashboard Overview</div>
                </div>
                <div class="header-right">
                    <div class="header-icon" id="notificationsBtn">
                        <i class="fas fa-bell"></i>
                        <span class="badge">3</span>
                    </div>
                    <div class="header-icon" id="messagesBtn">
                        <i class="fas fa-envelope"></i>
                        <span class="badge">5</span>
                    </div>
                    <div class="admin-profile">
                        <img src="https://randomuser.me/api/portraits/men/1.jpg" class="profile-image" alt="Admin">
                        <span class="profile-name">Admin User</span>
                        <div class="profile-dropdown">
                            <div class="dropdown-item">
                                <i class="fas fa-user"></i> My Profile
                            </div>
                            <div class="dropdown-item">
                                <i class="fas fa-cog"></i> Settings
                            </div>
                            <div class="dropdown-divider"></div>
                            <div class="dropdown-item" id="logoutBtn">
                                <i class="fas fa-sign-out-alt"></i> Logout
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Dashboard Content -->
            <div class="admin-content" id="dashboardContent">
                <!-- Stats Cards -->
                <div class="stats-cards">
                    <div class="stats-card">
                        <div class="stats-icon users">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stats-info">
                            <h3 id="totalUsers">5,241,387</h3>
                            <p>Total Users</p>
                        </div>
                    </div>
                    <div class="stats-card">
                        <div class="stats-icon transactions">
                            <i class="fas fa-exchange-alt"></i>
                        </div>
                        <div class="stats-info">
                            <h3 id="dailyTransactions">12,847</h3>
                            <p>Daily Transactions</p>
                        </div>
                    </div>
                    <div class="stats-card">
                        <div class="stats-icon revenue">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="stats-info">
                            <h3 id="dailyRevenue">$1.24M</h3>
                            <p>Daily Revenue</p>
                        </div>
                    </div>
                    <div class="stats-card">
                        <div class="stats-icon active">
                            <i class="fas fa-user-check"></i>
                        </div>
                        <div class="stats-info">
                            <h3 id="activeUsers">1,842,156</h3>
                            <p>Active Users</p>
                        </div>
                    </div>
                </div>

                <!-- Charts Row -->
                <div class="row">
                    <div class="col-md-8">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Revenue & User Growth</div>
                                <div class="card-tools">
                                    <select class="form-control form-control-sm" id="growthChartRange">
                                        <option value="7">Last 7 Days</option>
                                        <option value="30" selected>Last 30 Days</option>
                                        <option value="90">Last 90 Days</option>
                                        <option value="365">Last Year</option>
                                    </select>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="chart-container">
                                    <canvas id="growthChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">User Distribution</div>
                            </div>
                            <div class="card-body">
                                <div class="chart-container">
                                    <canvas id="userDistributionChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity & Top Users -->
                <div class="row">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Recent Activity</div>
                                <div class="card-tools">
                                    <button class="btn btn-sm btn-outline">View All</button>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="activity-list" id="recentActivity">
                                    <!-- Activity items will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Top Users by Balance</div>
                                <div class="card-tools">
                                    <button class="btn btn-sm btn-outline">View All</button>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table" id="topUsersTable">
                                        <thead>
                                            <tr>
                                                <th>User</th>
                                                <th>Balance</th>
                                                <th>Status</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <!-- Top users will be loaded here -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Users Content (Hidden by default) -->
            <div class="admin-content" id="usersContent" style="display: none;">
                <div class="content-header">
                    <div class="content-title">User Management</div>
                    <div class="content-actions">
                        <button class="btn btn-primary" id="addUserBtn">
                            <i class="fas fa-plus"></i> Add User
                        </button>
                        <button class="btn btn-outline">
                            <i class="fas fa-download"></i> Export
                        </button>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">All Users</div>
                        <div class="card-tools">
                            <div class="input-group" style="width: 250px;">
                                <input type="text" class="form-control" placeholder="Search users...">
                                <div class="input-group-append">
                                    <button class="btn btn-outline">
                                        <i class="fas fa-search"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table" id="usersTable">
                                <thead>
                                    <tr>
                                        <th>User</th>
                                        <th>Email</th>
                                        <th>Balance</th>
                                        <th>Status</th>
                                        <th>Joined</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Users will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Financial Content (Hidden by default) -->
            <div class="admin-content" id="financialContent" style="display: none;">
                <div class="content-header">
                    <div class="content-title">Financial Management</div>
                    <div class="content-actions">
                        <button class="btn btn-outline">
                            <i class="fas fa-filter"></i> Filters
                        </button>
                        <button class="btn btn-outline">
                            <i class="fas fa-download"></i> Export
                        </button>
                    </div>
                </div>

                <div class="tabs">
                    <div class="tab active" data-tab="transactions">Transactions</div>
                    <div class="tab" data-tab="deposits">Deposits</div>
                    <div class="tab" data-tab="withdrawals">Withdrawals</div>
                    <div class="tab" data-tab="investments">Investments</div>
                </div>

                <div class="tab-content active" id="transactionsTab">
                    <div class="card">
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table" id="transactionsTable">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>User</th>
                                            <th>Type</th>
                                            <th>Amount</th>
                                            <th>Status</th>
                                            <th>Date</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Transactions will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="depositsTab">
                    <div class="card">
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table" id="depositsTable">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>User</th>
                                            <th>Method</th>
                                            <th>Amount</th>
                                            <th>Status</th>
                                            <th>Date</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Deposits will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="withdrawalsTab">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Withdrawal Requests</div>
                            <div class="card-tools">
                                <select class="form-control form-control-sm" id="withdrawalFilter">
                                    <option value="all">All Statuses</option>
                                    <option value="pending">Pending</option>
                                    <option value="completed">Completed</option>
                                    <option value="rejected">Rejected</option>
                                </select>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table" id="withdrawalsTable">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>User</th>
                                            <th>Method</th>
                                            <th>Amount</th>
                                            <th>Status</th>
                                            <th>Date</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Withdrawals will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="investmentsTab">
                    <div class="card">
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table" id="investmentsTable">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>User</th>
                                            <th>Plan</th>
                                            <th>Amount</th>
                                            <th>Profit</th>
                                            <th>Status</th>
                                            <th>Date</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Investments will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Mining Content (Hidden by default) -->
            <div class="admin-content" id="miningContent" style="display: none;">
                <div class="content-header">
                    <div class="content-title">Mining Operations</div>
                    <div class="content-actions">
                        <button class="btn btn-primary">
                            <i class="fas fa-plus"></i> Add Rig
                        </button>
                    </div>
                </div>

                <div class="stats-cards">
                    <div class="stats-card">
                        <div class="stats-icon users">
                            <i class="fas fa-server"></i>
                        </div>
                        <div class="stats-info">
                            <h3 id="totalRigs">1,248</h3>
                            <p>Total Rigs</p>
                        </div>
                    </div>
                    <div class="stats-card">
                        <div class="stats-icon transactions">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <div class="stats-info">
                            <h3 id="hashRate">42.7 PH/s</h3>
                            <p>Total Hashrate</p>
                        </div>
                    </div>
                    <div class="stats-card">
                        <div class="stats-icon revenue">
                            <i class="fas fa-coins"></i>
                        </div>
                        <div class="stats-info">
                            <h3 id="dailyMined">3.28 BTC</h3>
                            <p>Daily Mined</p>
                        </div>
                    </div>
                    <div class="stats-card">
                        <div class="stats-icon active">
                            <i class="fas fa-plug"></i>
                        </div>
                        <div class="stats-info">
                            <h3 id="activeRigs">1,187</h3>
                            <p>Active Rigs</p>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Mining Statistics</div>
                        <div class="card-tools">
                            <select class="form-control form-control-sm" id="miningStatsRange">
                                <option value="7">Last 7 Days</option>
                                <option value="30" selected>Last 30 Days</option>
                                <option value="90">Last 90 Days</option>
                            </select>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="miningStatsChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Mining Rigs</div>
                        <div class="card-tools">
                            <div class="input-group" style="width: 250px;">
                                <input type="text" class="form-control" placeholder="Search rigs...">
                                <div class="input-group-append">
                                    <button class="btn btn-outline">
                                        <i class="fas fa-search"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table" id="miningRigsTable">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Location</th>
                                        <th>Model</th>
                                        <th>Hashrate</th>
                                        <th>Status</th>
                                        <th>Uptime</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Mining rigs will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Support Content (Hidden by default) -->
            <div class="admin-content" id="supportContent" style="display: none;">
                <div class="content-header">
                    <div class="content-title">Support Center</div>
                    <div class="content-actions">
                        <button class="btn btn-outline">
                            <i class="fas fa-filter"></i> Filters
                        </button>
                    </div>
                </div>

                <div class="tabs">
                    <div class="tab active" data-tab="tickets">Tickets</div>
                    <div class="tab" data-tab="liveChat">Live Chat</div>
                </div>

                <div class="tab-content active" id="ticketsTab">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Support Tickets</div>
                            <div class="card-tools">
                                <select class="form-control form-control-sm" id="ticketFilter">
                                    <option value="all">All Tickets</option>
                                    <option value="open">Open</option>
                                    <option value="pending">Pending</option>
                                    <option value="resolved">Resolved</option>
                                </select>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table" id="ticketsTable">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>User</th>
                                            <th>Subject</th>
                                            <th>Category</th>
                                            <th>Status</th>
                                            <th>Last Update</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Tickets will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="liveChatTab">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Live Chat Sessions</div>
                            <div class="card-tools">
                                <select class="form-control form-control-sm" id="chatFilter">
                                    <option value="all">All Chats</option>
                                    <option value="active">Active</option>
                                    <option value="closed">Closed</option>
                                </select>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="chat-list" id="chatList">
                                        <!-- Chat list will be loaded here -->
                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <div class="chat-window" id="chatWindow" style="display: none;">
                                        <div class="chat-header">
                                            <div class="chat-user">
                                                <img src="" class="user-avatar" id="chatUserAvatar">
                                                <div>
                                                    <div class="user-name" id="chatUserName"></div>
                                                    <div class="user-status" id="chatUserStatus"></div>
                                                </div>
                                            </div>
                                            <button class="btn btn-sm btn-outline" id="endChatBtn">
                                                <i class="fas fa-times"></i> End Chat
                                            </button>
                                        </div>
                                        <div class="chat-messages" id="chatMessages">
                                            <!-- Messages will be loaded here -->
                                        </div>
                                        <div class="chat-input">
                                            <input type="text" class="form-control" id="chatMessageInput" placeholder="Type your message...">
                                            <button class="btn btn-primary" id="sendMessageBtn">
                                                <i class="fas fa-paper-plane"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="chat-placeholder" id="chatPlaceholder">
                                        <i class="fas fa-comments" style="font-size: 48px; color: var(--gray); margin-bottom: 20px;"></i>
                                        <h4>Select a chat to start messaging</h4>
                                        <p>Choose a user from the list to view and respond to their messages</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Marketing Content (Hidden by default) -->
            <div class="admin-content" id="marketingContent" style="display: none;">
                <div class="content-header">
                    <div class="content-title">Marketing Tools</div>
                    <div class="content-actions">
                        <button class="btn btn-primary" id="createCampaignBtn">
                            <i class="fas fa-plus"></i> Create Campaign
                        </button>
                    </div>
                </div>

                <div class="tabs">
                    <div class="tab active" data-tab="promotions">Promotions</div>
                    <div class="tab" data-tab="notifications">Notifications</div>
                    <div class="tab" data-tab="emailCampaigns">Email Campaigns</div>
                </div>

                <div class="tab-content active" id="promotionsTab">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Active Promotions</div>
                            <div class="card-tools">
                                <button class="btn btn-sm btn-primary" id="addPromotionBtn">
                                    <i class="fas fa-plus"></i> Add Promotion
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table" id="promotionsTable">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Name</th>
                                            <th>Type</th>
                                            <th>Discount</th>
                                            <th>Start Date</th>
                                            <th>End Date</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Promotions will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="notificationsTab">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Push Notifications</div>
                            <div class="card-tools">
                                <button class="btn btn-sm btn-primary" id="sendNotificationBtn">
                                    <i class="fas fa-paper-plane"></i> Send Notification
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table" id="notificationsTable">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Title</th>
                                            <th>Message</th>
                                            <th>Target</th>
                                            <th>Sent At</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Notifications will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="emailCampaignsTab">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Email Campaigns</div>
                            <div class="card-tools">
                                <button class="btn btn-sm btn-primary" id="createEmailCampaignBtn">
                                    <i class="fas fa-plus"></i> Create Campaign
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table" id="emailCampaignsTable">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Subject</th>
                                            <th>Target Group</th>
                                            <th>Sent</th>
                                            <th>Opened</th>
                                            <th>Clicked</th>
                                            <th>Sent At</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Email campaigns will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reports Content (Hidden by default) -->
            <div class="admin-content" id="reportsContent" style="display: none;">
                <div class="content-header">
                    <div class="content-title">Reports & Analytics</div>
                    <div class="content-actions">
                        <button class="btn btn-outline">
                            <i class="fas fa-download"></i> Export
                        </button>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Generate Report</div>
                    </div>
                    <div class="card-body">
                        <form id="reportForm">
                            <div class="form-row">
                                <div class="form-col">
                                    <div class="form-group">
                                        <label class="form-label">Report Type</label>
                                        <select class="form-control form-select" id="reportType">
                                            <option value="users">User Growth</option>
                                            <option value="transactions">Transactions</option>
                                            <option value="revenue">Revenue</option>
                                            <option value="mining">Mining Performance</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-col">
                                    <div class="form-group">
                                        <label class="form-label">Date Range</label>
                                        <select class="form-control form-select" id="reportRange">
                                            <option value="7">Last 7 Days</option>
                                            <option value="30" selected>Last 30 Days</option>
                                            <option value="90">Last 90 Days</option>
                                            <option value="custom">Custom Range</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-col" id="customDateRange" style="display: none;">
                                    <div class="form-group">
                                        <label class="form-label">Custom Dates</label>
                                        <div class="input-daterange input-group">
                                            <input type="date" class="form-control" id="startDate">
                                            <div class="input-group-append">
                                                <span class="input-group-text">to</span>
                                            </div>
                                            <input type="date" class="form-control" id="endDate">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-chart-bar"></i> Generate Report
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Report Results</div>
                        <div class="card-tools">
                            <button class="btn btn-sm btn-outline">
                                <i class="fas fa-download"></i> PDF
                            </button>
                            <button class="btn btn-sm btn-outline">
                                <i class="fas fa-download"></i> CSV
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="reportChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Content (Hidden by default) -->
            <div class="admin-content" id="settingsContent" style="display: none;">
                <div class="content-header">
                    <div class="content-title">System Settings</div>
                    <div class="content-actions">
                        <button class="btn btn-primary" id="saveSettingsBtn">
                            <i class="fas fa-save"></i> Save Changes
                        </button>
                    </div>
                </div>

                <div class="tabs">
                    <div class="tab active" data-tab="system">System</div>
                    <div class="tab" data-tab="security">Security</div>
                    <div class="tab" data-tab="paymentMethods">Payment Methods</div>
                </div>

                <div class="tab-content active" id="systemTab">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">General Settings</div>
                        </div>
                        <div class="card-body">
                            <form id="systemSettingsForm">
                                <div class="form-group">
                                    <label class="form-label">Platform Name</label>
                                    <input type="text" class="form-control" id="platformName" value="BitHash LLC">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Platform Email</label>
                                    <input type="email" class="form-control" id="platformEmail" value="support@bithash.com">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Platform Currency</label>
                                    <select class="form-control form-select" id="platformCurrency">
                                        <option value="USD">US Dollar (USD)</option>
                                        <option value="EUR">Euro (EUR)</option>
                                        <option value="GBP">British Pound (GBP)</option>
                                        <option value="BTC">Bitcoin (BTC)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Maintenance Mode</label>
                                    <select class="form-control form-select" id="maintenanceMode">
                                        <option value="0">Disabled</option>
                                        <option value="1">Enabled</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Registration Status</label>
                                    <select class="form-control form-select" id="registrationStatus">
                                        <option value="open">Open</option>
                                        <option value="invite">Invite Only</option>
                                        <option value="closed">Closed</option>
                                    </select>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="securityTab">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Security Settings</div>
                        </div>
                        <div class="card-body">
                            <form id="securitySettingsForm">
                                <div class="form-group">
                                    <label class="form-label">Two-Factor Authentication</label>
                                    <select class="form-control form-select" id="twoFactorAuth">
                                        <option value="optional">Optional</option>
                                        <option value="required">Required for all users</option>
                                        <option value="required_admin">Required for admins only</option>
                                        <option value="disabled">Disabled</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Login Attempts Before Lockout</label>
                                    <input type="number" class="form-control" id="loginAttempts" value="5">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Lockout Duration (minutes)</label>
                                    <input type="number" class="form-control" id="lockoutDuration" value="30">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Password Complexity</label>
                                    <select class="form-control form-select" id="passwordComplexity">
                                        <option value="low">Low (6+ characters)</option>
                                        <option value="medium" selected>Medium (8+ characters with mix)</option>
                                        <option value="high">High (12+ characters with special)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Session Timeout (minutes)</label>
                                    <input type="number" class="form-control" id="sessionTimeout" value="30">
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="paymentMethodsTab">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Payment Methods</div>
                        </div>
                        <div class="card-body">
                            <form id="paymentSettingsForm">
                                <div class="form-group">
                                    <label class="form-label">Enabled Payment Methods</label>
                                    <div class="payment-methods">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="enableCreditCard" checked>
                                            <label class="form-check-label" for="enableCreditCard">Credit/Debit Card</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="enableBankTransfer" checked>
                                            <label class="form-check-label" for="enableBankTransfer">Bank Transfer</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="enablePaypal">
                                            <label class="form-check-label" for="enablePaypal">PayPal</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="enableCrypto" checked>
                                            <label class="form-check-label" for="enableCrypto">Cryptocurrency</label>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Stripe API Key</label>
                                    <input type="password" class="form-control" id="stripeApiKey" placeholder="sk_test_...">
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Bank Account Details</label>
                                    <textarea class="form-control" id="bankDetails" rows="4" placeholder="Bank name, account number, routing number, etc."></textarea>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Bitcoin Wallet Address</label>
                                    <input type="text" class="form-control" id="btcWallet" placeholder="1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa">
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Ethereum Wallet Address</label>
                                    <input type="text" class="form-control" id="ethWallet" placeholder="0x71C7656EC7ab88b098defB751B7401B5f6d8976F">
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add User Modal -->
    <div class="modal" id="addUserModal">
        <div class="modal-dialog">
            <div class="modal-header">
                <div class="modal-title">Add New User</div>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="addUserForm">
                    <div class="form-row">
                        <div class="form-col">
                            <div class="form-group">
                                <label class="form-label">First Name</label>
                                <input type="text" class="form-control" id="userFirstName" required>
                            </div>
                        </div>
                        <div class="form-col">
                            <div class="form-group">
                                <label class="form-label">Last Name</label>
                                <input type="text" class="form-control" id="userLastName" required>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Email Address</label>
                        <input type="email" class="form-control" id="userEmail" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" class="form-control" id="userPassword" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Phone Number</label>
                        <input type="tel" class="form-control" id="userPhone">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Initial Balance (USD)</label>
                        <input type="number" class="form-control" id="userBalance" value="0" min="0" step="0.01">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">User Role</label>
                        <select class="form-control form-select" id="userRole">
                            <option value="user">Regular User</option>
                            <option value="vip">VIP User</option>
                            <option value="admin">Administrator</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Status</label>
                        <select class="form-control form-select" id="userStatus">
                            <option value="active">Active</option>
                            <option value="pending">Pending</option>
                            <option value="suspended">Suspended</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelAddUser">Cancel</button>
                <button class="btn btn-primary" id="submitAddUser">Add User</button>
            </div>
        </div>
    </div>

    <!-- Edit User Modal -->
    <div class="modal" id="editUserModal">
        <div class="modal-dialog">
            <div class="modal-header">
                <div class="modal-title">Edit User</div>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="editUserForm">
                    <div class="form-row">
                        <div class="form-col">
                            <div class="form-group">
                                <label class="form-label">First Name</label>
                                <input type="text" class="form-control" id="editUserFirstName" required>
                            </div>
                        </div>
                        <div class="form-col">
                            <div class="form-group">
                                <label class="form-label">Last Name</label>
                                <input type="text" class="form-control" id="editUserLastName" required>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Email Address</label>
                        <input type="email" class="form-control" id="editUserEmail" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Phone Number</label>
                        <input type="tel" class="form-control" id="editUserPhone">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Balance (USD)</label>
                        <input type="number" class="form-control" id="editUserBalance" min="0" step="0.01">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">User Role</label>
                        <select class="form-control form-select" id="editUserRole">
                            <option value="user">Regular User</option>
                            <option value="vip">VIP User</option>
                            <option value="admin">Administrator</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Status</label>
                        <select class="form-control form-select" id="editUserStatus">
                            <option value="active">Active</option>
                            <option value="pending">Pending</option>
                            <option value="suspended">Suspended</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">KYC Verification</label>
                        <select class="form-control form-select" id="editUserKyc">
                            <option value="verified">Verified</option>
                            <option value="pending">Pending</option>
                            <option value="unverified">Unverified</option>
                            <option value="rejected">Rejected</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Two-Factor Authentication</label>
                        <select class="form-control form-select" id="editUser2fa">
                            <option value="enabled">Enabled</option>
                            <option value="disabled">Disabled</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelEditUser">Cancel</button>
                <button class="btn btn-primary" id="submitEditUser">Save Changes</button>
            </div>
        </div>
    </div>

    <!-- View User Modal -->
    <div class="modal" id="viewUserModal">
        <div class="modal-dialog" style="max-width: 800px;">
            <div class="modal-header">
                <div class="modal-title">User Details</div>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-4">
                        <div class="user-profile-card text-center">
                            <img src="https://randomuser.me/api/portraits/men/32.jpg" class="user-avatar" style="width: 100px; height: 100px;" id="viewUserAvatar">
                            <h4 class="user-name mt-3" id="viewUserName">John Doe</h4>
                            <div class="status-badge success" id="viewUserStatusBadge">Active</div>
                            
                            <div class="user-stats mt-4">
                                <div class="stat-item">
                                    <div class="stat-value" id="viewUserBalance">$5,245.00</div>
                                    <div class="stat-label">Account Balance</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value" id="viewUserInvested">$12,500.00</div>
                                    <div class="stat-label">Total Invested</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value" id="viewUserProfit">$2,340.00</div>
                                    <div class="stat-label">Total Profit</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-8">
                        <div class="tabs">
                            <div class="tab active" data-tab="info">Info</div>
                            <div class="tab" data-tab="transactions">Transactions</div>
                            <div class="tab" data-tab="investments">Investments</div>
                            <div class="tab" data-tab="documents">Documents</div>
                        </div>
                        
                        <div class="tab-content active" id="userInfoTab">
                            <table class="table table-borderless">
                                <tr>
                                    <td width="30%">Email Address</td>
                                    <td id="viewUserEmail">john.doe@example.com</td>
                                </tr>
                                <tr>
                                    <td>Phone Number</td>
                                    <td id="viewUserPhone">+1 (555) 123-4567</td>
                                </tr>
                                <tr>
                                    <td>Registration Date</td>
                                    <td id="viewUserRegDate">January 15, 2022</td>
                                </tr>
                                <tr>
                                    <td>Last Login</td>
                                    <td id="viewUserLastLogin">2 hours ago</td>
                                </tr>
                                <tr>
                                    <td>IP Address</td>
                                    <td id="viewUserIp">192.168.1.1</td>
                                </tr>
                                <tr>
                                    <td>User Role</td>
                                    <td id="viewUserRole">VIP User</td>
                                </tr>
                                <tr>
                                    <td>KYC Status</td>
                                    <td><span class="status-badge success" id="viewUserKyc">Verified</span></td>
                                </tr>
                                <tr>
                                    <td>2FA Status</td>
                                    <td><span class="status-badge success" id="viewUser2fa">Enabled</span></td>
                                </tr>
                            </table>
                        </div>
                        
                        <div class="tab-content" id="userTransactionsTab">
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Type</th>
                                            <th>Amount</th>
                                            <th>Date</th>
                                            <th>Status</th>
                                        </tr>
                                    </thead>
                                    <tbody id="userTransactionsList">
                                        <!-- Transactions will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <div class="tab-content" id="userInvestmentsTab">
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Plan</th>
                                            <th>Amount</th>
                                            <th>Profit</th>
                                            <th>Start Date</th>
                                            <th>Status</th>
                                        </tr>
                                    </thead>
                                    <tbody id="userInvestmentsList">
                                        <!-- Investments will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <div class="tab-content" id="userDocumentsTab">
                            <div class="documents-list" id="userDocumentsList">
                                <!-- Documents will be loaded here -->
                            </div>
                            <button class="btn btn-primary mt-3">
                                <i class="fas fa-upload"></i> Upload Document
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="suspendUserBtn">
                    <i class="fas fa-ban"></i> Suspend User
                </button>
                <button class="btn btn-primary" id="editUserFromViewBtn">
                    <i class="fas fa-edit"></i> Edit User
                </button>
            </div>
        </div>
    </div>

    <!-- Process Withdrawal Modal -->
    <div class="modal" id="processWithdrawalModal">
        <div class="modal-dialog">
            <div class="modal-header">
                <div class="modal-title">Process Withdrawal</div>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="processWithdrawalForm">
                    <div class="form-group">
                        <label class="form-label">Withdrawal ID</label>
                        <input type="text" class="form-control" id="withdrawalId" readonly>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">User</label>
                        <input type="text" class="form-control" id="withdrawalUser" readonly>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Amount</label>
                        <input type="text" class="form-control" id="withdrawalAmount" readonly>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Payment Method</label>
                        <input type="text" class="form-control" id="withdrawalMethod" readonly>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Wallet/Account</label>
                        <input type="text" class="form-control" id="withdrawalWallet" readonly>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Transaction Hash/ID (Optional)</label>
                        <input type="text" class="form-control" id="withdrawalTxHash" placeholder="Enter transaction hash or ID if available">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Action</label>
                        <select class="form-control form-select" id="withdrawalAction">
                            <option value="approve">Approve</option>
                            <option value="reject">Reject</option>
                        </select>
                    </div>
                    
                    <div class="form-group" id="rejectionReasonGroup" style="display: none;">
                        <label class="form-label">Rejection Reason</label>
                        <textarea class="form-control" id="rejectionReason" rows="3" placeholder="Provide reason for rejection"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelWithdrawalProcess">Cancel</button>
                <button class="btn btn-primary" id="submitWithdrawalProcess">Submit</button>
            </div>
        </div>
    </div>

    <!-- Send Notification Modal -->
    <div class="modal" id="sendNotificationModal">
        <div class="modal-dialog">
            <div class="modal-header">
                <div class="modal-title">Send Notification</div>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="sendNotificationForm">
                    <div class="form-group">
                        <label class="form-label">Notification Type</label>
                        <select class="form-control form-select" id="notificationType">
                            <option value="all">All Users</option>
                            <option value="active">Active Users</option>
                            <option value="inactive">Inactive Users</option>
                            <option value="vip">VIP Users</option>
                            <option value="custom">Custom Selection</option>
                        </select>
                    </div>
                    
                    <div class="form-group" id="customUsersGroup" style="display: none;">
                        <label class="form-label">Select Users</label>
                        <select class="form-control form-select" id="notificationUsers" multiple>
                            <!-- Users will be loaded here -->
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Title</label>
                        <input type="text" class="form-control" id="notificationTitle" placeholder="Enter notification title" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Message</label>
                        <textarea class="form-control" id="notificationMessage" rows="5" placeholder="Enter notification message" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Priority</label>
                        <select class="form-control form-select" id="notificationPriority">
                            <option value="normal">Normal</option>
                            <option value="high">High</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelSendNotification">Cancel</button>
                <button class="btn btn-primary" id="submitSendNotification">Send Notification</button>
            </div>
        </div>
    </div>

    <!-- View Ticket Modal -->
    <div class="modal" id="viewTicketModal">
        <div class="modal-dialog" style="max-width: 800px;">
            <div class="modal-header">
                <div class="modal-title">Support Ticket #<span id="ticketId">12345</span></div>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="ticket-header mb-4">
                    <div class="ticket-user">
                        <img src="https://randomuser.me/api/portraits/women/44.jpg" class="user-avatar">
                        <div>
                            <div class="user-name" id="ticketUserName">Sarah Johnson</div>
                            <div class="user-email" id="ticketUserEmail">sarah.johnson@example.com</div>
                        </div>
                    </div>
                    <div class="ticket-meta">
                        <div class="ticket-status status-badge success" id="ticketStatusBadge">Open</div>
                        <div class="ticket-date" id="ticketDate">2 hours ago</div>
                    </div>
                </div>
                
                <div class="ticket-subject">
                    <h5 id="ticketSubject">Unable to withdraw funds</h5>
                </div>
                
                <div class="ticket-message">
                    <p id="ticketMessage">Hello, I've been trying to withdraw my funds but keep getting an error message saying "Withdrawal failed". I've tried multiple times over the past 2 days with the same result. Please help resolve this issue as soon as possible.</p>
                </div>
                
                <div class="ticket-attachments" id="ticketAttachments">
                    <!-- Attachments will be shown here -->
                </div>
                
                <div class="ticket-replies mt-5">
                    <h6 class="mb-3">Replies</h6>
                    <div class="replies-list" id="ticketReplies">
                        <!-- Replies will be loaded here -->
                    </div>
                </div>
                
                <div class="ticket-reply-form mt-4">
                    <form id="ticketReplyForm">
                        <div class="form-group">
                            <label class="form-label">Your Reply</label>
                            <textarea class="form-control" id="ticketReplyMessage" rows="4" placeholder="Type your reply here..." required></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Status</label>
                            <select class="form-control form-select" id="ticketStatus">
                                <option value="open">Open</option>
                                <option value="pending">Pending</option>
                                <option value="resolved">Resolved</option>
                            </select>
                        </div>
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="closeTicketBtn">
                    <i class="fas fa-times"></i> Close Ticket
                </button>
                <button class="btn btn-primary" id="submitTicketReply">
                    <i class="fas fa-paper-plane"></i> Submit Reply
                </button>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification">
        <div class="notification-icon">
            <i class="fas fa-check-circle"></i>
        </div>
        <div class="notification-content">
            <h4 id="notificationTitle">Success</h4>
            <p id="notificationMessage">Operation completed successfully</p>
        </div>
        <div class="notification-close">
            <i class="fas fa-times"></i>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    
    <!-- DataTables -->
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.5.0/js/dataTables.responsive.min.js"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    
    <!-- Select2 -->
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    
    <!-- AOS Animation -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
    <!-- Moment.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
    
    <!-- Socket.io -->
    <script src="https://cdn.socket.io/4.6.0/socket.io.min.js"></script>

    <script>
        // Initialize AOS animations
        AOS.init();
        
        // Global variables
        let authToken = null;
        let currentUser = null;
        let socket = null;
        
        // API Base URL
        const API_BASE_URL = 'https://website-backendd-1.onrender.com/api/admin';
        
        // DOM Ready
        $(document).ready(function() {
            // Check if user is already logged in
            checkAdminSession();
            
            // Initialize Select2
            $('.form-select').select2({
                width: '100%',
                minimumResultsForSearch: Infinity
            });
            
            // Initialize DataTables
            initDataTables();
            
            // Event Listeners
            setupEventListeners();
        });
        
        // Check admin session
        function checkAdminSession() {
            const token = localStorage.getItem('adminToken');
            if (token) {
                // Verify token with backend
                $.ajax({
                    url: `${API_BASE_URL}/auth/verify`,
                    type: 'GET',
                    headers: {
                        'Authorization': `Bearer ${token}`
                    },
                    beforeSend: showLoading,
                    complete: hideLoading,
                    success: function(response) {
                        if (response.valid) {
                            authToken = token;
                            currentUser = response.user;
                            showAdminDashboard();
                            loadDashboardData();
                            connectWebSocket();
                        } else {
                            localStorage.removeItem('adminToken');
                            showLoginPage();
                        }
                    },
                    error: function() {
                        localStorage.removeItem('adminToken');
                        showLoginPage();
                    }
                });
            } else {
                showLoginPage();
            }
        }
        
        // Show login page
        function showLoginPage() {
            $('#loginPage').show();
            $('#adminDashboard').hide();
        }
        
        // Show admin dashboard
        function showAdminDashboard() {
            $('#loginPage').hide();
            $('#adminDashboard').show();
            updateAdminProfile();
        }
        
        // Update admin profile in header
        function updateAdminProfile() {
            if (currentUser) {
                $('.profile-name').text(currentUser.name);
                $('.profile-image').attr('src', currentUser.avatar || 'https://randomuser.me/api/portraits/men/1.jpg');
            }
        }
        
        // Initialize DataTables
        function initDataTables() {
            $('#usersTable').DataTable({
                responsive: true,
                dom: '<"top"lf>rt<"bottom"ip>',
                ajax: {
                    url: `${API_BASE_URL}/users`,
                    type: 'GET',
                    headers: {
                        'Authorization': `Bearer ${authToken}`
                    },
                    dataSrc: 'data'
                },
                columns: [
                    { 
                        data: null,
                        render: function(data, type, row) {
                            return `
                                <div class="user-info">
                                    <img src="${row.avatar || 'https://randomuser.me/api/portraits/men/' + (Math.floor(Math.random() * 100) + 1) + '.jpg'}" class="user-avatar">
                                    <div>
                                        <div class="user-name">${row.name}</div>
                                        <div class="user-email">${row.email}</div>
                                    </div>
                                </div>
                            `;
                        }
                    },
                    { data: 'email' },
                    { 
                        data: 'balance',
                        render: function(data) {
                            return `$${parseFloat(data).toFixed(2)}`;
                        }
                    },
                    { 
                        data: 'status',
                        render: function(data) {
                            let badgeClass = 'success';
                            if (data === 'pending') badgeClass = 'warning';
                            if (data === 'suspended') badgeClass = 'danger';
                            return `<span class="status-badge ${badgeClass}">${data.charAt(0).toUpperCase() + data.slice(1)}</span>`;
                        }
                    },
                    { 
                        data: 'createdAt',
                        render: function(data) {
                            return moment(data).format('MMM D, YYYY');
                        }
                    },
                    { 
                        data: null,
                        render: function(data, type, row) {
                            return `
                                <div class="action-buttons">
                                    <button class="action-btn view" data-id="${row._id}">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="action-btn edit" data-id="${row._id}">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="action-btn delete" data-id="${row._id}">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            `;
                        }
                    }
                ]
            });
            
            // Initialize other DataTables similarly
            $('#transactionsTable').DataTable({
                responsive: true,
                dom: '<"top"lf>rt<"bottom"ip>',
                ajax: {
                    url: `${API_BASE_URL}/transactions`,
                    type: 'GET',
                    headers: {
                        'Authorization': `Bearer ${authToken}`
                    },
                    dataSrc: 'data'
                },
                columns: [
                    { data: '_id' },
                    { 
                        data: 'user',
                        render: function(data) {
                            return data.name || 'N/A';
                        }
                    },
                    { data: 'type' },
                    { 
                        data: 'amount',
                        render: function(data) {
                            return `$${parseFloat(data).toFixed(2)}`;
                        }
                    },
                    { 
                        data: 'status',
                        render: function(data) {
                            let badgeClass = 'success';
                            if (data === 'pending') badgeClass = 'warning';
                            if (data === 'failed') badgeClass = 'danger';
                            return `<span class="status-badge ${badgeClass}">${data.charAt(0).toUpperCase() + data.slice(1)}</span>`;
                        }
                    },
                    { 
                        data: 'createdAt',
                        render: function(data) {
                            return moment(data).format('MMM D, YYYY h:mm A');
                        }
                    },
                    { 
                        data: null,
                        render: function(data, type, row) {
                            return `
                                <div class="action-buttons">
                                    <button class="action-btn view" data-id="${row._id}">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            `;
                        }
                    }
                ]
            });
            
            // Initialize other tables (deposits, withdrawals, investments, etc.) similarly
        }
        
        // Setup event listeners
        function setupEventListeners() {
            // Login form submission
            $('#loginForm').on('submit', function(e) {
                e.preventDefault();
                const email = $('#loginEmail').val();
                const password = $('#loginPassword').val();
                const rememberMe = $('#rememberMe').is(':checked');
                
                adminLogin(email, password, rememberMe);
            });
            
            // Logout button
            $('#logoutBtn').on('click', function() {
                adminLogout();
            });
            
            // Sidebar toggle
            $('.sidebar-toggle').on('click', function() {
                $('.admin-container').toggleClass('sidebar-collapsed');
            });
            
            // Menu item clicks
            $('.menu-item').on('click', function() {
                const section = $(this).data('section');
                
                // Toggle active class
                $('.menu-item').removeClass('active');
                $(this).addClass('active');
                
                // Handle submenu if exists
                if ($(this).hasClass('has-submenu')) {
                    $(this).toggleClass('active');
                    $(this).find('.submenu').slideToggle();
                }
                
                // Show corresponding content
                showContentSection(section);
            });
            
            // Submenu item clicks
            $('.submenu-item').on('click', function() {
                const subsection = $(this).data('subsection');
                
                // Toggle active class
                $(this).parent().find('.submenu-item').removeClass('active');
                $(this).addClass('active');
                
                // Handle subsection content
                // (Implementation depends on your specific requirements)
            });
            
            // Tab clicks
            $('.tab').on('click', function() {
                const tabId = $(this).data('tab');
                
                // Toggle active class
                $(this).parent().find('.tab').removeClass('active');
                $(this).addClass('active');
                
                // Show corresponding tab content
                $(this).closest('.admin-content').find('.tab-content').removeClass('active').hide();
                $(`#${tabId}Tab`).addClass('active').show();
            });
            
            // Add user button
            $('#addUserBtn').on('click', function() {
                $('#addUserModal').addClass('active');
            });
            
            // Cancel add user
            $('#cancelAddUser').on('click', function() {
                $('#addUserModal').removeClass('active');
                $('#addUserForm')[0].reset();
            });
            
            // Submit add user
            $('#submitAddUser').on('click', function() {
                const formData = {
                    firstName: $('#userFirstName').val(),
                    lastName: $('#userLastName').val(),
                    email: $('#userEmail').val(),
                    password: $('#userPassword').val(),
                    phone: $('#userPhone').val(),
                    balance: $('#userBalance').val(),
                    role: $('#userRole').val(),
                    status: $('#userStatus').val()
                };
                
                addNewUser(formData);
            });
            
            // View user (delegated event for dynamic content)
            $(document).on('click', '.action-btn.view', function() {
                const userId = $(this).data('id');
                viewUserDetails(userId);
            });
            
            // Edit user (delegated event for dynamic content)
            $(document).on('click', '.action-btn.edit', function() {
                const userId = $(this).data('id');
                editUserDetails(userId);
            });
            
            // Delete user (delegated event for dynamic content)
            $(document).on('click', '.action-btn.delete', function() {
                const userId = $(this).data('id');
                deleteUser(userId);
            });
            
            // Process withdrawal (example for financial section)
            $(document).on('click', '.process-withdrawal', function() {
                const withdrawalId = $(this).data('id');
                processWithdrawal(withdrawalId);
            });
            
            // Notification close
            $('.notification-close').on('click', function() {
                $('#notification').removeClass('active');
            });
            
            // Withdrawal action change
            $('#withdrawalAction').on('change', function() {
                if ($(this).val() === 'reject') {
                    $('#rejectionReasonGroup').show();
                } else {
                    $('#rejectionReasonGroup').hide();
                }
            });
            
            // Notification type change
            $('#notificationType').on('change', function() {
                if ($(this).val() === 'custom') {
                    $('#customUsersGroup').show();
                    loadUsersForNotification();
                } else {
                    $('#customUsersGroup').hide();
                }
            });
            
            // Send notification button
            $('#sendNotificationBtn').on('click', function() {
                $('#sendNotificationModal').addClass('active');
            });
            
            // Cancel send notification
            $('#cancelSendNotification').on('click', function() {
                $('#sendNotificationModal').removeClass('active');
                $('#sendNotificationForm')[0].reset();
            });
            
            // Submit send notification
            $('#submitSendNotification').on('click', function() {
                const formData = {
                    type: $('#notificationType').val(),
                    users: $('#notificationUsers').val(),
                    title: $('#notificationTitle').val(),
                    message: $('#notificationMessage').val(),
                    priority: $('#notificationPriority').val()
                };
                
                sendNotification(formData);
            });
            
            // Report range change
            $('#reportRange').on('change', function() {
                if ($(this).val() === 'custom') {
                    $('#customDateRange').show();
                } else {
                    $('#customDateRange').hide();
                }
            });
            
            // Report form submission
            $('#reportForm').on('submit', function(e) {
                e.preventDefault();
                generateReport();
            });
            
            // Save settings
            $('#saveSettingsBtn').on('click', function() {
                saveSettings();
            });
            
            // Modal close buttons
            $('.modal-close, .btn-outline').on('click', function() {
                $(this).closest('.modal').removeClass('active');
            });
        }
        
        // Show content section based on menu selection
        function showContentSection(section) {
            $('.admin-content').hide();
            $(`#${section}Content`).show();
            
            // Update page title
            let title = '';
            switch(section) {
                case 'dashboard':
                    title = 'Dashboard Overview';
                    break;
                case 'users':
                    title = 'User Management';
                    break;
                case 'financial':
                    title = 'Financial Management';
                    break;
                case 'mining':
                    title = 'Mining Operations';
                    break;
                case 'support':
                    title = 'Support Center';
                    break;
                case 'marketing':
                    title = 'Marketing Tools';
                    break;
                case 'reports':
                    title = 'Reports & Analytics';
                    break;
                case 'settings':
                    title = 'System Settings';
                    break;
                default:
                    title = 'Dashboard Overview';
            }
            
            $('.page-title').text(title);
            
            // Load section data if needed
            switch(section) {
                case 'dashboard':
                    loadDashboardData();
                    break;
                case 'users':
                    loadUsersData();
                    break;
                case 'financial':
                    loadFinancialData();
                    break;
                case 'mining':
                    loadMiningData();
                    break;
                case 'support':
                    loadSupportData();
                    break;
                case 'marketing':
                    loadMarketingData();
                    break;
                case 'reports':
                    loadReportsData();
                    break;
                case 'settings':
                    loadSettingsData();
                    break;
            }
        }
        
        // Admin login function
        function adminLogin(email, password, rememberMe) {
            showLoading();
            
            $.ajax({
                url: `${API_BASE_URL}/auth/login`,
                type: 'POST',
                data: JSON.stringify({ email, password }),
                contentType: 'application/json',
                success: function(response) {
                    hideLoading();
                    
                    if (response.twoFactorRequired) {
                        // Show 2FA form
                        $('#loginForm').hide();
                        $('#twoFactorAuth').show();
                        
                        // Set up 2FA form submission
                        $('#twoFactorForm').off('submit').on('submit', function(e) {
                            e.preventDefault();
                            const code = Array.from($('.verification-input')).map(input => input.value).join('');
                            verifyTwoFactorCode(email, code, rememberMe);
                        });
                    } else {
                        // Login successful
                        handleSuccessfulLogin(response.token, response.user, rememberMe);
                    }
                },
                error: function(xhr) {
                    hideLoading();
                    showNotification('error', 'Login Failed', xhr.responseJSON?.message || 'Invalid email or password');
                }
            });
        }
        
        // Verify 2FA code
        function verifyTwoFactorCode(email, code, rememberMe) {
            showLoading();
            
            $.ajax({
                url: `${API_BASE_URL}/auth/verify-2fa`,
                type: 'POST',
                data: JSON.stringify({ email, code }),
                contentType: 'application/json',
                success: function(response) {
                    hideLoading();
                    handleSuccessfulLogin(response.token, response.user, rememberMe);
                },
                error: function(xhr) {
                    hideLoading();
                    showNotification('error', 'Verification Failed', xhr.responseJSON?.message || 'Invalid verification code');
                }
            });
        }
        
        // Handle successful login
        function handleSuccessfulLogin(token, user, rememberMe) {
            authToken = token;
            currentUser = user;
            
            if (rememberMe) {
                localStorage.setItem('adminToken', token);
            } else {
                sessionStorage.setItem('adminToken', token);
            }
            
            showAdminDashboard();
            loadDashboardData();
            connectWebSocket();
        }
        
        // Admin logout function
        function adminLogout() {
            showLoading();
            
            $.ajax({
                url: `${API_BASE_URL}/auth/logout`,
                type: 'POST',
                headers: {
                    'Authorization': `Bearer ${authToken}`
                },
                success: function() {
                    hideLoading();
                    localStorage.removeItem('adminToken');
                    sessionStorage.removeItem('adminToken');
                    authToken = null;
                    currentUser = null;
                    
                    if (socket) {
                        socket.disconnect();
                        socket = null;
                    }
                    
                    showLoginPage();
                },
                error: function() {
                    hideLoading();
                    localStorage.removeItem('adminToken');
                    sessionStorage.removeItem('adminToken');
                    authToken = null;
                    currentUser = null;
                    showLoginPage();
                }
            });
        }
        
        // Connect WebSocket for real-time updates
        function connectWebSocket() {
            if (socket) {
                socket.disconnect();
            }
            
            socket = io('https://website-backendd-1.onrender.com', {
                path: '/socket.io',
                transports: ['websocket'],
                query: {
                    token: authToken
                }
            });
            
            socket.on('connect', function() {
                console.log('WebSocket connected');
            });
            
            socket.on('disconnect', function() {
                console.log('WebSocket disconnected');
            });
            
            socket.on('new_user', function(user) {
                // Handle new user notification
                showNotification('success', 'New User', `${user.name} just registered`);
                
                // Refresh users table if on users page
                if ($('#usersContent').is(':visible')) {
                    $('#usersTable').DataTable().ajax.reload();
                }
                
                // Update stats
                updateStats();
            });
            
            socket.on('new_deposit', function(deposit) {
                // Handle new deposit notification
                showNotification('success', 'New Deposit', `$${deposit.amount} deposit from ${deposit.user.name}`);
                
                // Refresh transactions table if on financial page
                if ($('#financialContent').is(':visible')) {
                    $('#transactionsTable').DataTable().ajax.reload();
                    $('#depositsTable').DataTable().ajax.reload();
                }
                
                // Update stats
                updateStats();
            });
            
            socket.on('new_withdrawal', function(withdrawal) {
                // Handle new withdrawal notification
                showNotification('info', 'Withdrawal Request', `$${withdrawal.amount} withdrawal request from ${withdrawal.user.name}`);
                
                // Refresh transactions table if on financial page
                if ($('#financialContent').is(':visible')) {
                    $('#transactionsTable').DataTable().ajax.reload();
                    $('#withdrawalsTable').DataTable().ajax.reload();
                }
                
                // Update stats
                updateStats();
            });
            
            socket.on('new_ticket', function(ticket) {
                // Handle new support ticket notification
                showNotification('warning', 'New Support Ticket', `${ticket.user.name}: ${ticket.subject}`);
                
                // Refresh tickets table if on support page
                if ($('#supportContent').is(':visible')) {
                    $('#ticketsTable').DataTable().ajax.reload();
                }
                
                // Update badge count
                updateNotificationBadges();
            });
            
            socket.on('new_message', function(message) {
                // Handle new chat message
                if ($('#liveChatTab').is(':visible')) {
                    // If chat window is open for this user, append the message
                    if ($('#chatWindow').data('userId') === message.user._id) {
                        appendChatMessage(message);
                    }
                    
                    // Update chat list
                    updateChatList();
                }
            });
            
            socket.on('notification', function(notification) {
                // Handle admin notification
                showNotification(notification.type, notification.title, notification.message);
                updateNotificationBadges();
            });
        }
        
        // Load dashboard data
        function loadDashboardData() {
            showLoading();
            
            $.ajax({
                url: `${API_BASE_URL}/dashboard`,
                type: 'GET',
                headers: {
                    'Authorization': `Bearer ${authToken}`
                },
                success: function(response) {
                    hideLoading();
                    
                    // Update stats cards
                    $('#totalUsers').text(response.stats.totalUsers.toLocaleString());
                    $('#dailyTransactions').text(response.stats.dailyTransactions.toLocaleString());
                    $('#dailyRevenue').text('$' + response.stats.dailyRevenue.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 }));
                    $('#activeUsers').text(response.stats.activeUsers.toLocaleString());
                    
                    // Update recent activity
                    updateRecentActivity(response.recentActivity);
                    
                    // Update top users
                    updateTopUsers(response.topUsers);
                    
                    // Initialize charts
                    initCharts(response.chartData);
                },
                error: function(xhr) {
                    hideLoading();
                    showNotification('error', 'Error', 'Failed to load dashboard data');
                }
            });
        }
        
        // Update recent activity
        function updateRecentActivity(activities) {
            const $activityList = $('#recentActivity');
            $activityList.empty();
            
            activities.forEach(activity => {
                const iconClass = getActivityIcon(activity.type);
                const timeAgo = moment(activity.timestamp).fromNow();
                
                $activityList.append(`
                    <div class="activity-item">
                        <div class="activity-icon">
                            <i class="fas ${iconClass}"></i>
                        </div>
                        <div class="activity-content">
                            <div class="activity-message">${activity.message}</div>
                            <div class="activity-time">${timeAgo}</div>
                        </div>
                    </div>
                `);
            });
        }
        
        // Get activity icon based on type
        function getActivityIcon(type) {
            switch(type) {
                case 'login': return 'fa-sign-in-alt';
                case 'logout': return 'fa-sign-out-alt';
                case 'deposit': return 'fa-money-bill-wave';
                case 'withdrawal': return 'fa-wallet';
                case 'investment': return 'fa-chart-line';
                case 'registration': return 'fa-user-plus';
                default: return 'fa-bell';
            }
        }
        
        // Update top users
        function updateTopUsers(users) {
            const $topUsersTable = $('#topUsersTable tbody');
            $topUsersTable.empty();
            
            users.forEach(user => {
                $topUsersTable.append(`
                    <tr>
                        <td>
                            <div class="user-info">
                                <img src="${user.avatar || 'https://randomuser.me/api/portraits/men/' + (Math.floor(Math.random() * 100) + 1) + '.jpg'}" class="user-avatar">
                                <div>
                                    <div class="user-name">${user.name}</div>
                                    <div class="user-email">${user.email}</div>
                                </div>
                            </div>
                        </td>
                        <td>$${user.balance.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</td>
                        <td><span class="status-badge success">Active</span></td>
                    </tr>
                `);
            });
        }
        
        // Initialize charts
        function initCharts(chartData) {
            // Growth Chart (Line Chart)
            const growthCtx = document.getElementById('growthChart').getContext('2d');
            new Chart(growthCtx, {
                type: 'line',
                data: {
                    labels: chartData.growth.labels,
                    datasets: [
                        {
                            label: 'Revenue',
                            data: chartData.growth.revenue,
                            borderColor: 'rgba(0, 211, 149, 1)',
                            backgroundColor: 'rgba(0, 211, 149, 0.1)',
                            tension: 0.4,
                            fill: true
                        },
                        {
                            label: 'Users',
                            data: chartData.growth.users,
                            borderColor: 'rgba(120, 79, 237, 1)',
                            backgroundColor: 'rgba(120, 79, 237, 0.1)',
                            tension: 0.4,
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return value.toLocaleString();
                                }
                            }
                        }
                    }
                }
            });
            
            // User Distribution Chart (Doughnut Chart)
            const userDistCtx = document.getElementById('userDistributionChart').getContext('2d');
            new Chart(userDistCtx, {
                type: 'doughnut',
                data: {
                    labels: chartData.userDistribution.labels,
                    datasets: [{
                        data: chartData.userDistribution.data,
                        backgroundColor: [
                            'rgba(0, 211, 149, 0.8)',
                            'rgba(120, 79, 237, 0.8)',
                            'rgba(255, 184, 0, 0.8)',
                            'rgba(255, 61, 87, 0.8)'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right',
                        }
                    }
                }
            });
        }
        
        // Add new user
        function addNewUser(userData) {
            showLoading();
            
            $.ajax({
                url: `${API_BASE_URL}/users`,
                type: 'POST',
                headers: {
                    'Authorization': `Bearer ${authToken}`,
                    'Content-Type': 'application/json'
                },
                data: JSON.stringify(userData),
                success: function(response) {
                    hideLoading();
                    $('#addUserModal').removeClass('active');
                    $('#addUserForm')[0].reset();
                    
                    showNotification('success', 'Success', 'User added successfully');
                    
                    // Refresh users table
                    $('#usersTable').DataTable().ajax.reload();
                    
                    // Update stats
                    updateStats();
                },
                error: function(xhr) {
                    hideLoading();
                    showNotification('error', 'Error', xhr.responseJSON?.message || 'Failed to add user');
                }
            });
        }
        
        // View user details
        function viewUserDetails(userId) {
            showLoading();
            
            $.ajax({
                url: `${API_BASE_URL}/users/${userId}`,
                type: 'GET',
                headers: {
                    'Authorization': `Bearer ${authToken}`
                },
                success: function(response) {
                    hideLoading();
                    
                    // Populate modal with user data
                    $('#viewUserAvatar').attr('src', response.user.avatar || 'https://randomuser.me/api/portraits/men/32.jpg');
                    $('#viewUserName').text(response.user.name);
                    $('#viewUserEmail').text(response.user.email);
                    $('#viewUserPhone').text(response.user.phone || 'N/A');
                    $('#viewUserRegDate').text(moment(response.user.createdAt).format('MMMM D, YYYY'));
                    $('#viewUserLastLogin').text(moment(response.user.lastLogin).fromNow());
                    $('#viewUserIp').text(response.user.lastIp || 'N/A');
                    $('#viewUserRole').text(response.user.role.charAt(0).toUpperCase() + response.user.role.slice(1));
                    $('#viewUserBalance').text('$' + response.user.balance.toFixed(2));
                    $('#viewUserInvested').text('$' + (response.stats.totalInvested || 0).toFixed(2));
                    $('#viewUserProfit').text('$' + (response.stats.totalProfit || 0).toFixed(2));
                    
                    // Update status badge
                    const statusBadge = $('#viewUserStatusBadge');
                    statusBadge.removeClass('success warning danger').addClass(response.user.status === 'active' ? 'success' : response.user.status === 'pending' ? 'warning' : 'danger');
                    statusBadge.text(response.user.status.charAt(0).toUpperCase() + response.user.status.slice(1));
                    
                    // Update KYC status
                    const kycBadge = $('#viewUserKyc');
                    kycBadge.removeClass('success warning danger info').addClass(
                        response.user.kycStatus === 'verified' ? 'success' : 
                        response.user.kycStatus === 'pending' ? 'warning' : 
                        response.user.kycStatus === 'rejected' ? 'danger' : 'info'
                    );
                    kycBadge.text(response.user.kycStatus.charAt(0).toUpperCase() + response.user.kycStatus.slice(1));
                    
                    // Update 2FA status
                    const twoFaBadge = $('#viewUser2fa');
                    twoFaBadge.removeClass('success danger').addClass(response.user.twoFactorEnabled ? 'success' : 'danger');
                    twoFaBadge.text(response.user.twoFactorEnabled ? 'Enabled' : 'Disabled');
                    
                    // Load transactions
                    loadUserTransactions(userId);
                    
                    // Load investments
                    loadUserInvestments(userId);
                    
                    // Load documents
                    loadUserDocuments(userId);
                    
                    // Store user ID in modal for later use
                    $('#viewUserModal').data('userId', userId);
                    
                    // Show modal
                    $('#viewUserModal').addClass('active');
                },
                error: function(xhr) {
                    hideLoading();
                    showNotification('error', 'Error', xhr.responseJSON?.message || 'Failed to load user details');
                }
            });
        }
        
        // Load user transactions
        function loadUserTransactions(userId) {
            $.ajax({
                url: `${API_BASE_URL}/users/${userId}/transactions`,
                type: 'GET',
                headers: {
                    'Authorization': `Bearer ${authToken}`
                },
                success: function(response) {
                    const $transactionsList = $('#userTransactionsList');
                    $transactionsList.empty();
                    
                    response.data.forEach(transaction => {
                        const badgeClass = transaction.status === 'completed' ? 'success' : transaction.status === 'pending' ? 'warning' : 'danger';
                        
                        $transactionsList.append(`
                            <tr>
                                <td>${transaction._id.substring(0, 8)}</td>
                                <td>${transaction.type.charAt(0).toUpperCase() + transaction.type.slice(1)}</td>
                                <td>$${transaction.amount.toFixed(2)}</td>
                                <td>${moment(transaction.createdAt).format('MMM D, YYYY h:mm A')}</td>
                                <td><span class="status-badge ${badgeClass}">${transaction.status.charAt(0).toUpperCase() + transaction.status.slice(1)}</span></td>
                            </tr>
                        `);
                    });
                },
                error: function() {
                    $('#userTransactionsList').html('<tr><td colspan="5" class="text-center">Failed to load transactions</td></tr>');
                }
            });
        }
        
        // Load user investments
        function loadUserInvestments(userId) {
            $.ajax({
                url: `${API_BASE_URL}/users/${userId}/investments`,
                type: 'GET',
                headers: {
                    'Authorization': `Bearer ${authToken}`
                },
                success: function(response) {
                    const $investmentsList = $('#userInvestmentsList');
                    $investmentsList.empty();
                    
                    response.data.forEach(investment => {
                        const badgeClass = investment.status === 'active' ? 'success' : investment.status === 'pending' ? 'warning' : 'danger';
                        
                        $investmentsList.append(`
                            <tr>
                                <td>${investment._id.substring(0, 8)}</td>
                                <td>${investment.plan.name}</td>
                                <td>$${investment.amount.toFixed(2)}</td>
                                <td>$${investment.profit.toFixed(2)}</td>
                                <td>${moment(investment.startDate).format('MMM D, YYYY')}</td>
                                <td><span class="status-badge ${badgeClass}">${investment.status.charAt(0).toUpperCase() + investment.status.slice(1)}</span></td>
                            </tr>
                        `);
                    });
                },
                error: function() {
                    $('#userInvestmentsList').html('<tr><td colspan="6" class="text-center">Failed to load investments</td></tr>');
                }
            });
        }
        
        // Load user documents
        function loadUserDocuments(userId) {
            $.ajax({
                url: `${API_BASE_URL}/users/${userId}/documents`,
                type: 'GET',
                headers: {
                    'Authorization': `Bearer ${authToken}`
                },
                success: function(response) {
                    const $documentsList = $('#userDocumentsList');
                    $documentsList.empty();
                    
                    if (response.data.length === 0) {
                        $documentsList.append('<p>No documents uploaded</p>');
                    } else {
                        response.data.forEach(doc => {
                            $documentsList.append(`
                                <div class="document-item">
                                    <div class="document-icon">
                                        <i class="fas fa-file-pdf"></i>
                                    </div>
                                    <div class="document-info">
                                        <div class="document-name">${doc.type.charAt(0).toUpperCase() + doc.type.slice(1)}</div>
                                        <div class="document-date">Uploaded ${moment(doc.uploadedAt).fromNow()}</div>
                                    </div>
                                    <div class="document-actions">
                                        <button class="btn btn-sm btn-outline">
                                            <i class="fas fa-eye"></i> View
                                        </button>
                                        <button class="btn btn-sm btn-outline">
                                            <i class="fas fa-download"></i> Download
                                        </button>
                                    </div>
                                </div>
                            `);
                        });
                    }
                },
                error: function() {
                    $('#userDocumentsList').html('<p>Failed to load documents</p>');
                }
            });
        }
        
        // Edit user details
        function editUserDetails(userId) {
            showLoading();
            
            $.ajax({
                url: `${API_BASE_URL}/users/${userId}`,
                type: 'GET',
                headers: {
                    'Authorization': `Bearer ${authToken}`
                },
                success: function(response) {
                    hideLoading();
                    
                    // Populate form with user data
                    $('#editUserFirstName').val(response.user.firstName);
                    $('#editUserLastName').val(response.user.lastName);
                    $('#editUserEmail').val(response.user.email);
                    $('#editUserPhone').val(response.user.phone || '');
                    $('#editUserBalance').val(response.user.balance.toFixed(2));
                    $('#editUserRole').val(response.user.role).trigger('change');
                    $('#editUserStatus').val(response.user.status).trigger('change');
                    $('#editUserKyc').val(response.user.kycStatus).trigger('change');
                    $('#editUser2fa').val(response.user.twoFactorEnabled ? 'enabled' : 'disabled').trigger('change');
                    
                    // Store user ID in modal for later use
                    $('#editUserModal').data('userId', userId);
                    
                    // Show modal
                    $('#editUserModal').addClass('active');
                },
                error: function(xhr) {
                    hideLoading();
                    showNotification('error', 'Error', xhr.responseJSON?.message || 'Failed to load user details');
                }
            });
        }
        
        // Submit edited user details
        $('#submitEditUser').on('click', function() {
            const userId = $('#editUserModal').data('userId');
            const formData = {
                firstName: $('#editUserFirstName').val(),
                lastName: $('#editUserLastName').val(),
                email: $('#editUserEmail').val(),
                phone: $('#editUserPhone').val(),
                balance: parseFloat($('#editUserBalance').val()),
                role: $('#editUserRole').val(),
                status: $('#editUserStatus').val(),
                kycStatus: $('#editUserKyc').val(),
                twoFactorEnabled: $('#editUser2fa').val() === 'enabled'
            };
            
            updateUser(userId, formData);
        });
        
        // Update user
        function updateUser(userId, userData) {
            showLoading();
            
            $.ajax({
                url: `${API_BASE_URL}/users/${userId}`,
                type: 'PUT',
                headers: {
                    'Authorization': `Bearer ${authToken}`,
                    'Content-Type': 'application/json'
                },
                data: JSON.stringify(userData),
                success: function(response) {
                    hideLoading();
                    $('#editUserModal').removeClass('active');
                    
                    showNotification('success', 'Success', 'User updated successfully');
                    
                    // Refresh users table
                    $('#usersTable').DataTable().ajax.reload();
                    
                    // If view user modal is open for this user, refresh it
                    if ($('#viewUserModal').data('userId') === userId) {
                        viewUserDetails(userId);
                    }
                },
                error: function(xhr) {
                    hideLoading();
                    showNotification('error', 'Error', xhr.responseJSON?.message || 'Failed to update user');
                }
            });
        }
        
        // Delete user
        function deleteUser(userId) {
            if (!confirm('Are you sure you want to delete this user? This action cannot be undone.')) {
                return;
            }
            
            showLoading();
            
            $.ajax({
                url: `${API_BASE_URL}/users/${userId}`,
                type: 'DELETE',
                headers: {
                    'Authorization': `Bearer ${authToken}`
                },
                success: function() {
                    hideLoading();
                    showNotification('success', 'Success', 'User deleted successfully');
                    
                    // Refresh users table
                    $('#usersTable').DataTable().ajax.reload();
                    
                    // Update stats
                    updateStats();
                },
                error: function(xhr) {
                    hideLoading();
                    showNotification('error', 'Error', xhr.responseJSON?.message || 'Failed to delete user');
                }
            });
        }
        
        // Process withdrawal
        function processWithdrawal(withdrawalId) {
            showLoading();
            
            $.ajax({
                url: `${API_BASE_URL}/withdrawals/${withdrawalId}`,
                type: 'GET',
                headers: {
                    'Authorization': `Bearer ${authToken}`
                },
                success: function(response) {
                    hideLoading();
                    
                    // Populate form with withdrawal data
                    $('#withdrawalId').val(response._id);
                    $('#withdrawalUser').val(response.user.name);
                    $('#withdrawalAmount').val('$' + response.amount.toFixed(2));
                    $('#withdrawalMethod').val(response.method.charAt(0).toUpperCase() + response.method.slice(1));
                    $('#withdrawalWallet').val(response.walletAddress || response.accountNumber);
                    
                    // Store withdrawal ID in modal for later use
                    $('#processWithdrawalModal').data('withdrawalId', withdrawalId);
                    
                    // Show modal
                    $('#processWithdrawalModal').addClass('active');
                },
                error: function(xhr) {
                    hideLoading();
                    showNotification('error', 'Error', xhr.responseJSON?.message || 'Failed to load withdrawal details');
                }
            });
        }
        
        // Submit withdrawal processing
        $('#submitWithdrawalProcess').on('click', function() {
            const withdrawalId = $('#processWithdrawalModal').data('withdrawalId');
            const action = $('#withdrawalAction').val();
            const txHash = $('#withdrawalTxHash').val();
            const reason = $('#rejectionReason').val();
            
            const data = {
                action,
                txHash
            };
            
            if (action === 'reject') {
                data.reason = reason;
            }
            
            processWithdrawalAction(withdrawalId, data);
        });
        
        // Process withdrawal action
        function processWithdrawalAction(withdrawalId, data) {
            showLoading();
            
            $.ajax({
                url: `${API_BASE_URL}/withdrawals/${withdrawalId}/process`,
                type: 'POST',
                headers: {
                    'Authorization': `Bearer ${authToken}`,
                    'Content-Type': 'application/json'
                },
                data: JSON.stringify(data),
                success: function(response) {
                    hideLoading();
                    $('#processWithdrawalModal').removeClass('active');
                    $('#processWithdrawalForm')[0].reset();
                    
                    showNotification('success', 'Success', `Withdrawal ${data.action === 'approve' ? 'approved' : 'rejected'} successfully`);
                    
                    // Refresh withdrawals table
                    $('#withdrawalsTable').DataTable().ajax.reload();
                    
                    // If view user modal is open for this user, refresh transactions
                    const userId = $('#viewUserModal').data('userId');
                    if (userId) {
                        loadUserTransactions(userId);
                    }
                },
                error: function(xhr) {
                    hideLoading();
                    showNotification('error', 'Error', xhr.responseJSON?.message || 'Failed to process withdrawal');
                }
            });
        }
        
        // Send notification
        function sendNotification(notificationData) {
            showLoading();
            
            $.ajax({
                url: `${API_BASE_URL}/notifications`,
                type: 'POST',
                headers: {
                    'Authorization': `Bearer ${authToken}`,
                    'Content-Type': 'application/json'
                },
                data: JSON.stringify(notificationData),
                success: function(response) {
                    hideLoading();
                    $('#sendNotificationModal').removeClass('active');
                    $('#sendNotificationForm')[0].reset();
                    
                    showNotification('success', 'Success', 'Notification sent successfully');
                    
                    // Refresh notifications table
                    $('#notificationsTable').DataTable().ajax.reload();
                },
                error: function(xhr) {
                    hideLoading();
                    showNotification('error', 'Error', xhr.responseJSON?.message || 'Failed to send notification');
                }
            });
        }
        
        // Load users for notification targeting
        function loadUsersForNotification() {
            showLoading();
            
            $.ajax({
                url: `${API_BASE_URL}/users`,
                type: 'GET',
                headers: {
                    'Authorization': `Bearer ${authToken}`
                },
                success: function(response) {
                    hideLoading();
                    
                    const $notificationUsers = $('#notificationUsers');
                    $notificationUsers.empty();
                    
                    response.data.forEach(user => {
                        $notificationUsers.append(`<option value="${user._id}">${user.name} (${user.email})</option>`);
                    });
                    
                    // Initialize Select2 for multi-select
                    $notificationUsers.select2({
                        width: '100%',
                        placeholder: 'Select users'
                    });
                },
                error: function() {
                    hideLoading();
                    showNotification('error', 'Error', 'Failed to load users for notification');
                }
            });
        }
        
        // Generate report
        function generateReport() {
            const reportType = $('#reportType').val();
            const reportRange = $('#reportRange').val();
            let startDate, endDate;
            
            if (reportRange === 'custom') {
                startDate = $('#startDate').val();
                endDate = $('#endDate').val();
                
                if (!startDate || !endDate) {
                    showNotification('error', 'Error', 'Please select both start and end dates');
                    return;
                }
            } else {
                const days = parseInt(reportRange);
                endDate = moment().format('YYYY-MM-DD');
                startDate = moment().subtract(days, 'days').format('YYYY-MM-DD');
            }
            
            showLoading();
            
            $.ajax({
                url: `${API_BASE_URL}/reports/generate`,
                type: 'POST',
                headers: {
                    'Authorization': `Bearer ${authToken}`,
                    'Content-Type': 'application/json'
                },
                data: JSON.stringify({
                    type: reportType,
                    startDate,
                    endDate
                }),
                success: function(response) {
                    hideLoading();
                    renderReportChart(response.data);
                },
                error: function(xhr) {
                    hideLoading();
                    showNotification('error', 'Error', xhr.responseJSON?.message || 'Failed to generate report');
                }
            });
        }
        
        // Render report chart
        function renderReportChart(chartData) {
            const ctx = document.getElementById('reportChart').getContext('2d');
            
            // Destroy previous chart if exists
            if (window.reportChart) {
                window.reportChart.destroy();
            }
            
            window.reportChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: chartData.labels,
                    datasets: [{
                        label: chartData.title,
                        data: chartData.data,
                        borderColor: 'rgba(0, 211, 149, 1)',
                        backgroundColor: 'rgba(0, 211, 149, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return value.toLocaleString();
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // Load settings data
        function loadSettingsData() {
            showLoading();
            
            $.ajax({
                url: `${API_BASE_URL}/settings`,
                type: 'GET',
                headers: {
                    'Authorization': `Bearer ${authToken}`
                },
                success: function(response) {
                    hideLoading();
                    
                    // Populate system settings
                    $('#platformName').val(response.system.platformName);
                    $('#platformEmail').val(response.system.platformEmail);
                    $('#platformCurrency').val(response.system.platformCurrency).trigger('change');
                    $('#maintenanceMode').val(response.system.maintenanceMode ? '1' : '0').trigger('change');
                    $('#registrationStatus').val(response.system.registrationStatus).trigger('change');
                    
                    // Populate security settings
                    $('#twoFactorAuth').val(response.security.twoFactorAuth).trigger('change');
                    $('#loginAttempts').val(response.security.loginAttempts);
                    $('#lockoutDuration').val(response.security.lockoutDuration);
                    $('#passwordComplexity').val(response.security.passwordComplexity).trigger('change');
                    $('#sessionTimeout').val(response.security.sessionTimeout);
                    
                    // Populate payment settings
                    $('#enableCreditCard').prop('checked', response.payments.creditCardEnabled);
                    $('#enableBankTransfer').prop('checked', response.payments.bankTransferEnabled);
                    $('#enablePaypal').prop('checked', response.payments.paypalEnabled);
                    $('#enableCrypto').prop('checked', response.payments.cryptoEnabled);
                    $('#stripeApiKey').val(response.payments.stripeApiKey);
                    $('#bankDetails').val(response.payments.bankDetails);
                    $('#btcWallet').val(response.payments.btcWallet);
                    $('#ethWallet').val(response.payments.ethWallet);
                },
                error: function(xhr) {
                    hideLoading();
                    showNotification('error', 'Error', xhr.responseJSON?.message || 'Failed to load settings');
                }
            });
        }
        
        // Save settings
        function saveSettings() {
            const settings = {
                system: {
                    platformName: $('#platformName').val(),
                    platformEmail: $('#platformEmail').val(),
                    platformCurrency: $('#platformCurrency').val(),
                    maintenanceMode: $('#maintenanceMode').val() === '1',
                    registrationStatus: $('#registrationStatus').val()
                },
                security: {
                    twoFactorAuth: $('#twoFactorAuth').val(),
                    loginAttempts: parseInt($('#loginAttempts').val()),
                    lockoutDuration: parseInt($('#lockoutDuration').val()),
                    passwordComplexity: $('#passwordComplexity').val(),
                    sessionTimeout: parseInt($('#sessionTimeout').val())
                },
                payments: {
                    creditCardEnabled: $('#enableCreditCard').is(':checked'),
                    bankTransferEnabled: $('#enableBankTransfer').is(':checked'),
                    paypalEnabled: $('#enablePaypal').is(':checked'),
                    cryptoEnabled: $('#enableCrypto').is(':checked'),
                    stripeApiKey: $('#stripeApiKey').val(),
                    bankDetails: $('#bankDetails').val(),
                    btcWallet: $('#btcWallet').val(),
                    ethWallet: $('#ethWallet').val()
                }
            };
            
            showLoading();
            
            $.ajax({
                url: `${API_BASE_URL}/settings`,
                type: 'POST',
                headers: {
                    'Authorization': `Bearer ${authToken}`,
                    'Content-Type': 'application/json'
                },
                data: JSON.stringify(settings),
                success: function() {
                    hideLoading();
                    showNotification('success', 'Success', 'Settings saved successfully');
                },
                error: function(xhr) {
                    hideLoading();
                    showNotification('error', 'Error', xhr.responseJSON?.message || 'Failed to save settings');
                }
            });
        }
        
        // Update stats
        function updateStats() {
            if (!$('#dashboardContent').is(':visible')) return;
            
            $.ajax({
                url: `${API_BASE_URL}/dashboard/stats`,
                type: 'GET',
                headers: {
                    'Authorization': `Bearer ${authToken}`
                },
                success: function(response) {
                    $('#totalUsers').text(response.totalUsers.toLocaleString());
                    $('#dailyTransactions').text(response.dailyTransactions.toLocaleString());
                    $('#dailyRevenue').text('$' + response.dailyRevenue.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 }));
                    $('#activeUsers').text(response.activeUsers.toLocaleString());
                },
                error: function() {
                    // Silently fail, we'll try again next time
                }
            });
        }
        
        // Update notification badges
        function updateNotificationBadges() {
            $.ajax({
                url: `${API_BASE_URL}/notifications/count`,
                type: 'GET',
                headers: {
                    'Authorization': `Bearer ${authToken}`
                },
                success: function(response) {
                    $('#notificationsBtn .badge').text(response.unreadNotifications);
                    $('#messagesBtn .badge').text(response.unreadMessages);
                    
                    // Update menu badges if needed
                    $('.menu-item[data-section="support"] .badge').text(response.pendingTickets);
                },
                error: function() {
                    // Silently fail, we'll try again next time
                }
            });
        }
        
        // Show notification
        function showNotification(type, title, message) {
            const $notification = $('#notification');
            
            $notification.removeClass('success error warning').addClass(type);
            $('#notificationTitle').text(title);
            $('#notificationMessage').text(message);
            
            $notification.addClass('active');
            
            // Auto hide after 5 seconds
            setTimeout(function() {
                $notification.removeClass('active');
            }, 5000);
        }
        
        // Show loading overlay
        function showLoading() {
            $('#loadingOverlay').addClass('active');
        }
        
        // Hide loading overlay
        function hideLoading() {
            $('#loadingOverlay').removeClass('active');
        }
        
        // Initialize other sections (financial, mining, support, marketing, etc.) similarly
        // These would follow the same pattern as the users section:
        // 1. Load data from API
        // 2. Render tables/charts
        // 3. Handle CRUD operations
        
        // Example for financial section:
        function loadFinancialData() {
            // Load transactions, deposits, withdrawals, investments
            // Initialize/refresh DataTables
        }
        
        // Example for mining section:
        function loadMiningData() {
            // Load mining stats, rigs
            // Initialize charts
        }
        
        // Example for support section:
        function loadSupportData() {
            // Load tickets, chat sessions
            // Initialize DataTables and chat interface
        }
        
        // Example for marketing section:
        function loadMarketingData() {
            // Load promotions, notifications, email campaigns
            // Initialize DataTables
        }
    </script>
</body>
</html>
